/*!
  * https://github.com/paulmillr/es6-shim
  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
  *   and contributors,  MIT License
  * es6-shim: v0.35.1
  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE
  * Details and documentation:
  * https://github.com/paulmillr/es6-shim/
  */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var O={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var m=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){O.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=m(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var F=Math.exp;var L=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Symbol||{};var H=G.species||"@@species";var V=Number.isNaN||function isNaN(e){return e!==e};var B=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var $=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(V(t)){return t}return t<0?-1:1};var U=function isArguments(e){return g(e)==="[object Arguments]"};var J=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var X=U(arguments)?U:J;var K={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var Z=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);O.preserveToString(e[t],n)};var Y=typeof G==="function"&&typeof G["for"]==="function"&&K.symbol(G());var Q=K.symbol(G.iterator)?G.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){Q="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ee=S.Reflect;var te=String;var re={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!re.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(e==null){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"},ToObject:function(e,t){return Object(re.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return re.IsCallable(e)},ToInt32:function(e){return re.ToNumber(e)>>0},ToUint32:function(e){return re.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=re.ToNumber(e);if(V(t)){return 0}if(t===0||!B(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=re.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return V(e)&&V(t)},SameValueZero:function(e,t){return e===t||V(e)&&V(t)},IsIterable:function(e){return re.TypeIsObject(e)&&(typeof e[Q]!=="undefined"||X(e))},GetIterator:function(e){if(X(e)){return new q(e,"value")}var t=re.GetMethod(e,Q);if(!re.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=re.Call(t,e);if(!re.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=re.ToObject(e)[t];if(r===void 0||r===null){return void 0}if(!re.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=re.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=re.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!re.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!re.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=re.IteratorNext(e);var r=re.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ee.construct){return ee.construct(e,t,o)}var i=o.prototype;if(!re.TypeIsObject(i)){i=Object.prototype}var a=m(i);var u=re.Call(e,a,t);return re.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!re.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[H];if(n===void 0||n===null){return t}if(!re.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=re.ToString(e);var i="<"+t;if(r!==""){var a=re.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!re.TypeIsObject(e)){return false}var t=e[G.match];if(typeof t!=="undefined"){return!!t}return K.regex(e)},ToString:function ToString(e){return te(e)}};if(s&&Y){var ne=function defineWellKnownSymbol(e){if(K.symbol(G[e])){return G[e]}var t=G["for"]("Symbol."+e);Object.defineProperty(G,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!K.symbol(G.search)){var oe=ne("search");var ie=String.prototype.search;h(RegExp.prototype,oe,function search(e){return re.Call(ie,e,[this])});var ae=function search(e){var t=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=re.GetMethod(e,oe);if(typeof r!=="undefined"){return re.Call(r,e,[t])}}return re.Call(ie,t,[re.ToString(e)])};Z(String.prototype,"search",ae)}if(!K.symbol(G.replace)){var ue=ne("replace");var fe=String.prototype.replace;h(RegExp.prototype,ue,function replace(e,t){return re.Call(fe,e,[this,t])});var se=function replace(e,t){var r=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=re.GetMethod(e,ue);if(typeof n!=="undefined"){return re.Call(n,e,[r,t])}}return re.Call(fe,r,[re.ToString(e),t])};Z(String.prototype,"replace",se)}if(!K.symbol(G.split)){var ce=ne("split");var le=String.prototype.split;h(RegExp.prototype,ce,function split(e,t){return re.Call(le,e,[this,t])});var pe=function split(e,t){var r=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=re.GetMethod(e,ce);if(typeof n!=="undefined"){return re.Call(n,e,[r,t])}}return re.Call(le,r,[re.ToString(e),t])};Z(String.prototype,"split",pe)}var ve=K.symbol(G.match);var ye=ve&&function(){var e={};e[G.match]=function(){return 42};return"a".match(e)!==42}();if(!ve||ye){var he=ne("match");var be=String.prototype.match;h(RegExp.prototype,he,function match(e){return re.Call(be,e,[this])});var ge=function match(e){var t=re.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=re.GetMethod(e,he);if(typeof r!=="undefined"){return re.Call(r,e,[t])}}return re.Call(be,t,[re.ToString(e)])};Z(String.prototype,"match",ge)}}var de=function wrapConstructor(e,t,r){O.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}O.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;O.redefine(e.prototype,"constructor",t)};var Oe=function(){return this};var me=function(e){if(s&&!z(e,H)){O.getter(e,H,Oe)}};var we=function(e,t){var r=t||function iterator(){return this};h(e,Q,r);if(!e[Q]&&K.symbol(Q)){e[Q]=r}};var je=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Se=function createDataPropertyOrThrow(e,t,r){je(e,t,r);if(!re.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Te=function(e,t,r,n){if(!re.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!re.TypeIsObject(o)){o=r}var i=m(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Ie=String.fromCodePoint;Z(String,"fromCodePoint",function fromCodePoint(e){return re.Call(Ie,this,arguments)})}var Ee={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!re.SameValue(r,re.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=re.ToObject(e,"bad callSite");var r=re.ToObject(t.raw,"bad raw value");var n=r.length;var o=re.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=re.ToString(a);s=re.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=re.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){Z(String,"raw",Ee.raw)}b(String,Ee);var Pe=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Ce=Infinity;var Me={repeat:function repeat(e){var t=re.ToString(re.RequireObjectCoercible(this));var r=re.ToInteger(e);if(r<0||r>=Ce){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return Pe(t,r)},startsWith:function startsWith(e){var t=re.ToString(re.RequireObjectCoercible(this));if(re.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=re.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(re.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=re.ToString(re.RequireObjectCoercible(this));if(re.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=re.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:re.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(re.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=re.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=re.ToString(re.RequireObjectCoercible(this));var r=re.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){Z(String.prototype,"includes",Me.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var xe=i(function(){"/a/".startsWith(/a/)});var Ne=a(function(){return"abc".startsWith("a",Infinity)===false});if(!xe||!Ne){Z(String.prototype,"startsWith",Me.startsWith);Z(String.prototype,"endsWith",Me.endsWith)}}if(Y){var Ae=a(function(){var e=/a/;e[G.match]=false;return"/a/".startsWith(e)});if(!Ae){Z(String.prototype,"startsWith",Me.startsWith)}var Re=a(function(){var e=/a/;e[G.match]=false;return"/a/".endsWith(e)});if(!Re){Z(String.prototype,"endsWith",Me.endsWith)}var _e=a(function(){var e=/a/;e[G.match]=false;return"/a/".includes(e)});if(!_e){Z(String.prototype,"includes",Me.includes)}}b(String.prototype,Me);var ke=["	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Fe=new RegExp("(^["+ke+"]+)|(["+ke+"]+$)","g");var Le=function trim(){return re.ToString(re.RequireObjectCoercible(this)).replace(Fe,"")};var De=["\x85","\u200b","\ufffe"].join("");var ze=new RegExp("["+De+"]","g");var qe=/^[\-+]0x[0-9a-f]+$/i;var We=De.trim().length!==De.length;h(String.prototype,"trim",Le,We);var Ge=function(e){return{value:e,done:arguments.length===0}};var He=function(e){re.RequireObjectCoercible(e);this._s=re.ToString(e);this._i=0};He.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ge()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ge(e.substr(t,o))};we(He.prototype);we(String.prototype,function(){return new He(this)});var Ve={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!re.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(X(e)||re.GetMethod(e,Q))!=="undefined";var u,f,s;if(a){f=re.IsConstructor(r)?Object(new r):[];var c=re.GetIterator(e);var l,p;s=0;while(true){l=re.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){re.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=re.ToObject(e);u=re.ToLength(y.length);f=re.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Se(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!re.IsCallable(t)?new Array(e):re.Construct(t,[e]);for(var o=0;o<e;++o){Se(n,o,arguments[o])}n.length=e;return n}};b(Array,Ve);me(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=re.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ge(o)}}this.array=void 0;return Ge()}});we(q.prototype);var Be=Array.of===Ve.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Be){Z(Array,"of",Ve.of)}var $e={copyWithin:function copyWithin(e,t){var r=re.ToObject(this);var n=re.ToLength(r.length);var o=re.ToInteger(e);var i=re.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:re.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=re.ToObject(this);var o=re.ToLength(n.length);t=re.ToInteger(typeof t==="undefined"?0:t);r=re.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=re.ToObject(this);var n=re.ToLength(r.length);if(!re.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=re.ToObject(this);var n=re.ToLength(r.length);if(!re.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!re.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!re.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[Q]){b(Array.prototype,{values:Array.prototype[Q]});if(K.symbol(G.unscopables)){Array.prototype[G.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var Ue=Array.prototype.values;Z(Array.prototype,"values",function values(){return re.Call(Ue,this,arguments)});h(Array.prototype,Q,Array.prototype.values,true)}b(Array.prototype,$e);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}we(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){we(Object.getPrototypeOf([].values()))}var Je=function(){return a(function(){return Array.from({length:-1}).length===0})}();var Xe=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!Je||!Xe){Z(Array,"from",Ve.from)}var Ke=function(){return a(function(){return Array.from([0],void 0)})}();if(!Ke){var Ze=Array.from;Z(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return re.Call(Ze,this,arguments)}else{return t(Ze,this,e)}})}var Ye=-(Math.pow(2,32)-1);var Qe=function(e,r){var n={length:Ye};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!Qe(Array.prototype.forEach)){var et=Array.prototype.forEach;Z(Array.prototype,"forEach",function forEach(e){return re.Call(et,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.map)){var tt=Array.prototype.map;Z(Array.prototype,"map",function map(e){return re.Call(tt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.filter)){var rt=Array.prototype.filter;Z(Array.prototype,"filter",function filter(e){return re.Call(rt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.some)){var nt=Array.prototype.some;Z(Array.prototype,"some",function some(e){return re.Call(nt,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.every)){var ot=Array.prototype.every;Z(Array.prototype,"every",function every(e){return re.Call(ot,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.reduce)){var it=Array.prototype.reduce;Z(Array.prototype,"reduce",function reduce(e){return re.Call(it,this.length>=0?this:[],arguments)},true)}if(!Qe(Array.prototype.reduceRight,true)){var at=Array.prototype.reduceRight;Z(Array.prototype,"reduceRight",function reduceRight(e){return re.Call(at,this.length>=0?this:[],arguments)},true)}var ut=Number("0o10")!==8;var ft=Number("0b10")!==2;var st=y(De,function(e){return Number(e+0+e)===0});if(ut||ft||st){var ct=Number;var lt=/^0b[01]+$/i;var pt=/^0o[0-7]+$/i;var vt=lt.test.bind(lt);var yt=pt.test.bind(pt);var ht=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(K.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(K.primitive(t)){return t}}throw new TypeError("No default value")};var bt=ze.test.bind(ze);var gt=qe.test.bind(qe);var dt=function(){var e=function Number(t){var r;if(arguments.length>0){r=K.primitive(t)?t:ht(t,"number")}else{r=0}if(typeof r==="string"){r=re.Call(Le,r);if(vt(r)){r=parseInt(C(r,2),2)}else if(yt(r)){r=parseInt(C(r,2),8)}else if(bt(r)||gt(r)){r=NaN}}var n=this;var o=a(function(){ct.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new ct(r)}return ct(r)};return e}();de(ct,dt,{});b(dt,{NaN:ct.NaN,MAX_VALUE:ct.MAX_VALUE,MIN_VALUE:ct.MIN_VALUE,NEGATIVE_INFINITY:ct.NEGATIVE_INFINITY,POSITIVE_INFINITY:ct.POSITIVE_INFINITY});Number=dt;O.redefine(S,"Number",dt)}var Ot=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Ot,MIN_SAFE_INTEGER:-Ot,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:B,isInteger:function isInteger(e){return B(e)&&re.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:V});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if(![,1].find(function(e,t){return t===0})){Z(Array.prototype,"find",$e.find)}if([,1].findIndex(function(e,t){return t===0})!==0){Z(Array.prototype,"findIndex",$e.findIndex)}var mt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var wt=function ensureEnumerable(e,t){if(s&&mt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var jt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var St=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var Tt=function(e,t){var r=n(Object(t));var o;if(re.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),mt(t))}return p(P(r,o||[]),St(t),e)};var It={assign:function(e,t){var r=re.ToObject(e,"Cannot convert undefined or null to object");return p(re.Call(jt,1,arguments),Tt,r)},is:function is(e,t){return re.SameValue(e,t)}};var Et=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Et){Z(Object,"assign",It.assign)}b(Object,It);if(s){var Pt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!re.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||re.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,Pt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Ct=!i(function(){Object.keys("foo")});if(!Ct){var Mt=Object.keys;Z(Object,"keys",function keys(e){return Mt(re.ToObject(e))});n=Object.keys}var xt=i(function(){Object.keys(/a/g)});if(xt){var Nt=Object.keys;Z(Object,"keys",function keys(e){if(K.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return Nt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var At=!i(function(){Object.getOwnPropertyNames("foo")});if(!At){var Rt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var _t=Object.getOwnPropertyNames;Z(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=re.ToObject(e);if(g(t)==="[object Window]"){try{return _t(t)}catch(r){return P([],Rt)}}return _t(t)})}}if(Object.getOwnPropertyDescriptor){var kt=!i(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!kt){var Ft=Object.getOwnPropertyDescriptor;Z(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Ft(re.ToObject(e),t)})}}if(Object.seal){var Lt=!i(function(){Object.seal("foo")});if(!Lt){var Dt=Object.seal;Z(Object,"seal",function seal(e){if(!re.TypeIsObject(e)){return e}return Dt(e)})}}if(Object.isSealed){var zt=!i(function(){Object.isSealed("foo")});if(!zt){var qt=Object.isSealed;Z(Object,"isSealed",function isSealed(e){if(!re.TypeIsObject(e)){return true}return qt(e)})}}if(Object.freeze){var Wt=!i(function(){Object.freeze("foo")});if(!Wt){var Gt=Object.freeze;Z(Object,"freeze",function freeze(e){if(!re.TypeIsObject(e)){return e}return Gt(e)})}}if(Object.isFrozen){var Ht=!i(function(){Object.isFrozen("foo")});if(!Ht){var Vt=Object.isFrozen;Z(Object,"isFrozen",function isFrozen(e){if(!re.TypeIsObject(e)){return true}return Vt(e)})}}if(Object.preventExtensions){var Bt=!i(function(){Object.preventExtensions("foo")});if(!Bt){var $t=Object.preventExtensions;Z(Object,"preventExtensions",function preventExtensions(e){if(!re.TypeIsObject(e)){return e}return $t(e)})}}if(Object.isExtensible){var Ut=!i(function(){Object.isExtensible("foo")});if(!Ut){var Jt=Object.isExtensible;Z(Object,"isExtensible",function isExtensible(e){if(!re.TypeIsObject(e)){return false}return Jt(e)})}}if(Object.getPrototypeOf){var Xt=!i(function(){Object.getPrototypeOf("foo")});if(!Xt){var Kt=Object.getPrototypeOf;Z(Object,"getPrototypeOf",function getPrototypeOf(e){return Kt(re.ToObject(e))})}}var Zt=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&re.IsCallable(e.get)}();if(s&&!Zt){var Yt=function flags(){if(!re.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};O.getter(RegExp.prototype,"flags",Yt)}var Qt=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var er=Y&&s&&function(){var e=/./;e[G.match]=false;return RegExp(e)===e}();var tr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var rr=tr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!tr||!rr){var nr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=re.RequireObjectCoercible(this);if(K.regex(e)){return t(nr,e)}var r=te(e.source);var n=te(e.flags);return"/"+r+"/"+n},true);O.preserveToString(RegExp.prototype.toString,nr)}if(s&&(!Qt||er)){var or=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var ir=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var ar=function(){return this.source};var ur=re.IsCallable(ir.get)?ir.get:ar;var fr=RegExp;var sr=function(){return function RegExp(e,t){var r=re.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(K.regex(e)){o=re.Call(ur,e);i=typeof t==="undefined"?re.Call(or,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new fr(e,t)}}();de(fr,sr,{$input:true});RegExp=sr;O.redefine(S,"RegExp",sr)}if(s){var cr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(cr),function(e){if(e in RegExp&&!(cr[e]in RegExp)){O.getter(RegExp,cr[e],function get(){return RegExp[e]})}})}me(RegExp);var lr=1/Number.EPSILON;var pr=function roundTiesToEven(e){return e+lr-lr};var vr=Math.pow(2,-23);var yr=Math.pow(2,127)*(2-vr);var hr=Math.pow(2,-126);var br=Math.E;var gr=Math.LOG2E;var dr=Math.LOG10E;var Or=Number.prototype.clz;delete Number.prototype.clz;var mr={acosh:function acosh(e){var t=Number(e);if(V(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return L(t/br+D(t+1)*D(t-1)/br)+1},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}return t<0?-asinh(-t):L(t+D(t*t+1))},atanh:function atanh(e){var t=Number(e);if(V(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*L((1+t)/(1-t))},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=F(L(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=re.ToUint32(t);if(r===0){return 32}return Or?re.Call(Or,r):31-_(L(r+.5)*gr)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(V(t)){return NaN}if(!T(t)){return Infinity}if(t<0){t=-t}if(t>21){return F(t)/2}return(F(t)+F(-t))/2},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return F(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return L(e)*gr},log10:function log10(e){return L(e)*dr},log1p:function log1p(e){var t=Number(e);if(t<-1||V(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(L(1+t)/(1+t-1))},sign:$,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}if(k(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(F(t-1)-F(-t-1))*br/2},tanh:function tanh(e){var t=Number(e);if(V(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(F(t)+F(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=re.ToUint32(e);var n=re.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||V(t)){return t}var r=$(t);var n=k(t);if(n<hr){return r*pr(n/hr/vr)*hr*vr}var o=(1+vr/Number.EPSILON)*n;var i=o-(o-n);if(i>yr||V(i)){return r*Infinity}return r*i}};b(Math,mr);h(Math,"log1p",mr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",mr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"tanh",mr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",mr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"cbrt",mr.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);h(Math,"sinh",mr.sinh,Math.sinh(-2e-17)!==-2e-17);var wr=Math.expm1(10);h(Math,"expm1",mr.expm1,wr>22025.465794806718||wr<22025.465794806718);var jr=Math.round;var Sr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Tr=lr+1;var Ir=2*lr-1;var Er=[Tr,Ir].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Sr||!Er);O.preserveToString(Math.round,jr);var Pr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=mr.imul;O.preserveToString(Math.imul,Pr)}if(Math.imul.length!==2){Z(Math,"imul",function imul(e,t){return re.Call(Pr,Math,arguments);
})}var Cr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}re.IsPromise=function(e){if(!re.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!re.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(re.IsCallable(t.resolve)&&re.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&re.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=re.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(re.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var O=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var m=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return O(e,new TypeError("Self resolution"))}if(!re.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return O(e,o)}if(!re.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return O(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=m(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!re.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Te(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=m(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=re.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=re.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=re.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{re.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=re.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{re.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!re.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(re.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!re.IsPromise(n)){throw new TypeError("not a promise")}var o=re.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=re.IsCallable(e)?e:a;var d=re.IsCallable(t)?t:u;var O=n._promise;var m;if(O.state===f){if(O.reactionLength===0){O.fulfillReactionHandler0=g;O.rejectReactionHandler0=d;O.reactionCapability0=i}else{var w=3*(O.reactionLength-1);O[w+l]=g;O[w+p]=d;O[w+v]=i}O.reactionLength+=1}else if(O.state===s){m=O.result;h(g,i,m)}else if(O.state===c){m=O.result;h(d,i,m)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Cr==="function"){b(S,{Promise:Cr});var Mr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var xr=!i(function(){S.Promise.reject(42).then(null,5).then(null,W)});var Nr=i(function(){S.Promise.call(3,W)});var Ar=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Rr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var _r=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};_r.prototype=Promise.prototype;_r.all=Promise.all;var kr=a(function(){return!!_r.all([1,2])});if(!Mr||!xr||!Nr||Ar||!Rr||kr){Promise=Cr;Z(S,"Promise",Cr)}if(Promise.all.length!==1){var Fr=Promise.all;Z(Promise,"all",function all(e){return re.Call(Fr,this,arguments)})}if(Promise.race.length!==1){var Lr=Promise.race;Z(Promise,"race",function race(e){return re.Call(Lr,this,arguments)})}if(Promise.resolve.length!==1){var Dr=Promise.resolve;Z(Promise,"resolve",function resolve(e){return re.Call(Dr,this,arguments)})}if(Promise.reject.length!==1){var zr=Promise.reject;Z(Promise,"reject",function reject(e){return re.Call(zr,this,arguments)})}wt(Promise,"all");wt(Promise,"race");wt(Promise,"resolve");wt(Promise,"reject");me(Promise)}var qr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Wr=qr(["z","a","bb"]);var Gr=qr(["z",1,"a","3",2]);if(s){var Hr=function fastkey(e){if(!Wr){return null}if(typeof e==="undefined"||e===null){return"^"+re.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Gr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Vr=function emptyObject(){return Object.create?Object.create(null):{}};var Br=function addIterableToMap(e,n,o){if(r(o)||K.string(o)){l(o,function(e){if(!re.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.set;if(!re.IsCallable(a)){throw new TypeError("bad map")}i=re.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=re.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!re.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){re.IteratorClose(i,true);throw s}}}}};var $r=function addIterableToSet(e,n,o){if(r(o)||K.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.add;if(!re.IsCallable(a)){throw new TypeError("bad set")}i=re.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=re.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){re.IteratorClose(i,true);throw s}}}}};var Ur={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!re.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+re.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={next:function next(){var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ge()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ge(n)}}this.i=void 0;return Ge()}};we(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Te(this,Map,a,{_es6map:true,_head:null,_storage:Vr(),_size:0});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){Br(Map,e,arguments[0])}return e};a=u.prototype;O.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t=Hr(e);if(t!==null){var r=this._storage[t];if(r){return r.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(re.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Hr(e);if(t!==null){return typeof this._storage[t]!=="undefined"}var r=this._head;var n=r;while((n=n.next)!==r){if(re.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Hr(e);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}while((i=i.next)!==n){if(re.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(re.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Hr(t);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}while((n=n.next)!==r){if(re.SameValueZero(n.key,t)){n.key=n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._size=0;this._storage=Vr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});we(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!re.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+re.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Te(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Vr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){$r(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new Ur.Map;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};O.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Hr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Hr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Hr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Vr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return this["[[SetData]]"].values()},entries:function entries(){r(this,"entries");u(this);return this["[[SetData]]"].entries()},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);we(i.prototype,i.prototype.values);return i}()};if(S.Map||S.Set){var Jr=a(function(){return new Map([[1,2]]).get(1)===2});if(!Jr){var Xr=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new Xr;if(arguments.length>0){Br(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=m(Xr.prototype);h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,Xr)}var Kr=new Map;var Zr=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var Yr=Kr.set(1,2)===Kr;if(!Zr||!Yr){var Qr=Map.prototype.set;Z(Map.prototype,"set",function set(e,r){t(Qr,this,e===0?0:e,r);return this})}if(!Zr){var en=Map.prototype.get;var tn=Map.prototype.has;b(Map.prototype,{get:function get(e){return t(en,this,e===0?0:e)},has:function has(e){return t(tn,this,e===0?0:e)}},true);O.preserveToString(Map.prototype.get,en);O.preserveToString(Map.prototype.has,tn)}var rn=new Set;var nn=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(rn);var on=rn.add(1)===rn;if(!nn||!on){var an=Set.prototype.add;Set.prototype.add=function add(e){t(an,this,e===0?0:e);return this};O.preserveToString(Set.prototype.add,an)}if(!nn){var un=Set.prototype.has;Set.prototype.has=function has(e){return t(un,this,e===0?0:e)};O.preserveToString(Set.prototype.has,un);var fn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(fn,this,e===0?0:e)};O.preserveToString(Set.prototype["delete"],fn)}var sn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var cn=Object.setPrototypeOf&&!sn;var ln=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||cn||!ln){var pn=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new pn;if(arguments.length>0){Br(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=pn.prototype;h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,pn)}var vn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var yn=Object.setPrototypeOf&&!vn;var hn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||yn||!hn){var bn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new bn;if(arguments.length>0){$r(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=bn.prototype;h(S.Set.prototype,"constructor",S.Set,true);O.preserveToString(S.Set,bn)}var gn=new S.Map;var dn=!a(function(){return gn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||gn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof gn.keys().next!=="function"||dn||!sn){b(S,{Map:Ur.Map,Set:Ur.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}we(Object.getPrototypeOf((new S.Map).keys()));we(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var On=S.Set.prototype.has;Z(S.Set.prototype,"has",function has(e){return t(On,this,e)})}}b(S,Ur);me(S.Map);me(S.Set)}var mn=function throwUnlessTargetIsObject(e){if(!re.TypeIsObject(e)){throw new TypeError("target must be an object")}};var wn={apply:function apply(){return re.Call(re.Call,null,arguments)},construct:function construct(e,t){if(!re.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!re.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return re.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){mn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){mn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(wn,{ownKeys:function ownKeys(e){mn(e);var t=Object.getOwnPropertyNames(e);if(re.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var jn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(wn,{isExtensible:function isExtensible(e){mn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){mn(e);return jn(function(){Object.preventExtensions(e)})}})}if(s){var Sn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Sn(o,t,r)}if("value"in n){return n.value}if(n.get){return re.Call(n.get,r)}return void 0};var Tn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Tn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!re.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ee.defineProperty(o,r,{value:n})}else{return ee.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(wn,{defineProperty:function defineProperty(e,t,r){mn(e);return jn(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){mn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){mn(e);var r=arguments.length>2?arguments[2]:e;return Sn(e,t,r)},set:function set(e,t,r){mn(e);var n=arguments.length>3?arguments[3]:e;return Tn(e,t,r,n)}})}if(Object.getPrototypeOf){var In=Object.getPrototypeOf;wn.getPrototypeOf=function getPrototypeOf(e){mn(e);return In(e)}}if(Object.setPrototypeOf&&wn.getPrototypeOf){var En=function(e,t){var r=t;while(r){if(e===r){return true}r=wn.getPrototypeOf(r)}return false};Object.assign(wn,{setPrototypeOf:function setPrototypeOf(e,t){mn(e);if(t!==null&&!re.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ee.getPrototypeOf(e)){return true}if(ee.isExtensible&&!ee.isExtensible(e)){return false}if(En(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Pn=function(e,t){if(!re.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){Z(S.Reflect,e,t)}}};Object.keys(wn).forEach(function(e){Pn(e,wn[e])});var Cn=S.Reflect.getPrototypeOf;if(c&&Cn&&Cn.name!=="getPrototypeOf"){Z(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Cn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){Z(S.Reflect,"setPrototypeOf",wn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){Z(S.Reflect,"defineProperty",wn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){Z(S.Reflect,"construct",wn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var Mn=Date.prototype.toString;var xn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return re.Call(Mn,this)};Z(Date.prototype,"toString",xn)}var Nn={anchor:function anchor(e){return re.CreateHTML(this,"a","name",e)},big:function big(){return re.CreateHTML(this,"big","","")},blink:function blink(){return re.CreateHTML(this,"blink","","")},bold:function bold(){return re.CreateHTML(this,"b","","")},fixed:function fixed(){return re.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return re.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return re.CreateHTML(this,"font","size",e)},italics:function italics(){return re.CreateHTML(this,"i","","")},link:function link(e){return re.CreateHTML(this,"a","href",e)},small:function small(){return re.CreateHTML(this,"small","","")},strike:function strike(){return re.CreateHTML(this,"strike","","")},sub:function sub(){return re.CreateHTML(this,"sub","","")},sup:function sub(){return re.CreateHTML(this,"sup","","")}};l(Object.keys(Nn),function(e){var r=String.prototype[e];var n=false;if(re.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){Z(String.prototype,e,Nn[e])}});var An=function(){if(!Y){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e(G())!=="undefined"){return true}if(e([G()])!=="[null]"){return true}var t={a:G()};t[G()]=true;if(e(t)!=="{}"){return true}return false}();var Rn=a(function(){if(!Y){return true}return JSON.stringify(Object(G()))==="{}"&&JSON.stringify([Object(G())])==="[{}]"});if(An||!Rn){var _n=JSON.stringify;Z(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=re.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(K.symbol(n)){return St({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return _n.apply(this,o)})}return S});
//# sourceMappingURL=es6-shim.map

/*
 * SystemJS Promise Polyfill
 */
!function(t){!function(e){"object"==typeof exports?module.exports=e():"function"==typeof t&&t.amd?t(e):"undefined"!=typeof window?window.Promise=e():"undefined"!=typeof global?global.Promise=e():"undefined"!=typeof self&&(self.Promise=e())}(function(){var t;return function e(t,n,o){function r(u,c){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!c&&f)return f(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var s=n[u]={exports:{}};t[u][0].call(s.exports,function(e){var n=t[u][1][e];return r(n?n:e)},s,s.exports,e,t,n,o)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,e,n){var o=t("../lib/decorators/unhandledRejection"),r=o(t("../lib/Promise"));e.exports="undefined"!=typeof global?global.Promise=r:"undefined"!=typeof self?self.Promise=r:r},{"../lib/Promise":2,"../lib/decorators/unhandledRejection":4}],2:[function(e,n,o){!function(t){"use strict";t(function(t){var e=t("./makePromise"),n=t("./Scheduler"),o=t("./env").asap;return e({scheduler:new n(o)})})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"./Scheduler":3,"./env":5,"./makePromise":7}],3:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],4:[function(e,n,o){!function(t){"use strict";t(function(t){function e(t){throw t}function n(){}var o=t("../env").setTimer,r=t("../format");return function(t){function i(t){t.handled||(l.push(t),a("Potentially unhandled rejection ["+t.id+"] "+r.formatError(t.value)))}function u(t){var e=l.indexOf(t);e>=0&&(l.splice(e,1),h("Handled previous rejection ["+t.id+"] "+r.formatObject(t.value)))}function c(t,e){p.push(t,e),null===d&&(d=o(f,0))}function f(){for(d=null;p.length>0;)p.shift()(p.shift())}var s,a=n,h=n;"undefined"!=typeof console&&(s=console,a="undefined"!=typeof s.error?function(t){s.error(t)}:function(t){s.log(t)},h="undefined"!=typeof s.info?function(t){s.info(t)}:function(t){s.log(t)}),t.onPotentiallyUnhandledRejection=function(t){c(i,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){c(u,t)},t.onFatalRejection=function(t){c(e,t.value)};var p=[],l=[],d=null;return t}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{"../env":5,"../format":6}],5:[function(e,n,o){!function(t){"use strict";t(function(t){function e(){return"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)}function n(){return"function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver}function o(t){function e(){var t=n;n=void 0,t()}var n,o=document.createTextNode(""),r=new t(e);r.observe(o,{characterData:!0});var i=0;return function(t){n=t,o.data=i^=1}}var r,i="undefined"!=typeof setTimeout&&setTimeout,u=function(t,e){return setTimeout(t,e)},c=function(t){return clearTimeout(t)},f=function(t){return i(t,0)};if(e())f=function(t){return process.nextTick(t)};else if(r=n())f=o(r);else if(!i){var s=t,a=s("vertx");u=function(t,e){return a.setTimer(e,t)},c=a.cancelTimer,f=a.runOnLoop||a.runOnContext}return{setTimer:u,clearTimer:c,asap:f}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t(e)})},{}],6:[function(e,n,o){!function(t){"use strict";t(function(){function t(t){var n="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?n:n+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=n(t,e)),e}function n(t,e){try{return JSON.stringify(t)}catch(n){return e}}return{formatError:t,formatObject:e,tryStringify:n}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}],7:[function(e,n,o){!function(t){"use strict";t(function(){return function(t){function e(t,e){this._handler=t===_?e:n(t)}function n(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function o(t){r.notify(t)}var r=new b;try{t(e,n,o)}catch(i){n(i)}return r}function o(t){return k(t)?t:new e(_,new x(v(t)))}function r(t){return new e(_,new x(new P(t)))}function i(){return $}function u(){return new e(_,new b)}function c(t,e){var n=new b(t.receiver,t.join().context);return new e(_,n)}function f(t){return a(B,null,t)}function s(t,e){return a(M,t,e)}function a(t,n,o){function r(e,r,u){u.resolved||h(o,i,e,t(n,r,e),u)}function i(t,e,n){a[t]=e,0===--s&&n.become(new q(a))}for(var u,c="function"==typeof n?r:i,f=new b,s=o.length>>>0,a=new Array(s),p=0;p<o.length&&!f.resolved;++p)u=o[p],void 0!==u||p in o?h(o,c,p,u,f):--s;return 0===s&&f.become(new q(a)),new e(_,f)}function h(t,e,n,o,r){if(U(o)){var i=m(o),u=i.state();0===u?i.fold(e,n,void 0,r):u>0?e(n,i.value,r):(r.become(i),p(t,n+1,i))}else e(n,o,r)}function p(t,e,n){for(var o=e;o<t.length;++o)l(v(t[o]),n)}function l(t,e){if(t!==e){var n=t.state();0===n?t.visit(t,void 0,t._unreport):0>n&&t._unreport()}}function d(t){return"object"!=typeof t||null===t?r(new TypeError("non-iterable passed to race()")):0===t.length?i():1===t.length?o(t[0]):y(t)}function y(t){var n,o,r,i=new b;for(n=0;n<t.length;++n)if(o=t[n],void 0!==o||n in t){if(r=v(o),0!==r.state()){i.become(r),p(t,n+1,r);break}r.visit(i,i.resolve,i.reject)}return new e(_,i)}function v(t){return k(t)?t._handler.join():U(t)?j(t):new q(t)}function m(t){return k(t)?t._handler.join():j(t)}function j(t){try{var e=t.then;return"function"==typeof e?new g(e,t):new q(t)}catch(n){return new P(n)}}function _(){}function w(){}function b(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function x(t){this.handler=t}function g(t,e){b.call(this),G.enqueue(new E(t,e,this))}function q(t){e.createContext(this),this.value=t}function P(t){e.createContext(this),this.id=++Y,this.value=t,this.handled=!1,this.reported=!1,this._report()}function R(t,e){this.rejection=t,this.context=e}function C(t){this.rejection=t}function O(){return new P(new TypeError("Promise cycle"))}function T(t,e){this.continuation=t,this.handler=e}function Q(t,e){this.handler=e,this.value=t}function E(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function L(t,e,n,o,r){try{t.call(e,n,o,r)}catch(i){o(i)}}function S(t,e,n,o){this.f=t,this.z=e,this.c=n,this.to=o,this.resolver=X,this.receiver=this}function k(t){return t instanceof e}function U(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function H(t,n,o,r){return"function"!=typeof t?r.become(n):(e.enterContext(n),F(t,n.value,o,r),void e.exitContext())}function N(t,n,o,r,i){return"function"!=typeof t?i.become(o):(e.enterContext(o),W(t,n,o.value,r,i),void e.exitContext())}function J(t,n,o,r,i){return"function"!=typeof t?i.notify(n):(e.enterContext(o),z(t,n,r,i),void e.exitContext())}function M(t,e,n){try{return t(e,n)}catch(o){return r(o)}}function F(t,e,n,o){try{o.become(v(t.call(n,e)))}catch(r){o.become(new P(r))}}function W(t,e,n,o,r){try{t.call(o,e,n,r)}catch(i){r.become(new P(i))}}function z(t,e,n,o){try{o.notify(t.call(n,e))}catch(r){o.notify(r)}}function A(t,e){e.prototype=V(t.prototype),e.prototype.constructor=e}function B(t,e){return e}function K(){}function D(){return"undefined"!=typeof process&&null!==process&&"function"==typeof process.emit?function(t,e){return"unhandledRejection"===t?process.emit(t,e.value,e):process.emit(t,e)}:"undefined"!=typeof self&&"function"==typeof CustomEvent?function(t,e,n){var o=!1;try{var r=new n("unhandledRejection");o=r instanceof n}catch(i){}return o?function(t,o){var r=new n(t,{detail:{reason:o.value,key:o},bubbles:!1,cancelable:!0});return!e.dispatchEvent(r)}:t}(K,self,CustomEvent):K}var G=t.scheduler,I=D(),V=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=o,e.reject=r,e.never=i,e._defer=u,e._handler=v,e.prototype.then=function(t,e,n){var o=this._handler,r=o.join().state();if("function"!=typeof t&&r>0||"function"!=typeof e&&0>r)return new this.constructor(_,o);var i=this._beget(),u=i._handler;return o.chain(u,o.receiver,t,e,n),i},e.prototype["catch"]=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return c(this._handler,this.constructor)},e.all=f,e.race=d,e._traverse=s,e._visitRemaining=p,_.prototype.when=_.prototype.become=_.prototype.notify=_.prototype.fail=_.prototype._unreport=_.prototype._report=K,_.prototype._state=0,_.prototype.state=function(){return this._state},_.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},_.prototype.chain=function(t,e,n,o,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:o,progress:r})},_.prototype.visit=function(t,e,n,o){this.chain(X,t,e,n,o)},_.prototype.fold=function(t,e,n,o){this.when(new S(t,e,n,o))},A(_,w),w.prototype.become=function(t){t.fail()};var X=new w;A(_,b),b.prototype._state=0,b.prototype.resolve=function(t){this.become(v(t))},b.prototype.reject=function(t){this.resolved||this.become(new P(t))},b.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if(t=t.handler,t===this)return this.handler=O();return t},b.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},b.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&G.enqueue(this),void 0!==this.context&&t._report(this.context))},b.prototype.when=function(t){this.resolved?G.enqueue(new T(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},b.prototype.notify=function(t){this.resolved||G.enqueue(new Q(t,this))},b.prototype.fail=function(t){var e="undefined"==typeof t?this.context:t;this.resolved&&this.handler.join().fail(e)},b.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},b.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},A(_,x),x.prototype.when=function(t){G.enqueue(new T(t,this))},x.prototype._report=function(t){this.join()._report(t)},x.prototype._unreport=function(){this.join()._unreport()},A(b,g),A(_,q),q.prototype._state=1,q.prototype.fold=function(t,e,n,o){N(t,e,this,n,o)},q.prototype.when=function(t){H(t.fulfilled,this,t.receiver,t.resolver)};var Y=0;A(_,P),P.prototype._state=-1,P.prototype.fold=function(t,e,n,o){o.become(this)},P.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),H(t.rejected,this,t.receiver,t.resolver)},P.prototype._report=function(t){G.afterQueue(new R(this,t))},P.prototype._unreport=function(){this.handled||(this.handled=!0,G.afterQueue(new C(this)))},P.prototype.fail=function(t){this.reported=!0,I("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},R.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,I("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},C.prototype.run=function(){this.rejection.reported&&(I("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=K;var Z=new _,$=new e(_,Z);return T.prototype.run=function(){this.handler.join().when(this.continuation)},Q.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,n=0;n<t.length;++n)e=t[n],J(e.progress,this.value,this.handler,e.receiver,e.resolver)},E.prototype.run=function(){function t(t){o.resolve(t)}function e(t){o.reject(t)}function n(t){o.notify(t)}var o=this.resolver;L(this._then,this.thenable,t,e,n)},S.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},S.prototype.rejected=function(t){this.to.reject(t)},S.prototype.progress=function(t){this.to.notify(t)},e}})}("function"==typeof t&&t.amd?t:function(t){n.exports=t()})},{}]},{},[1])(1)}),"undefined"!=typeof systemJSBootstrap&&systemJSBootstrap()}();
//# sourceMappingURL=system-polyfills.js.map

/*
 * SystemJS v0.19.31
 */
(function() {
function bootstrap() {// from https://gist.github.com/Yaffle/1088850
(function(global) {
function URLPolyfill(url, baseURL) {
  if (typeof url != 'string')
    throw new TypeError('URL must be a string');
  var m = String(url).replace(/^\s+|\s+$/g, "").match(/^([^:\/?#]+:)?(?:\/\/(?:([^:@\/?#]*)(?::([^:@\/?#]*))?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);
  if (!m)
    throw new RangeError('Invalid URL format');
  var protocol = m[1] || "";
  var username = m[2] || "";
  var password = m[3] || "";
  var host = m[4] || "";
  var hostname = m[5] || "";
  var port = m[6] || "";
  var pathname = m[7] || "";
  var search = m[8] || "";
  var hash = m[9] || "";
  if (baseURL !== undefined) {
    var base = baseURL instanceof URLPolyfill ? baseURL : new URLPolyfill(baseURL);
    var flag = !protocol && !host && !username;
    if (flag && !pathname && !search)
      search = base.search;
    if (flag && pathname[0] !== "/")
      pathname = (pathname ? (((base.host || base.username) && !base.pathname ? "/" : "") + base.pathname.slice(0, base.pathname.lastIndexOf("/") + 1) + pathname) : base.pathname);
    // dot segments removal
    var output = [];
    pathname.replace(/^(\.\.?(\/|$))+/, "")
      .replace(/\/(\.(\/|$))+/g, "/")
      .replace(/\/\.\.$/, "/../")
      .replace(/\/?[^\/]*/g, function (p) {
        if (p === "/..")
          output.pop();
        else
          output.push(p);
      });
    pathname = output.join("").replace(/^\//, pathname[0] === "/" ? "/" : "");
    if (flag) {
      port = base.port;
      hostname = base.hostname;
      host = base.host;
      password = base.password;
      username = base.username;
    }
    if (!protocol)
      protocol = base.protocol;
  }

  // convert windows file URLs to use /
  if (protocol == 'file:')
    pathname = pathname.replace(/\\/g, '/');

  this.origin = host ? protocol + (protocol !== "" || host !== "" ? "//" : "") + host : "";
  this.href = protocol + (protocol && host || protocol == "file:" ? "//" : "") + (username !== "" ? username + (password !== "" ? ":" + password : "") + "@" : "") + host + pathname + search + hash;
  this.protocol = protocol;
  this.username = username;
  this.password = password;
  this.host = host;
  this.hostname = hostname;
  this.port = port;
  this.pathname = pathname;
  this.search = search;
  this.hash = hash;
}
global.URLPolyfill = URLPolyfill;
})(typeof self != 'undefined' ? self : global);(function(__global) {

  var isWorker = typeof window == 'undefined' && typeof self != 'undefined' && typeof importScripts != 'undefined';
  var isBrowser = typeof window != 'undefined' && typeof document != 'undefined';
  var isWindows = typeof process != 'undefined' && typeof process.platform != 'undefined' && !!process.platform.match(/^win/);

  if (!__global.console)
    __global.console = { assert: function() {} };

  // IE8 support
  var indexOf = Array.prototype.indexOf || function(item) {
    for (var i = 0, thisLen = this.length; i < thisLen; i++) {
      if (this[i] === item) {
        return i;
      }
    }
    return -1;
  };
  
  var defineProperty;
  (function () {
    try {
      if (!!Object.defineProperty({}, 'a', {}))
        defineProperty = Object.defineProperty;
    }
    catch (e) {
      defineProperty = function(obj, prop, opt) {
        try {
          obj[prop] = opt.value || opt.get.call(obj);
        }
        catch(e) {}
      }
    }
  })();

  var errArgs = new Error(0, '_').fileName == '_';

  function addToError(err, msg) {
    // parse the stack removing loader code lines for simplification
    if (!err.originalErr) {
      var stack = (err.stack || err.message || err).toString().split('\n');
      var newStack = [];
      for (var i = 0; i < stack.length; i++) {
        if (typeof $__curScript == 'undefined' || stack[i].indexOf($__curScript.src) == -1)
          newStack.push(stack[i]);
      }
    }

    var newMsg = '(SystemJS) ' + (newStack ? newStack.join('\n\t') : err.message.substr(11)) + '\n\t' + msg;

    // Convert file:/// URLs to paths in Node
    if (!isBrowser)
      newMsg = newMsg.replace(isWindows ? /file:\/\/\//g : /file:\/\//g, '');

    var newErr = errArgs ? new Error(newMsg, err.fileName, err.lineNumber) : new Error(newMsg);
    
    // Node needs stack adjustment for throw to show message
    if (!isBrowser)
      newErr.stack = newMsg;
    // Clearing the stack stops unnecessary loader lines showing
    else
      newErr.stack = null;
    
    // track the original error
    newErr.originalErr = err.originalErr || err;

    return newErr;
  }

  function __eval(source, debugName, context) {
    try {
      new Function(source).call(context);
    }
    catch(e) {
      throw addToError(e, 'Evaluating ' + debugName);
    }
  }

  var baseURI;

  // environent baseURI detection
  if (typeof document != 'undefined' && document.getElementsByTagName) {
    baseURI = document.baseURI;

    if (!baseURI) {
      var bases = document.getElementsByTagName('base');
      baseURI = bases[0] && bases[0].href || window.location.href;
    }
  }
  else if (typeof location != 'undefined') {
    baseURI = __global.location.href;
  }

  // sanitize out the hash and querystring
  if (baseURI) {
    baseURI = baseURI.split('#')[0].split('?')[0];
    baseURI = baseURI.substr(0, baseURI.lastIndexOf('/') + 1);
  }
  else if (typeof process != 'undefined' && process.cwd) {
    baseURI = 'file://' + (isWindows ? '/' : '') + process.cwd() + '/';
    if (isWindows)
      baseURI = baseURI.replace(/\\/g, '/');
  }
  else {
    throw new TypeError('No environment baseURI');
  }

  try {
    var nativeURL = new __global.URL('test:///').protocol == 'test:';
  }
  catch(e) {}

  var URL = nativeURL ? __global.URL : __global.URLPolyfill;

/*
*********************************************************************************************

  Dynamic Module Loader Polyfill

    - Implemented exactly to the former 2014-08-24 ES6 Specification Draft Rev 27, Section 15
      http://wiki.ecmascript.org/doku.php?id=harmony:specification_drafts#august_24_2014_draft_rev_27

    - Functions are commented with their spec numbers, with spec differences commented.

    - Spec bugs are commented in this code with links.

    - Abstract functions have been combined where possible, and their associated functions
      commented.

    - Realm implementation is entirely omitted.

*********************************************************************************************
*/

function Module() {}
// http://www.ecma-international.org/ecma-262/6.0/#sec-@@tostringtag
defineProperty(Module.prototype, 'toString', {
  value: function() {
    return 'Module';
  }
});
function Loader(options) {
  this._loader = {
    loaderObj: this,
    loads: [],
    modules: {},
    importPromises: {},
    moduleRecords: {}
  };

  // 26.3.3.6
  defineProperty(this, 'global', {
    get: function() {
      return __global;
    }
  });

  // 26.3.3.13 realm not implemented
}

(function() {

// Some Helpers

// logs a linkset snapshot for debugging
/* function snapshot(loader) {
  console.log('---Snapshot---');
  for (var i = 0; i < loader.loads.length; i++) {
    var load = loader.loads[i];
    var linkSetLog = '  ' + load.name + ' (' + load.status + '): ';

    for (var j = 0; j < load.linkSets.length; j++) {
      linkSetLog += '{' + logloads(load.linkSets[j].loads) + '} ';
    }
    console.log(linkSetLog);
  }
  console.log('');
}
function logloads(loads) {
  var log = '';
  for (var k = 0; k < loads.length; k++)
    log += loads[k].name + (k != loads.length - 1 ? ' ' : '');
  return log;
} */


/* function checkInvariants() {
  // see https://bugs.ecmascript.org/show_bug.cgi?id=2603#c1

  var loads = System._loader.loads;
  var linkSets = [];

  for (var i = 0; i < loads.length; i++) {
    var load = loads[i];
    console.assert(load.status == 'loading' || load.status == 'loaded', 'Each load is loading or loaded');

    for (var j = 0; j < load.linkSets.length; j++) {
      var linkSet = load.linkSets[j];

      for (var k = 0; k < linkSet.loads.length; k++)
        console.assert(loads.indexOf(linkSet.loads[k]) != -1, 'linkSet loads are a subset of loader loads');

      if (linkSets.indexOf(linkSet) == -1)
        linkSets.push(linkSet);
    }
  }

  for (var i = 0; i < loads.length; i++) {
    var load = loads[i];
    for (var j = 0; j < linkSets.length; j++) {
      var linkSet = linkSets[j];

      if (linkSet.loads.indexOf(load) != -1)
        console.assert(load.linkSets.indexOf(linkSet) != -1, 'linkSet contains load -> load contains linkSet');

      if (load.linkSets.indexOf(linkSet) != -1)
        console.assert(linkSet.loads.indexOf(load) != -1, 'load contains linkSet -> linkSet contains load');
    }
  }

  for (var i = 0; i < linkSets.length; i++) {
    var linkSet = linkSets[i];
    for (var j = 0; j < linkSet.loads.length; j++) {
      var load = linkSet.loads[j];

      for (var k = 0; k < load.dependencies.length; k++) {
        var depName = load.dependencies[k].value;
        var depLoad;
        for (var l = 0; l < loads.length; l++) {
          if (loads[l].name != depName)
            continue;
          depLoad = loads[l];
          break;
        }

        // loading records are allowed not to have their dependencies yet
        // if (load.status != 'loading')
        //  console.assert(depLoad, 'depLoad found');

        // console.assert(linkSet.loads.indexOf(depLoad) != -1, 'linkset contains all dependencies');
      }
    }
  }
} */

  // 15.2.3 - Runtime Semantics: Loader State

  // 15.2.3.11
  function createLoaderLoad(object) {
    return {
      // modules is an object for ES5 implementation
      modules: {},
      loads: [],
      loaderObj: object
    };
  }

  // 15.2.3.2 Load Records and LoadRequest Objects

  var anonCnt = 0;

  // 15.2.3.2.1
  function createLoad(name) {
    return {
      status: 'loading',
      name: name || '<Anonymous' + ++anonCnt + '>',
      linkSets: [],
      dependencies: [],
      metadata: {}
    };
  }

  // 15.2.3.2.2 createLoadRequestObject, absorbed into calling functions

  // 15.2.4

  // 15.2.4.1
  function loadModule(loader, name, options) {
    return new Promise(asyncStartLoadPartwayThrough({
      step: options.address ? 'fetch' : 'locate',
      loader: loader,
      moduleName: name,
      // allow metadata for import https://bugs.ecmascript.org/show_bug.cgi?id=3091
      moduleMetadata: options && options.metadata || {},
      moduleSource: options.source,
      moduleAddress: options.address
    }));
  }

  // 15.2.4.2
  function requestLoad(loader, request, refererName, refererAddress) {
    // 15.2.4.2.1 CallNormalize
    return new Promise(function(resolve, reject) {
      resolve(loader.loaderObj.normalize(request, refererName, refererAddress));
    })
    // 15.2.4.2.2 GetOrCreateLoad
    .then(function(name) {
      var load;
      if (loader.modules[name]) {
        load = createLoad(name);
        load.status = 'linked';
        // https://bugs.ecmascript.org/show_bug.cgi?id=2795
        load.module = loader.modules[name];
        return load;
      }

      for (var i = 0, l = loader.loads.length; i < l; i++) {
        load = loader.loads[i];
        if (load.name != name)
          continue;
        return load;
      }

      load = createLoad(name);
      loader.loads.push(load);

      proceedToLocate(loader, load);

      return load;
    });
  }

  // 15.2.4.3
  function proceedToLocate(loader, load) {
    proceedToFetch(loader, load,
      Promise.resolve()
      // 15.2.4.3.1 CallLocate
      .then(function() {
        return loader.loaderObj.locate({ name: load.name, metadata: load.metadata });
      })
    );
  }

  // 15.2.4.4
  function proceedToFetch(loader, load, p) {
    proceedToTranslate(loader, load,
      p
      // 15.2.4.4.1 CallFetch
      .then(function(address) {
        // adjusted, see https://bugs.ecmascript.org/show_bug.cgi?id=2602
        if (load.status != 'loading')
          return;
        load.address = address;

        return loader.loaderObj.fetch({ name: load.name, metadata: load.metadata, address: address });
      })
    );
  }

  // 15.2.4.5
  function proceedToTranslate(loader, load, p) {
    p
    // 15.2.4.5.1 CallTranslate
    .then(function(source) {
      if (load.status != 'loading')
        return;

      load.address = load.address || load.name;

      return Promise.resolve(loader.loaderObj.translate({ name: load.name, metadata: load.metadata, address: load.address, source: source }))

      // 15.2.4.5.2 CallInstantiate
      .then(function(source) {
        load.source = source;
        return loader.loaderObj.instantiate({ name: load.name, metadata: load.metadata, address: load.address, source: source });
      })

      // 15.2.4.5.3 InstantiateSucceeded
      .then(function(instantiateResult) {
        if (instantiateResult === undefined)
          throw new TypeError('Declarative modules unsupported in the polyfill.');
        
        if (typeof instantiateResult != 'object')
          throw new TypeError('Invalid instantiate return value');

        load.depsList = instantiateResult.deps || [];
        load.execute = instantiateResult.execute;
      })
      // 15.2.4.6 ProcessLoadDependencies
      .then(function() {
        load.dependencies = [];
        var depsList = load.depsList;

        var loadPromises = [];
        for (var i = 0, l = depsList.length; i < l; i++) (function(request, index) {
          loadPromises.push(
            requestLoad(loader, request, load.name, load.address)

            // 15.2.4.6.1 AddDependencyLoad (load is parentLoad)
            .then(function(depLoad) {

              // adjusted from spec to maintain dependency order
              // this is due to the System.register internal implementation needs
              load.dependencies[index] = {
                key: request,
                value: depLoad.name
              };

              if (depLoad.status != 'linked') {
                var linkSets = load.linkSets.concat([]);
                for (var i = 0, l = linkSets.length; i < l; i++)
                  addLoadToLinkSet(linkSets[i], depLoad);
              }

              // console.log('AddDependencyLoad ' + depLoad.name + ' for ' + load.name);
              // snapshot(loader);
            })
          );
        })(depsList[i], i);

        return Promise.all(loadPromises);
      })

      // 15.2.4.6.2 LoadSucceeded
      .then(function() {
        // console.log('LoadSucceeded ' + load.name);
        // snapshot(loader);

        console.assert(load.status == 'loading', 'is loading');

        load.status = 'loaded';

        var linkSets = load.linkSets.concat([]);
        for (var i = 0, l = linkSets.length; i < l; i++)
          updateLinkSetOnLoad(linkSets[i], load);
      });
    })
    // 15.2.4.5.4 LoadFailed
    ['catch'](function(exc) {
      load.status = 'failed';
      load.exception = exc;

      var linkSets = load.linkSets.concat([]);
      for (var i = 0, l = linkSets.length; i < l; i++) {
        linkSetFailed(linkSets[i], load, exc);
      }

      console.assert(load.linkSets.length == 0, 'linkSets not removed');
    });
  }

  // 15.2.4.7 PromiseOfStartLoadPartwayThrough absorbed into calling functions

  // 15.2.4.7.1
  function asyncStartLoadPartwayThrough(stepState) {
    return function(resolve, reject) {
      var loader = stepState.loader;
      var name = stepState.moduleName;
      var step = stepState.step;

      if (loader.modules[name])
        throw new TypeError('"' + name + '" already exists in the module table');

      // adjusted to pick up existing loads
      var existingLoad;
      for (var i = 0, l = loader.loads.length; i < l; i++) {
        if (loader.loads[i].name == name) {
          existingLoad = loader.loads[i];

          if (step == 'translate' && !existingLoad.source) {
            existingLoad.address = stepState.moduleAddress;
            proceedToTranslate(loader, existingLoad, Promise.resolve(stepState.moduleSource));
          }

          // a primary load -> use that existing linkset if it is for the direct load here
          // otherwise create a new linkset unit
          if (existingLoad.linkSets.length && existingLoad.linkSets[0].loads[0].name == existingLoad.name)
            return existingLoad.linkSets[0].done.then(function() {
              resolve(existingLoad);
            });
        }
      }

      var load = existingLoad || createLoad(name);

      load.metadata = stepState.moduleMetadata;

      var linkSet = createLinkSet(loader, load);

      loader.loads.push(load);

      resolve(linkSet.done);

      if (step == 'locate')
        proceedToLocate(loader, load);

      else if (step == 'fetch')
        proceedToFetch(loader, load, Promise.resolve(stepState.moduleAddress));

      else {
        console.assert(step == 'translate', 'translate step');
        load.address = stepState.moduleAddress;
        proceedToTranslate(loader, load, Promise.resolve(stepState.moduleSource));
      }
    }
  }

  // Declarative linking functions run through alternative implementation:
  // 15.2.5.1.1 CreateModuleLinkageRecord not implemented
  // 15.2.5.1.2 LookupExport not implemented
  // 15.2.5.1.3 LookupModuleDependency not implemented

  // 15.2.5.2.1
  function createLinkSet(loader, startingLoad) {
    var linkSet = {
      loader: loader,
      loads: [],
      startingLoad: startingLoad, // added see spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995
      loadingCount: 0
    };
    linkSet.done = new Promise(function(resolve, reject) {
      linkSet.resolve = resolve;
      linkSet.reject = reject;
    });
    addLoadToLinkSet(linkSet, startingLoad);
    return linkSet;
  }
  // 15.2.5.2.2
  function addLoadToLinkSet(linkSet, load) {
    if (load.status == 'failed')
      return;

    for (var i = 0, l = linkSet.loads.length; i < l; i++)
      if (linkSet.loads[i] == load)
        return;

    linkSet.loads.push(load);
    load.linkSets.push(linkSet);

    // adjustment, see https://bugs.ecmascript.org/show_bug.cgi?id=2603
    if (load.status != 'loaded') {
      linkSet.loadingCount++;
    }

    var loader = linkSet.loader;

    for (var i = 0, l = load.dependencies.length; i < l; i++) {
      if (!load.dependencies[i])
        continue;

      var name = load.dependencies[i].value;

      if (loader.modules[name])
        continue;

      for (var j = 0, d = loader.loads.length; j < d; j++) {
        if (loader.loads[j].name != name)
          continue;

        addLoadToLinkSet(linkSet, loader.loads[j]);
        break;
      }
    }
    // console.log('add to linkset ' + load.name);
    // snapshot(linkSet.loader);
  }

  // linking errors can be generic or load-specific
  // this is necessary for debugging info
  function doLink(linkSet) {
    var error = false;
    try {
      link(linkSet, function(load, exc) {
        linkSetFailed(linkSet, load, exc);
        error = true;
      });
    }
    catch(e) {
      linkSetFailed(linkSet, null, e);
      error = true;
    }
    return error;
  }

  // 15.2.5.2.3
  function updateLinkSetOnLoad(linkSet, load) {
    // console.log('update linkset on load ' + load.name);
    // snapshot(linkSet.loader);

    console.assert(load.status == 'loaded' || load.status == 'linked', 'loaded or linked');

    linkSet.loadingCount--;

    if (linkSet.loadingCount > 0)
      return;

    // adjusted for spec bug https://bugs.ecmascript.org/show_bug.cgi?id=2995
    var startingLoad = linkSet.startingLoad;

    // non-executing link variation for loader tracing
    // on the server. Not in spec.
    /***/
    if (linkSet.loader.loaderObj.execute === false) {
      var loads = [].concat(linkSet.loads);
      for (var i = 0, l = loads.length; i < l; i++) {
        var load = loads[i];
        load.module = {
          name: load.name,
          module: _newModule({}),
          evaluated: true
        };
        load.status = 'linked';
        finishLoad(linkSet.loader, load);
      }
      return linkSet.resolve(startingLoad);
    }
    /***/

    var abrupt = doLink(linkSet);

    if (abrupt)
      return;

    console.assert(linkSet.loads.length == 0, 'loads cleared');

    linkSet.resolve(startingLoad);
  }

  // 15.2.5.2.4
  function linkSetFailed(linkSet, load, exc) {
    var loader = linkSet.loader;
    var requests;

    checkError: 
    if (load) {
      if (linkSet.loads[0].name == load.name) {
        exc = addToError(exc, 'Error loading ' + load.name);
      }
      else {
        for (var i = 0; i < linkSet.loads.length; i++) {
          var pLoad = linkSet.loads[i];
          for (var j = 0; j < pLoad.dependencies.length; j++) {
            var dep = pLoad.dependencies[j];
            if (dep.value == load.name) {
              exc = addToError(exc, 'Error loading ' + load.name + ' as "' + dep.key + '" from ' + pLoad.name);
              break checkError;
            }
          }
        }
        exc = addToError(exc, 'Error loading ' + load.name + ' from ' + linkSet.loads[0].name);
      }
    }
    else {
      exc = addToError(exc, 'Error linking ' + linkSet.loads[0].name);
    }


    var loads = linkSet.loads.concat([]);
    for (var i = 0, l = loads.length; i < l; i++) {
      var load = loads[i];

      // store all failed load records
      loader.loaderObj.failed = loader.loaderObj.failed || [];
      if (indexOf.call(loader.loaderObj.failed, load) == -1)
        loader.loaderObj.failed.push(load);

      var linkIndex = indexOf.call(load.linkSets, linkSet);
      console.assert(linkIndex != -1, 'link not present');
      load.linkSets.splice(linkIndex, 1);
      if (load.linkSets.length == 0) {
        var globalLoadsIndex = indexOf.call(linkSet.loader.loads, load);
        if (globalLoadsIndex != -1)
          linkSet.loader.loads.splice(globalLoadsIndex, 1);
      }
    }
    linkSet.reject(exc);
  }

  // 15.2.5.2.5
  function finishLoad(loader, load) {
    // add to global trace if tracing
    if (loader.loaderObj.trace) {
      if (!loader.loaderObj.loads)
        loader.loaderObj.loads = {};
      var depMap = {};
      load.dependencies.forEach(function(dep) {
        depMap[dep.key] = dep.value;
      });
      loader.loaderObj.loads[load.name] = {
        name: load.name,
        deps: load.dependencies.map(function(dep){ return dep.key }),
        depMap: depMap,
        address: load.address,
        metadata: load.metadata,
        source: load.source
      };
    }
    // if not anonymous, add to the module table
    if (load.name) {
      console.assert(!loader.modules[load.name] || loader.modules[load.name].module === load.module.module, 'load not in module table');
      loader.modules[load.name] = load.module;
    }
    var loadIndex = indexOf.call(loader.loads, load);
    if (loadIndex != -1)
      loader.loads.splice(loadIndex, 1);
    for (var i = 0, l = load.linkSets.length; i < l; i++) {
      loadIndex = indexOf.call(load.linkSets[i].loads, load);
      if (loadIndex != -1)
        load.linkSets[i].loads.splice(loadIndex, 1);
    }
    load.linkSets.splice(0, load.linkSets.length);
  }

  function doDynamicExecute(linkSet, load, linkError) {
    try {
      var module = load.execute();
    }
    catch(e) {
      linkError(load, e);
      return;
    }
    if (!module || !(module instanceof Module))
      linkError(load, new TypeError('Execution must define a Module instance'));
    else
      return module;
  }

  // 26.3 Loader

  // 26.3.1.1
  // defined at top

  // importPromises adds ability to import a module twice without error - https://bugs.ecmascript.org/show_bug.cgi?id=2601
  function createImportPromise(loader, name, promise) {
    var importPromises = loader._loader.importPromises;
    return importPromises[name] = promise.then(function(m) {
      importPromises[name] = undefined;
      return m;
    }, function(e) {
      importPromises[name] = undefined;
      throw e;
    });
  }

  Loader.prototype = {
    // 26.3.3.1
    constructor: Loader,
    // 26.3.3.2
    define: function(name, source, options) {
      // check if already defined
      if (this._loader.importPromises[name])
        throw new TypeError('Module is already loading.');
      return createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({
        step: 'translate',
        loader: this._loader,
        moduleName: name,
        moduleMetadata: options && options.metadata || {},
        moduleSource: source,
        moduleAddress: options && options.address
      })));
    },
    // 26.3.3.3
    'delete': function(name) {
      var loader = this._loader;
      delete loader.importPromises[name];
      delete loader.moduleRecords[name];
      return loader.modules[name] ? delete loader.modules[name] : false;
    },
    // 26.3.3.4 entries not implemented
    // 26.3.3.5
    get: function(key) {
      if (!this._loader.modules[key])
        return;
      return this._loader.modules[key].module;
    },
    // 26.3.3.7
    has: function(name) {
      return !!this._loader.modules[name];
    },
    // 26.3.3.8
    'import': function(name, parentName, parentAddress) {
      if (typeof parentName == 'object')
        parentName = parentName.name;

      // run normalize first
      var loaderObj = this;

      // added, see https://bugs.ecmascript.org/show_bug.cgi?id=2659
      return Promise.resolve(loaderObj.normalize(name, parentName))
      .then(function(name) {
        var loader = loaderObj._loader;

        if (loader.modules[name])
          return loader.modules[name].module;

        return loader.importPromises[name] || createImportPromise(loaderObj, name,
          loadModule(loader, name, {})
          .then(function(load) {
            delete loader.importPromises[name];
            return load.module.module;
          }));
      });
    },
    // 26.3.3.9 keys not implemented
    // 26.3.3.10
    load: function(name) {
      var loader = this._loader;
      if (loader.modules[name])
        return Promise.resolve();
      return loader.importPromises[name] || createImportPromise(this, name, new Promise(asyncStartLoadPartwayThrough({
        step: 'locate',
        loader: loader,
        moduleName: name,
        moduleMetadata: {},
        moduleSource: undefined,
        moduleAddress: undefined
      }))
      .then(function() {
        delete loader.importPromises[name];
      }));
    },
    // 26.3.3.11
    module: function(source, options) {
      var load = createLoad();
      load.address = options && options.address;
      var linkSet = createLinkSet(this._loader, load);
      var sourcePromise = Promise.resolve(source);
      var loader = this._loader;
      var p = linkSet.done.then(function() {
        return load.module.module;
      });
      proceedToTranslate(loader, load, sourcePromise);
      return p;
    },
    // 26.3.3.12
    newModule: function (obj) {
      if (typeof obj != 'object')
        throw new TypeError('Expected object');

      var m = new Module();

      var pNames = [];
      if (Object.getOwnPropertyNames && obj != null)
        pNames = Object.getOwnPropertyNames(obj);
      else
        for (var key in obj)
          pNames.push(key);

      for (var i = 0; i < pNames.length; i++) (function(key) {
        defineProperty(m, key, {
          configurable: false,
          enumerable: true,
          get: function () {
            return obj[key];
          },
          set: function() {
            throw new Error('Module exports cannot be changed externally.');
          }
        });
      })(pNames[i]);

      if (Object.freeze)
        Object.freeze(m);

      return m;
    },
    // 26.3.3.14
    set: function(name, module) {
      if (!(module instanceof Module))
        throw new TypeError('Loader.set(' + name + ', module) must be a module');
      this._loader.modules[name] = {
        module: module
      };
    },
    // 26.3.3.15 values not implemented
    // 26.3.3.16 @@iterator not implemented
    // 26.3.3.17 @@toStringTag not implemented

    // 26.3.3.18.1
    normalize: function(name, referrerName, referrerAddress) {},
    // 26.3.3.18.2
    locate: function(load) {
      return load.name;
    },
    // 26.3.3.18.3
    fetch: function(load) {
    },
    // 26.3.3.18.4
    translate: function(load) {
      return load.source;
    },
    // 26.3.3.18.5
    instantiate: function(load) {
    }
  };

  var _newModule = Loader.prototype.newModule;

/*
 * ES6 Module Declarative Linking Code
 */
  function link(linkSet, linkError) {

    var loader = linkSet.loader;

    if (!linkSet.loads.length)
      return;

    var loads = linkSet.loads.concat([]);

    for (var i = 0; i < loads.length; i++) {
      var load = loads[i];

      var module = doDynamicExecute(linkSet, load, linkError);
      if (!module)
        return;
      load.module = {
        name: load.name,
        module: module
      };
      load.status = 'linked';

      finishLoad(loader, load);
    }
  }

})();

var System;

  var fetchTextFromURL;
  if (typeof XMLHttpRequest != 'undefined') {
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      var xhr = new XMLHttpRequest();
      var sameDomain = true;
      var doTimeout = false;
      if (!('withCredentials' in xhr)) {
        // check if same domain
        var domainCheck = /^(\w+:)?\/\/([^\/]+)/.exec(url);
        if (domainCheck) {
          sameDomain = domainCheck[2] === window.location.host;
          if (domainCheck[1])
            sameDomain &= domainCheck[1] === window.location.protocol;
        }
      }
      if (!sameDomain && typeof XDomainRequest != 'undefined') {
        xhr = new XDomainRequest();
        xhr.onload = load;
        xhr.onerror = error;
        xhr.ontimeout = error;
        xhr.onprogress = function() {};
        xhr.timeout = 0;
        doTimeout = true;
      }
      function load() {
        fulfill(xhr.responseText);
      }
      function error() {
        reject(new Error('XHR error' + (xhr.status ? ' (' + xhr.status + (xhr.statusText ? ' ' + xhr.statusText  : '') + ')' : '') + ' loading ' + url));
      }

      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          // in Chrome on file:/// URLs, status is 0
          if (xhr.status == 0) {
            if (xhr.responseText) {
              load();
            }
            else {
              // when responseText is empty, wait for load or error event
              // to inform if it is a 404 or empty file
              xhr.addEventListener('error', error);
              xhr.addEventListener('load', load);
            }
          }
          else if (xhr.status === 200) {
            load();
          }
          else {
            error();
          }
        }
      };
      xhr.open("GET", url, true);

      if (xhr.setRequestHeader) {
        xhr.setRequestHeader('Accept', 'application/x-es-module, */*');
        // can set "authorization: true" to enable withCredentials only
        if (authorization) {
          if (typeof authorization == 'string')
            xhr.setRequestHeader('Authorization', authorization);
          xhr.withCredentials = true;
        }
      }

      if (doTimeout) {
        setTimeout(function() {
          xhr.send();
        }, 0);
      } else {
        xhr.send(null);
      }
    };
  }
  else if (typeof require != 'undefined' && typeof process != 'undefined') {
    var fs;
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      if (url.substr(0, 8) != 'file:///')
        throw new Error('Unable to fetch "' + url + '". Only file URLs of the form file:/// allowed running in Node.');
      fs = fs || require('fs');
      if (isWindows)
        url = url.replace(/\//g, '\\').substr(8);
      else
        url = url.substr(7);
      return fs.readFile(url, function(err, data) {
        if (err) {
          return reject(err);
        }
        else {
          // Strip Byte Order Mark out if it's the leading char
          var dataString = data + '';
          if (dataString[0] === '\ufeff')
            dataString = dataString.substr(1);

          fulfill(dataString);
        }
      });
    };
  }
  else if (typeof self != 'undefined' && typeof self.fetch != 'undefined') {
    fetchTextFromURL = function(url, authorization, fulfill, reject) {
      var opts = {
        headers: {'Accept': 'application/x-es-module, */*'}
      };

      if (authorization) {
        if (typeof authorization == 'string')
          opts.headers['Authorization'] = authorization;
        opts.credentials = 'include';
      }

      fetch(url, opts)
        .then(function (r) {
          if (r.ok) {
            return r.text();
          } else {
            throw new Error('Fetch error: ' + r.status + ' ' + r.statusText);
          }
        })
        .then(fulfill, reject);
    }
  }
  else {
    throw new TypeError('No environment fetch API available.');
  }
/*
 * Traceur, Babel and TypeScript transpile hook for Loader
 */
var transpile = (function() {

  // use Traceur by default
  Loader.prototype.transpiler = 'traceur';

  function transpile(load) {
    var self = this;

    return Promise.resolve(__global[self.transpiler == 'typescript' ? 'ts' : self.transpiler]
        || (self.pluginLoader || self)['import'](self.transpiler))
    .then(function(transpiler) {
      if (transpiler.__useDefault)
        transpiler = transpiler['default'];

      var transpileFunction;
      if (transpiler.Compiler)
        transpileFunction = traceurTranspile;
      else if (transpiler.createLanguageService)
        transpileFunction = typescriptTranspile;
      else
        transpileFunction = babelTranspile;

      // note __moduleName will be part of the transformer meta in future when we have the spec for this
      return '(function(__moduleName){' + transpileFunction.call(self, load, transpiler) + '\n})("' + load.name + '");\n//# sourceURL=' + load.address + '!transpiled';
    });
  };

  function traceurTranspile(load, traceur) {
    var options = this.traceurOptions || {};
    options.modules = 'instantiate';
    options.script = false;
    if (options.sourceMaps === undefined)
      options.sourceMaps = 'inline';
    options.filename = load.address;
    options.inputSourceMap = load.metadata.sourceMap;
    options.moduleName = false;

    var compiler = new traceur.Compiler(options);

    return doTraceurCompile(load.source, compiler, options.filename);
  }
  function doTraceurCompile(source, compiler, filename) {
    try {
      return compiler.compile(source, filename);
    }
    catch(e) {
      // on older versions of traceur (<0.9.3), an array of errors is thrown
      // rather than a single error.
      if (e.length) {
        throw e[0];
      }
      throw e;
    }
  }

  function babelTranspile(load, babel) {
    var options = this.babelOptions || {};
    options.modules = 'system';
    if (options.sourceMap === undefined)
      options.sourceMap = 'inline';
    options.inputSourceMap = load.metadata.sourceMap;
    options.filename = load.address;
    options.code = true;
    options.ast = false;

    return babel.transform(load.source, options).code;
  }

  function typescriptTranspile(load, ts) {
    var options = this.typescriptOptions || {};
    options.target = options.target || ts.ScriptTarget.ES5;
    if (options.sourceMap === undefined)
      options.sourceMap = true;
    if (options.sourceMap && options.inlineSourceMap !== false)
      options.inlineSourceMap = true;

    options.module = ts.ModuleKind.System;

    return ts.transpile(load.source, options, load.address);
  }

  return transpile;
})();
// SystemJS Loader Class and Extension helpers
function SystemJSLoader() {
  Loader.call(this);

  this.paths = {};
  this._loader.paths = {};

  systemJSConstructor.call(this);
}

// inline Object.create-style class extension
function SystemProto() {};
SystemProto.prototype = Loader.prototype;
SystemJSLoader.prototype = new SystemProto();
SystemJSLoader.prototype.constructor = SystemJSLoader;

var systemJSConstructor;

function hook(name, hook) {
  SystemJSLoader.prototype[name] = hook(SystemJSLoader.prototype[name] || function() {});
}
function hookConstructor(hook) {
  systemJSConstructor = hook(systemJSConstructor || function() {});
}


var absURLRegEx = /^[^\/]+:\/\//;
function isAbsolute(name) {
  return name.match(absURLRegEx);
}
function isRel(name) {
  return (name[0] == '.' && (!name[1] || name[1] == '/' || name[1] == '.')) || name[0] == '/';
}
function isPlain(name) {
  return !isRel(name) && !isAbsolute(name);
}

var baseURIObj = new URL(baseURI);

function urlResolve(name, parent) {
  // url resolution shortpaths
  if (name[0] == '.') {
    // dot-relative url normalization
    if (name[1] == '/' && name[2] != '.')
      return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name.substr(2);
  }
  else if (name[0] != '/' && name.indexOf(':') == -1) {
    // plain parent normalization
    return (parent && parent.substr(0, parent.lastIndexOf('/') + 1) || baseURI) + name;
  }

  return new URL(name, parent && parent.replace(/#/g, '%05') || baseURIObj).href.replace(/%05/g, '#');
}

// NB no specification provided for System.paths, used ideas discussed in https://github.com/jorendorff/js-loaders/issues/25
function applyPaths(loader, name) {
  // most specific (most number of slashes in path) match wins
  var pathMatch = '', wildcard, maxWildcardPrefixLen = 0;

  var paths = loader.paths;
  var pathsCache = loader._loader.paths;

  // check to see if we have a paths entry
  for (var p in paths) {
    if (paths.hasOwnProperty && !paths.hasOwnProperty(p))
      continue;

    // paths sanitization
    var path = paths[p];
    if (path !== pathsCache[p])
      path = paths[p] = pathsCache[p] = urlResolve(paths[p], isRel(paths[p]) ? baseURI : loader.baseURL);

    // exact path match
    if (p.indexOf('*') === -1) {
      if (name == p)
        return paths[p];
      
      // support trailing / in paths rules
      else if (name.substr(0, p.length - 1) == p.substr(0, p.length - 1) && (name.length < p.length || name[p.length - 1] == p[p.length - 1]) && (paths[p][paths[p].length - 1] == '/' || paths[p] == '')) {
        return paths[p].substr(0, paths[p].length - 1) + (name.length > p.length ? (paths[p] && '/' || '') + name.substr(p.length) : '');
      }
    }
    // wildcard path match
    else {
      var pathParts = p.split('*');
      if (pathParts.length > 2)
        throw new TypeError('Only one wildcard in a path is permitted');

      var wildcardPrefixLen = pathParts[0].length;
      if (wildcardPrefixLen >= maxWildcardPrefixLen &&
          name.substr(0, pathParts[0].length) == pathParts[0] &&
          name.substr(name.length - pathParts[1].length) == pathParts[1]) {
            maxWildcardPrefixLen = wildcardPrefixLen;
            pathMatch = p;
            wildcard = name.substr(pathParts[0].length, name.length - pathParts[1].length - pathParts[0].length);
          }
    }
  }

  var outPath = paths[pathMatch];
  if (typeof wildcard == 'string')
    outPath = outPath.replace('*', wildcard);

  return outPath;
}

function dedupe(deps) {
  var newDeps = [];
  for (var i = 0, l = deps.length; i < l; i++)
    if (indexOf.call(newDeps, deps[i]) == -1)
      newDeps.push(deps[i])
  return newDeps;
}

function group(deps) {
  var names = [];
  var indices = [];
  for (var i = 0, l = deps.length; i < l; i++) {
    var index = indexOf.call(names, deps[i]);
    if (index === -1) {
      names.push(deps[i]);
      indices.push([i]);
    }
    else {
      indices[index].push(i);
    }
  }
  return { names: names, indices: indices };
}

var getOwnPropertyDescriptor = true;
try {
  Object.getOwnPropertyDescriptor({ a: 0 }, 'a');
}
catch(e) {
  getOwnPropertyDescriptor = false;
}

// converts any module.exports object into an object ready for SystemJS.newModule
function getESModule(exports) {
  var esModule = {};
  // don't trigger getters/setters in environments that support them
  if ((typeof exports == 'object' || typeof exports == 'function') && exports !== __global) {
      if (getOwnPropertyDescriptor) {
        for (var p in exports) {
          // The default property is copied to esModule later on
          if (p === 'default')
            continue;
          defineOrCopyProperty(esModule, exports, p);
        }
      }
      else {
        extend(esModule, exports);
      }
  }
  esModule['default'] = exports;
  defineProperty(esModule, '__useDefault', {
    value: true
  });
  return esModule;
}

function defineOrCopyProperty(targetObj, sourceObj, propName) {
  try {
    var d;
    if (d = Object.getOwnPropertyDescriptor(sourceObj, propName))
      defineProperty(targetObj, propName, d);
  }
  catch (ex) {
    // Object.getOwnPropertyDescriptor threw an exception, fall back to normal set property
    // we dont need hasOwnProperty here because getOwnPropertyDescriptor would have returned undefined above
    targetObj[propName] = sourceObj[propName];
    return false;
  }
}

function extend(a, b, prepend) {
  var hasOwnProperty = b && b.hasOwnProperty;
  for (var p in b) {
    if (hasOwnProperty && !b.hasOwnProperty(p))
      continue;
    if (!prepend || !(p in a))
      a[p] = b[p];
  }
  return a;
}

// meta first-level extends where:
// array + array appends
// object + object extends
// other properties replace
function extendMeta(a, b, prepend) {
  var hasOwnProperty = b && b.hasOwnProperty;
  for (var p in b) {
    if (hasOwnProperty && !b.hasOwnProperty(p))
      continue;
    var val = b[p];
    if (!(p in a))
      a[p] = val;
    else if (val instanceof Array && a[p] instanceof Array)
      a[p] = [].concat(prepend ? val : a[p]).concat(prepend ? a[p] : val);
    else if (typeof val == 'object' && val !== null && typeof a[p] == 'object')
      a[p] = extend(extend({}, a[p]), val, prepend);
    else if (!prepend)
      a[p] = val;
  }
}

function extendPkgConfig(pkgCfgA, pkgCfgB, pkgName, loader, warnInvalidProperties) {
  for (var prop in pkgCfgB) {
    if (indexOf.call(['main', 'format', 'defaultExtension', 'basePath'], prop) != -1) {
      pkgCfgA[prop] = pkgCfgB[prop];
    }
    else if (prop == 'map') {
      extend(pkgCfgA.map = pkgCfgA.map || {}, pkgCfgB.map);
    }
    else if (prop == 'meta') {
      extend(pkgCfgA.meta = pkgCfgA.meta || {}, pkgCfgB.meta);
    }
    else if (prop == 'depCache') {
      for (var d in pkgCfgB.depCache) {
        var dNormalized;

        if (d.substr(0, 2) == './')
          dNormalized = pkgName + '/' + d.substr(2);
        else
          dNormalized = coreResolve.call(loader, d);
        loader.depCache[dNormalized] = (loader.depCache[dNormalized] || []).concat(pkgCfgB.depCache[d]);
      }
    }
    else if (warnInvalidProperties && indexOf.call(['browserConfig', 'nodeConfig', 'devConfig', 'productionConfig'], prop) == -1 && 
        (!pkgCfgB.hasOwnProperty || pkgCfgB.hasOwnProperty(prop))) {
      warn.call(loader, '"' + prop + '" is not a valid package configuration option in package ' + pkgName);
    }
  }
}

// deeply-merge (to first level) config with any existing package config
function setPkgConfig(loader, pkgName, cfg, prependConfig) {
  var pkg;

  // first package is config by reference for fast path, cloned after that
  if (!loader.packages[pkgName]) {
    pkg = loader.packages[pkgName] = cfg;
  }
  else {
    var basePkg = loader.packages[pkgName];
    pkg = loader.packages[pkgName] = {};

    extendPkgConfig(pkg, prependConfig ? cfg : basePkg, pkgName, loader, prependConfig);
    extendPkgConfig(pkg, prependConfig ? basePkg : cfg, pkgName, loader, !prependConfig);
  }
  
  // main object becomes main map
  if (typeof pkg.main == 'object') {
    pkg.map = pkg.map || {};
    pkg.map['./@main'] = pkg.main;
    pkg.main['default'] = pkg.main['default'] || './';
    pkg.main = '@main';
  }

  return pkg;
}

function warn(msg) {
  if (this.warnings && typeof console != 'undefined' && console.warn)
    console.warn(msg);
}
// we define a __exec for globally-scoped execution
// used by module format implementations
var __exec;

(function() {

  var hasBtoa = typeof btoa != 'undefined';

  function getSource(load, wrap) {
    var lastLineIndex = load.source.lastIndexOf('\n');

    // wrap ES formats with a System closure for System global encapsulation
    if (load.metadata.format == 'global')
      wrap = false;

    var sourceMap = load.metadata.sourceMap;
    if (sourceMap) {
      if (typeof sourceMap != 'object')
        throw new TypeError('load.metadata.sourceMap must be set to an object.');

      sourceMap = JSON.stringify(sourceMap);
    }

    return (wrap ? '(function(System, SystemJS) {' : '') + load.source + (wrap ? '\n})(System, System);' : '')
        // adds the sourceURL comment if not already present
        + (load.source.substr(lastLineIndex, 15) != '\n//# sourceURL=' 
          ? '\n//# sourceURL=' + load.address + (sourceMap ? '!transpiled' : '') : '')
        // add sourceMappingURL if load.metadata.sourceMap is set
        + (sourceMap && hasBtoa && '\n//# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(sourceMap))) || '');
  }

  var curLoad;

  // System.register, System.registerDynamic, AMD define pipeline
  // if currently evalling code here, immediately reduce the registered entry against the load record
  hook('pushRegister_', function() {
    return function(register) {
      if (!curLoad)
        return false;

      this.reduceRegister_(curLoad, register);
      return true;
    };
  });

  // System clobbering protection (mostly for Traceur)
  var curSystem;
  var callCounter = 0;
  function preExec(loader, load) {
    curLoad = load;
    if (callCounter++ == 0)
      curSystem = __global.System;
    __global.System = __global.SystemJS = loader; 
  }
  function postExec() {
    if (--callCounter == 0)
      __global.System = __global.SystemJS = curSystem;
    curLoad = undefined;
  }

  var nwjs = typeof process != 'undefined' && process.versions && process.versions['node-webkit'];
  var vm;
  __exec = function(load) {
    if (!load.source)
      return;
    if ((load.metadata.integrity || load.metadata.nonce) && supportsScriptExec)
      return scriptExec.call(this, load);
    try {
      preExec(this, load);
      curLoad = load;
      // global scoped eval for node (avoids require scope leak)
      if (this._nodeRequire && !nwjs) {
        vm = vm || this._nodeRequire('vm');
        vm.runInThisContext(getSource(load, true), { filename: load.address + (load.metadata.sourceMap ? '!transpiled' : '') });
      }
      else {
        (0, eval)(getSource(load, true));
      }
      postExec();
    }
    catch(e) {
      postExec(); 
      throw addToError(e, 'Evaluating ' + load.address);
    }
  };

  var supportsScriptExec = false;
  if (isBrowser && typeof document != 'undefined' && document.getElementsByTagName) {
    var scripts = document.getElementsByTagName('script');
    $__curScript = scripts[scripts.length - 1];

    if (!(window.chrome && window.chrome.extension || navigator.userAgent.match(/^Node\.js/)))
      supportsScriptExec = true;
  }

  // script execution via injecting a script tag into the page
  // this allows CSP integrity and nonce to be set for CSP environments
  var head;
  function scriptExec(load) {
    if (!head)
      head = document.head || document.body || document.documentElement;

    var script = document.createElement('script');
    script.text = getSource(load, false);
    var onerror = window.onerror;
    var e;
    window.onerror = function(_e) {
      e = addToError(_e, 'Evaluating ' + load.address);
      if (onerror)
        onerror.apply(this, arguments);
    }
    preExec(this, load);

    if (load.metadata.integrity)
      script.setAttribute('integrity', load.metadata.integrity);
    if (load.metadata.nonce)
      script.setAttribute('nonce', load.metadata.nonce);

    head.appendChild(script);
    head.removeChild(script);
    postExec();
    window.onerror = onerror;
    if (e)
      throw e;
  }

})();
function readMemberExpression(p, value) {
  var pParts = p.split('.');
  while (pParts.length)
    value = value[pParts.shift()];
  return value;
}

function getMapMatch(map, name) {
  var bestMatch, bestMatchLength = 0;

  for (var p in map) {
    if (name.substr(0, p.length) == p && (name.length == p.length || name[p.length] == '/')) {
      var curMatchLength = p.split('/').length;
      if (curMatchLength <= bestMatchLength)
        continue;
      bestMatch = p;
      bestMatchLength = curMatchLength;
    }
  }

  return bestMatch;
}

function prepareBaseURL(loader) {
  // ensure baseURl is fully normalized
  if (this._loader.baseURL !== this.baseURL) {
    if (this.baseURL[this.baseURL.length - 1] != '/')
      this.baseURL += '/';
    
    this._loader.baseURL = this.baseURL = new URL(this.baseURL, baseURIObj).href;
  }
}

var envModule;
function setProduction(isProduction, isBuilder) {
  this.set('@system-env', envModule = this.newModule({
    browser: isBrowser,
    node: !!this._nodeRequire,
    production: !isBuilder && isProduction,
    dev: isBuilder || !isProduction,
    build: isBuilder,
    'default': true
  }));
}

hookConstructor(function(constructor) {
  return function() {
    constructor.call(this);

    // support baseURL
    this.baseURL = baseURI;

    // support map and paths
    this.map = {};

    // global behaviour flags
    this.warnings = false;
    this.defaultJSExtensions = false;
    this.pluginFirst = false;
    this.loaderErrorStack = false;

    // by default load ".json" files as json
    // leading * meta doesn't need normalization
    // NB add this in next breaking release
    // this.meta['*.json'] = { format: 'json' };

    // support the empty module, as a concept
    this.set('@empty', this.newModule({}));

    setProduction.call(this, false, false);
  };
});

// include the node require since we're overriding it
if (typeof require != 'undefined' && typeof process != 'undefined' && !process.browser)
  SystemJSLoader.prototype._nodeRequire = require;

/*
  Core SystemJS Normalization

  If a name is relative, we apply URL normalization to the page
  If a name is an absolute URL, we leave it as-is

  Plain names (neither of the above) run through the map and paths
  normalization phases.

  The paths normalization phase applies last (paths extension), which
  defines the `decanonicalize` function and normalizes everything into
  a URL.
 */

function getNodeModule(name) {
  if (!isPlain(name))
    throw new Error('Node module ' + name + ' can\'t be loaded as it is not a package require.');

  var nodePath = this._nodeRequire('path');
  // try to load from node_modules
  var module;
  try {
    module = this._nodeRequire(nodePath.resolve(process.cwd(), 'node_modules', name));
  }
  catch(e) {
    // fall back to direct require (in theory this is core modules only, which should really be filtered)
    if (e.code == 'MODULE_NOT_FOUND')
      module = this._nodeRequire(name);
  }
  return module;
}

function coreResolve(name, parentName) {
  // standard URL resolution
  if (isRel(name))
    return urlResolve(name, parentName);
  else if (isAbsolute(name))
    return name;

  // plain names not starting with './', '://' and '/' go through custom resolution
  var mapMatch = getMapMatch(this.map, name);

  if (mapMatch) {
    name = this.map[mapMatch] + name.substr(mapMatch.length);

    if (isRel(name))
      return urlResolve(name);
    else if (isAbsolute(name))
      return name;
  }

  if (this.has(name))
    return name;
  // dynamically load node-core modules when requiring `@node/fs` for example
  if (name.substr(0, 6) == '@node/') {
    if (!this._nodeRequire)
      throw new TypeError('Error loading ' + name + '. Can only load node core modules in Node.');
    this.set(name, this.newModule(getESModule(getNodeModule.call(this, name.substr(6)))));
    return name;
  }

  // prepare the baseURL to ensure it is normalized
  prepareBaseURL.call(this);

  return applyPaths(this, name) || this.baseURL + name;
}

hook('normalize', function(normalize) {
  return function(name, parentName, skipExt) {
    var resolved = coreResolve.call(this, name, parentName);
    if (this.defaultJSExtensions && !skipExt && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))
      resolved += '.js';
    return resolved;
  };
});

// percent encode just '#' in urls if using HTTP requests
var httpRequest = typeof XMLHttpRequest != 'undefined';
hook('locate', function(locate) {
  return function(load) {
    return Promise.resolve(locate.call(this, load))
    .then(function(address) {
      if (httpRequest)
        return address.replace(/#/g, '%23');
      return address;
    });
  };
});

/*
 * Fetch with authorization
 */
hook('fetch', function() {
  return function(load) {
    return new Promise(function(resolve, reject) {
      fetchTextFromURL(load.address, load.metadata.authorization, resolve, reject);
    });
  };
});

/*
  __useDefault
  
  When a module object looks like:
  newModule(
    __useDefault: true,
    default: 'some-module'
  })

  Then importing that module provides the 'some-module'
  result directly instead of the full module.

  Useful for eg module.exports = function() {}
*/
hook('import', function(systemImport) {
  return function(name, parentName, parentAddress) {
    if (parentName && parentName.name)
      warn.call(this, 'SystemJS.import(name, { name: parentName }) is deprecated for SystemJS.import(name, parentName), while importing ' + name + ' from ' + parentName.name);
    return systemImport.call(this, name, parentName, parentAddress).then(function(module) {
      return module.__useDefault ? module['default'] : module;
    });
  };
});

/*
 * Allow format: 'detect' meta to enable format detection
 */
hook('translate', function(systemTranslate) {
  return function(load) {
    if (load.metadata.format == 'detect')
      load.metadata.format = undefined;
    return systemTranslate.apply(this, arguments);
  };
});


/*
 * JSON format support
 *
 * Supports loading JSON files as a module format itself
 *
 * Usage:
 *
 * SystemJS.config({
 *   meta: {
 *     '*.json': { format: 'json' }
 *   }
 * });
 *
 * Module is returned as if written:
 *
 * export default {JSON}
 *
 * No named exports are provided
 *
 * Files ending in ".json" are treated as json automatically by SystemJS
 */
hook('instantiate', function(instantiate) {
  return function(load) {
    if (load.metadata.format == 'json' && !this.builder) {
      var entry = load.metadata.entry = createEntry();
      entry.deps = [];
      entry.execute = function() {
        try {
          return JSON.parse(load.source);
        }
        catch(e) {
          throw new Error("Invalid JSON file " + load.name);
        }
      };
    }
  };
})

/*
 Extend config merging one deep only

  loader.config({
    some: 'random',
    config: 'here',
    deep: {
      config: { too: 'too' }
    }
  });

  <=>

  loader.some = 'random';
  loader.config = 'here'
  loader.deep = loader.deep || {};
  loader.deep.config = { too: 'too' };


  Normalizes meta and package configs allowing for:

  SystemJS.config({
    meta: {
      './index.js': {}
    }
  });

  To become

  SystemJS.meta['https://thissite.com/index.js'] = {};

  For easy normalization canonicalization with latest URL support.

*/
function envSet(loader, cfg, envCallback) {
  if (envModule.browser && cfg.browserConfig)
    envCallback(cfg.browserConfig);
  if (envModule.node && cfg.nodeConfig)
    envCallback(cfg.nodeConfig);
  if (envModule.dev && cfg.devConfig)
    envCallback(cfg.devConfig);
  if (envModule.build && cfg.buildConfig)
    envCallback(cfg.buildConfig);
  if (envModule.production && cfg.productionConfig)
    envCallback(cfg.productionConfig);
}

SystemJSLoader.prototype.getConfig = function(name) {
  var cfg = {};
  var loader = this;
  for (var p in loader) {
    if (loader.hasOwnProperty && !loader.hasOwnProperty(p) || p in SystemJSLoader.prototype)
      continue;
    if (indexOf.call(['_loader', 'amdDefine', 'amdRequire', 'defined', 'failed', 'version'], p) == -1)
      cfg[p] = loader[p];
  }
  cfg.production = envModule.production;
  return cfg;
};

var curCurScript;
SystemJSLoader.prototype.config = function(cfg, isEnvConfig) {
  var loader = this;

  if ('loaderErrorStack' in cfg) {
    curCurScript = $__curScript;
    if (cfg.loaderErrorStack)
      $__curScript = undefined;
    else
      $__curScript = curCurScript;
  }

  if ('warnings' in cfg)
    loader.warnings = cfg.warnings;

  // transpiler deprecation path
  if (cfg.transpilerRuntime === false)
    loader._loader.loadedTranspilerRuntime = true;

  if ('production' in cfg || 'build' in cfg)
    setProduction.call(loader, !!cfg.production, !!(cfg.build || envModule && envModule.build));

  if (!isEnvConfig) {
    // if using nodeConfig / browserConfig / productionConfig, take baseURL from there
    // these exceptions will be unnecessary when we can properly implement config queuings
    var baseURL;
    envSet(loader, cfg, function(cfg) {
      baseURL = baseURL || cfg.baseURL;
    });
    baseURL = baseURL || cfg.baseURL;

    // always configure baseURL first
    if (baseURL) {
      var hasConfig = false;
      function checkHasConfig(obj) {
        for (var p in obj)
          if (obj.hasOwnProperty(p))
            return true;
      }
      if (checkHasConfig(loader.packages) || checkHasConfig(loader.meta) || checkHasConfig(loader.depCache) || checkHasConfig(loader.bundles) || checkHasConfig(loader.packageConfigPaths))
        throw new TypeError('Incorrect configuration order. The baseURL must be configured with the first SystemJS.config call.');

      this.baseURL = baseURL;
      prepareBaseURL.call(this);
    }

    if (cfg.paths)
      extend(loader.paths, cfg.paths);

    envSet(loader, cfg, function(cfg) {
      if (cfg.paths)
        extend(loader.paths, cfg.paths);
    });

    // warn on wildcard path deprecations
    if (this.warnings) {
      for (var p in loader.paths)
        if (p.indexOf('*') != -1)
          warn.call(loader, 'Paths configuration "' + p + '" -> "' + loader.paths[p] + '" uses wildcards which are being deprecated for simpler trailing "/" folder paths.');
    }
  }

  if (cfg.defaultJSExtensions) {
    loader.defaultJSExtensions = cfg.defaultJSExtensions;
    warn.call(loader, 'The defaultJSExtensions configuration option is deprecated, use packages configuration instead.');
  }

  if (cfg.pluginFirst)
    loader.pluginFirst = cfg.pluginFirst;

  if (cfg.map) {
    var objMaps = '';
    for (var p in cfg.map) {
      var v = cfg.map[p];

      // object map backwards-compat into packages configuration
      if (typeof v !== 'string') {
        objMaps += (objMaps.length ? ', ' : '') + '"' + p + '"';

        var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';
        var prop = loader.decanonicalize(p);
        if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')
          prop = prop.substr(0, prop.length - 3);

        // if a package main, revert it
        var pkgMatch = '';
        for (var pkg in loader.packages) {
          if (prop.substr(0, pkg.length) == pkg 
              && (!prop[pkg.length] || prop[pkg.length] == '/') 
              && pkgMatch.split('/').length < pkg.split('/').length)
            pkgMatch = pkg;
        }
        if (pkgMatch && loader.packages[pkgMatch].main)
          prop = prop.substr(0, prop.length - loader.packages[pkgMatch].main.length - 1);

        var pkg = loader.packages[prop] = loader.packages[prop] || {};
        pkg.map = v;
      }
      else {
        loader.map[p] = v;
      }
    }
    if (objMaps)
      warn.call(loader, 'The map configuration for ' + objMaps + ' uses object submaps, which is deprecated in global map.\nUpdate this to use package contextual map with configs like SystemJS.config({ packages: { "' + p + '": { map: {...} } } }).');
  }

  if (cfg.packageConfigPaths) {
    var packageConfigPaths = [];
    for (var i = 0; i < cfg.packageConfigPaths.length; i++) {
      var path = cfg.packageConfigPaths[i];
      var packageLength = Math.max(path.lastIndexOf('*') + 1, path.lastIndexOf('/'));
      var normalized = coreResolve.call(loader, path.substr(0, packageLength));
      packageConfigPaths[i] = normalized + path.substr(packageLength);
    }
    loader.packageConfigPaths = packageConfigPaths;
  }

  if (cfg.bundles) {
    for (var p in cfg.bundles) {
      var bundle = [];
      for (var i = 0; i < cfg.bundles[p].length; i++) {
        var defaultJSExtension = loader.defaultJSExtensions && cfg.bundles[p][i].substr(cfg.bundles[p][i].length - 3, 3) != '.js';
        var normalizedBundleDep = loader.decanonicalize(cfg.bundles[p][i]);
        if (defaultJSExtension && normalizedBundleDep.substr(normalizedBundleDep.length - 3, 3) == '.js')
          normalizedBundleDep = normalizedBundleDep.substr(0, normalizedBundleDep.length - 3);
        bundle.push(normalizedBundleDep);
      }
      loader.bundles[p] = bundle;
    }
  }

  if (cfg.packages) {
    for (var p in cfg.packages) {
      if (p.match(/^([^\/]+:)?\/\/$/))
        throw new TypeError('"' + p + '" is not a valid package name.');

      var prop = coreResolve.call(loader, p);

      // allow trailing slash in packages
      if (prop[prop.length - 1] == '/')
        prop = prop.substr(0, prop.length - 1);

      setPkgConfig(loader, prop, cfg.packages[p], false);
    }
  }

  for (var c in cfg) {
    var v = cfg[c];

    if (indexOf.call(['baseURL', 'map', 'packages', 'bundles', 'paths', 'warnings', 'packageConfigPaths', 
          'loaderErrorStack', 'browserConfig', 'nodeConfig', 'devConfig', 'buildConfig', 'productionConfig'], c) != -1)
      continue;

    if (typeof v != 'object' || v instanceof Array) {
      loader[c] = v;
    }
    else {
      loader[c] = loader[c] || {};

      for (var p in v) {
        // base-level wildcard meta does not normalize to retain catch-all quality
        if (c == 'meta' && p[0] == '*') {
          extend(loader[c][p] = loader[c][p] || {}, v[p]);
        }
        else if (c == 'meta') {
          // meta can go through global map, with defaultJSExtensions adding
          var resolved = coreResolve.call(loader, p);
          if (loader.defaultJSExtensions && resolved.substr(resolved.length - 3, 3) != '.js' && !isPlain(resolved))
            resolved += '.js';
          extend(loader[c][resolved] = loader[c][resolved] || {}, v[p]);
        }
        else if (c == 'depCache') {
          var defaultJSExtension = loader.defaultJSExtensions && p.substr(p.length - 3, 3) != '.js';
          var prop = loader.decanonicalize(p);
          if (defaultJSExtension && prop.substr(prop.length - 3, 3) == '.js')
            prop = prop.substr(0, prop.length - 3);
          loader[c][prop] = [].concat(v[p]);
        }
        else {
          loader[c][p] = v[p];
        }
      }
    }
  }

  envSet(loader, cfg, function(cfg) {
    loader.config(cfg, true);
  });
};/*
 * Package Configuration Extension
 *
 * Example:
 *
 * SystemJS.packages = {
 *   jquery: {
 *     main: 'index.js', // when not set, package name is requested directly
 *     format: 'amd',
 *     defaultExtension: 'ts', // defaults to 'js', can be set to false
 *     modules: {
 *       '*.ts': {
 *         loader: 'typescript'
 *       },
 *       'vendor/sizzle.js': {
 *         format: 'global'
 *       }
 *     },
 *     map: {
 *        // map internal require('sizzle') to local require('./vendor/sizzle')
 *        sizzle: './vendor/sizzle.js',
 *        // map any internal or external require of 'jquery/vendor/another' to 'another/index.js'
 *        './vendor/another.js': './another/index.js',
 *        // test.js / test -> lib/test.js
 *        './test.js': './lib/test.js',
 *
 *        // environment-specific map configurations
 *        './index.js': {
 *          '~browser': './index-node.js',
 *          './custom-condition.js|~export': './index-custom.js'
 *        }
 *     },
 *     // allows for setting package-prefixed depCache
 *     // keys are normalized module names relative to the package itself
 *     depCache: {
 *       // import 'package/index.js' loads in parallel package/lib/test.js,package/vendor/sizzle.js
 *       './index.js': ['./test'],
 *       './test.js': ['external-dep'],
 *       'external-dep/path.js': ['./another.js']
 *     }
 *   }
 * };
 *
 * Then:
 *   import 'jquery'                       -> jquery/index.js
 *   import 'jquery/submodule'             -> jquery/submodule.js
 *   import 'jquery/submodule.ts'          -> jquery/submodule.ts loaded as typescript
 *   import 'jquery/vendor/another'        -> another/index.js
 *
 * Detailed Behaviours
 * - main can have a leading "./" can be added optionally
 * - map and defaultExtension are applied to the main
 * - defaultExtension adds the extension only if the exact extension is not present
 * - defaultJSExtensions applies after map when defaultExtension is not set
 * - if a meta value is available for a module, map and defaultExtension are skipped
 * - like global map, package map also applies to subpaths (sizzle/x, ./vendor/another/sub)
 * - condition module map is '@env' module in package or '@system-env' globally
 * - map targets support conditional interpolation ('./x': './x.#{|env}.js')
 * - internal package map targets cannot use boolean conditionals
 *
 * Package Configuration Loading
 *
 * Not all packages may already have their configuration present in the System config
 * For these cases, a list of packageConfigPaths can be provided, which when matched against
 * a request, will first request a ".json" file by the package name to derive the package
 * configuration from. This allows dynamic loading of non-predetermined code, a key use
 * case in SystemJS.
 *
 * Example:
 *
 *   SystemJS.packageConfigPaths = ['packages/test/package.json', 'packages/*.json'];
 *
 *   // will first request 'packages/new-package/package.json' for the package config
 *   // before completing the package request to 'packages/new-package/path'
 *   SystemJS.import('packages/new-package/path');
 *
 *   // will first request 'packages/test/package.json' before the main
 *   SystemJS.import('packages/test');
 *
 * When a package matches packageConfigPaths, it will always send a config request for
 * the package configuration.
 * The package name itself is taken to be the match up to and including the last wildcard
 * or trailing slash.
 * The most specific package config path will be used.
 * Any existing package configurations for the package will deeply merge with the
 * package config, with the existing package configurations taking preference.
 * To opt-out of the package configuration request for a package that matches
 * packageConfigPaths, use the { configured: true } package config option.
 *
 */
(function() {

  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.packages = {};
      this.packageConfigPaths = [];
    };
  });

  function getPackage(loader, normalized) {
    // use most specific package
    var curPkg, curPkgLen = 0, pkgLen;
    for (var p in loader.packages) {
      if (normalized.substr(0, p.length) === p && (normalized.length === p.length || normalized[p.length] === '/')) {
        pkgLen = p.split('/').length;
        if (pkgLen > curPkgLen) {
          curPkg = p;
          curPkgLen = pkgLen;
        }
      }
    }
    return curPkg;
  }

  function addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions) {
    // don't apply extensions to folders or if defaultExtension = false
    if (!subPath || subPath[subPath.length - 1] == '/' || skipExtensions || pkg.defaultExtension === false)
      return subPath;

    var metaMatch = false;

    // exact meta or meta with any content after the last wildcard skips extension
    if (pkg.meta)
      getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {
        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)
          return metaMatch = true;
      });

    // exact global meta or meta with any content after the last wildcard skips extension
    if (!metaMatch && loader.meta)
      getMetaMatches(loader.meta, pkgName + '/' + subPath, function(metaPattern, matchMeta, matchDepth) {
        if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1)
          return metaMatch = true;
      });

    if (metaMatch)
      return subPath;

    // work out what the defaultExtension is and add if not there already
    // NB reconsider if default should really be ".js"?
    var defaultExtension = '.' + (pkg.defaultExtension || 'js');
    if (subPath.substr(subPath.length - defaultExtension.length) != defaultExtension)
      return subPath + defaultExtension;
    else
      return subPath;
  }

  function applyPackageConfigSync(loader, pkg, pkgName, subPath, skipExtensions) {
    // main
    if (!subPath) {
      if (pkg.main)
        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;
      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')
      else
        // NB can add a default package main convention here when defaultJSExtensions is deprecated
        // if it becomes internal to the package then it would no longer be an exit path
        return pkgName + (loader.defaultJSExtensions ? '.js' : '');
    }

    // map config checking without then with extensions
    if (pkg.map) {
      var mapPath = './' + subPath;

      var mapMatch = getMapMatch(pkg.map, mapPath);

      // we then check map with the default extension adding
      if (!mapMatch) {
        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
        if (mapPath != './' + subPath)
          mapMatch = getMapMatch(pkg.map, mapPath);
      }
      if (mapMatch) {
        var mapped = doMapSync(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions);
        if (mapped)
          return mapped;
      }
    }

    // normal package resolution
    return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
  }

  function validMapping(mapMatch, mapped, pkgName, path) {
    // disallow internal to subpath maps
    if (mapMatch == '.')
      throw new Error('Package ' + pkgName + ' has a map entry for "." which is not permitted.');
    
    // allow internal ./x -> ./x/y or ./x/ -> ./x/y recursive maps
    // but only if the path is exactly ./x and not ./x/z
    if (mapped.substr(0, mapMatch.length) == mapMatch && path.length > mapMatch.length)
      return false;

    return true;
  }

  function doMapSync(loader, pkg, pkgName, mapMatch, path, skipExtensions) {
    if (path[path.length - 1] == '/')
      path = path.substr(0, path.length - 1);
    var mapped = pkg.map[mapMatch];

    if (typeof mapped == 'object')
      throw new Error('Synchronous conditional normalization not supported sync normalizing ' + mapMatch + ' in ' + pkgName);

    if (!validMapping(mapMatch, mapped, pkgName, path) || typeof mapped != 'string')
      return;

    // package map to main / base-level
    if (mapped == '.')
      mapped = pkgName;

    // internal package map
    else if (mapped.substr(0, 2) == './')
      return pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions);
    
    // external map reference
    return loader.normalizeSync(mapped + path.substr(mapMatch.length), pkgName + '/');
  }

  function applyPackageConfig(loader, pkg, pkgName, subPath, skipExtensions) {
    // main
    if (!subPath) {
      if (pkg.main)
        subPath = pkg.main.substr(0, 2) == './' ? pkg.main.substr(2) : pkg.main;
      // also no submap if name is package itself (import 'pkg' -> 'path/to/pkg.js')
      else
        // NB can add a default package main convention here when defaultJSExtensions is deprecated
        // if it becomes internal to the package then it would no longer be an exit path
        return Promise.resolve(pkgName + (loader.defaultJSExtensions ? '.js' : ''));
    }

    // map config checking without then with extensions
    var mapPath, mapMatch;

    if (pkg.map) {
      mapPath = './' + subPath;
      mapMatch = getMapMatch(pkg.map, mapPath);

      // we then check map with the default extension adding
      if (!mapMatch) {
        mapPath = './' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions);
        if (mapPath != './' + subPath)
          mapMatch = getMapMatch(pkg.map, mapPath);
      }
    }

    return (mapMatch ? doMap(loader, pkg, pkgName, mapMatch, mapPath, skipExtensions) : Promise.resolve())
    .then(function(mapped) {
      if (mapped)
        return Promise.resolve(mapped);

      // normal package resolution / fallback resolution for no conditional match
      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, subPath, skipExtensions));
    });
  }

  function doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions) {
    // NB the interpolation cases should strictly skip subsequent interpolation
    // package map to main / base-level
    if (mapped == '.')
      mapped = pkgName;
    
    // internal package map
    else if (mapped.substr(0, 2) == './')
      return Promise.resolve(pkgName + '/' + addDefaultExtension(loader, pkg, pkgName, mapped.substr(2) + path.substr(mapMatch.length), skipExtensions))
      .then(function(name) {
        return interpolateConditional.call(loader, name, pkgName + '/');
      });
    
    // external map reference
    return loader.normalize(mapped + path.substr(mapMatch.length), pkgName + '/');
  }

  function doMap(loader, pkg, pkgName, mapMatch, path, skipExtensions) {
    if (path[path.length - 1] == '/')
      path = path.substr(0, path.length - 1);

    var mapped = pkg.map[mapMatch];

    if (typeof mapped == 'string') {
      if (!validMapping(mapMatch, mapped, pkgName, path))
        return Promise.resolve();
      return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);
    }

    // we use a special conditional syntax to allow the builder to handle conditional branch points further
    if (loader.builder)
      return Promise.resolve(pkgName + '/#:' + path);

    // we load all conditions upfront
    var conditionPromises = [];
    var conditions = [];
    for (var e in mapped) {
      var c = parseCondition(e);
      conditions.push({
        condition: c,
        map: mapped[e]
      });
      conditionPromises.push(loader['import'](c.module, pkgName));
    }

    // map object -> conditional map
    return Promise.all(conditionPromises)
    .then(function(conditionValues) {
      // first map condition to match is used
      for (var i = 0; i < conditions.length; i++) {
        var c = conditions[i].condition;
        var value = readMemberExpression(c.prop, conditionValues[i]);
        if (!c.negate && value || c.negate && !value)
          return conditions[i].map;
      }
    })
    .then(function(mapped) {
      if (mapped) {
        if (!validMapping(mapMatch, mapped, pkgName, path))
          return;
        return doStringMap(loader, pkg, pkgName, mapMatch, mapped, path, skipExtensions);
      }

      // no environment match -> fallback to original subPath by returning undefined
    });
  }

  // normalizeSync = decanonicalize + package resolution
  SystemJSLoader.prototype.normalizeSync = SystemJSLoader.prototype.decanonicalize = SystemJSLoader.prototype.normalize;

  // decanonicalize must JUST handle package defaultExtension: false case when defaultJSExtensions is set
  // to be deprecated!
  hook('decanonicalize', function(decanonicalize) {
    return function(name, parentName) {
      if (this.builder)
        return decanonicalize.call(this, name, parentName, true);

      var decanonicalized = decanonicalize.call(this, name, parentName, false);

      if (!this.defaultJSExtensions)
        return decanonicalized;
    
      var pkgName = getPackage(this, decanonicalized);

      var pkg = this.packages[pkgName];
      var defaultExtension = pkg && pkg.defaultExtension;

      if (defaultExtension == undefined && pkg && pkg.meta)
        getMetaMatches(pkg.meta, decanonicalized.substr(pkgName), function(metaPattern, matchMeta, matchDepth) {
          if (matchDepth == 0 || metaPattern.lastIndexOf('*') != metaPattern.length - 1) {
            defaultExtension = false;
            return true;
          }
        });
      
      if ((defaultExtension === false || defaultExtension && defaultExtension != '.js') && name.substr(name.length - 3, 3) != '.js' && decanonicalized.substr(decanonicalized.length - 3, 3) == '.js')
        decanonicalized = decanonicalized.substr(0, decanonicalized.length - 3);

      return decanonicalized;
    };
  });

  hook('normalizeSync', function(normalizeSync) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      isPlugin = isPlugin === true;

      // apply contextual package map first
      // (we assume the parent package config has already been loaded)
      if (parentName)
        var parentPackageName = getPackage(loader, parentName) ||
            loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&
            getPackage(loader, parentName.substr(0, parentName.length - 3));

      var parentPackage = parentPackageName && loader.packages[parentPackageName];

      // ignore . since internal maps handled by standard package resolution
      if (parentPackage && name[0] != '.') {
        var parentMap = parentPackage.map;
        var parentMapMatch = parentMap && getMapMatch(parentMap, name);

        if (parentMapMatch && typeof parentMap[parentMapMatch] == 'string') {
          var mapped = doMapSync(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);      
          if (mapped)
            return mapped;
        }
      }

      var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';

      // apply map, core, paths, contextual package map
      var normalized = normalizeSync.call(loader, name, parentName, false);

      // undo defaultJSExtension
      if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')
        defaultJSExtension = false;
      if (defaultJSExtension)
        normalized = normalized.substr(0, normalized.length - 3);

      var pkgConfigMatch = getPackageConfigMatch(loader, normalized);
      var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);

      if (!pkgName)
        return normalized + (defaultJSExtension ? '.js' : '');

      var subPath = normalized.substr(pkgName.length + 1);

      return applyPackageConfigSync(loader, loader.packages[pkgName] || {}, pkgName, subPath, isPlugin);
    };
  });

  hook('normalize', function(normalize) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      isPlugin = isPlugin === true;

      return Promise.resolve()
      .then(function() {
        // apply contextual package map first
        // (we assume the parent package config has already been loaded)
        if (parentName)
          var parentPackageName = getPackage(loader, parentName) ||
              loader.defaultJSExtensions && parentName.substr(parentName.length - 3, 3) == '.js' &&
              getPackage(loader, parentName.substr(0, parentName.length - 3));

        var parentPackage = parentPackageName && loader.packages[parentPackageName];

        // ignore . since internal maps handled by standard package resolution
        if (parentPackage && name.substr(0, 2) != './') {
          var parentMap = parentPackage.map;
          var parentMapMatch = parentMap && getMapMatch(parentMap, name);

          if (parentMapMatch)
            return doMap(loader, parentPackage, parentPackageName, parentMapMatch, name, isPlugin);
        }

        return Promise.resolve();
      })
      .then(function(mapped) {
        if (mapped)
          return mapped;

        var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';

        // apply map, core, paths, contextual package map
        var normalized = normalize.call(loader, name, parentName, false);

        // undo defaultJSExtension
        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) != '.js')
          defaultJSExtension = false;
        if (defaultJSExtension)
          normalized = normalized.substr(0, normalized.length - 3);

        var pkgConfigMatch = getPackageConfigMatch(loader, normalized);
        var pkgName = pkgConfigMatch && pkgConfigMatch.packageName || getPackage(loader, normalized);

        if (!pkgName)
          return Promise.resolve(normalized + (defaultJSExtension ? '.js' : ''));

        var pkg = loader.packages[pkgName];

        // if package is already configured or not a dynamic config package, use existing package config
        var isConfigured = pkg && (pkg.configured || !pkgConfigMatch);
        return (isConfigured ? Promise.resolve(pkg) : loadPackageConfigPath(loader, pkgName, pkgConfigMatch.configPath))
        .then(function(pkg) {
          var subPath = normalized.substr(pkgName.length + 1);

          return applyPackageConfig(loader, pkg, pkgName, subPath, isPlugin);
        });
      });
    };
  });

  // check if the given normalized name matches a packageConfigPath
  // if so, loads the config
  var packageConfigPaths = {};

  // data object for quick checks against package paths
  function createPkgConfigPathObj(path) {
    var lastWildcard = path.lastIndexOf('*');
    var length = Math.max(lastWildcard + 1, path.lastIndexOf('/'));
    return {
      length: length,
      regEx: new RegExp('^(' + path.substr(0, length).replace(/[.+?^${}()|[\]\\]/g, '\\$&').replace(/\*/g, '[^\\/]+') + ')(\\/|$)'),
      wildcard: lastWildcard != -1
    };
  }

  // most specific match wins
  function getPackageConfigMatch(loader, normalized) {
    var pkgName, exactMatch = false, configPath;
    for (var i = 0; i < loader.packageConfigPaths.length; i++) {
      var packageConfigPath = loader.packageConfigPaths[i];
      var p = packageConfigPaths[packageConfigPath] || (packageConfigPaths[packageConfigPath] = createPkgConfigPathObj(packageConfigPath));
      if (normalized.length < p.length)
        continue;
      var match = normalized.match(p.regEx);
      if (match && (!pkgName || (!(exactMatch && p.wildcard) && pkgName.length < match[1].length))) {
        pkgName = match[1];
        exactMatch = !p.wildcard;
        configPath = pkgName + packageConfigPath.substr(p.length);
      }
    }

    if (!pkgName)
      return;

    return {
      packageName: pkgName,
      configPath: configPath
    };
  }

  function loadPackageConfigPath(loader, pkgName, pkgConfigPath) {
    var configLoader = loader.pluginLoader || loader;

    // NB remove this when json is default
    (configLoader.meta[pkgConfigPath] = configLoader.meta[pkgConfigPath] || {}).format = 'json';
    configLoader.meta[pkgConfigPath].loader = null;

    return configLoader.load(pkgConfigPath)
    .then(function() {
      var cfg = configLoader.get(pkgConfigPath)['default'];

      // support "systemjs" prefixing
      if (cfg.systemjs)
        cfg = cfg.systemjs;

      // modules backwards compatibility
      if (cfg.modules) {
        cfg.meta = cfg.modules;
        warn.call(loader, 'Package config file ' + pkgConfigPath + ' is configured with "modules", which is deprecated as it has been renamed to "meta".');
      }

      return setPkgConfig(loader, pkgName, cfg, true);
    });
  }

  function getMetaMatches(pkgMeta, subPath, matchFn) {
    // wildcard meta
    var meta = {};
    var wildcardIndex;
    for (var module in pkgMeta) {
      // allow meta to start with ./ for flexibility
      var dotRel = module.substr(0, 2) == './' ? './' : '';
      if (dotRel)
        module = module.substr(2);

      wildcardIndex = module.indexOf('*');
      if (wildcardIndex === -1)
        continue;

      if (module.substr(0, wildcardIndex) == subPath.substr(0, wildcardIndex)
          && module.substr(wildcardIndex + 1) == subPath.substr(subPath.length - module.length + wildcardIndex + 1)) {
        // alow match function to return true for an exit path
        if (matchFn(module, pkgMeta[dotRel + module], module.split('/').length))
          return;
      }
    }
    // exact meta
    var exactMeta = pkgMeta[subPath] && pkgMeta.hasOwnProperty && pkgMeta.hasOwnProperty(subPath) ? pkgMeta[subPath] : pkgMeta['./' + subPath];
    if (exactMeta)
      matchFn(exactMeta, exactMeta, 0);
  }

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      return Promise.resolve(locate.call(this, load))
      .then(function(address) {
        var pkgName = getPackage(loader, load.name);
        if (pkgName) {
          var pkg = loader.packages[pkgName];
          var subPath = load.name.substr(pkgName.length + 1);

          var meta = {};
          if (pkg.meta) {
            var bestDepth = 0;

            // NB support a main shorthand in meta here?
            getMetaMatches(pkg.meta, subPath, function(metaPattern, matchMeta, matchDepth) {
              if (matchDepth > bestDepth)
                bestDepth = matchDepth;
              extendMeta(meta, matchMeta, matchDepth && bestDepth > matchDepth);
            });

            extendMeta(load.metadata, meta);
          }

          // format
          if (pkg.format && !load.metadata.loader)
            load.metadata.format = load.metadata.format || pkg.format;
        }

        return address;
      });
    };
  });

})();
/*
 * Script tag fetch
 *
 * When load.metadata.scriptLoad is true, we load via script tag injection.
 */
(function() {

  if (typeof document != 'undefined')
    var head = document.getElementsByTagName('head')[0];

  var curSystem;
  var curRequire;

  // if doing worker executing, this is set to the load record being executed
  var workerLoad = null;
  
  // interactive mode handling method courtesy RequireJS
  var ieEvents = head && (function() {
    var s = document.createElement('script');
    var isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]';
    return s.attachEvent && !(s.attachEvent.toString && s.attachEvent.toString().indexOf('[native code') < 0) && !isOpera;
  })();

  // IE interactive-only part
  // we store loading scripts array as { script: <script>, load: {...} }
  var interactiveLoadingScripts = [];
  var interactiveScript;
  function getInteractiveScriptLoad() {
    if (interactiveScript && interactiveScript.script.readyState === 'interactive')
      return interactiveScript.load;

    for (var i = 0; i < interactiveLoadingScripts.length; i++)
      if (interactiveLoadingScripts[i].script.readyState == 'interactive') {
        interactiveScript = interactiveLoadingScripts[i];
        return interactiveScript.load;
      }
  }
  
  // System.register, System.registerDynamic, AMD define pipeline
  // this is called by the above methods when they execute
  // we then run the reduceRegister_ collection function either immediately
  // if we are in IE and know the currently executing script (interactive)
  // or later if we need to wait for the synchronous load callback to know the script
  var loadingCnt = 0;
  var registerQueue = [];
  hook('pushRegister_', function(pushRegister) {
    return function(register) {
      // if using eval-execution then skip
      if (pushRegister.call(this, register))
        return false;

      // if using worker execution, then we're done
      if (workerLoad)
        this.reduceRegister_(workerLoad, register);

      // detect if we know the currently executing load (IE)
      // if so, immediately call reduceRegister
      else if (ieEvents)
        this.reduceRegister_(getInteractiveScriptLoad(), register);

      // otherwise, add to our execution queue
      // to call reduceRegister on sync script load event
      else if (loadingCnt)
        registerQueue.push(register);

      // if we're not currently loading anything though
      // then do the reduction against a null load
      // (out of band named define or named register)
      // note even in non-script environments, this catch is used
      else
        this.reduceRegister_(null, register);

      return true;
    };
  });

  function webWorkerImport(loader, load) {
    return new Promise(function(resolve, reject) {
      if (load.metadata.integrity)
        reject(new Error('Subresource integrity checking is not supported in web workers.'));

      workerLoad = load;
      try {
        importScripts(load.address);
      }
      catch(e) {
        workerLoad = null;
        reject(e);
      }
      workerLoad = null;

      // if nothing registered, then something went wrong
      if (!load.metadata.entry)
        reject(new Error(load.address + ' did not call System.register or AMD define'));

      resolve('');
    });
  }

  // override fetch to use script injection
  hook('fetch', function(fetch) {
    return function(load) {
      var loader = this;

      if (load.metadata.format == 'json' || !load.metadata.scriptLoad || (!isBrowser && !isWorker))
        return fetch.call(this, load);

      if (isWorker)
        return webWorkerImport(loader, load);

      return new Promise(function(resolve, reject) {
        var s = document.createElement('script');
        
        s.async = true;

        if (load.metadata.crossOrigin)
          s.crossOrigin = load.metadata.crossOrigin;

        if (load.metadata.integrity)
          s.setAttribute('integrity', load.metadata.integrity);

        if (ieEvents) {
          s.attachEvent('onreadystatechange', complete);
          interactiveLoadingScripts.push({
            script: s,
            load: load
          });
        }
        else {
          s.addEventListener('load', complete, false);
          s.addEventListener('error', error, false);
        }

        loadingCnt++;

        curSystem = __global.System;
        curRequire = __global.require;

        s.src = load.address;
        head.appendChild(s);

        function complete(evt) {
          if (s.readyState && s.readyState != 'loaded' && s.readyState != 'complete')
            return;

          loadingCnt--;

          // complete call is sync on execution finish
          // (in ie already done reductions)
          if (!load.metadata.entry && !registerQueue.length) {
            loader.reduceRegister_(load);
          }
          else if (!ieEvents) {
            for (var i = 0; i < registerQueue.length; i++)
              loader.reduceRegister_(load, registerQueue[i]);
            registerQueue = [];
          }

          cleanup();

          // if nothing registered, then something went wrong
          if (!load.metadata.entry && !load.metadata.bundle)
            reject(new Error(load.name + ' did not call System.register or AMD define. If loading a global module configure the global name via the meta exports property for script injection support.'));

          resolve('');
        }

        function error(evt) {
          cleanup();
          reject(new Error('Unable to load script ' + load.address));
        }

        function cleanup() {
          __global.System = curSystem;
          __global.require = curRequire;

          if (s.detachEvent) {
            s.detachEvent('onreadystatechange', complete);
            for (var i = 0; i < interactiveLoadingScripts.length; i++)
              if (interactiveLoadingScripts[i].script == s) {
                if (interactiveScript && interactiveScript.script == s)
                  interactiveScript = null;
                interactiveLoadingScripts.splice(i, 1);
              }
          }
          else {
            s.removeEventListener('load', complete, false);
            s.removeEventListener('error', error, false);
          }

          head.removeChild(s);
        }
      });
    };
  });
})();
/*
 * Instantiate registry extension
 *
 * Supports Traceur System.register 'instantiate' output for loading ES6 as ES5.
 *
 * - Creates the loader.register function
 * - Also supports metadata.format = 'register' in instantiate for anonymous register modules
 * - Also supports metadata.deps, metadata.execute and metadata.executingRequire
 *     for handling dynamic modules alongside register-transformed ES6 modules
 *
 *
 * The code here replicates the ES6 linking groups algorithm to ensure that
 * circular ES6 compiled into System.register can work alongside circular AMD 
 * and CommonJS, identically to the actual ES6 loader.
 *
 */


/*
 * Registry side table entries in loader.defined
 * Registry Entry Contains:
 *    - name
 *    - deps 
 *    - declare for declarative modules
 *    - execute for dynamic modules, different to declarative execute on module
 *    - executingRequire indicates require drives execution for circularity of dynamic modules
 *    - declarative optional boolean indicating which of the above
 *
 * Can preload modules directly on SystemJS.defined['my/module'] = { deps, execute, executingRequire }
 *
 * Then the entry gets populated with derived information during processing:
 *    - normalizedDeps derived from deps, created in instantiate
 *    - groupIndex used by group linking algorithm
 *    - evaluated indicating whether evaluation has happend
 *    - module the module record object, containing:
 *      - exports actual module exports
 *
 *    For dynamic we track the es module with:
 *    - esModule actual es module value
 *    - esmExports whether to extend the esModule with named exports
 *      
 *    Then for declarative only we track dynamic bindings with the 'module' records:
 *      - name
 *      - exports
 *      - setters declarative setter functions
 *      - dependencies, module records of dependencies
 *      - importers, module records of dependents
 *
 * After linked and evaluated, entries are removed, declarative module records remain in separate
 * module binding table
 *
 */

var leadingCommentAndMetaRegEx = /^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)*\s*/;
function detectRegisterFormat(source) {
  var leadingCommentAndMeta = source.match(leadingCommentAndMetaRegEx);
  return leadingCommentAndMeta && source.substr(leadingCommentAndMeta[0].length, 15) == 'System.register';
}

function createEntry() {
  return {
    name: null,
    deps: null,
    originalIndices: null,
    declare: null,
    execute: null,
    executingRequire: false,
    declarative: false,
    normalizedDeps: null,
    groupIndex: null,
    evaluated: false,
    module: null,
    esModule: null,
    esmExports: false
  };
}

(function() {

  /*
   * There are two variations of System.register:
   * 1. System.register for ES6 conversion (2-3 params) - System.register([name, ]deps, declare)
   *    see https://github.com/ModuleLoader/es6-module-loader/wiki/System.register-Explained
   *
   * 2. System.registerDynamic for dynamic modules (3-4 params) - System.registerDynamic([name, ]deps, executingRequire, execute)
   * the true or false statement 
   *
   * this extension implements the linking algorithm for the two variations identical to the spec
   * allowing compiled ES6 circular references to work alongside AMD and CJS circular references.
   *
   */
  SystemJSLoader.prototype.register = function(name, deps, declare) {
    if (typeof name != 'string') {
      declare = deps;
      deps = name;
      name = null;
    }

    // dynamic backwards-compatibility
    // can be deprecated eventually
    if (typeof declare == 'boolean')
      return this.registerDynamic.apply(this, arguments);

    var entry = createEntry();
    // ideally wouldn't apply map config to bundle names but 
    // dependencies go through map regardless so we can't restrict
    // could reconsider in shift to new spec
    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);
    entry.declarative = true;
    entry.deps = deps;
    entry.declare = declare;

    this.pushRegister_({
      amd: false,
      entry: entry
    });
  };
  SystemJSLoader.prototype.registerDynamic = function(name, deps, declare, execute) {
    if (typeof name != 'string') {
      execute = declare;
      declare = deps;
      deps = name;
      name = null;
    }

    // dynamic
    var entry = createEntry();
    entry.name = name && (this.decanonicalize || this.normalize).call(this, name);
    entry.deps = deps;
    entry.execute = execute;
    entry.executingRequire = declare;

    this.pushRegister_({
      amd: false,
      entry: entry
    });
  };
  hook('reduceRegister_', function() {
    return function(load, register) {
      if (!register)
        return;

      var entry = register.entry;
      var curMeta = load && load.metadata;

      // named register
      if (entry.name) {
        if (!(entry.name in this.defined))
          this.defined[entry.name] = entry;

        if (curMeta)
          curMeta.bundle = true;
      }
      // anonymous register
      if (!entry.name || load && !curMeta.entry && entry.name == load.name) {
        if (!curMeta)
          throw new TypeError('Invalid System.register call. Anonymous System.register calls can only be made by modules loaded by SystemJS.import and not via script tags.');
        if (curMeta.entry) {
          if (curMeta.format == 'register')
            throw new Error('Multiple anonymous System.register calls in module ' + load.name + '. If loading a bundle, ensure all the System.register calls are named.');
          else
            throw new Error('Module ' + load.name + ' interpreted as ' + curMeta.format + ' module format, but called System.register.');
        }
        if (!curMeta.format)
          curMeta.format = 'register';
        curMeta.entry = entry;
      }
    };
  });

  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);

      this.defined = {};
      this._loader.moduleRecords = {};
    };
  });

  function buildGroups(entry, loader, groups) {
    groups[entry.groupIndex] = groups[entry.groupIndex] || [];

    if (indexOf.call(groups[entry.groupIndex], entry) != -1)
      return;

    groups[entry.groupIndex].push(entry);

    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      var depEntry = loader.defined[depName];
      
      // not in the registry means already linked / ES6
      if (!depEntry || depEntry.evaluated)
        continue;
      
      // now we know the entry is in our unlinked linkage group
      var depGroupIndex = entry.groupIndex + (depEntry.declarative != entry.declarative);

      // the group index of an entry is always the maximum
      if (depEntry.groupIndex === null || depEntry.groupIndex < depGroupIndex) {
        
        // if already in a group, remove from the old group
        if (depEntry.groupIndex !== null) {
          groups[depEntry.groupIndex].splice(indexOf.call(groups[depEntry.groupIndex], depEntry), 1);

          // if the old group is empty, then we have a mixed depndency cycle
          if (groups[depEntry.groupIndex].length == 0)
            throw new Error("Mixed dependency cycle detected");
        }

        depEntry.groupIndex = depGroupIndex;
      }

      buildGroups(depEntry, loader, groups);
    }
  }

  function link(name, startEntry, loader) {
    // skip if already linked
    if (startEntry.module)
      return;

    startEntry.groupIndex = 0;

    var groups = [];

    buildGroups(startEntry, loader, groups);

    var curGroupDeclarative = !!startEntry.declarative == groups.length % 2;
    for (var i = groups.length - 1; i >= 0; i--) {
      var group = groups[i];
      for (var j = 0; j < group.length; j++) {
        var entry = group[j];

        // link each group
        if (curGroupDeclarative)
          linkDeclarativeModule(entry, loader);
        else
          linkDynamicModule(entry, loader);
      }
      curGroupDeclarative = !curGroupDeclarative; 
    }
  }

  // module binding records
  function ModuleRecord() {}
  defineProperty(ModuleRecord, 'toString', {
    value: function() {
      return 'Module';
    }
  });

  function getOrCreateModuleRecord(name, moduleRecords) {
    return moduleRecords[name] || (moduleRecords[name] = {
      name: name,
      dependencies: [],
      exports: new ModuleRecord(), // start from an empty module and extend
      importers: []
    });
  }

  function linkDeclarativeModule(entry, loader) {
    // only link if already not already started linking (stops at circular)
    if (entry.module)
      return;

    var moduleRecords = loader._loader.moduleRecords;
    var module = entry.module = getOrCreateModuleRecord(entry.name, moduleRecords);
    var exports = entry.module.exports;

    var declaration = entry.declare.call(__global, function(name, value) {
      module.locked = true;

      if (typeof name == 'object') {
        for (var p in name)
          exports[p] = name[p];
      }
      else {
        exports[name] = value;
      }

      for (var i = 0, l = module.importers.length; i < l; i++) {
        var importerModule = module.importers[i];
        if (!importerModule.locked) {
          var importerIndex = indexOf.call(importerModule.dependencies, module);
          importerModule.setters[importerIndex](exports);
        }
      }

      module.locked = false;
      return value;
    }, { id: entry.name });
    
    module.setters = declaration.setters;
    module.execute = declaration.execute;

    if (!module.setters || !module.execute) {
      throw new TypeError('Invalid System.register form for ' + entry.name);
    }

    // now link all the module dependencies
    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      var depEntry = loader.defined[depName];
      var depModule = moduleRecords[depName];

      // work out how to set depExports based on scenarios...
      var depExports;

      if (depModule) {
        depExports = depModule.exports;
      }
      // dynamic, already linked in our registry
      else if (depEntry && !depEntry.declarative) {
        depExports = depEntry.esModule;
      }
      // in the loader registry
      else if (!depEntry) {
        depExports = loader.get(depName);
      }
      // we have an entry -> link
      else {
        linkDeclarativeModule(depEntry, loader);
        depModule = depEntry.module;
        depExports = depModule.exports;
      }

      // only declarative modules have dynamic bindings
      if (depModule && depModule.importers) {
        depModule.importers.push(module);
        module.dependencies.push(depModule);
      }
      else {
        module.dependencies.push(null);
      }
      
      // run setters for all entries with the matching dependency name
      var originalIndices = entry.originalIndices[i];
      for (var j = 0, len = originalIndices.length; j < len; ++j) {
        var index = originalIndices[j];
        if (module.setters[index]) {
          module.setters[index](depExports);
        }
      }
    }
  }

  // An analog to loader.get covering execution of all three layers (real declarative, simulated declarative, simulated dynamic)
  function getModule(name, loader) {
    var exports;
    var entry = loader.defined[name];

    if (!entry) {
      exports = loader.get(name);
      if (!exports)
        throw new Error('Unable to load dependency ' + name + '.');
    }

    else {
      if (entry.declarative)
        ensureEvaluated(name, entry, [], loader);
    
      else if (!entry.evaluated)
        linkDynamicModule(entry, loader);

      exports = entry.module.exports;
    }

    if ((!entry || entry.declarative) && exports && exports.__useDefault)
      return exports['default'];
    
    return exports;
  }

  function linkDynamicModule(entry, loader) {
    if (entry.module)
      return;

    var exports = {};

    var module = entry.module = { exports: exports, id: entry.name };

    // AMD requires execute the tree first
    if (!entry.executingRequire) {
      for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
        var depName = entry.normalizedDeps[i];
        // we know we only need to link dynamic due to linking algorithm
        var depEntry = loader.defined[depName];
        if (depEntry)
          linkDynamicModule(depEntry, loader);
      }
    }

    // now execute
    entry.evaluated = true;
    var output = entry.execute.call(__global, function(name) {
      for (var i = 0, l = entry.deps.length; i < l; i++) {
        if (entry.deps[i] != name)
          continue;
        return getModule(entry.normalizedDeps[i], loader);
      }
      // try and normalize the dependency to see if we have another form
      var nameNormalized = loader.normalizeSync(name, entry.name);
      if (indexOf.call(entry.normalizedDeps, nameNormalized) != -1)
        return getModule(nameNormalized, loader);

      throw new Error('Module ' + name + ' not declared as a dependency of ' + entry.name);
    }, exports, module);
    
    if (output)
      module.exports = output;

    // create the esModule object, which allows ES6 named imports of dynamics
    exports = module.exports;

    // __esModule flag treats as already-named
    if (exports && (exports.__esModule || exports instanceof Module))
      entry.esModule = loader.newModule(exports);
    // set module as 'default' export, then fake named exports by iterating properties
    else if (entry.esmExports && exports !== __global)
      entry.esModule = loader.newModule(getESModule(exports));
    // just use the 'default' export
    else
      entry.esModule = loader.newModule({ 'default': exports });
  }

  /*
   * Given a module, and the list of modules for this current branch,
   *  ensure that each of the dependencies of this module is evaluated
   *  (unless one is a circular dependency already in the list of seen
   *  modules, in which case we execute it)
   *
   * Then we evaluate the module itself depth-first left to right 
   * execution to match ES6 modules
   */
  function ensureEvaluated(moduleName, entry, seen, loader) {
    // if already seen, that means it's an already-evaluated non circular dependency
    if (!entry || entry.evaluated || !entry.declarative)
      return;

    // this only applies to declarative modules which late-execute

    seen.push(moduleName);

    for (var i = 0, l = entry.normalizedDeps.length; i < l; i++) {
      var depName = entry.normalizedDeps[i];
      if (indexOf.call(seen, depName) == -1) {
        if (!loader.defined[depName])
          loader.get(depName);
        else
          ensureEvaluated(depName, loader.defined[depName], seen, loader);
      }
    }

    if (entry.evaluated)
      return;

    entry.evaluated = true;
    entry.module.execute.call(__global);
  }

  // override the delete method to also clear the register caches
  hook('delete', function(del) {
    return function(name) {
      delete this._loader.moduleRecords[name];
      delete this.defined[name];
      return del.call(this, name);
    };
  });

  hook('fetch', function(fetch) {
    return function(load) {
      if (this.defined[load.name]) {
        load.metadata.format = 'defined';
        return '';
      }

      load.metadata.deps = load.metadata.deps || [];
      
      return fetch.call(this, load);
    };
  });

  hook('translate', function(translate) {
    // we run the meta detection here (register is after meta)
    return function(load) {
      load.metadata.deps = load.metadata.deps || [];
      return Promise.resolve(translate.apply(this, arguments)).then(function(source) {
        // run detection for register format
        if (load.metadata.format == 'register' || !load.metadata.format && detectRegisterFormat(load.source))
          load.metadata.format = 'register';
        return source;
      });
    };
  });

  // implement a perforance shortpath for System.load with no deps
  hook('load', function(doLoad) {
    return function(normalized) {
      var loader = this;
      var entry = loader.defined[normalized];

      if (!entry || entry.deps.length)
        return doLoad.apply(this, arguments);

      entry.originalIndices = entry.normalizedDeps = [];

      // recursively ensure that the module and all its 
      // dependencies are linked (with dependency group handling)
      link(normalized, entry, loader);

      // now handle dependency execution in correct order
      ensureEvaluated(normalized, entry, [], loader);
      if (!entry.esModule)
        entry.esModule = loader.newModule(entry.module.exports);

      // remove from the registry
      if (!loader.trace)
        loader.defined[normalized] = undefined;

      // return the defined module object
      loader.set(normalized, entry.esModule);

      return Promise.resolve();
    };
  });

  hook('instantiate', function(instantiate) {
    return function(load) {
      if (load.metadata.format == 'detect')
        load.metadata.format = undefined;

      // assumes previous instantiate is sync
      // (core json support)
      instantiate.call(this, load);

      var loader = this;

      var entry;

      // first we check if this module has already been defined in the registry
      if (loader.defined[load.name]) {
        entry = loader.defined[load.name];
        // don't support deps for ES modules
        if (!entry.declarative)
          entry.deps = entry.deps.concat(load.metadata.deps);
        entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // picked up already by an anonymous System.register script injection
      // or via the dynamic formats
      else if (load.metadata.entry) {
        entry = load.metadata.entry;
        entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // Contains System.register calls
      // (dont run bundles in the builder)
      else if (!(loader.builder && load.metadata.bundle) 
          && (load.metadata.format == 'register' || load.metadata.format == 'esm' || load.metadata.format == 'es6')) {
        
        if (typeof __exec != 'undefined')
          __exec.call(loader, load);

        if (!load.metadata.entry && !load.metadata.bundle)
          throw new Error(load.name + ' detected as ' + load.metadata.format + ' but didn\'t execute.');

        entry = load.metadata.entry;

        // support metadata deps for System.register
        if (entry && load.metadata.deps)
          entry.deps = entry.deps.concat(load.metadata.deps);
      }

      // named bundles are just an empty module
      if (!entry) {
        entry = createEntry();
        entry.deps = load.metadata.deps;
        entry.execute = function() {};
      }

      // place this module onto defined for circular references
      loader.defined[load.name] = entry;
      
      var grouped = group(entry.deps);
      
      entry.deps = grouped.names;
      entry.originalIndices = grouped.indices;
      entry.name = load.name;
      entry.esmExports = load.metadata.esmExports !== false;

      // first, normalize all dependencies
      var normalizePromises = [];
      for (var i = 0, l = entry.deps.length; i < l; i++)
        normalizePromises.push(Promise.resolve(loader.normalize(entry.deps[i], load.name)));

      return Promise.all(normalizePromises).then(function(normalizedDeps) {

        entry.normalizedDeps = normalizedDeps;

        return {
          deps: entry.deps,
          execute: function() {
            // recursively ensure that the module and all its 
            // dependencies are linked (with dependency group handling)
            link(load.name, entry, loader);

            // now handle dependency execution in correct order
            ensureEvaluated(load.name, entry, [], loader);

            if (!entry.esModule)
              entry.esModule = loader.newModule(entry.module.exports);

            // remove from the registry
            if (!loader.trace)
              loader.defined[load.name] = undefined;

            // return the defined module object
            return entry.esModule;
          }
        };
      });
    };
  });
})();
/*
 * Extension to detect ES6 and auto-load Traceur or Babel for processing
 */
(function() {
  // good enough ES6 module detection regex - format detections not designed to be accurate, but to handle the 99% use case
  var esmRegEx = /(^\s*|[}\);\n]\s*)(import\s*(['"]|(\*\s+as\s+)?[^"'\(\)\n;]+\s*from\s*['"]|\{)|export\s+\*\s+from\s+["']|export\s*(\{|default|function|class|var|const|let|async\s+function))/;

  var traceurRuntimeRegEx = /\$traceurRuntime\s*\./;
  var babelHelpersRegEx = /babelHelpers\s*\./;

  hook('translate', function(translate) {
    return function(load) {
      var loader = this;
      var args = arguments;
      return translate.apply(loader, args)
      .then(function(source) {
        // detect & transpile ES6
        if (load.metadata.format == 'esm' || load.metadata.format == 'es6' || !load.metadata.format && source.match(esmRegEx)) {
          if (load.metadata.format == 'es6')
            warn.call(loader, 'Module ' + load.name + ' has metadata setting its format to "es6", which is deprecated.\nThis should be updated to "esm".');

          load.metadata.format = 'esm';

          if (load.metadata.deps) {
            var depInject = '';
            for (var i = 0; i < load.metadata.deps.length; i++)
              depInject += 'import "' + load.metadata.deps[i] + '"; ';
            load.source = depInject + source;
          }

          if (loader.transpiler === false) {
            // we accept translation to esm for builds though to enable eg rollup optimizations
            if (loader.builder)
              return source;
            throw new TypeError('Unable to dynamically transpile ES module as SystemJS.transpiler set to false.');
          }

          // setting _loader.loadedTranspiler = false tells the next block to
          // do checks for setting transpiler metadata
          loader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;
          if (loader.pluginLoader)
            loader.pluginLoader._loader.loadedTranspiler = loader._loader.loadedTranspiler || false;

          // do transpilation
          return (loader._loader.transpilerPromise || (
            loader._loader.transpilerPromise = Promise.resolve(
              __global[loader.transpiler == 'typescript' ? 'ts' : loader.transpiler] || (loader.pluginLoader || loader)['import'](loader.transpiler)
          ))).then(function(transpiler) {
            loader._loader.loadedTranspilerRuntime = true;

            // translate hooks means this is a transpiler plugin instead of a raw implementation
            if (transpiler.translate) {
              // if transpiler is the same as the plugin loader, then don't run twice
              if (transpiler == load.metadata.loaderModule)
                return load.source;

              // convert the source map into an object for transpilation chaining
              if (typeof load.metadata.sourceMap == 'string')
                load.metadata.sourceMap = JSON.parse(load.metadata.sourceMap);

              return Promise.resolve(transpiler.translate.apply(loader, args))
              .then(function(source) {
                // sanitize sourceMap if an object not a JSON string
                var sourceMap = load.metadata.sourceMap;
                if (sourceMap && typeof sourceMap == 'object') {
                  var originalName = load.address.split('!')[0];
                  
                  // force set the filename of the original file
                  if (!sourceMap.file || sourceMap.file == load.address)
                    sourceMap.file = originalName + '!transpiled';

                  // force set the sources list if only one source
                  if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))
                    sourceMap.sources = [originalName];
                }

                if (load.metadata.format == 'esm' && !loader.builder && detectRegisterFormat(source))
                  load.metadata.format = 'register';
                return source;
              });
            }

            // legacy builder support
            if (loader.builder)
              load.metadata.originalSource = load.source;
            
            // defined in es6-module-loader/src/transpile.js
            return transpile.call(loader, load)
            .then(function(source) {
              // clear sourceMap as transpiler embeds it
              load.metadata.sourceMap = undefined;
              return source;
            });            
          });
        }

        // skip transpiler and transpiler runtime loading when transpiler is disabled
        if (loader.transpiler === false)
          return source;

        // load the transpiler correctly
        if (loader._loader.loadedTranspiler === false && (loader.transpiler == 'traceur' || loader.transpiler == 'typescript' || loader.transpiler == 'babel')
            && load.name == loader.normalizeSync(loader.transpiler)) {

          // always load transpiler as a global
          if (source.length > 100 && !load.metadata.format) {
            load.metadata.format = 'global';

            if (loader.transpiler === 'traceur')
              load.metadata.exports = 'traceur';
            if (loader.transpiler === 'typescript')
              load.metadata.exports = 'ts';
          }

          loader._loader.loadedTranspiler = true;
        }

        // load the transpiler runtime correctly
        if (loader._loader.loadedTranspilerRuntime === false) {
          if (load.name == loader.normalizeSync('traceur-runtime')
              || load.name == loader.normalizeSync('babel/external-helpers*')) {
            if (source.length > 100)
              load.metadata.format = load.metadata.format || 'global';

            loader._loader.loadedTranspilerRuntime = true;
          }
        }

        // detect transpiler runtime usage to load runtimes
        if ((load.metadata.format == 'register' || load.metadata.bundle) && loader._loader.loadedTranspilerRuntime !== true) {
          if (loader.transpiler == 'traceur' && !__global.$traceurRuntime && load.source.match(traceurRuntimeRegEx)) {
            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;
            return loader['import']('traceur-runtime').then(function() {
              return source;
            });
          }
          if (loader.transpiler == 'babel' && !__global.babelHelpers && load.source.match(babelHelpersRegEx)) {
            loader._loader.loadedTranspilerRuntime = loader._loader.loadedTranspilerRuntime || false;
            return loader['import']('babel/external-helpers').then(function() {
              return source;
            });
          }
        }

        return source;
      });
    };
  });

})();
/*
  SystemJS Global Format

  Supports
    metadata.deps
    metadata.globals
    metadata.exports

  Without metadata.exports, detects writes to the global object.
*/
var __globalName = typeof self != 'undefined' ? 'self' : 'global';

hook('fetch', function(fetch) {
  return function(load) {
    if (load.metadata.exports && !load.metadata.format)
      load.metadata.format = 'global';
    return fetch.call(this, load);
  };
});

// ideally we could support script loading for globals, but the issue with that is that
// we can't do it with AMD support side-by-side since AMD support means defining the
// global define, and global support means not definining it, yet we don't have any hook
// into the "pre-execution" phase of a script tag being loaded to handle both cases
hook('instantiate', function(instantiate) {
  return function(load) {
    var loader = this;

    if (!load.metadata.format)
      load.metadata.format = 'global';

    // global is a fallback module format
    if (load.metadata.format == 'global' && !load.metadata.entry) {

      var entry = createEntry();

      load.metadata.entry = entry;

      entry.deps = [];

      for (var g in load.metadata.globals) {
        var gl = load.metadata.globals[g];
        if (gl)
          entry.deps.push(gl);
      }

      entry.execute = function(require, exports, module) {

        var globals;
        if (load.metadata.globals) {
          globals = {};
          for (var g in load.metadata.globals)
            if (load.metadata.globals[g])
              globals[g] = require(load.metadata.globals[g]);
        }
        
        var exportName = load.metadata.exports;

        if (exportName)
          load.source += '\n' + __globalName + '["' + exportName + '"] = ' + exportName + ';';

        var retrieveGlobal = loader.get('@@global-helpers').prepareGlobal(module.id, exportName, globals, !!load.metadata.encapsulateGlobal);
        __exec.call(loader, load);

        return retrieveGlobal();
      }
    }
    return instantiate.call(this, load);
  };
});


function getGlobalValue(exports) {
  if (typeof exports == 'string')
    return readMemberExpression(exports, __global);

  if (!(exports instanceof Array))
    throw new Error('Global exports must be a string or array.');

  var globalValue = {};
  var first = true;
  for (var i = 0; i < exports.length; i++) {
    var val = readMemberExpression(exports[i], __global);
    if (first) {
      globalValue['default'] = val;
      first = false;
    }
    globalValue[exports[i].split('.').pop()] = val;
  }
  return globalValue;
}

hook('reduceRegister_', function(reduceRegister) {
  return function(load, register) {
    if (register || !load.metadata.exports)
      return reduceRegister.call(this, load, register);

    load.metadata.format = 'global';
    var entry = load.metadata.entry = createEntry();
    entry.deps = load.metadata.deps;
    var globalValue = getGlobalValue(load.metadata.exports);
    entry.execute = function() {
      return globalValue;
    };
  };
});

hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(loader);

    var hasOwnProperty = Object.prototype.hasOwnProperty;

    // bare minimum ignores
    var ignoredGlobalProps = ['_g', 'sessionStorage', 'localStorage', 'clipboardData', 'frames', 'frameElement', 'external', 
      'mozAnimationStartTime', 'webkitStorageInfo', 'webkitIndexedDB', 'mozInnerScreenY', 'mozInnerScreenX'];

    var globalSnapshot;

    function forEachGlobal(callback) {
      if (Object.keys)
        Object.keys(__global).forEach(callback);
      else
        for (var g in __global) {
          if (!hasOwnProperty.call(__global, g))
            continue;
          callback(g);
        }
    }

    function forEachGlobalValue(callback) {
      forEachGlobal(function(globalName) {
        if (indexOf.call(ignoredGlobalProps, globalName) != -1)
          return;
        try {
          var value = __global[globalName];
        }
        catch (e) {
          ignoredGlobalProps.push(globalName);
        }
        callback(globalName, value);
      });
    }

    loader.set('@@global-helpers', loader.newModule({
      prepareGlobal: function(moduleName, exports, globals, encapsulate) {
        // disable module detection
        var curDefine = __global.define;
        
        __global.define = undefined;

        // set globals
        var oldGlobals;
        if (globals) {
          oldGlobals = {};
          for (var g in globals) {
            oldGlobals[g] = __global[g];
            __global[g] = globals[g];
          }
        }

        // store a complete copy of the global object in order to detect changes
        if (!exports) {
          globalSnapshot = {};

          forEachGlobalValue(function(name, value) {
            globalSnapshot[name] = value;
          });
        }

        // return function to retrieve global
        return function() {
          var globalValue = exports ? getGlobalValue(exports) : {};

          var singleGlobal;
          var multipleExports = !!exports;

          if (!exports || encapsulate)
            forEachGlobalValue(function(name, value) {
              if (globalSnapshot[name] === value)
                return;
              if (typeof value == 'undefined')
                return;
              
              // allow global encapsulation where globals are removed
              if (encapsulate)
                __global[name] = undefined;

              if (!exports) {
                globalValue[name] = value;

                if (typeof singleGlobal != 'undefined') {
                  if (!multipleExports && singleGlobal !== value)
                    multipleExports = true;
                }
                else {
                  singleGlobal = value;
                }
              }
            });

          globalValue = multipleExports ? globalValue : singleGlobal;

          // revert globals
          if (oldGlobals) {
            for (var g in oldGlobals)
              __global[g] = oldGlobals[g];
          }
          __global.define = curDefine;

          return globalValue;
        };
      }
    }));
  };
});
/*
  SystemJS CommonJS Format
*/
(function() {
  // CJS Module Format
  // require('...') || exports[''] = ... || exports.asd = ... || module.exports = ...
  var cjsExportsRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])(exports\s*(\[['"]|\.)|module(\.exports|\['exports'\]|\["exports"\])\s*(\[['"]|[=,\.]))/;
  // RegEx adjusted from https://github.com/jbrantly/yabble/blob/master/lib/yabble.js#L339
  var cjsRequireRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF."'])require\s*\(\s*("[^"\\]*(?:\\.[^"\\]*)*"|'[^'\\]*(?:\\.[^'\\]*)*')\s*\)/g;
  var commentRegEx = /(^|[^\\])(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg;

  var stringRegEx = /("[^"\\\n\r]*(\\.[^"\\\n\r]*)*"|'[^'\\\n\r]*(\\.[^'\\\n\r]*)*')/g;

  // used to support leading #!/usr/bin/env in scripts as supported in Node
  var hashBangRegEx = /^\#\!.*/;

  function getCJSDeps(source) {
    cjsRequireRegEx.lastIndex = commentRegEx.lastIndex = stringRegEx.lastIndex = 0;

    var deps = [];

    var match;

    // track string and comment locations for unminified source    
    var stringLocations = [], commentLocations = [];

    function inLocation(locations, match) {
      for (var i = 0; i < locations.length; i++)
        if (locations[i][0] < match.index && locations[i][1] > match.index)
          return true;
      return false;
    }

    if (source.length / source.split('\n').length < 200) {
      while (match = stringRegEx.exec(source))
        stringLocations.push([match.index, match.index + match[0].length]);

      // TODO: track template literals here before comments
      
      while (match = commentRegEx.exec(source)) {
        // only track comments not starting in strings
        if (!inLocation(stringLocations, match))
          commentLocations.push([match.index + match[1].length, match.index + match[0].length - 1]);
      }
    }

    while (match = cjsRequireRegEx.exec(source)) {
      // ensure we're not within a string or comment location
      if (!inLocation(stringLocations, match) && !inLocation(commentLocations, match)) {
        var dep = match[1].substr(1, match[1].length - 2);
        // skip cases like require('" + file + "')
        if (dep.match(/"|'/))
          continue;
        // trailing slash requires are removed as they don't map mains in SystemJS
        if (dep[dep.length - 1] == '/')
          dep = dep.substr(0, dep.length - 1);
        deps.push(dep);
      }
    }

    return deps;
  }

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      if (!load.metadata.format) {
        cjsExportsRegEx.lastIndex = 0;
        cjsRequireRegEx.lastIndex = 0;
        if (cjsRequireRegEx.exec(load.source) || cjsExportsRegEx.exec(load.source))
          load.metadata.format = 'cjs';
      }

      if (load.metadata.format == 'cjs') {
        var metaDeps = load.metadata.deps;
        var deps = load.metadata.cjsRequireDetection === false ? [] : getCJSDeps(load.source);

        for (var g in load.metadata.globals)
          if (load.metadata.globals[g])
            deps.push(load.metadata.globals[g]);

        var entry = createEntry();

        load.metadata.entry = entry;

        entry.deps = deps;
        entry.executingRequire = true;
        entry.execute = function(_require, exports, module) {
          function require(name) {
            if (name[name.length - 1] == '/')
              name = name.substr(0, name.length - 1);
            return _require.apply(this, arguments);
          }
          require.resolve = function(name) {
            return loader.get('@@cjs-helpers').requireResolve(name, module.id);
          };
          // support module.paths ish
          module.paths = [];
          module.require = _require;

          // ensure meta deps execute first
          if (!load.metadata.cjsDeferDepsExecute)
            for (var i = 0; i < metaDeps.length; i++)
              require(metaDeps[i]);

          var pathVars = loader.get('@@cjs-helpers').getPathVars(module.id);
          var __cjsWrapper = {
            exports: exports,
            args: [require, exports, module, pathVars.filename, pathVars.dirname, __global, __global]
          };

          var cjsWrapper = "(function(require, exports, module, __filename, __dirname, global, GLOBAL";

          // add metadata.globals to the wrapper arguments
          if (load.metadata.globals)
            for (var g in load.metadata.globals) {
              __cjsWrapper.args.push(require(load.metadata.globals[g]));
              cjsWrapper += ", " + g;
            }

          // disable AMD detection
          var define = __global.define;
          __global.define = undefined;
          __global.__cjsWrapper = __cjsWrapper;

          load.source = cjsWrapper + ") {" + load.source.replace(hashBangRegEx, '') + "\n}).apply(__cjsWrapper.exports, __cjsWrapper.args);";

          __exec.call(loader, load);

          __global.__cjsWrapper = undefined;
          __global.define = define;
        };
      }

      return instantiate.call(loader, load);
    };
  });
})();
hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(loader);

    if (typeof window != 'undefined' && typeof document != 'undefined' && window.location)
      var windowOrigin = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');

    function stripOrigin(path) {
      if (path.substr(0, 8) == 'file:///')
        return path.substr(7 + !!isWindows);
      
      if (windowOrigin && path.substr(0, windowOrigin.length) == windowOrigin)
        return path.substr(windowOrigin.length);

      return path;
    }

    loader.set('@@cjs-helpers', loader.newModule({
      requireResolve: function(request, parentId) {
        return stripOrigin(loader.normalizeSync(request, parentId));
      },
      getPathVars: function(moduleId) {
        // remove any plugin syntax
        var pluginIndex = moduleId.lastIndexOf('!');
        var filename;
        if (pluginIndex != -1)
          filename = moduleId.substr(0, pluginIndex);
        else
          filename = moduleId;

        var dirname = filename.split('/');
        dirname.pop();
        dirname = dirname.join('/');

        return {
          filename: stripOrigin(filename),
          dirname: stripOrigin(dirname)
        };
      }
    }))
  };
});/*
 * AMD Helper function module
 * Separated into its own file as this is the part needed for full AMD support in SFX builds
 * NB since implementations have now diverged this can be merged back with amd.js
 */

hook('fetch', function(fetch) {
  return function(load) {
    // script load implies define global leak
    if (load.metadata.scriptLoad && isBrowser)
      __global.define = this.amdDefine;
    return fetch.call(this, load);
  };
});
 
hookConstructor(function(constructor) {
  return function() {
    var loader = this;
    constructor.call(this);

    var commentRegEx = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg;
    var cjsRequirePre = "(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])";
    var cjsRequirePost = "\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)";
    var fnBracketRegEx = /\(([^\)]*)\)/;
    var wsRegEx = /^\s+|\s+$/g;
    
    var requireRegExs = {};

    function getCJSDeps(source, requireIndex) {

      // remove comments
      source = source.replace(commentRegEx, '');

      // determine the require alias
      var params = source.match(fnBracketRegEx);
      var requireAlias = (params[1].split(',')[requireIndex] || 'require').replace(wsRegEx, '');

      // find or generate the regex for this requireAlias
      var requireRegEx = requireRegExs[requireAlias] || (requireRegExs[requireAlias] = new RegExp(cjsRequirePre + requireAlias + cjsRequirePost, 'g'));

      requireRegEx.lastIndex = 0;

      var deps = [];

      var match;
      while (match = requireRegEx.exec(source))
        deps.push(match[2] || match[3]);

      return deps;
    }

    /*
      AMD-compatible require
      To copy RequireJS, set window.require = window.requirejs = loader.amdRequire
    */
    function require(names, callback, errback, referer) {
      // in amd, first arg can be a config object... we just ignore
      if (typeof names == 'object' && !(names instanceof Array))
        return require.apply(null, Array.prototype.splice.call(arguments, 1, arguments.length - 1));

      // amd require
      if (typeof names == 'string' && typeof callback == 'function')
        names = [names];
      if (names instanceof Array) {
        var dynamicRequires = [];
        for (var i = 0; i < names.length; i++)
          dynamicRequires.push(loader['import'](names[i], referer));
        Promise.all(dynamicRequires).then(function(modules) {
          if (callback)
            callback.apply(null, modules);
        }, errback);
      }

      // commonjs require
      else if (typeof names == 'string') {
        var defaultJSExtension = loader.defaultJSExtensions && names.substr(names.length - 3, 3) != '.js';
        var normalized = loader.decanonicalize(names, referer);
        if (defaultJSExtension && normalized.substr(normalized.length - 3, 3) == '.js')
          normalized = normalized.substr(0, normalized.length - 3);
        var module = loader.get(normalized);
        if (!module)
          throw new Error('Module not already loaded loading "' + names + '" as ' + normalized + (referer ? ' from "' + referer + '".' : '.'));
        return module.__useDefault ? module['default'] : module;
      }

      else
        throw new TypeError('Invalid require');
    }

    function define(name, deps, factory) {
      if (typeof name != 'string') {
        factory = deps;
        deps = name;
        name = null;
      }
      if (!(deps instanceof Array)) {
        factory = deps;
        deps = ['require', 'exports', 'module'].splice(0, factory.length);
      }

      if (typeof factory != 'function')
        factory = (function(factory) {
          return function() { return factory; }
        })(factory);

      // in IE8, a trailing comma becomes a trailing undefined entry
      if (deps[deps.length - 1] === undefined)
        deps.pop();

      // remove system dependencies
      var requireIndex, exportsIndex, moduleIndex;
      
      if ((requireIndex = indexOf.call(deps, 'require')) != -1) {
        
        deps.splice(requireIndex, 1);

        // only trace cjs requires for non-named
        // named defines assume the trace has already been done
        if (!name)
          deps = deps.concat(getCJSDeps(factory.toString(), requireIndex));
      }

      if ((exportsIndex = indexOf.call(deps, 'exports')) != -1)
        deps.splice(exportsIndex, 1);
      
      if ((moduleIndex = indexOf.call(deps, 'module')) != -1)
        deps.splice(moduleIndex, 1);

      function execute(req, exports, module) {
        var depValues = [];
        for (var i = 0; i < deps.length; i++)
          depValues.push(req(deps[i]));

        module.uri = module.id;

        module.config = function() {};

        // add back in system dependencies
        if (moduleIndex != -1)
          depValues.splice(moduleIndex, 0, module);
        
        if (exportsIndex != -1)
          depValues.splice(exportsIndex, 0, exports);
        
        if (requireIndex != -1) {
          function contextualRequire(names, callback, errback) {
            if (typeof names == 'string' && typeof callback != 'function')
              return req(names);
            return require.call(loader, names, callback, errback, module.id);
          }
          contextualRequire.toUrl = function(name) {
            // normalize without defaultJSExtensions
            var defaultJSExtension = loader.defaultJSExtensions && name.substr(name.length - 3, 3) != '.js';
            var url = loader.decanonicalize(name, module.id);
            if (defaultJSExtension && url.substr(url.length - 3, 3) == '.js')
              url = url.substr(0, url.length - 3);
            return url;
          };
          depValues.splice(requireIndex, 0, contextualRequire);
        }

        // set global require to AMD require
        var curRequire = __global.require;
        __global.require = require;

        var output = factory.apply(exportsIndex == -1 ? __global : exports, depValues);

        __global.require = curRequire;

        if (typeof output == 'undefined' && module)
          output = module.exports;

        if (typeof output != 'undefined')
          return output;
      }

      var entry = createEntry();
      entry.name = name && (loader.decanonicalize || loader.normalize).call(loader, name);
      entry.deps = deps;
      entry.execute = execute;

      loader.pushRegister_({
        amd: true,
        entry: entry
      });
    }
    define.amd = {};

    // reduction function to attach defines to a load record
    hook('reduceRegister_', function(reduceRegister) {
      return function(load, register) {
        // only handle AMD registers here
        if (!register || !register.amd)
          return reduceRegister.call(this, load, register);

        var curMeta = load && load.metadata;
        var entry = register.entry;

        if (curMeta) {
          if (!curMeta.format || curMeta.format == 'detect')
            curMeta.format = 'amd';
          else if (!entry.name && curMeta.format != 'amd')
            throw new Error('AMD define called while executing ' + curMeta.format + ' module ' + load.name);
        }

        // anonymous define
        if (!entry.name) {
          if (!curMeta)
            throw new TypeError('Unexpected anonymous AMD define.');

          if (curMeta.entry && !curMeta.entry.name)
            throw new Error('Multiple anonymous defines in module ' + load.name);
          
          curMeta.entry = entry;
        }
        // named define
        else {
          // if we don't have any other defines, 
          // then let this be an anonymous define
          // this is just to support single modules of the form:
          // define('jquery')
          // still loading anonymously
          // because it is done widely enough to be useful
          // as soon as there is more than one define, this gets removed though
          if (curMeta) {
            if (!curMeta.entry && !curMeta.bundle)
              curMeta.entry = entry;
            else if (curMeta.entry && curMeta.entry.name)
              curMeta.entry = undefined;

            // note this is now a bundle
            curMeta.bundle = true;
          }

          // define the module through the register registry
          if (!(entry.name in this.defined))
            this.defined[entry.name] = entry;
        }
      };
    });

    loader.amdDefine = define;
    loader.amdRequire = require;
  };
});/*
  SystemJS AMD Format
*/
(function() {
  // AMD Module Format Detection RegEx
  // define([.., .., ..], ...)
  // define(varName); || define(function(require, exports) {}); || define({})
  var amdRegEx = /(?:^\uFEFF?|[^$_a-zA-Z\xA0-\uFFFF.])define\s*\(\s*("[^"]+"\s*,\s*|'[^']+'\s*,\s*)?\s*(\[(\s*(("[^"]+"|'[^']+')\s*,|\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*(\s*("[^"]+"|'[^']+')\s*,?)?(\s*(\/\/.*\r?\n|\/\*(.|\s)*?\*\/))*\s*\]|function\s*|{|[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*\))/;

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      
      if (load.metadata.format == 'amd' || !load.metadata.format && load.source.match(amdRegEx)) {
        load.metadata.format = 'amd';
        
        if (!loader.builder && loader.execute !== false) {
          var curDefine = __global.define;
          __global.define = this.amdDefine;

          try {
            __exec.call(loader, load);
          }
          finally {
            __global.define = curDefine;
          }

          if (!load.metadata.entry && !load.metadata.bundle)
            throw new TypeError('AMD module ' + load.name + ' did not define');
        }
        else {
          load.metadata.execute = function() {
            return load.metadata.builderExecute.apply(this, arguments);
          };
        }
      }

      return instantiate.call(loader, load);
    };
  });

})();
/*
  SystemJS Loader Plugin Support

  Supports plugin loader syntax with "!", or via metadata.loader

  The plugin name is loaded as a module itself, and can override standard loader hooks
  for the plugin resource. See the plugin section of the systemjs readme.
*/

(function() {
  function getParentName(loader, parentName) {
    // if parent is a plugin, normalize against the parent plugin argument only
    if (parentName) {
      var parentPluginIndex;
      if (loader.pluginFirst) {
        if ((parentPluginIndex = parentName.lastIndexOf('!')) != -1)
          return parentName.substr(parentPluginIndex + 1);
      }
      else {
        if ((parentPluginIndex = parentName.indexOf('!')) != -1)
          return parentName.substr(0, parentPluginIndex);
      }

      return parentName;
    }
  }

  function parsePlugin(loader, name) {
    var argumentName;
    var pluginName;

    var pluginIndex = name.lastIndexOf('!');

    if (pluginIndex == -1)
      return;

    if (loader.pluginFirst) {
      argumentName = name.substr(pluginIndex + 1);
      pluginName = name.substr(0, pluginIndex);
    }
    else {
      argumentName = name.substr(0, pluginIndex);
      pluginName = name.substr(pluginIndex + 1) || argumentName.substr(argumentName.lastIndexOf('.') + 1);
    }

    return {
      argument: argumentName,
      plugin: pluginName
    };
  }

  // put name back together after parts have been normalized
  function combinePluginParts(loader, argumentName, pluginName, defaultExtension) {
    if (defaultExtension && argumentName.substr(argumentName.length - 3, 3) == '.js')
      argumentName = argumentName.substr(0, argumentName.length - 3);

    if (loader.pluginFirst) {
      return pluginName + '!' + argumentName;
    }
    else {
      return argumentName + '!' + pluginName;
    }
  }

  // note if normalize will add a default js extension
  // if so, remove for backwards compat
  // this is strange and sucks, but will be deprecated
  function checkDefaultExtension(loader, arg) {
    return loader.defaultJSExtensions && arg.substr(arg.length - 3, 3) != '.js'; 
  }

  function createNormalizeSync(normalizeSync) {
    return function(name, parentName, isPlugin) {
      var loader = this;
      
      var parsed = parsePlugin(loader, name);
      parentName = getParentName(this, parentName);

      if (!parsed)
        return normalizeSync.call(this, name, parentName, isPlugin);

      // if this is a plugin, normalize the plugin name and the argument
      var argumentName = loader.normalizeSync(parsed.argument, parentName, true);
      var pluginName = loader.normalizeSync(parsed.plugin, parentName, true);
      return combinePluginParts(loader, argumentName, pluginName, checkDefaultExtension(loader, parsed.argument));
    };
  }
  
  hook('decanonicalize', createNormalizeSync);
  hook('normalizeSync', createNormalizeSync);

  hook('normalize', function(normalize) {
    return function(name, parentName, isPlugin) {
      var loader = this;

      parentName = getParentName(this, parentName);

      var parsed = parsePlugin(loader, name);

      if (!parsed)
        return normalize.call(loader, name, parentName, isPlugin);

      return Promise.all([
        loader.normalize(parsed.argument, parentName, true),
        loader.normalize(parsed.plugin, parentName, false)
      ])
      .then(function(normalized) {
        return combinePluginParts(loader, normalized[0], normalized[1], checkDefaultExtension(loader, parsed.argument));
      });
    }
  });

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;

      var name = load.name;

      // plugin syntax
      var pluginSyntaxIndex;
      if (loader.pluginFirst) {
        if ((pluginSyntaxIndex = name.indexOf('!')) != -1) {
          load.metadata.loader = name.substr(0, pluginSyntaxIndex);
          load.name = name.substr(pluginSyntaxIndex + 1);
        }
      }
      else {
        if ((pluginSyntaxIndex = name.lastIndexOf('!')) != -1) {
          load.metadata.loader = name.substr(pluginSyntaxIndex + 1);
          load.name = name.substr(0, pluginSyntaxIndex);
        }
      }

      return locate.call(loader, load)
      .then(function(address) {
        if (pluginSyntaxIndex != -1 || !load.metadata.loader)
          return address;

        // normalize plugin relative to parent in locate here when
        // using plugin via loader metadata
        return (loader.pluginLoader || loader).normalize(load.metadata.loader, load.name)
        .then(function(loaderNormalized) {
          load.metadata.loader = loaderNormalized;
          return address;
        });
      })
      .then(function(address) {
        var plugin = load.metadata.loader;

        if (!plugin)
          return address;

        // don't allow a plugin to load itself
        if (load.name == plugin)
          throw new Error('Plugin ' + plugin + ' cannot load itself, make sure it is excluded from any wildcard meta configuration via a custom loader: false rule.');

        // only fetch the plugin itself if this name isn't defined
        if (loader.defined && loader.defined[name])
          return address;

        var pluginLoader = loader.pluginLoader || loader;

        // load the plugin module and run standard locate
        return pluginLoader['import'](plugin)
        .then(function(loaderModule) {
          // store the plugin module itself on the metadata
          load.metadata.loaderModule = loaderModule;

          load.address = address;
          if (loaderModule.locate)
            return loaderModule.locate.call(loader, load);

          return address;
        });
      });
    };
  });

  hook('fetch', function(fetch) {
    return function(load) {
      var loader = this;
      if (load.metadata.loaderModule && load.metadata.loaderModule.fetch && load.metadata.format != 'defined') {
        load.metadata.scriptLoad = false;
        return load.metadata.loaderModule.fetch.call(loader, load, function(load) {
          return fetch.call(loader, load);
        });
      }
      else {
        return fetch.call(loader, load);
      }
    };
  });

  hook('translate', function(translate) {
    return function(load) {
      var loader = this;
      var args = arguments;
      if (load.metadata.loaderModule && load.metadata.loaderModule.translate && load.metadata.format != 'defined') {
        return Promise.resolve(load.metadata.loaderModule.translate.apply(loader, args)).then(function(result) {
          var sourceMap = load.metadata.sourceMap;

          // sanitize sourceMap if an object not a JSON string
          if (sourceMap) {
            if (typeof sourceMap != 'object')
              throw new Error('load.metadata.sourceMap must be set to an object.');

            var originalName = load.address.split('!')[0];
            
            // force set the filename of the original file
            if (!sourceMap.file || sourceMap.file == load.address)
              sourceMap.file = originalName + '!transpiled';

            // force set the sources list if only one source
            if (!sourceMap.sources || sourceMap.sources.length <= 1 && (!sourceMap.sources[0] || sourceMap.sources[0] == load.address))
              sourceMap.sources = [originalName];
          }

          // if running on file:/// URLs, sourcesContent is necessary
          // load.metadata.sourceMap.sourcesContent = [load.source];

          if (typeof result == 'string')
            load.source = result;
          else
            warn.call(this, 'Plugin ' + load.metadata.loader + ' should return the source in translate, instead of setting load.source directly. This support will be deprecated.');

          return translate.apply(loader, args);
        });
      }
      else {
        return translate.apply(loader, args);
      }
    };
  });

  hook('instantiate', function(instantiate) {
    return function(load) {
      var loader = this;
      var calledInstantiate = false;

      if (load.metadata.loaderModule && load.metadata.loaderModule.instantiate && !loader.builder && load.metadata.format != 'defined')
        return Promise.resolve(load.metadata.loaderModule.instantiate.call(loader, load, function(load) {
          if (calledInstantiate)
            throw new Error('Instantiate must only be called once.');
          calledInstantiate = true;
          return instantiate.call(loader, load);
        })).then(function(result) {
          if (calledInstantiate)
            return result;

          load.metadata.entry = createEntry();
          load.metadata.entry.execute = function() {
            return result;
          }
          load.metadata.entry.deps = load.metadata.deps;
          load.metadata.format = 'defined';
          return instantiate.call(loader, load);
        });
      else
        return instantiate.call(loader, load);
    };
  });

})();/*
 * Conditions Extension
 *
 *   Allows a condition module to alter the resolution of an import via syntax:
 *
 *     import $ from 'jquery/#{browser}';
 *
 *   Will first load the module 'browser' via `SystemJS.import('browser')` and 
 *   take the default export of that module.
 *   If the default export is not a string, an error is thrown.
 * 
 *   We then substitute the string into the require to get the conditional resolution
 *   enabling environment-specific variations like:
 * 
 *     import $ from 'jquery/ie'
 *     import $ from 'jquery/firefox'
 *     import $ from 'jquery/chrome'
 *     import $ from 'jquery/safari'
 *
 *   It can be useful for a condition module to define multiple conditions.
 *   This can be done via the `|` modifier to specify an export member expression:
 *
 *     import 'jquery/#{./browser.js|grade.version}'
 *
 *   Where the `grade` export `version` member in the `browser.js` module  is substituted.
 *
 *
 * Boolean Conditionals
 *
 *   For polyfill modules, that are used as imports but have no module value,
 *   a binary conditional allows a module not to be loaded at all if not needed:
 *
 *     import 'es5-shim#?./conditions.js|needs-es5shim'
 *
 *   These conditions can also be negated via:
 *     
 *     import 'es5-shim#?./conditions.js|~es6'
 *
 */

  var sysConditions = ['browser', 'node', 'dev', 'build', 'production', 'default'];

  function parseCondition(condition) {
    var conditionExport, conditionModule, negation;

    var negation = condition[0] == '~';
    var conditionExportIndex = condition.lastIndexOf('|');
    if (conditionExportIndex != -1) {
      conditionExport = condition.substr(conditionExportIndex + 1);
      conditionModule = condition.substr(negation, conditionExportIndex - negation);
      
      if (negation)
        warn.call(this, 'Condition negation form "' + condition + '" is deprecated for "' + conditionModule + '|~' + conditionExport + '"');

      if (conditionExport[0] == '~') {
        negation = true;
        conditionExport = conditionExport.substr(1);
      }
    }
    else {
      conditionExport = 'default';
      conditionModule = condition.substr(negation);
      if (sysConditions.indexOf(conditionModule) != -1) {
        conditionExport = conditionModule;
        conditionModule = null;
      }
    }

    return {
      module: conditionModule || '@system-env',
      prop: conditionExport,
      negate: negation
    };
  }

  function serializeCondition(conditionObj) {
    return conditionObj.module + '|' + (conditionObj.negate ? '~' : '') + conditionObj.prop;
  }

  function resolveCondition(conditionObj, parentName, bool) {
    var self = this;
    return this.normalize(conditionObj.module, parentName)
    .then(function(normalizedCondition) {
      return self.load(normalizedCondition)
      .then(function(q) {
        var m = readMemberExpression(conditionObj.prop, self.get(normalizedCondition));

        if (bool && typeof m != 'boolean')
          throw new TypeError('Condition ' + serializeCondition(conditionObj) + ' did not resolve to a boolean.');

        return conditionObj.negate ? !m : m;
      });
    });
  }

  var interpolationRegEx = /#\{[^\}]+\}/;
  function interpolateConditional(name, parentName) {
    // first we normalize the conditional
    var conditionalMatch = name.match(interpolationRegEx);

    if (!conditionalMatch)
      return Promise.resolve(name);

    var conditionObj = parseCondition.call(this, conditionalMatch[0].substr(2, conditionalMatch[0].length - 3));

    // in builds, return normalized conditional
    if (this.builder)
      return this['normalize'](conditionObj.module, parentName)
      .then(function(conditionModule) {
        conditionObj.module = conditionModule;
        return name.replace(interpolationRegEx, '#{' + serializeCondition(conditionObj) + '}');
      });

    return resolveCondition.call(this, conditionObj, parentName, false)
    .then(function(conditionValue) {
      if (typeof conditionValue !== 'string')
        throw new TypeError('The condition value for ' + name + ' doesn\'t resolve to a string.');

      if (conditionValue.indexOf('/') != -1)
        throw new TypeError('Unabled to interpolate conditional ' + name + (parentName ? ' in ' + parentName : '') + '\n\tThe condition value ' + conditionValue + ' cannot contain a "/" separator.');

      return name.replace(interpolationRegEx, conditionValue);
    });
  }

  function booleanConditional(name, parentName) {
    // first we normalize the conditional
    var booleanIndex = name.lastIndexOf('#?');

    if (booleanIndex == -1)
      return Promise.resolve(name);

    var conditionObj = parseCondition.call(this, name.substr(booleanIndex + 2));

    // in builds, return normalized conditional
    if (this.builder)
      return this['normalize'](conditionObj.module, parentName)
      .then(function(conditionModule) {
        conditionObj.module = conditionModule;
        return name.substr(0, booleanIndex) + '#?' + serializeCondition(conditionObj);
      });

    return resolveCondition.call(this, conditionObj, parentName, true)
    .then(function(conditionValue) {
      return conditionValue ? name.substr(0, booleanIndex) : '@empty';
    });
  }

  // normalizeSync does not parse conditionals at all although it could
  hook('normalize', function(normalize) {
    return function(name, parentName, skipExt) {
      var loader = this;
      return booleanConditional.call(loader, name, parentName)
      .then(function(name) {
        return normalize.call(loader, name, parentName, skipExt);
      })
      .then(function(normalized) {
        return interpolateConditional.call(loader, normalized, parentName);
      });
    };
  });
/*
 * Alias Extension
 *
 * Allows a module to be a plain copy of another module by module name
 *
 * SystemJS.meta['mybootstrapalias'] = { alias: 'bootstrap' };
 *
 */
(function() {
  // aliases
  hook('fetch', function(fetch) {
    return function(load) {
      var alias = load.metadata.alias;
      var aliasDeps = load.metadata.deps || [];
      if (alias) {
        load.metadata.format = 'defined';
        var entry = createEntry();
        this.defined[load.name] = entry;
        entry.declarative = true;
        entry.deps = aliasDeps.concat([alias]);
        entry.declare = function(_export) {
          return {
            setters: [function(module) {
              for (var p in module)
                _export(p, module[p]);
              if (module.__useDefault)
                entry.module.exports.__useDefault = true;
            }],
            execute: function() {}
          };
        };
        return '';
      }

      return fetch.call(this, load);
    };
  });
})();/*
 * Meta Extension
 *
 * Sets default metadata on a load record (load.metadata) from
 * loader.metadata via SystemJS.meta function.
 *
 *
 * Also provides an inline meta syntax for module meta in source.
 *
 * Eg:
 *
 * loader.meta({
 *   'my/module': { deps: ['jquery'] }
 *   'my/*': { format: 'amd' }
 * });
 *
 * Which in turn populates loader.metadata.
 *
 * load.metadata.deps and load.metadata.format will then be set
 * for 'my/module'
 *
 * The same meta could be set with a my/module.js file containing:
 *
 * my/module.js
 *   "format amd";
 *   "deps[] jquery";
 *   "globals.some value"
 *   console.log('this is my/module');
 *
 * Configuration meta always takes preference to inline meta.
 *
 * Multiple matches in wildcards are supported and ammend the meta.
 *
 *
 * The benefits of the function form is that paths are URL-normalized
 * supporting say
 *
 * loader.meta({ './app': { format: 'cjs' } });
 *
 * Instead of needing to set against the absolute URL (https://site.com/app.js)
 *
 */

(function() {

  hookConstructor(function(constructor) {
    return function() {
      this.meta = {};
      constructor.call(this);
    };
  });

  hook('locate', function(locate) {
    return function(load) {
      var meta = this.meta;
      var name = load.name;

      // NB for perf, maybe introduce a fast-path wildcard lookup cache here
      // which is checked first

      // apply wildcard metas
      var bestDepth = 0;
      var wildcardIndex;
      for (var module in meta) {
        wildcardIndex = module.indexOf('*');
        if (wildcardIndex === -1)
          continue;
        if (module.substr(0, wildcardIndex) === name.substr(0, wildcardIndex)
            && module.substr(wildcardIndex + 1) === name.substr(name.length - module.length + wildcardIndex + 1)) {
          var depth = module.split('/').length;
          if (depth > bestDepth)
            bestDepth = depth;
          extendMeta(load.metadata, meta[module], bestDepth != depth);
        }
      }

      // apply exact meta
      if (meta[name])
        extendMeta(load.metadata, meta[name]);

      return locate.call(this, load);
    };
  });

  // detect any meta header syntax
  // only set if not already set
  var metaRegEx = /^(\s*\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*|\s*"[^"]+"\s*;?|\s*'[^']+'\s*;?)+/;
  var metaPartRegEx = /\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\/\/[^\n]*|"[^"]+"\s*;?|'[^']+'\s*;?/g;

  function setMetaProperty(target, p, value) {
    var pParts = p.split('.');
    var curPart;
    while (pParts.length > 1) {
      curPart = pParts.shift();
      target = target[curPart] = target[curPart] || {};
    }
    curPart = pParts.shift();
    if (!(curPart in target))
      target[curPart] = value;
  }

  hook('translate', function(translate) {
    return function(load) {
      // shortpath for bundled
      if (load.metadata.format == 'defined') {
        load.metadata.deps = load.metadata.deps || [];
        return Promise.resolve(load.source);
      }

      // NB meta will be post-translate pending transpiler conversion to plugins
      var meta = load.source.match(metaRegEx);
      if (meta) {
        var metaParts = meta[0].match(metaPartRegEx);

        for (var i = 0; i < metaParts.length; i++) {
          var curPart = metaParts[i];
          var len = curPart.length;

          var firstChar = curPart.substr(0, 1);
          if (curPart.substr(len - 1, 1) == ';')
            len--;

          if (firstChar != '"' && firstChar != "'")
            continue;

          var metaString = curPart.substr(1, curPart.length - 3);
          var metaName = metaString.substr(0, metaString.indexOf(' '));

          if (metaName) {
            var metaValue = metaString.substr(metaName.length + 1, metaString.length - metaName.length - 1);

            if (metaName.substr(metaName.length - 2, 2) == '[]') {
              metaName = metaName.substr(0, metaName.length - 2);
              load.metadata[metaName] = load.metadata[metaName] || [];
              load.metadata[metaName].push(metaValue);
            }
            else if (load.metadata[metaName] instanceof Array) {
              // temporary backwards compat for previous "deps" syntax
              warn.call(this, 'Module ' + load.name + ' contains deprecated "deps ' + metaValue + '" meta syntax.\nThis should be updated to "deps[] ' + metaValue + '" for pushing to array meta.');
              load.metadata[metaName].push(metaValue);
            }
            else {
              setMetaProperty(load.metadata, metaName, metaValue);
            }
          }
          else {
            load.metadata[metaString] = true;
          }
        }
      }

      return translate.apply(this, arguments);
    };
  });
})();
/*
  System bundles

  Allows a bundle module to be specified which will be dynamically 
  loaded before trying to load a given module.

  For example:
  SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']

  Will result in a load to "mybundle" whenever a load to "jquery"
  or "bootstrap/js/bootstrap" is made.

  In this way, the bundle becomes the request that provides the module
*/

(function() {
  // bundles support (just like RequireJS)
  // bundle name is module name of bundle itself
  // bundle is array of modules defined by the bundle
  // when a module in the bundle is requested, the bundle is loaded instead
  // of the form SystemJS.bundles['mybundle'] = ['jquery', 'bootstrap/js/bootstrap']
  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.bundles = {};
      this._loader.loadedBundles = {};
    };
  });

  // assign bundle metadata for bundle loads
  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      var matched = false;

      if (!(load.name in loader.defined))
        for (var b in loader.bundles) {
          for (var i = 0; i < loader.bundles[b].length; i++) {
            var curModule = loader.bundles[b][i];

            if (curModule == load.name) {
              matched = true;
              break;
            }

            // wildcard in bundles does not include / boundaries
            if (curModule.indexOf('*') != -1) {
              var parts = curModule.split('*');
              if (parts.length != 2) {
                loader.bundles[b].splice(i--, 1);
                continue;
              }
              
              if (load.name.substring(0, parts[0].length) == parts[0] &&
                  load.name.substr(load.name.length - parts[1].length, parts[1].length) == parts[1] &&
                  load.name.substr(parts[0].length, load.name.length - parts[1].length - parts[0].length).indexOf('/') == -1) {
                matched = true;
                break;
              }
            }
          }

          if (matched)
            return loader['import'](b)
            .then(function() {
              return locate.call(loader, load);
            });
        }

      return locate.call(loader, load);
    };
  });
})();
/*
 * Dependency Tree Cache
 * 
 * Allows a build to pre-populate a dependency trace tree on the loader of 
 * the expected dependency tree, to be loaded upfront when requesting the
 * module, avoinding the n round trips latency of module loading, where 
 * n is the dependency tree depth.
 *
 * eg:
 * SystemJS.depCache = {
 *  'app': ['normalized', 'deps'],
 *  'normalized': ['another'],
 *  'deps': ['tree']
 * };
 * 
 * SystemJS.import('app') 
 * // simultaneously starts loading all of:
 * // 'normalized', 'deps', 'another', 'tree'
 * // before "app" source is even loaded
 *
 */

(function() {
  hookConstructor(function(constructor) {
    return function() {
      constructor.call(this);
      this.depCache = {};
    }
  });

  hook('locate', function(locate) {
    return function(load) {
      var loader = this;
      // load direct deps, in turn will pick up their trace trees
      var deps = loader.depCache[load.name];
      if (deps)
        for (var i = 0; i < deps.length; i++)
          loader['import'](deps[i], load.name);

      return locate.call(loader, load);
    };
  });
})();
  
System = new SystemJSLoader();

__global.SystemJS = System;
System.version = '0.19.31 Standard';
  if (typeof module == 'object' && module.exports && typeof exports == 'object')
    module.exports = System;

  __global.System = System;

})(typeof self != 'undefined' ? self : global);}

// auto-load Promise polyfill if needed in the browser
var doPolyfill = typeof Promise === 'undefined';

// document.write
if (typeof document !== 'undefined') {
  var scripts = document.getElementsByTagName('script');
  $__curScript = scripts[scripts.length - 1];
  if (doPolyfill) {
    var curPath = $__curScript.src;
    var basePath = curPath.substr(0, curPath.lastIndexOf('/') + 1);
    window.systemJSBootstrap = bootstrap;
    document.write(
      '<' + 'script type="text/javascript" src="' + basePath + 'system-polyfills.js">' + '<' + '/script>'
    );
  }
  else {
    bootstrap();
  }
}
// importScripts
else if (typeof importScripts !== 'undefined') {
  var basePath = '';
  try {
    throw new Error('_');
  } catch (e) {
    e.stack.replace(/(?:at|@).*(http.+):[\d]+:[\d]+/, function(m, url) {
      $__curScript = { src: url };
      basePath = url.replace(/\/[^\/]*$/, '/');
    });
  }
  if (doPolyfill)
    importScripts(basePath + 'system-polyfills.js');
  bootstrap();
}
else {
  $__curScript = typeof __filename != 'undefined' ? { src: __filename } : null;
  bootstrap();
}


})();
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {"use strict";
	__webpack_require__(1);
	var event_target_1 = __webpack_require__(2);
	var define_property_1 = __webpack_require__(4);
	var register_element_1 = __webpack_require__(5);
	var property_descriptor_1 = __webpack_require__(6);
	var timers_1 = __webpack_require__(8);
	var utils_1 = __webpack_require__(3);
	var set = 'set';
	var clear = 'clear';
	var blockingMethods = ['alert', 'prompt', 'confirm'];
	var _global = typeof window == 'undefined' ? global : window;
	timers_1.patchTimer(_global, set, clear, 'Timeout');
	timers_1.patchTimer(_global, set, clear, 'Interval');
	timers_1.patchTimer(_global, set, clear, 'Immediate');
	timers_1.patchTimer(_global, 'request', 'cancelMacroTask', 'AnimationFrame');
	timers_1.patchTimer(_global, 'mozRequest', 'mozCancel', 'AnimationFrame');
	timers_1.patchTimer(_global, 'webkitRequest', 'webkitCancel', 'AnimationFrame');
	for (var i = 0; i < blockingMethods.length; i++) {
	    var name = blockingMethods[i];
	    utils_1.patchMethod(_global, name, function (delegate, symbol, name) {
	        return function (s, args) {
	            return Zone.current.run(delegate, _global, args, name);
	        };
	    });
	}
	event_target_1.eventTargetPatch(_global);
	property_descriptor_1.propertyDescriptorPatch(_global);
	utils_1.patchClass('MutationObserver');
	utils_1.patchClass('WebKitMutationObserver');
	utils_1.patchClass('FileReader');
	define_property_1.propertyPatch();
	register_element_1.registerElementPatch(_global);
	// Treat XMLHTTPRequest as a macrotask.
	patchXHR(_global);
	var XHR_TASK = utils_1.zoneSymbol('xhrTask');
	function patchXHR(window) {
	    function findPendingTask(target) {
	        var pendingTask = target[XHR_TASK];
	        return pendingTask;
	    }
	    function scheduleTask(task) {
	        var data = task.data;
	        data.target.addEventListener('readystatechange', function () {
	            if (data.target.readyState === XMLHttpRequest.DONE) {
	                if (!data.aborted) {
	                    task.invoke();
	                }
	            }
	        });
	        var storedTask = data.target[XHR_TASK];
	        if (!storedTask) {
	            data.target[XHR_TASK] = task;
	        }
	        setNative.apply(data.target, data.args);
	        return task;
	    }
	    function placeholderCallback() {
	    }
	    function clearTask(task) {
	        var data = task.data;
	        // Note - ideally, we would call data.target.removeEventListener here, but it's too late
	        // to prevent it from firing. So instead, we store info for the event listener.
	        data.aborted = true;
	        return clearNative.apply(data.target, data.args);
	    }
	    var setNative = utils_1.patchMethod(window.XMLHttpRequest.prototype, 'send', function () { return function (self, args) {
	        var zone = Zone.current;
	        var options = {
	            target: self,
	            isPeriodic: false,
	            delay: null,
	            args: args,
	            aborted: false
	        };
	        return zone.scheduleMacroTask('XMLHttpRequest.send', placeholderCallback, options, scheduleTask, clearTask);
	    }; });
	    var clearNative = utils_1.patchMethod(window.XMLHttpRequest.prototype, 'abort', function (delegate) { return function (self, args) {
	        var task = findPendingTask(self);
	        if (task && typeof task.type == 'string') {
	            // If the XHR has already completed, do nothing.
	            if (task.cancelFn == null) {
	                return;
	            }
	            task.zone.cancelTask(task);
	        }
	        // Otherwise, we are trying to abort an XHR which has not yet been sent, so there is no task to cancel. Do nothing.
	    }; });
	}
	/// GEO_LOCATION
	if (_global['navigator'] && _global['navigator'].geolocation) {
	    utils_1.patchPrototype(_global['navigator'].geolocation, [
	        'getCurrentPosition',
	        'watchPosition'
	    ]);
	}

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 1 */
/***/ function(module, exports) {

	/* WEBPACK VAR INJECTION */(function(global) {;
	;
	var Zone = (function (global) {
	    var Zone = (function () {
	        function Zone(parent, zoneSpec) {
	            this._properties = null;
	            this._parent = parent;
	            this._name = zoneSpec ? zoneSpec.name || 'unnamed' : '<root>';
	            this._properties = zoneSpec && zoneSpec.properties || {};
	            this._zoneDelegate = new ZoneDelegate(this, this._parent && this._parent._zoneDelegate, zoneSpec);
	        }
	        Object.defineProperty(Zone, "current", {
	            get: function () { return _currentZone; },
	            enumerable: true,
	            configurable: true
	        });
	        ;
	        Object.defineProperty(Zone, "currentTask", {
	            get: function () { return _currentTask; },
	            enumerable: true,
	            configurable: true
	        });
	        ;
	        Object.defineProperty(Zone.prototype, "parent", {
	            get: function () { return this._parent; },
	            enumerable: true,
	            configurable: true
	        });
	        ;
	        Object.defineProperty(Zone.prototype, "name", {
	            get: function () { return this._name; },
	            enumerable: true,
	            configurable: true
	        });
	        ;
	        Zone.prototype.get = function (key) {
	            var current = this;
	            while (current) {
	                if (current._properties.hasOwnProperty(key)) {
	                    return current._properties[key];
	                }
	                current = current._parent;
	            }
	        };
	        Zone.prototype.fork = function (zoneSpec) {
	            if (!zoneSpec)
	                throw new Error('ZoneSpec required!');
	            return this._zoneDelegate.fork(this, zoneSpec);
	        };
	        Zone.prototype.wrap = function (callback, source) {
	            if (typeof callback !== 'function') {
	                throw new Error('Expecting function got: ' + callback);
	            }
	            var _callback = this._zoneDelegate.intercept(this, callback, source);
	            var zone = this;
	            return function () {
	                return zone.runGuarded(_callback, this, arguments, source);
	            };
	        };
	        Zone.prototype.run = function (callback, applyThis, applyArgs, source) {
	            if (applyThis === void 0) { applyThis = null; }
	            if (applyArgs === void 0) { applyArgs = null; }
	            if (source === void 0) { source = null; }
	            var oldZone = _currentZone;
	            _currentZone = this;
	            try {
	                return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
	            }
	            finally {
	                _currentZone = oldZone;
	            }
	        };
	        Zone.prototype.runGuarded = function (callback, applyThis, applyArgs, source) {
	            if (applyThis === void 0) { applyThis = null; }
	            if (applyArgs === void 0) { applyArgs = null; }
	            if (source === void 0) { source = null; }
	            var oldZone = _currentZone;
	            _currentZone = this;
	            try {
	                try {
	                    return this._zoneDelegate.invoke(this, callback, applyThis, applyArgs, source);
	                }
	                catch (error) {
	                    if (this._zoneDelegate.handleError(this, error)) {
	                        throw error;
	                    }
	                }
	            }
	            finally {
	                _currentZone = oldZone;
	            }
	        };
	        Zone.prototype.runTask = function (task, applyThis, applyArgs) {
	            task.runCount++;
	            if (task.zone != this)
	                throw new Error('A task can only be run in the zone which created it! (Creation: ' +
	                    task.zone.name + '; Execution: ' + this.name + ')');
	            var previousTask = _currentTask;
	            _currentTask = task;
	            var oldZone = _currentZone;
	            _currentZone = this;
	            try {
	                if (task.type == 'macroTask' && task.data && !task.data.isPeriodic) {
	                    task.cancelFn = null;
	                }
	                try {
	                    return this._zoneDelegate.invokeTask(this, task, applyThis, applyArgs);
	                }
	                catch (error) {
	                    if (this._zoneDelegate.handleError(this, error)) {
	                        throw error;
	                    }
	                }
	            }
	            finally {
	                _currentZone = oldZone;
	                _currentTask = previousTask;
	            }
	        };
	        Zone.prototype.scheduleMicroTask = function (source, callback, data, customSchedule) {
	            return this._zoneDelegate.scheduleTask(this, new ZoneTask('microTask', this, source, callback, data, customSchedule, null));
	        };
	        Zone.prototype.scheduleMacroTask = function (source, callback, data, customSchedule, customCancel) {
	            return this._zoneDelegate.scheduleTask(this, new ZoneTask('macroTask', this, source, callback, data, customSchedule, customCancel));
	        };
	        Zone.prototype.scheduleEventTask = function (source, callback, data, customSchedule, customCancel) {
	            return this._zoneDelegate.scheduleTask(this, new ZoneTask('eventTask', this, source, callback, data, customSchedule, customCancel));
	        };
	        Zone.prototype.cancelTask = function (task) {
	            var value = this._zoneDelegate.cancelTask(this, task);
	            task.runCount = -1;
	            task.cancelFn = null;
	            return value;
	        };
	        Zone.__symbol__ = __symbol__;
	        return Zone;
	    }());
	    ;
	    var ZoneDelegate = (function () {
	        function ZoneDelegate(zone, parentDelegate, zoneSpec) {
	            this._taskCounts = { microTask: 0, macroTask: 0, eventTask: 0 };
	            this.zone = zone;
	            this._parentDelegate = parentDelegate;
	            this._forkZS = zoneSpec && (zoneSpec && zoneSpec.onFork ? zoneSpec : parentDelegate._forkZS);
	            this._forkDlgt = zoneSpec && (zoneSpec.onFork ? parentDelegate : parentDelegate._forkDlgt);
	            this._interceptZS = zoneSpec && (zoneSpec.onIntercept ? zoneSpec : parentDelegate._interceptZS);
	            this._interceptDlgt = zoneSpec && (zoneSpec.onIntercept ? parentDelegate : parentDelegate._interceptDlgt);
	            this._invokeZS = zoneSpec && (zoneSpec.onInvoke ? zoneSpec : parentDelegate._invokeZS);
	            this._invokeDlgt = zoneSpec && (zoneSpec.onInvoke ? parentDelegate : parentDelegate._invokeDlgt);
	            this._handleErrorZS = zoneSpec && (zoneSpec.onHandleError ? zoneSpec : parentDelegate._handleErrorZS);
	            this._handleErrorDlgt = zoneSpec && (zoneSpec.onHandleError ? parentDelegate : parentDelegate._handleErrorDlgt);
	            this._scheduleTaskZS = zoneSpec && (zoneSpec.onScheduleTask ? zoneSpec : parentDelegate._scheduleTaskZS);
	            this._scheduleTaskDlgt = zoneSpec && (zoneSpec.onScheduleTask ? parentDelegate : parentDelegate._scheduleTaskDlgt);
	            this._invokeTaskZS = zoneSpec && (zoneSpec.onInvokeTask ? zoneSpec : parentDelegate._invokeTaskZS);
	            this._invokeTaskDlgt = zoneSpec && (zoneSpec.onInvokeTask ? parentDelegate : parentDelegate._invokeTaskDlgt);
	            this._cancelTaskZS = zoneSpec && (zoneSpec.onCancelTask ? zoneSpec : parentDelegate._cancelTaskZS);
	            this._cancelTaskDlgt = zoneSpec && (zoneSpec.onCancelTask ? parentDelegate : parentDelegate._cancelTaskDlgt);
	            this._hasTaskZS = zoneSpec && (zoneSpec.onHasTask ? zoneSpec : parentDelegate._hasTaskZS);
	            this._hasTaskDlgt = zoneSpec && (zoneSpec.onHasTask ? parentDelegate : parentDelegate._hasTaskDlgt);
	        }
	        ZoneDelegate.prototype.fork = function (targetZone, zoneSpec) {
	            return this._forkZS
	                ? this._forkZS.onFork(this._forkDlgt, this.zone, targetZone, zoneSpec)
	                : new Zone(targetZone, zoneSpec);
	        };
	        ZoneDelegate.prototype.intercept = function (targetZone, callback, source) {
	            return this._interceptZS
	                ? this._interceptZS.onIntercept(this._interceptDlgt, this.zone, targetZone, callback, source)
	                : callback;
	        };
	        ZoneDelegate.prototype.invoke = function (targetZone, callback, applyThis, applyArgs, source) {
	            return this._invokeZS
	                ? this._invokeZS.onInvoke(this._invokeDlgt, this.zone, targetZone, callback, applyThis, applyArgs, source)
	                : callback.apply(applyThis, applyArgs);
	        };
	        ZoneDelegate.prototype.handleError = function (targetZone, error) {
	            return this._handleErrorZS
	                ? this._handleErrorZS.onHandleError(this._handleErrorDlgt, this.zone, targetZone, error)
	                : true;
	        };
	        ZoneDelegate.prototype.scheduleTask = function (targetZone, task) {
	            try {
	                if (this._scheduleTaskZS) {
	                    return this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt, this.zone, targetZone, task);
	                }
	                else if (task.scheduleFn) {
	                    task.scheduleFn(task);
	                }
	                else if (task.type == 'microTask') {
	                    scheduleMicroTask(task);
	                }
	                else {
	                    throw new Error('Task is missing scheduleFn.');
	                }
	                return task;
	            }
	            finally {
	                if (targetZone == this.zone) {
	                    this._updateTaskCount(task.type, 1);
	                }
	            }
	        };
	        ZoneDelegate.prototype.invokeTask = function (targetZone, task, applyThis, applyArgs) {
	            try {
	                return this._invokeTaskZS
	                    ? this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt, this.zone, targetZone, task, applyThis, applyArgs)
	                    : task.callback.apply(applyThis, applyArgs);
	            }
	            finally {
	                if (targetZone == this.zone && (task.type != 'eventTask') && !(task.data && task.data.isPeriodic)) {
	                    this._updateTaskCount(task.type, -1);
	                }
	            }
	        };
	        ZoneDelegate.prototype.cancelTask = function (targetZone, task) {
	            var value;
	            if (this._cancelTaskZS) {
	                value = this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt, this.zone, targetZone, task);
	            }
	            else if (!task.cancelFn) {
	                throw new Error('Task does not support cancellation, or is already canceled.');
	            }
	            else {
	                value = task.cancelFn(task);
	            }
	            if (targetZone == this.zone) {
	                // this should not be in the finally block, because exceptions assume not canceled.
	                this._updateTaskCount(task.type, -1);
	            }
	            return value;
	        };
	        ZoneDelegate.prototype.hasTask = function (targetZone, isEmpty) {
	            return this._hasTaskZS && this._hasTaskZS.onHasTask(this._hasTaskDlgt, this.zone, targetZone, isEmpty);
	        };
	        ZoneDelegate.prototype._updateTaskCount = function (type, count) {
	            var counts = this._taskCounts;
	            var prev = counts[type];
	            var next = counts[type] = prev + count;
	            if (next < 0) {
	                throw new Error('More tasks executed then were scheduled.');
	            }
	            if (prev == 0 || next == 0) {
	                var isEmpty = {
	                    microTask: counts.microTask > 0,
	                    macroTask: counts.macroTask > 0,
	                    eventTask: counts.eventTask > 0,
	                    change: type
	                };
	                try {
	                    this.hasTask(this.zone, isEmpty);
	                }
	                finally {
	                    if (this._parentDelegate) {
	                        this._parentDelegate._updateTaskCount(type, count);
	                    }
	                }
	            }
	        };
	        return ZoneDelegate;
	    }());
	    var ZoneTask = (function () {
	        function ZoneTask(type, zone, source, callback, options, scheduleFn, cancelFn) {
	            this.runCount = 0;
	            this.type = type;
	            this.zone = zone;
	            this.source = source;
	            this.data = options;
	            this.scheduleFn = scheduleFn;
	            this.cancelFn = cancelFn;
	            this.callback = callback;
	            var self = this;
	            this.invoke = function () {
	                try {
	                    return zone.runTask(self, this, arguments);
	                }
	                finally {
	                    drainMicroTaskQueue();
	                }
	            };
	        }
	        return ZoneTask;
	    }());
	    function __symbol__(name) { return '__zone_symbol__' + name; }
	    ;
	    var symbolSetTimeout = __symbol__('setTimeout');
	    var symbolPromise = __symbol__('Promise');
	    var symbolThen = __symbol__('then');
	    var _currentZone = new Zone(null, null);
	    var _currentTask = null;
	    var _microTaskQueue = [];
	    var _isDrainingMicrotaskQueue = false;
	    var _uncaughtPromiseErrors = [];
	    var _drainScheduled = false;
	    function scheduleQueueDrain() {
	        if (!_drainScheduled && !_currentTask && _microTaskQueue.length == 0) {
	            // We are not running in Task, so we need to kickstart the microtask queue.
	            if (global[symbolPromise]) {
	                global[symbolPromise].resolve(0)[symbolThen](drainMicroTaskQueue);
	            }
	            else {
	                global[symbolSetTimeout](drainMicroTaskQueue, 0);
	            }
	        }
	    }
	    function scheduleMicroTask(task) {
	        scheduleQueueDrain();
	        _microTaskQueue.push(task);
	    }
	    function consoleError(e) {
	        var rejection = e && e.rejection;
	        if (rejection) {
	            console.error('Unhandled Promise rejection:', rejection instanceof Error ? rejection.message : rejection, '; Zone:', e.zone.name, '; Task:', e.task && e.task.source, '; Value:', rejection);
	        }
	        console.error(e);
	    }
	    function drainMicroTaskQueue() {
	        if (!_isDrainingMicrotaskQueue) {
	            _isDrainingMicrotaskQueue = true;
	            while (_microTaskQueue.length) {
	                var queue = _microTaskQueue;
	                _microTaskQueue = [];
	                for (var i = 0; i < queue.length; i++) {
	                    var task = queue[i];
	                    try {
	                        task.zone.runTask(task, null, null);
	                    }
	                    catch (e) {
	                        consoleError(e);
	                    }
	                }
	            }
	            while (_uncaughtPromiseErrors.length) {
	                var uncaughtPromiseErrors = _uncaughtPromiseErrors;
	                _uncaughtPromiseErrors = [];
	                var _loop_1 = function(i) {
	                    var uncaughtPromiseError = uncaughtPromiseErrors[i];
	                    try {
	                        uncaughtPromiseError.zone.runGuarded(function () { throw uncaughtPromiseError; });
	                    }
	                    catch (e) {
	                        consoleError(e);
	                    }
	                };
	                for (var i = 0; i < uncaughtPromiseErrors.length; i++) {
	                    _loop_1(i);
	                }
	            }
	            _isDrainingMicrotaskQueue = false;
	            _drainScheduled = false;
	        }
	    }
	    function isThenable(value) {
	        return value && value.then;
	    }
	    function forwardResolution(value) { return value; }
	    function forwardRejection(rejection) { return ZoneAwarePromise.reject(rejection); }
	    var symbolState = __symbol__('state');
	    var symbolValue = __symbol__('value');
	    var source = 'Promise.then';
	    var UNRESOLVED = null;
	    var RESOLVED = true;
	    var REJECTED = false;
	    var REJECTED_NO_CATCH = 0;
	    function makeResolver(promise, state) {
	        return function (v) {
	            resolvePromise(promise, state, v);
	            // Do not return value or you will break the Promise spec.
	        };
	    }
	    function resolvePromise(promise, state, value) {
	        if (promise[symbolState] === UNRESOLVED) {
	            if (value instanceof ZoneAwarePromise && value[symbolState] !== UNRESOLVED) {
	                clearRejectedNoCatch(value);
	                resolvePromise(promise, value[symbolState], value[symbolValue]);
	            }
	            else if (isThenable(value)) {
	                value.then(makeResolver(promise, state), makeResolver(promise, false));
	            }
	            else {
	                promise[symbolState] = state;
	                var queue = promise[symbolValue];
	                promise[symbolValue] = value;
	                for (var i = 0; i < queue.length;) {
	                    scheduleResolveOrReject(promise, queue[i++], queue[i++], queue[i++], queue[i++]);
	                }
	                if (queue.length == 0 && state == REJECTED) {
	                    promise[symbolState] = REJECTED_NO_CATCH;
	                    try {
	                        throw new Error("Uncaught (in promise): " + value);
	                    }
	                    catch (e) {
	                        var error = e;
	                        error.rejection = value;
	                        error.promise = promise;
	                        error.zone = Zone.current;
	                        error.task = Zone.currentTask;
	                        _uncaughtPromiseErrors.push(error);
	                        scheduleQueueDrain();
	                    }
	                }
	            }
	        }
	        // Resolving an already resolved promise is a noop.
	        return promise;
	    }
	    function clearRejectedNoCatch(promise) {
	        if (promise[symbolState] === REJECTED_NO_CATCH) {
	            promise[symbolState] = REJECTED;
	            for (var i = 0; i < _uncaughtPromiseErrors.length; i++) {
	                if (promise === _uncaughtPromiseErrors[i].promise) {
	                    _uncaughtPromiseErrors.splice(i, 1);
	                    break;
	                }
	            }
	        }
	    }
	    function scheduleResolveOrReject(promise, zone, chainPromise, onFulfilled, onRejected) {
	        clearRejectedNoCatch(promise);
	        var delegate = promise[symbolState] ? onFulfilled || forwardResolution : onRejected || forwardRejection;
	        zone.scheduleMicroTask(source, function () {
	            try {
	                resolvePromise(chainPromise, true, zone.run(delegate, null, [promise[symbolValue]]));
	            }
	            catch (error) {
	                resolvePromise(chainPromise, false, error);
	            }
	        });
	    }
	    var ZoneAwarePromise = (function () {
	        function ZoneAwarePromise(executor) {
	            var promise = this;
	            promise[symbolState] = UNRESOLVED;
	            promise[symbolValue] = []; // queue;
	            try {
	                executor && executor(makeResolver(promise, RESOLVED), makeResolver(promise, REJECTED));
	            }
	            catch (e) {
	                resolvePromise(promise, false, e);
	            }
	        }
	        ZoneAwarePromise.resolve = function (value) {
	            return resolvePromise(new this(null), RESOLVED, value);
	        };
	        ZoneAwarePromise.reject = function (error) {
	            return resolvePromise(new this(null), REJECTED, error);
	        };
	        ZoneAwarePromise.race = function (values) {
	            var resolve;
	            var reject;
	            var promise = new this(function (res, rej) { resolve = res; reject = rej; });
	            function onResolve(value) { promise && (promise = null || resolve(value)); }
	            function onReject(error) { promise && (promise = null || reject(error)); }
	            for (var _i = 0, values_1 = values; _i < values_1.length; _i++) {
	                var value = values_1[_i];
	                if (!isThenable(value)) {
	                    value = this.resolve(value);
	                }
	                value.then(onResolve, onReject);
	            }
	            return promise;
	        };
	        ZoneAwarePromise.all = function (values) {
	            var resolve;
	            var reject;
	            var promise = new this(function (res, rej) { resolve = res; reject = rej; });
	            var count = 0;
	            var resolvedValues = [];
	            function onReject(error) { promise && reject(error); promise = null; }
	            for (var _i = 0, values_2 = values; _i < values_2.length; _i++) {
	                var value = values_2[_i];
	                if (!isThenable(value)) {
	                    value = this.resolve(value);
	                }
	                value.then((function (index) { return function (value) {
	                    resolvedValues[index] = value;
	                    count--;
	                    if (promise && !count) {
	                        resolve(resolvedValues);
	                    }
	                    promise == null;
	                }; })(count), onReject);
	                count++;
	            }
	            if (!count)
	                resolve(resolvedValues);
	            return promise;
	        };
	        ZoneAwarePromise.prototype.then = function (onFulfilled, onRejected) {
	            var chainPromise = new ZoneAwarePromise(null);
	            var zone = Zone.current;
	            if (this[symbolState] == UNRESOLVED) {
	                this[symbolValue].push(zone, chainPromise, onFulfilled, onRejected);
	            }
	            else {
	                scheduleResolveOrReject(this, zone, chainPromise, onFulfilled, onRejected);
	            }
	            return chainPromise;
	        };
	        ZoneAwarePromise.prototype.catch = function (onRejected) {
	            return this.then(null, onRejected);
	        };
	        return ZoneAwarePromise;
	    }());
	    var NativePromise = global[__symbol__('Promise')] = global.Promise;
	    global.Promise = ZoneAwarePromise;
	    if (NativePromise) {
	        var NativePromiseProtototype = NativePromise.prototype;
	        var NativePromiseThen_1 = NativePromiseProtototype[__symbol__('then')]
	            = NativePromiseProtototype.then;
	        NativePromiseProtototype.then = function (onResolve, onReject) {
	            var nativePromise = this;
	            return new ZoneAwarePromise(function (resolve, reject) {
	                NativePromiseThen_1.call(nativePromise, resolve, reject);
	            }).then(onResolve, onReject);
	        };
	    }
	    return global.Zone = Zone;
	})(typeof window === 'undefined' ? global : window);

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var utils_1 = __webpack_require__(3);
	var WTF_ISSUE_555 = 'Anchor,Area,Audio,BR,Base,BaseFont,Body,Button,Canvas,Content,DList,Directory,Div,Embed,FieldSet,Font,Form,Frame,FrameSet,HR,Head,Heading,Html,IFrame,Image,Input,Keygen,LI,Label,Legend,Link,Map,Marquee,Media,Menu,Meta,Meter,Mod,OList,Object,OptGroup,Option,Output,Paragraph,Pre,Progress,Quote,Script,Select,Source,Span,Style,TableCaption,TableCell,TableCol,Table,TableRow,TableSection,TextArea,Title,Track,UList,Unknown,Video';
	var NO_EVENT_TARGET = 'ApplicationCache,EventSource,FileReader,InputMethodContext,MediaController,MessagePort,Node,Performance,SVGElementInstance,SharedWorker,TextTrack,TextTrackCue,TextTrackList,WebKitNamedFlow,Worker,WorkerGlobalScope,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload,IDBRequest,IDBOpenDBRequest,IDBDatabase,IDBTransaction,IDBCursor,DBIndex'.split(',');
	var EVENT_TARGET = 'EventTarget';
	function eventTargetPatch(_global) {
	    var apis = [];
	    var isWtf = _global['wtf'];
	    if (isWtf) {
	        // Workaround for: https://github.com/google/tracing-framework/issues/555
	        apis = WTF_ISSUE_555.split(',').map(function (v) { return 'HTML' + v + 'Element'; }).concat(NO_EVENT_TARGET);
	    }
	    else if (_global[EVENT_TARGET]) {
	        apis.push(EVENT_TARGET);
	    }
	    else {
	        // Note: EventTarget is not available in all browsers,
	        // if it's not available, we instead patch the APIs in the IDL that inherit from EventTarget
	        apis = NO_EVENT_TARGET;
	    }
	    for (var i = 0; i < apis.length; i++) {
	        var type = _global[apis[i]];
	        utils_1.patchEventTargetMethods(type && type.prototype);
	    }
	}
	exports.eventTargetPatch = eventTargetPatch;


/***/ },
/* 3 */
/***/ function(module, exports) {

	/* WEBPACK VAR INJECTION */(function(global) {/**
	 * Suppress closure compiler errors about unknown 'process' variable
	 * @fileoverview
	 * @suppress {undefinedVars}
	 */
	"use strict";
	exports.zoneSymbol = Zone['__symbol__'];
	var _global = typeof window == 'undefined' ? global : window;
	function bindArguments(args, source) {
	    for (var i = args.length - 1; i >= 0; i--) {
	        if (typeof args[i] === 'function') {
	            args[i] = Zone.current.wrap(args[i], source + '_' + i);
	        }
	    }
	    return args;
	}
	exports.bindArguments = bindArguments;
	;
	function patchPrototype(prototype, fnNames) {
	    var source = prototype.constructor['name'];
	    var _loop_1 = function(i) {
	        var name_1 = fnNames[i];
	        var delegate = prototype[name_1];
	        if (delegate) {
	            prototype[name_1] = (function (delegate) {
	                return function () {
	                    return delegate.apply(this, bindArguments(arguments, source + '.' + name_1));
	                };
	            })(delegate);
	        }
	    };
	    for (var i = 0; i < fnNames.length; i++) {
	        _loop_1(i);
	    }
	}
	exports.patchPrototype = patchPrototype;
	;
	exports.isWebWorker = (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope);
	exports.isNode = (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]');
	exports.isBrowser = !exports.isNode && !exports.isWebWorker && !!(typeof window !== 'undefined' && window['HTMLElement']);
	function patchProperty(obj, prop) {
	    var desc = Object.getOwnPropertyDescriptor(obj, prop) || {
	        enumerable: true,
	        configurable: true
	    };
	    // A property descriptor cannot have getter/setter and be writable
	    // deleting the writable and value properties avoids this error:
	    //
	    // TypeError: property descriptors must not specify a value or be writable when a
	    // getter or setter has been specified
	    delete desc.writable;
	    delete desc.value;
	    // substr(2) cuz 'onclick' -> 'click', etc
	    var eventName = prop.substr(2);
	    var _prop = '_' + prop;
	    desc.set = function (fn) {
	        if (this[_prop]) {
	            this.removeEventListener(eventName, this[_prop]);
	        }
	        if (typeof fn === 'function') {
	            var wrapFn = function (event) {
	                var result;
	                result = fn.apply(this, arguments);
	                if (result != undefined && !result)
	                    event.preventDefault();
	            };
	            this[_prop] = wrapFn;
	            this.addEventListener(eventName, wrapFn, false);
	        }
	        else {
	            this[_prop] = null;
	        }
	    };
	    desc.get = function () {
	        return this[_prop];
	    };
	    Object.defineProperty(obj, prop, desc);
	}
	exports.patchProperty = patchProperty;
	;
	function patchOnProperties(obj, properties) {
	    var onProperties = [];
	    for (var prop in obj) {
	        if (prop.substr(0, 2) == 'on') {
	            onProperties.push(prop);
	        }
	    }
	    for (var j = 0; j < onProperties.length; j++) {
	        patchProperty(obj, onProperties[j]);
	    }
	    if (properties) {
	        for (var i = 0; i < properties.length; i++) {
	            patchProperty(obj, 'on' + properties[i]);
	        }
	    }
	}
	exports.patchOnProperties = patchOnProperties;
	;
	var EVENT_TASKS = exports.zoneSymbol('eventTasks');
	var ADD_EVENT_LISTENER = 'addEventListener';
	var REMOVE_EVENT_LISTENER = 'removeEventListener';
	var SYMBOL_ADD_EVENT_LISTENER = exports.zoneSymbol(ADD_EVENT_LISTENER);
	var SYMBOL_REMOVE_EVENT_LISTENER = exports.zoneSymbol(REMOVE_EVENT_LISTENER);
	function findExistingRegisteredTask(target, handler, name, capture, remove) {
	    var eventTasks = target[EVENT_TASKS];
	    if (eventTasks) {
	        for (var i = 0; i < eventTasks.length; i++) {
	            var eventTask = eventTasks[i];
	            var data = eventTask.data;
	            if (data.handler === handler
	                && data.useCapturing === capture
	                && data.eventName === name) {
	                if (remove) {
	                    eventTasks.splice(i, 1);
	                }
	                return eventTask;
	            }
	        }
	    }
	    return null;
	}
	function attachRegisteredEvent(target, eventTask) {
	    var eventTasks = target[EVENT_TASKS];
	    if (!eventTasks) {
	        eventTasks = target[EVENT_TASKS] = [];
	    }
	    eventTasks.push(eventTask);
	}
	function scheduleEventListener(eventTask) {
	    var meta = eventTask.data;
	    attachRegisteredEvent(meta.target, eventTask);
	    return meta.target[SYMBOL_ADD_EVENT_LISTENER](meta.eventName, eventTask.invoke, meta.useCapturing);
	}
	function cancelEventListener(eventTask) {
	    var meta = eventTask.data;
	    findExistingRegisteredTask(meta.target, eventTask.invoke, meta.eventName, meta.useCapturing, true);
	    meta.target[SYMBOL_REMOVE_EVENT_LISTENER](meta.eventName, eventTask.invoke, meta.useCapturing);
	}
	function zoneAwareAddEventListener(self, args) {
	    var eventName = args[0];
	    var handler = args[1];
	    var useCapturing = args[2] || false;
	    // - Inside a Web Worker, `this` is undefined, the context is `global`
	    // - When `addEventListener` is called on the global context in strict mode, `this` is undefined
	    // see https://github.com/angular/zone.js/issues/190
	    var target = self || _global;
	    var delegate = null;
	    if (typeof handler == 'function') {
	        delegate = handler;
	    }
	    else if (handler && handler.handleEvent) {
	        delegate = function (event) { return handler.handleEvent(event); };
	    }
	    var validZoneHandler = false;
	    try {
	        // In cross site contexts (such as WebDriver frameworks like Selenium),
	        // accessing the handler object here will cause an exception to be thrown which
	        // will fail tests prematurely.
	        validZoneHandler = handler && handler.toString() === "[object FunctionWrapper]";
	    }
	    catch (e) {
	        // Returning nothing here is fine, because objects in a cross-site context are unusable
	        return;
	    }
	    // Ignore special listeners of IE11 & Edge dev tools, see https://github.com/angular/zone.js/issues/150
	    if (!delegate || validZoneHandler) {
	        return target[SYMBOL_ADD_EVENT_LISTENER](eventName, handler, useCapturing);
	    }
	    var eventTask = findExistingRegisteredTask(target, handler, eventName, useCapturing, false);
	    if (eventTask) {
	        // we already registered, so this will have noop.
	        return target[SYMBOL_ADD_EVENT_LISTENER](eventName, eventTask.invoke, useCapturing);
	    }
	    var zone = Zone.current;
	    var source = target.constructor['name'] + '.addEventListener:' + eventName;
	    var data = {
	        target: target,
	        eventName: eventName,
	        name: eventName,
	        useCapturing: useCapturing,
	        handler: handler
	    };
	    zone.scheduleEventTask(source, delegate, data, scheduleEventListener, cancelEventListener);
	}
	function zoneAwareRemoveEventListener(self, args) {
	    var eventName = args[0];
	    var handler = args[1];
	    var useCapturing = args[2] || false;
	    // - Inside a Web Worker, `this` is undefined, the context is `global`
	    // - When `addEventListener` is called on the global context in strict mode, `this` is undefined
	    // see https://github.com/angular/zone.js/issues/190
	    var target = self || _global;
	    var eventTask = findExistingRegisteredTask(target, handler, eventName, useCapturing, true);
	    if (eventTask) {
	        eventTask.zone.cancelTask(eventTask);
	    }
	    else {
	        target[SYMBOL_REMOVE_EVENT_LISTENER](eventName, handler, useCapturing);
	    }
	}
	function patchEventTargetMethods(obj) {
	    if (obj && obj.addEventListener) {
	        patchMethod(obj, ADD_EVENT_LISTENER, function () { return zoneAwareAddEventListener; });
	        patchMethod(obj, REMOVE_EVENT_LISTENER, function () { return zoneAwareRemoveEventListener; });
	        return true;
	    }
	    else {
	        return false;
	    }
	}
	exports.patchEventTargetMethods = patchEventTargetMethods;
	;
	var originalInstanceKey = exports.zoneSymbol('originalInstance');
	// wrap some native API on `window`
	function patchClass(className) {
	    var OriginalClass = _global[className];
	    if (!OriginalClass)
	        return;
	    _global[className] = function () {
	        var a = bindArguments(arguments, className);
	        switch (a.length) {
	            case 0:
	                this[originalInstanceKey] = new OriginalClass();
	                break;
	            case 1:
	                this[originalInstanceKey] = new OriginalClass(a[0]);
	                break;
	            case 2:
	                this[originalInstanceKey] = new OriginalClass(a[0], a[1]);
	                break;
	            case 3:
	                this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2]);
	                break;
	            case 4:
	                this[originalInstanceKey] = new OriginalClass(a[0], a[1], a[2], a[3]);
	                break;
	            default: throw new Error('Arg list too long.');
	        }
	    };
	    var instance = new OriginalClass(function () { });
	    var prop;
	    for (prop in instance) {
	        (function (prop) {
	            if (typeof instance[prop] === 'function') {
	                _global[className].prototype[prop] = function () {
	                    return this[originalInstanceKey][prop].apply(this[originalInstanceKey], arguments);
	                };
	            }
	            else {
	                Object.defineProperty(_global[className].prototype, prop, {
	                    set: function (fn) {
	                        if (typeof fn === 'function') {
	                            this[originalInstanceKey][prop] = Zone.current.wrap(fn, className + '.' + prop);
	                        }
	                        else {
	                            this[originalInstanceKey][prop] = fn;
	                        }
	                    },
	                    get: function () {
	                        return this[originalInstanceKey][prop];
	                    }
	                });
	            }
	        }(prop));
	    }
	    for (prop in OriginalClass) {
	        if (prop !== 'prototype' && OriginalClass.hasOwnProperty(prop)) {
	            _global[className][prop] = OriginalClass[prop];
	        }
	    }
	}
	exports.patchClass = patchClass;
	;
	function createNamedFn(name, delegate) {
	    try {
	        return (Function('f', "return function " + name + "(){return f(this, arguments)}"))(delegate);
	    }
	    catch (e) {
	        // if we fail, we must be CSP, just return delegate.
	        return function () {
	            return delegate(this, arguments);
	        };
	    }
	}
	exports.createNamedFn = createNamedFn;
	function patchMethod(target, name, patchFn) {
	    var proto = target;
	    while (proto && !proto.hasOwnProperty(name)) {
	        proto = Object.getPrototypeOf(proto);
	    }
	    if (!proto && target[name]) {
	        // somehow we did not find it, but we can see it. This happens on IE for Window properties.
	        proto = target;
	    }
	    var delegateName = exports.zoneSymbol(name);
	    var delegate;
	    if (proto && !(delegate = proto[delegateName])) {
	        delegate = proto[delegateName] = proto[name];
	        proto[name] = createNamedFn(name, patchFn(delegate, delegateName, name));
	    }
	    return delegate;
	}
	exports.patchMethod = patchMethod;

	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var utils_1 = __webpack_require__(3);
	/*
	 * This is necessary for Chrome and Chrome mobile, to enable
	 * things like redefining `createdCallback` on an element.
	 */
	var _defineProperty = Object.defineProperty;
	var _getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
	var _create = Object.create;
	var unconfigurablesKey = utils_1.zoneSymbol('unconfigurables');
	function propertyPatch() {
	    Object.defineProperty = function (obj, prop, desc) {
	        if (isUnconfigurable(obj, prop)) {
	            throw new TypeError('Cannot assign to read only property \'' + prop + '\' of ' + obj);
	        }
	        if (prop !== 'prototype') {
	            desc = rewriteDescriptor(obj, prop, desc);
	        }
	        return _defineProperty(obj, prop, desc);
	    };
	    Object.defineProperties = function (obj, props) {
	        Object.keys(props).forEach(function (prop) {
	            Object.defineProperty(obj, prop, props[prop]);
	        });
	        return obj;
	    };
	    Object.create = function (obj, proto) {
	        if (typeof proto === 'object') {
	            Object.keys(proto).forEach(function (prop) {
	                proto[prop] = rewriteDescriptor(obj, prop, proto[prop]);
	            });
	        }
	        return _create(obj, proto);
	    };
	    Object.getOwnPropertyDescriptor = function (obj, prop) {
	        var desc = _getOwnPropertyDescriptor(obj, prop);
	        if (isUnconfigurable(obj, prop)) {
	            desc.configurable = false;
	        }
	        return desc;
	    };
	}
	exports.propertyPatch = propertyPatch;
	;
	function _redefineProperty(obj, prop, desc) {
	    desc = rewriteDescriptor(obj, prop, desc);
	    return _defineProperty(obj, prop, desc);
	}
	exports._redefineProperty = _redefineProperty;
	;
	function isUnconfigurable(obj, prop) {
	    return obj && obj[unconfigurablesKey] && obj[unconfigurablesKey][prop];
	}
	function rewriteDescriptor(obj, prop, desc) {
	    desc.configurable = true;
	    if (!desc.configurable) {
	        if (!obj[unconfigurablesKey]) {
	            _defineProperty(obj, unconfigurablesKey, { writable: true, value: {} });
	        }
	        obj[unconfigurablesKey][prop] = true;
	    }
	    return desc;
	}


/***/ },
/* 5 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var define_property_1 = __webpack_require__(4);
	var utils_1 = __webpack_require__(3);
	function registerElementPatch(_global) {
	    if (!utils_1.isBrowser || !('registerElement' in _global.document)) {
	        return;
	    }
	    var _registerElement = document.registerElement;
	    var callbacks = [
	        'createdCallback',
	        'attachedCallback',
	        'detachedCallback',
	        'attributeChangedCallback'
	    ];
	    document.registerElement = function (name, opts) {
	        if (opts && opts.prototype) {
	            callbacks.forEach(function (callback) {
	                var source = 'Document.registerElement::' + callback;
	                if (opts.prototype.hasOwnProperty(callback)) {
	                    var descriptor = Object.getOwnPropertyDescriptor(opts.prototype, callback);
	                    if (descriptor && descriptor.value) {
	                        descriptor.value = Zone.current.wrap(descriptor.value, source);
	                        define_property_1._redefineProperty(opts.prototype, callback, descriptor);
	                    }
	                    else {
	                        opts.prototype[callback] = Zone.current.wrap(opts.prototype[callback], source);
	                    }
	                }
	                else if (opts.prototype[callback]) {
	                    opts.prototype[callback] = Zone.current.wrap(opts.prototype[callback], source);
	                }
	            });
	        }
	        return _registerElement.apply(document, [name, opts]);
	    };
	}
	exports.registerElementPatch = registerElementPatch;


/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var webSocketPatch = __webpack_require__(7);
	var utils_1 = __webpack_require__(3);
	var eventNames = 'copy cut paste abort blur focus canplay canplaythrough change click contextmenu dblclick drag dragend dragenter dragleave dragover dragstart drop durationchange emptied ended input invalid keydown keypress keyup load loadeddata loadedmetadata loadstart message mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup pause play playing progress ratechange reset scroll seeked seeking select show stalled submit suspend timeupdate volumechange waiting mozfullscreenchange mozfullscreenerror mozpointerlockchange mozpointerlockerror error webglcontextrestored webglcontextlost webglcontextcreationerror'.split(' ');
	function propertyDescriptorPatch(_global) {
	    if (utils_1.isNode) {
	        return;
	    }
	    var supportsWebSocket = typeof WebSocket !== 'undefined';
	    if (canPatchViaPropertyDescriptor()) {
	        // for browsers that we can patch the descriptor:  Chrome & Firefox
	        if (utils_1.isBrowser) {
	            utils_1.patchOnProperties(HTMLElement.prototype, eventNames);
	        }
	        utils_1.patchOnProperties(XMLHttpRequest.prototype, null);
	        if (typeof IDBIndex !== 'undefined') {
	            utils_1.patchOnProperties(IDBIndex.prototype, null);
	            utils_1.patchOnProperties(IDBRequest.prototype, null);
	            utils_1.patchOnProperties(IDBOpenDBRequest.prototype, null);
	            utils_1.patchOnProperties(IDBDatabase.prototype, null);
	            utils_1.patchOnProperties(IDBTransaction.prototype, null);
	            utils_1.patchOnProperties(IDBCursor.prototype, null);
	        }
	        if (supportsWebSocket) {
	            utils_1.patchOnProperties(WebSocket.prototype, null);
	        }
	    }
	    else {
	        // Safari, Android browsers (Jelly Bean)
	        patchViaCapturingAllTheEvents();
	        utils_1.patchClass('XMLHttpRequest');
	        if (supportsWebSocket) {
	            webSocketPatch.apply(_global);
	        }
	    }
	}
	exports.propertyDescriptorPatch = propertyDescriptorPatch;
	function canPatchViaPropertyDescriptor() {
	    if (utils_1.isBrowser && !Object.getOwnPropertyDescriptor(HTMLElement.prototype, 'onclick')
	        && typeof Element !== 'undefined') {
	        // WebKit https://bugs.webkit.org/show_bug.cgi?id=134364
	        // IDL interface attributes are not configurable
	        var desc = Object.getOwnPropertyDescriptor(Element.prototype, 'onclick');
	        if (desc && !desc.configurable)
	            return false;
	    }
	    Object.defineProperty(XMLHttpRequest.prototype, 'onreadystatechange', {
	        get: function () {
	            return true;
	        }
	    });
	    var req = new XMLHttpRequest();
	    var result = !!req.onreadystatechange;
	    Object.defineProperty(XMLHttpRequest.prototype, 'onreadystatechange', {});
	    return result;
	}
	;
	var unboundKey = utils_1.zoneSymbol('unbound');
	// Whenever any eventListener fires, we check the eventListener target and all parents
	// for `onwhatever` properties and replace them with zone-bound functions
	// - Chrome (for now)
	function patchViaCapturingAllTheEvents() {
	    var _loop_1 = function(i) {
	        var property = eventNames[i];
	        var onproperty = 'on' + property;
	        document.addEventListener(property, function (event) {
	            var elt = event.target, bound, source;
	            if (elt) {
	                source = elt.constructor['name'] + '.' + onproperty;
	            }
	            else {
	                source = 'unknown.' + onproperty;
	            }
	            while (elt) {
	                if (elt[onproperty] && !elt[onproperty][unboundKey]) {
	                    bound = Zone.current.wrap(elt[onproperty], source);
	                    bound[unboundKey] = elt[onproperty];
	                    elt[onproperty] = bound;
	                }
	                elt = elt.parentElement;
	            }
	        }, true);
	    };
	    for (var i = 0; i < eventNames.length; i++) {
	        _loop_1(i);
	    }
	    ;
	}
	;


/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var utils_1 = __webpack_require__(3);
	// we have to patch the instance since the proto is non-configurable
	function apply(_global) {
	    var WS = _global.WebSocket;
	    // On Safari window.EventTarget doesn't exist so need to patch WS add/removeEventListener
	    // On older Chrome, no need since EventTarget was already patched
	    if (!_global.EventTarget) {
	        utils_1.patchEventTargetMethods(WS.prototype);
	    }
	    _global.WebSocket = function (a, b) {
	        var socket = arguments.length > 1 ? new WS(a, b) : new WS(a);
	        var proxySocket;
	        // Safari 7.0 has non-configurable own 'onmessage' and friends properties on the socket instance
	        var onmessageDesc = Object.getOwnPropertyDescriptor(socket, 'onmessage');
	        if (onmessageDesc && onmessageDesc.configurable === false) {
	            proxySocket = Object.create(socket);
	            ['addEventListener', 'removeEventListener', 'send', 'close'].forEach(function (propName) {
	                proxySocket[propName] = function () {
	                    return socket[propName].apply(socket, arguments);
	                };
	            });
	        }
	        else {
	            // we can patch the real socket
	            proxySocket = socket;
	        }
	        utils_1.patchOnProperties(proxySocket, ['close', 'error', 'message', 'open']);
	        return proxySocket;
	    };
	    for (var prop in WS) {
	        _global.WebSocket[prop] = WS[prop];
	    }
	}
	exports.apply = apply;


/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var utils_1 = __webpack_require__(3);
	function patchTimer(window, setName, cancelName, nameSuffix) {
	    var setNative = null;
	    var clearNative = null;
	    setName += nameSuffix;
	    cancelName += nameSuffix;
	    function scheduleTask(task) {
	        var data = task.data;
	        data.args[0] = task.invoke;
	        data.handleId = setNative.apply(window, data.args);
	        return task;
	    }
	    function clearTask(task) {
	        return clearNative(task.data.handleId);
	    }
	    setNative = utils_1.patchMethod(window, setName, function (delegate) { return function (self, args) {
	        if (typeof args[0] === 'function') {
	            var zone = Zone.current;
	            var options = {
	                handleId: null,
	                isPeriodic: nameSuffix === 'Interval',
	                delay: (nameSuffix === 'Timeout' || nameSuffix === 'Interval') ? args[1] || 0 : null,
	                args: args
	            };
	            return zone.scheduleMacroTask(setName, args[0], options, scheduleTask, clearTask);
	        }
	        else {
	            // cause an error by calling it directly.
	            return delegate.apply(window, args);
	        }
	    }; });
	    clearNative = utils_1.patchMethod(window, cancelName, function (delegate) { return function (self, args) {
	        var task = args[0];
	        if (task && typeof task.type === 'string') {
	            if (task.cancelFn && task.data.isPeriodic || task.runCount === 0) {
	                // Do not cancel already canceled functions
	                task.zone.cancelTask(task);
	            }
	        }
	        else {
	            // cause an error by calling it directly.
	            delegate.apply(window, args);
	        }
	    }; });
	}
	exports.patchTimer = patchTimer;


/***/ }
/******/ ]);
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Reflect;
(function (Reflect) {
    "use strict";
    // Load global or shim versions of Map, Set, and WeakMap
    var functionPrototype = Object.getPrototypeOf(Function);
    var _Map = typeof Map === "function" ? Map : CreateMapPolyfill();
    var _Set = typeof Set === "function" ? Set : CreateSetPolyfill();
    var _WeakMap = typeof WeakMap === "function" ? WeakMap : CreateWeakMapPolyfill();
    // [[Metadata]] internal slot
    var __Metadata__ = new _WeakMap();
    /**
      * Applies a set of decorators to a property of a target object.
      * @param decorators An array of decorators.
      * @param target The target object.
      * @param targetKey (Optional) The property key to decorate.
      * @param targetDescriptor (Optional) The property descriptor for the target key
      * @remarks Decorators are applied in reverse order.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     C = Reflect.decorate(decoratorsArray, C);
      *
      *     // property (on constructor)
      *     Reflect.decorate(decoratorsArray, C, "staticProperty");
      *
      *     // property (on prototype)
      *     Reflect.decorate(decoratorsArray, C.prototype, "property");
      *
      *     // method (on constructor)
      *     Object.defineProperty(C, "staticMethod",
      *         Reflect.decorate(decoratorsArray, C, "staticMethod",
      *             Object.getOwnPropertyDescriptor(C, "staticMethod")));
      *
      *     // method (on prototype)
      *     Object.defineProperty(C.prototype, "method",
      *         Reflect.decorate(decoratorsArray, C.prototype, "method",
      *             Object.getOwnPropertyDescriptor(C.prototype, "method")));
      *
      */
    function decorate(decorators, target, targetKey, targetDescriptor) {
        if (!IsUndefined(targetDescriptor)) {
            if (!IsArray(decorators)) {
                throw new TypeError();
            }
            else if (!IsObject(target)) {
                throw new TypeError();
            }
            else if (IsUndefined(targetKey)) {
                throw new TypeError();
            }
            else if (!IsObject(targetDescriptor)) {
                throw new TypeError();
            }
            targetKey = ToPropertyKey(targetKey);
            return DecoratePropertyWithDescriptor(decorators, target, targetKey, targetDescriptor);
        }
        else if (!IsUndefined(targetKey)) {
            if (!IsArray(decorators)) {
                throw new TypeError();
            }
            else if (!IsObject(target)) {
                throw new TypeError();
            }
            targetKey = ToPropertyKey(targetKey);
            return DecoratePropertyWithoutDescriptor(decorators, target, targetKey);
        }
        else {
            if (!IsArray(decorators)) {
                throw new TypeError();
            }
            else if (!IsConstructor(target)) {
                throw new TypeError();
            }
            return DecorateConstructor(decorators, target);
        }
    }
    Reflect.decorate = decorate;
    /**
      * A default metadata decorator factory that can be used on a class, class member, or parameter.
      * @param metadataKey The key for the metadata entry.
      * @param metadataValue The value for the metadata entry.
      * @returns A decorator function.
      * @remarks
      * If `metadataKey` is already defined for the target and target key, the
      * metadataValue for that key will be overwritten.
      * @example
      *
      *     // constructor
      *     @Reflect.metadata(key, value)
      *     class C {
      *     }
      *
      *     // property (on constructor, TypeScript only)
      *     class C {
      *         @Reflect.metadata(key, value)
      *         static staticProperty;
      *     }
      *
      *     // property (on prototype, TypeScript only)
      *     class C {
      *         @Reflect.metadata(key, value)
      *         property;
      *     }
      *
      *     // method (on constructor)
      *     class C {
      *         @Reflect.metadata(key, value)
      *         static staticMethod() { }
      *     }
      *
      *     // method (on prototype)
      *     class C {
      *         @Reflect.metadata(key, value)
      *         method() { }
      *     }
      *
      */
    function metadata(metadataKey, metadataValue) {
        function decorator(target, targetKey) {
            if (!IsUndefined(targetKey)) {
                if (!IsObject(target)) {
                    throw new TypeError();
                }
                targetKey = ToPropertyKey(targetKey);
                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, targetKey);
            }
            else {
                if (!IsConstructor(target)) {
                    throw new TypeError();
                }
                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, /*targetKey*/ undefined);
            }
        }
        return decorator;
    }
    Reflect.metadata = metadata;
    /**
      * Define a unique metadata entry on the target.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param metadataValue A value that contains attached metadata.
      * @param target The target object on which to define metadata.
      * @param targetKey (Optional) The property key for the target.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     Reflect.defineMetadata("custom:annotation", options, C);
      *
      *     // property (on constructor)
      *     Reflect.defineMetadata("custom:annotation", options, C, "staticProperty");
      *
      *     // property (on prototype)
      *     Reflect.defineMetadata("custom:annotation", options, C.prototype, "property");
      *
      *     // method (on constructor)
      *     Reflect.defineMetadata("custom:annotation", options, C, "staticMethod");
      *
      *     // method (on prototype)
      *     Reflect.defineMetadata("custom:annotation", options, C.prototype, "method");
      *
      *     // decorator factory as metadata-producing annotation.
      *     function MyAnnotation(options): Decorator {
      *         return (target, key?) => Reflect.defineMetadata("custom:annotation", options, target, key);
      *     }
      *
      */
    function defineMetadata(metadataKey, metadataValue, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, targetKey);
    }
    Reflect.defineMetadata = defineMetadata;
    /**
      * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.hasMetadata("custom:annotation", C);
      *
      *     // property (on constructor)
      *     result = Reflect.hasMetadata("custom:annotation", C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.hasMetadata("custom:annotation", C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.hasMetadata("custom:annotation", C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.hasMetadata("custom:annotation", C.prototype, "method");
      *
      */
    function hasMetadata(metadataKey, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryHasMetadata(metadataKey, target, targetKey);
    }
    Reflect.hasMetadata = hasMetadata;
    /**
      * Gets a value indicating whether the target object has the provided metadata key defined.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.hasOwnMetadata("custom:annotation", C);
      *
      *     // property (on constructor)
      *     result = Reflect.hasOwnMetadata("custom:annotation", C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.hasOwnMetadata("custom:annotation", C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.hasOwnMetadata("custom:annotation", C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.hasOwnMetadata("custom:annotation", C.prototype, "method");
      *
      */
    function hasOwnMetadata(metadataKey, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryHasOwnMetadata(metadataKey, target, targetKey);
    }
    Reflect.hasOwnMetadata = hasOwnMetadata;
    /**
      * Gets the metadata value for the provided metadata key on the target object or its prototype chain.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getMetadata("custom:annotation", C);
      *
      *     // property (on constructor)
      *     result = Reflect.getMetadata("custom:annotation", C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getMetadata("custom:annotation", C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getMetadata("custom:annotation", C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getMetadata("custom:annotation", C.prototype, "method");
      *
      */
    function getMetadata(metadataKey, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryGetMetadata(metadataKey, target, targetKey);
    }
    Reflect.getMetadata = getMetadata;
    /**
      * Gets the metadata value for the provided metadata key on the target object.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns The metadata value for the metadata key if found; otherwise, `undefined`.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getOwnMetadata("custom:annotation", C);
      *
      *     // property (on constructor)
      *     result = Reflect.getOwnMetadata("custom:annotation", C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getOwnMetadata("custom:annotation", C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getOwnMetadata("custom:annotation", C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getOwnMetadata("custom:annotation", C.prototype, "method");
      *
      */
    function getOwnMetadata(metadataKey, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryGetOwnMetadata(metadataKey, target, targetKey);
    }
    Reflect.getOwnMetadata = getOwnMetadata;
    /**
      * Gets the metadata keys defined on the target object or its prototype chain.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns An array of unique metadata keys.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getMetadataKeys(C);
      *
      *     // property (on constructor)
      *     result = Reflect.getMetadataKeys(C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getMetadataKeys(C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getMetadataKeys(C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getMetadataKeys(C.prototype, "method");
      *
      */
    function getMetadataKeys(target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryMetadataKeys(target, targetKey);
    }
    Reflect.getMetadataKeys = getMetadataKeys;
    /**
      * Gets the unique metadata keys defined on the target object.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns An array of unique metadata keys.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.getOwnMetadataKeys(C);
      *
      *     // property (on constructor)
      *     result = Reflect.getOwnMetadataKeys(C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.getOwnMetadataKeys(C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.getOwnMetadataKeys(C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.getOwnMetadataKeys(C.prototype, "method");
      *
      */
    function getOwnMetadataKeys(target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        return OrdinaryOwnMetadataKeys(target, targetKey);
    }
    Reflect.getOwnMetadataKeys = getOwnMetadataKeys;
    /**
      * Deletes the metadata entry from the target object with the provided key.
      * @param metadataKey A key used to store and retrieve metadata.
      * @param target The target object on which the metadata is defined.
      * @param targetKey (Optional) The property key for the target.
      * @returns `true` if the metadata entry was found and deleted; otherwise, false.
      * @example
      *
      *     class C {
      *         // property declarations are not part of ES6, though they are valid in TypeScript:
      *         // static staticProperty;
      *         // property;
      *
      *         constructor(p) { }
      *         static staticMethod(p) { }
      *         method(p) { }
      *     }
      *
      *     // constructor
      *     result = Reflect.deleteMetadata("custom:annotation", C);
      *
      *     // property (on constructor)
      *     result = Reflect.deleteMetadata("custom:annotation", C, "staticProperty");
      *
      *     // property (on prototype)
      *     result = Reflect.deleteMetadata("custom:annotation", C.prototype, "property");
      *
      *     // method (on constructor)
      *     result = Reflect.deleteMetadata("custom:annotation", C, "staticMethod");
      *
      *     // method (on prototype)
      *     result = Reflect.deleteMetadata("custom:annotation", C.prototype, "method");
      *
      */
    function deleteMetadata(metadataKey, target, targetKey) {
        if (!IsObject(target)) {
            throw new TypeError();
        }
        else if (!IsUndefined(targetKey)) {
            targetKey = ToPropertyKey(targetKey);
        }
        // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#deletemetadata-metadatakey-p-
        var metadataMap = GetOrCreateMetadataMap(target, targetKey, /*create*/ false);
        if (IsUndefined(metadataMap)) {
            return false;
        }
        if (!metadataMap.delete(metadataKey)) {
            return false;
        }
        if (metadataMap.size > 0) {
            return true;
        }
        var targetMetadata = __Metadata__.get(target);
        targetMetadata.delete(targetKey);
        if (targetMetadata.size > 0) {
            return true;
        }
        __Metadata__.delete(target);
        return true;
    }
    Reflect.deleteMetadata = deleteMetadata;
    function DecorateConstructor(decorators, target) {
        for (var i = decorators.length - 1; i >= 0; --i) {
            var decorator = decorators[i];
            var decorated = decorator(target);
            if (!IsUndefined(decorated)) {
                if (!IsConstructor(decorated)) {
                    throw new TypeError();
                }
                target = decorated;
            }
        }
        return target;
    }
    function DecoratePropertyWithDescriptor(decorators, target, propertyKey, descriptor) {
        for (var i = decorators.length - 1; i >= 0; --i) {
            var decorator = decorators[i];
            var decorated = decorator(target, propertyKey, descriptor);
            if (!IsUndefined(decorated)) {
                if (!IsObject(decorated)) {
                    throw new TypeError();
                }
                descriptor = decorated;
            }
        }
        return descriptor;
    }
    function DecoratePropertyWithoutDescriptor(decorators, target, propertyKey) {
        for (var i = decorators.length - 1; i >= 0; --i) {
            var decorator = decorators[i];
            decorator(target, propertyKey);
        }
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#getorcreatemetadatamap--o-p-create-
    function GetOrCreateMetadataMap(target, targetKey, create) {
        var targetMetadata = __Metadata__.get(target);
        if (!targetMetadata) {
            if (!create) {
                return undefined;
            }
            targetMetadata = new _Map();
            __Metadata__.set(target, targetMetadata);
        }
        var keyMetadata = targetMetadata.get(targetKey);
        if (!keyMetadata) {
            if (!create) {
                return undefined;
            }
            keyMetadata = new _Map();
            targetMetadata.set(targetKey, keyMetadata);
        }
        return keyMetadata;
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryhasmetadata--metadatakey-o-p-
    function OrdinaryHasMetadata(MetadataKey, O, P) {
        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
        if (hasOwn) {
            return true;
        }
        var parent = GetPrototypeOf(O);
        if (parent !== null) {
            return OrdinaryHasMetadata(MetadataKey, parent, P);
        }
        return false;
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryhasownmetadata--metadatakey-o-p-
    function OrdinaryHasOwnMetadata(MetadataKey, O, P) {
        var metadataMap = GetOrCreateMetadataMap(O, P, /*create*/ false);
        if (metadataMap === undefined) {
            return false;
        }
        return Boolean(metadataMap.has(MetadataKey));
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarygetmetadata--metadatakey-o-p-
    function OrdinaryGetMetadata(MetadataKey, O, P) {
        var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);
        if (hasOwn) {
            return OrdinaryGetOwnMetadata(MetadataKey, O, P);
        }
        var parent = GetPrototypeOf(O);
        if (parent !== null) {
            return OrdinaryGetMetadata(MetadataKey, parent, P);
        }
        return undefined;
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarygetownmetadata--metadatakey-o-p-
    function OrdinaryGetOwnMetadata(MetadataKey, O, P) {
        var metadataMap = GetOrCreateMetadataMap(O, P, /*create*/ false);
        if (metadataMap === undefined) {
            return undefined;
        }
        return metadataMap.get(MetadataKey);
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarydefineownmetadata--metadatakey-metadatavalue-o-p-
    function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {
        var metadataMap = GetOrCreateMetadataMap(O, P, /*create*/ true);
        metadataMap.set(MetadataKey, MetadataValue);
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinarymetadatakeys--o-p-
    function OrdinaryMetadataKeys(O, P) {
        var ownKeys = OrdinaryOwnMetadataKeys(O, P);
        var parent = GetPrototypeOf(O);
        if (parent === null) {
            return ownKeys;
        }
        var parentKeys = OrdinaryMetadataKeys(parent, P);
        if (parentKeys.length <= 0) {
            return ownKeys;
        }
        if (ownKeys.length <= 0) {
            return parentKeys;
        }
        var set = new _Set();
        var keys = [];
        for (var _i = 0; _i < ownKeys.length; _i++) {
            var key = ownKeys[_i];
            var hasKey = set.has(key);
            if (!hasKey) {
                set.add(key);
                keys.push(key);
            }
        }
        for (var _a = 0; _a < parentKeys.length; _a++) {
            var key = parentKeys[_a];
            var hasKey = set.has(key);
            if (!hasKey) {
                set.add(key);
                keys.push(key);
            }
        }
        return keys;
    }
    // https://github.com/jonathandturner/decorators/blob/master/specs/metadata.md#ordinaryownmetadatakeys--o-p-
    function OrdinaryOwnMetadataKeys(target, targetKey) {
        var metadataMap = GetOrCreateMetadataMap(target, targetKey, /*create*/ false);
        var keys = [];
        if (metadataMap) {
            metadataMap.forEach(function (_, key) { return keys.push(key); });
        }
        return keys;
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-language-types-undefined-type
    function IsUndefined(x) {
        return x === undefined;
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isarray
    function IsArray(x) {
        return Array.isArray(x);
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-object-type
    function IsObject(x) {
        return typeof x === "object" ? x !== null : typeof x === "function";
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-isconstructor
    function IsConstructor(x) {
        return typeof x === "function";
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-language-types-symbol-type
    function IsSymbol(x) {
        return typeof x === "symbol";
    }
    // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-topropertykey
    function ToPropertyKey(value) {
        if (IsSymbol(value)) {
            return value;
        }
        return String(value);
    }
    function GetPrototypeOf(O) {
        var proto = Object.getPrototypeOf(O);
        if (typeof O !== "function" || O === functionPrototype) {
            return proto;
        }
        // TypeScript doesn't set __proto__ in ES5, as it's non-standard. 
        // Try to determine the superclass constructor. Compatible implementations
        // must either set __proto__ on a subclass constructor to the superclass constructor,
        // or ensure each class has a valid `constructor` property on its prototype that
        // points back to the constructor.
        // If this is not the same as Function.[[Prototype]], then this is definately inherited.
        // This is the case when in ES6 or when using __proto__ in a compatible browser.
        if (proto !== functionPrototype) {
            return proto;
        }
        // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.
        var prototype = O.prototype;
        var prototypeProto = Object.getPrototypeOf(prototype);
        if (prototypeProto == null || prototypeProto === Object.prototype) {
            return proto;
        }
        // if the constructor was not a function, then we cannot determine the heritage.
        var constructor = prototypeProto.constructor;
        if (typeof constructor !== "function") {
            return proto;
        }
        // if we have some kind of self-reference, then we cannot determine the heritage.
        if (constructor === O) {
            return proto;
        }
        // we have a pretty good guess at the heritage.
        return constructor;
    }
    // naive Map shim
    function CreateMapPolyfill() {
        var cacheSentinel = {};
        function Map() {
            this._keys = [];
            this._values = [];
            this._cache = cacheSentinel;
        }
        Map.prototype = {
            get size() {
                return this._keys.length;
            },
            has: function (key) {
                if (key === this._cache) {
                    return true;
                }
                if (this._find(key) >= 0) {
                    this._cache = key;
                    return true;
                }
                return false;
            },
            get: function (key) {
                var index = this._find(key);
                if (index >= 0) {
                    this._cache = key;
                    return this._values[index];
                }
                return undefined;
            },
            set: function (key, value) {
                this.delete(key);
                this._keys.push(key);
                this._values.push(value);
                this._cache = key;
                return this;
            },
            delete: function (key) {
                var index = this._find(key);
                if (index >= 0) {
                    this._keys.splice(index, 1);
                    this._values.splice(index, 1);
                    this._cache = cacheSentinel;
                    return true;
                }
                return false;
            },
            clear: function () {
                this._keys.length = 0;
                this._values.length = 0;
                this._cache = cacheSentinel;
            },
            forEach: function (callback, thisArg) {
                var size = this.size;
                for (var i = 0; i < size; ++i) {
                    var key = this._keys[i];
                    var value = this._values[i];
                    this._cache = key;
                    callback.call(this, value, key, this);
                }
            },
            _find: function (key) {
                var keys = this._keys;
                var size = keys.length;
                for (var i = 0; i < size; ++i) {
                    if (keys[i] === key) {
                        return i;
                    }
                }
                return -1;
            }
        };
        return Map;
    }
    // naive Set shim
    function CreateSetPolyfill() {
        var cacheSentinel = {};
        function Set() {
            this._map = new _Map();
        }
        Set.prototype = {
            get size() {
                return this._map.length;
            },
            has: function (value) {
                return this._map.has(value);
            },
            add: function (value) {
                this._map.set(value, value);
                return this;
            },
            delete: function (value) {
                return this._map.delete(value);
            },
            clear: function () {
                this._map.clear();
            },
            forEach: function (callback, thisArg) {
                this._map.forEach(callback, thisArg);
            }
        };
        return Set;
    }
    // naive WeakMap shim
    function CreateWeakMapPolyfill() {
        var UUID_SIZE = 16;
        var isNode = typeof global !== "undefined" && Object.prototype.toString.call(global.process) === '[object process]';
        var nodeCrypto = isNode && require("crypto");
        var hasOwn = Object.prototype.hasOwnProperty;
        var keys = {};
        var rootKey = CreateUniqueKey();
        function WeakMap() {
            this._key = CreateUniqueKey();
        }
        WeakMap.prototype = {
            has: function (target) {
                var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                if (table) {
                    return this._key in table;
                }
                return false;
            },
            get: function (target) {
                var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                if (table) {
                    return table[this._key];
                }
                return undefined;
            },
            set: function (target, value) {
                var table = GetOrCreateWeakMapTable(target, /*create*/ true);
                table[this._key] = value;
                return this;
            },
            delete: function (target) {
                var table = GetOrCreateWeakMapTable(target, /*create*/ false);
                if (table && this._key in table) {
                    return delete table[this._key];
                }
                return false;
            },
            clear: function () {
                // NOTE: not a real clear, just makes the previous data unreachable
                this._key = CreateUniqueKey();
            }
        };
        function FillRandomBytes(buffer, size) {
            for (var i = 0; i < size; ++i) {
                buffer[i] = Math.random() * 255 | 0;
            }
        }
        function GenRandomBytes(size) {
            if (nodeCrypto) {
                var data = nodeCrypto.randomBytes(size);
                return data;
            }
            else if (typeof Uint8Array === "function") {
                var data = new Uint8Array(size);
                if (typeof crypto !== "undefined") {
                    crypto.getRandomValues(data);
                }
                else if (typeof msCrypto !== "undefined") {
                    msCrypto.getRandomValues(data);
                }
                else {
                    FillRandomBytes(data, size);
                }
                return data;
            }
            else {
                var data = new Array(size);
                FillRandomBytes(data, size);
                return data;
            }
        }
        function CreateUUID() {
            var data = GenRandomBytes(UUID_SIZE);
            // mark as random - RFC 4122  4.4
            data[6] = data[6] & 0x4f | 0x40;
            data[8] = data[8] & 0xbf | 0x80;
            var result = "";
            for (var offset = 0; offset < UUID_SIZE; ++offset) {
                var byte = data[offset];
                if (offset === 4 || offset === 6 || offset === 8) {
                    result += "-";
                }
                if (byte < 16) {
                    result += "0";
                }
                result += byte.toString(16).toLowerCase();
            }
            return result;
        }
        function CreateUniqueKey() {
            var key;
            do {
                key = "@@WeakMap@@" + CreateUUID();
            } while (hasOwn.call(keys, key));
            keys[key] = true;
            return key;
        }
        function GetOrCreateWeakMapTable(target, create) {
            if (!hasOwn.call(target, rootKey)) {
                if (!create) {
                    return undefined;
                }
                Object.defineProperty(target, rootKey, { value: Object.create(null) });
            }
            return target[rootKey];
        }
        return WeakMap;
    }
    // hook global Reflect
    (function (__global) {
        if (typeof __global.Reflect !== "undefined") {
            if (__global.Reflect !== Reflect) {
                for (var p in Reflect) {
                    __global.Reflect[p] = Reflect[p];
                }
            }
        }
        else {
            __global.Reflect = Reflect;
        }
    })(typeof window !== "undefined" ? window :
        typeof WorkerGlobalScope !== "undefined" ? self :
            typeof global !== "undefined" ? global :
                Function("return this;")());
})(Reflect || (Reflect = {}));
//# sourceMappingURL=Reflect.js.map
/**
  @license
  license
 **/
"format register";System.register("rxjs/util/root",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};e.root=i[typeof self]&&self||i[typeof window]&&window;var o=(i[typeof e]&&e&&!e.nodeType&&e,i[typeof t]&&t&&!t.nodeType&&t,i[typeof r]&&r);return!o||o.global!==o&&o.window!==o||(e.root=o),r.define=s,t.exports}),System.register("rxjs/util/isFunction",[],!0,function(require,e,t){function r(e){return"function"==typeof e}var s=System.global,i=s.define;return s.define=void 0,e.isFunction=r,s.define=i,t.exports}),System.register("rxjs/util/isArray",[],!0,function(require,e,t){var r=System.global,s=r.define;return r.define=void 0,e.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length},r.define=s,t.exports}),System.register("rxjs/util/isObject",[],!0,function(require,e,t){function r(e){return null!=e&&"object"==typeof e}var s=System.global,i=s.define;return s.define=void 0,e.isObject=r,s.define=i,t.exports}),System.register("rxjs/util/errorObject",[],!0,function(require,e,t){var r=System.global,s=r.define;return r.define=void 0,e.errorObject={e:{}},r.define=s,t.exports}),System.register("rxjs/util/UnsubscriptionError",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(t){e.call(this),this.errors=t,this.name="UnsubscriptionError",this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n"):""}return i(t,e),t}(Error);return e.UnsubscriptionError=o,r.define=s,t.exports}),System.register("rxjs/Observer",[],!0,function(require,e,t){var r=System.global,s=r.define;return r.define=void 0,e.empty={isUnsubscribed:!0,next:function(e){},error:function(e){throw e},complete:function(){}},r.define=s,t.exports}),System.register("rxjs/symbol/rxSubscriber",["rxjs/util/root"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=i.root.Symbol;return e.$$rxSubscriber="function"==typeof o&&"function"==typeof o["for"]?o["for"]("rxSubscriber"):"@@rxSubscriber",r.define=s,t.exports}),System.register("ponyfill",[],!0,function(require,e,t){var r=System.global,s=r.define;return r.define=void 0,t.exports=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t},r.define=s,t.exports}),System.register("rxjs/util/ObjectUnsubscribedError",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(){e.call(this,"object unsubscribed"),this.name="ObjectUnsubscribedError"}return i(t,e),t}(Error);return e.ObjectUnsubscribedError=o,r.define=s,t.exports}),System.register("rxjs/SubjectSubscription",["rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subscription"),n=function(e){function t(t,r){e.call(this),this.subject=t,this.subscriber=r,this.isUnsubscribed=!1}return i(t,e),t.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.isUnsubscribed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(o.Subscription);return e.SubjectSubscription=n,r.define=s,t.exports}),System.register("rxjs/AsyncSubject",["rxjs/Subject","rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/Subscription"),a=function(e){function t(){e.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}return i(t,e),t.prototype._subscribe=function(t){return this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),n.Subscription.EMPTY):this.hasError?(t.error(this.thrownError),n.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.value=e,this.hasNext=!0},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(o.Subject);return e.AsyncSubject=a,r.define=s,t.exports}),System.register("rxjs/observable/BoundNodeCallbackObservable",["rxjs/Observable","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/AsyncSubject"],!0,function(require,e,t){function r(e){var t=this,r=e.source,o=e.subscriber,n=r.callbackFunc,a=r.args,u=r.scheduler,p=r.subject;if(!p){p=r.subject=new b.AsyncSubject;var h=function f(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var o=f.source,n=o.selector,a=o.subject,b=e.shift();if(b)a.error(b);else if(n){var p=c.tryCatch(n).apply(this,e);p===l.errorObject?t.add(u.schedule(i,0,{err:l.errorObject.e,subject:a})):t.add(u.schedule(s,0,{value:p,subject:a}))}else{var h=1===e.length?e[0]:e;t.add(u.schedule(s,0,{value:h,subject:a}))}};h.source=r;var d=c.tryCatch(n).apply(this,a.concat(h));d===l.errorObject&&p.error(l.errorObject.e)}t.add(p.subscribe(o))}function s(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function i(e){var t=e.err,r=e.subject;r.error(t)}var o=System.global,n=o.define;o.define=void 0;var a=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},u=require("rxjs/Observable"),c=require("rxjs/util/tryCatch"),l=require("rxjs/util/errorObject"),b=require("rxjs/AsyncSubject"),p=function(e){function t(t,r,s,i){e.call(this),this.callbackFunc=t,this.selector=r,this.args=s,this.scheduler=i}return a(t,e),t.create=function(e,r,s){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,s)}},t.prototype._subscribe=function(e){var t=this.callbackFunc,s=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(r,0,{source:this,subscriber:e});if(!o){o=this.subject=new b.AsyncSubject;var n=function u(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=u.source,s=r.selector,i=r.subject,o=e.shift();if(o)i.error(o);else if(s){var n=c.tryCatch(s).apply(this,e);n===l.errorObject?i.error(l.errorObject.e):(i.next(n),i.complete())}else i.next(1===e.length?e[0]:e),i.complete()};n.source=this;var a=c.tryCatch(t).apply(this,s.concat(n));a===l.errorObject&&o.error(l.errorObject.e)}return o.subscribe(e)},t}(u.Observable);return e.BoundNodeCallbackObservable=p,o.define=n,t.exports}),System.register("rxjs/util/isScheduler",[],!0,function(require,e,t){function r(e){return e&&"function"==typeof e.schedule}var s=System.global,i=s.define;return s.define=void 0,e.isScheduler=r,s.define=i,t.exports}),System.register("rxjs/observable/ScalarObservable",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=function(e){function t(t,r){e.call(this),this.value=t,this.scheduler=r,this._isScalar=!0,r&&(this._isScalar=!1)}return i(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.done,r=e.value,s=e.subscriber;return t?void s.complete():(s.next(r),void(s.isUnsubscribed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var r=this.value,s=this.scheduler;return s?s.schedule(t.dispatch,0,{done:!1,value:r,subscriber:e}):(e.next(r),void(e.isUnsubscribed||e.complete()))},t}(o.Observable);return e.ScalarObservable=n,r.define=s,t.exports}),System.register("rxjs/observable/EmptyObservable",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=function(e){function t(t){e.call(this),this.scheduler=t}return i(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var r=this.scheduler;return r?r.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(o.Observable);return e.EmptyObservable=n,r.define=s,t.exports}),System.register("rxjs/OuterSubscriber",["rxjs/Subscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subscriber"),n=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(o.Subscriber);return e.OuterSubscriber=n,r.define=s,t.exports}),System.register("rxjs/util/isPromise",[],!0,function(require,e,t){function r(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var s=System.global,i=s.define;return s.define=void 0,e.isPromise=r,s.define=i,t.exports}),System.register("rxjs/symbol/iterator",["rxjs/util/root"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=i.root.Symbol;if("function"==typeof o)o.iterator?e.$$iterator=o.iterator:"function"==typeof o["for"]&&(e.$$iterator=o["for"]("iterator"));else if(i.root.Set&&"function"==typeof(new i.root.Set)["@@iterator"])e.$$iterator="@@iterator";else if(i.root.Map)for(var n=Object.getOwnPropertyNames(i.root.Map.prototype),a=0;a<n.length;++a){var u=n[a];if("entries"!==u&&"size"!==u&&i.root.Map.prototype[u]===i.root.Map.prototype.entries){e.$$iterator=u;break}}else e.$$iterator="@@iterator";return r.define=s,t.exports}),System.register("rxjs/InnerSubscriber",["rxjs/Subscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subscriber"),n=function(e){function t(t,r,s){e.call(this),this.parent=t,this.outerValue=r,this.outerIndex=s,this.index=0}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(o.Subscriber);return e.InnerSubscriber=n,r.define=s,t.exports}),System.register("rxjs/operator/mergeAll",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.mergeAll=r;var u=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.concurrent))},e}();e.MergeAllOperator=u;var c=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return o(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);return e.MergeAllSubscriber=c,s.define=i,t.exports}),System.register("rxjs/observable/DeferObservable",["rxjs/Observable","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/util/subscribeToResult"),a=require("rxjs/OuterSubscriber"),u=function(e){function t(t){e.call(this),this.observableFactory=t}return i(t,e),t.create=function(e){return new t(e)},t.prototype._subscribe=function(e){return new c(e,this.observableFactory)},t}(o.Observable);e.DeferObservable=u;var c=function(e){function t(t,r){e.call(this,t),this.factory=r,this.tryDefer()}return i(t,e),t.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},t.prototype._callFactory=function(){var e=this.factory();e&&this.add(n.subscribeToResult(this,e))},t}(a.OuterSubscriber);return r.define=s,t.exports}),System.register("rxjs/observable/empty",["rxjs/observable/EmptyObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/EmptyObservable");return e.empty=i.EmptyObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/ForkJoinObservable",["rxjs/Observable","rxjs/observable/EmptyObservable","rxjs/util/isArray","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/observable/EmptyObservable"),a=require("rxjs/util/isArray"),u=require("rxjs/util/subscribeToResult"),c=require("rxjs/OuterSubscriber"),l=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return i(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new n.EmptyObservable;var s=null;return"function"==typeof e[e.length-1]&&(s=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),0===e.length?new n.EmptyObservable:new t(e,s)},t.prototype._subscribe=function(e){return new b(e,this.sources,this.resultSelector)},t}(o.Observable);e.ForkJoinObservable=l;var b=function(e){function t(t,r,s){e.call(this,t),this.sources=r,this.resultSelector=s,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var o=0;i>o;o++){var n=r[o],a=u.subscribeToResult(this,n,null,o);a&&(a.outerIndex=o,this.add(a))}}return i(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this,s=r.haveValues,i=r.resultSelector,o=r.values,n=o.length;if(!e._hasValue)return void t.complete();if(this.completed++,this.completed===n){if(s===n){var a=i?i.apply(this,o):o;t.next(a)}t.complete()}},t}(c.OuterSubscriber);return r.define=s,t.exports}),System.register("rxjs/observable/PromiseObservable",["rxjs/util/root","rxjs/Observable"],!0,function(require,e,t){function r(e){var t=e.value,r=e.subscriber;r.isUnsubscribed||(r.next(t),r.complete())}function s(e){var t=e.err,r=e.subscriber;r.isUnsubscribed||r.error(t)}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/util/root"),u=require("rxjs/Observable"),c=function(e){function t(t,r){void 0===r&&(r=null),e.call(this),this.promise=t,this.scheduler=r}return n(t,e),t.create=function(e,r){return void 0===r&&(r=null),new t(e,r)},t.prototype._subscribe=function(e){var t=this,i=this.promise,o=this.scheduler;if(null==o)this._isScalar?e.isUnsubscribed||(e.next(this.value),e.complete()):i.then(function(r){t.value=r,t._isScalar=!0,e.isUnsubscribed||(e.next(r),e.complete())},function(t){e.isUnsubscribed||e.error(t)}).then(null,function(e){a.root.setTimeout(function(){throw e})});else if(this._isScalar){if(!e.isUnsubscribed)return o.schedule(r,0,{value:this.value,subscriber:e})}else i.then(function(s){t.value=s,t._isScalar=!0,e.isUnsubscribed||e.add(o.schedule(r,0,{value:s,subscriber:e}))},function(t){e.isUnsubscribed||e.add(o.schedule(s,0,{err:t,subscriber:e}))}).then(null,function(e){a.root.setTimeout(function(){throw e})})},t}(u.Observable);return e.PromiseObservable=c,i.define=o,t.exports}),System.register("rxjs/observable/IteratorObservable",["rxjs/util/root","rxjs/util/isObject","rxjs/util/tryCatch","rxjs/Observable","rxjs/util/isFunction","rxjs/symbol/iterator","rxjs/util/errorObject"],!0,function(require,e,t){function r(e){var t=e[d.$$iterator];if(!t&&"string"==typeof e)return new x(e);if(!t&&void 0!==e.length)return new y(e);if(!t)throw new TypeError("Object is not iterable");return e[d.$$iterator]()}function s(e){var t=+e.length;return isNaN(t)?0:0!==t&&i(t)?(t=o(t)*Math.floor(Math.abs(t)),0>=t?0:t>j?j:t):t}function i(e){return"number"==typeof e&&c.root.isFinite(e)}function o(e){var t=+e;return 0===t?t:isNaN(t)?t:0>t?-1:1}var n=System.global,a=n.define;n.define=void 0;var u=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=require("rxjs/util/root"),l=require("rxjs/util/isObject"),b=require("rxjs/util/tryCatch"),p=require("rxjs/Observable"),h=require("rxjs/util/isFunction"),d=require("rxjs/symbol/iterator"),f=require("rxjs/util/errorObject"),v=function(e){function t(t,s,i,o){if(e.call(this),null==t)throw new Error("iterator cannot be null.");if(l.isObject(s))this.thisArg=s,this.scheduler=i;else if(h.isFunction(s))this.project=s,this.thisArg=i,this.scheduler=o;else if(null!=s)throw new Error("When provided, `project` must be a function.");this.iterator=r(t)}return u(t,e),t.create=function(e,r,s,i){return new t(e,r,s,i)},t.dispatch=function(e){var t=e.index,r=e.hasError,s=e.thisArg,i=e.project,o=e.iterator,n=e.subscriber;if(r)return void n.error(e.error);var a=o.next();return a.done?void n.complete():(i?(a=b.tryCatch(i).call(s,a.value,t),a===f.errorObject?(e.error=f.errorObject.e,e.hasError=!0):(n.next(a),e.index=t+1)):(n.next(a.value),e.index=t+1),void(n.isUnsubscribed||this.schedule(e)))},t.prototype._subscribe=function(e){var r=0,s=this,i=s.iterator,o=s.project,n=s.thisArg,a=s.scheduler;if(a)return a.schedule(t.dispatch,0,{index:r,thisArg:n,project:o,iterator:i,subscriber:e});for(;;){var u=i.next();if(u.done){e.complete();break}if(o){if(u=b.tryCatch(o).call(n,u.value,r++),u===f.errorObject){e.error(f.errorObject.e);break}e.next(u)}else e.next(u.value);if(e.isUnsubscribed)break}},t}(p.Observable);e.IteratorObservable=v;var x=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.length),this.str=e,this.idx=t,this.len=r}return e.prototype[d.$$iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},e}(),y=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=s(e)),this.arr=e,this.idx=t,this.len=r}return e.prototype[d.$$iterator]=function(){return this},e.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},e}(),j=Math.pow(2,53)-1;return n.define=a,t.exports}),System.register("rxjs/observable/ArrayLikeObservable",["rxjs/Observable","rxjs/observable/ScalarObservable","rxjs/observable/EmptyObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/observable/ScalarObservable"),a=require("rxjs/observable/EmptyObservable"),u=function(e){function t(t,r,s,i){e.call(this),this.arrayLike=t,this.scheduler=i,r||i||1!==t.length||(this._isScalar=!0,this.value=t[0]),r&&(this.mapFn=r.bind(s))}return i(t,e),t.create=function(e,r,s,i){var o=e.length;return 0===o?new a.EmptyObservable:1!==o||r?new t(e,r,s,i):new n.ScalarObservable(e[0],i)},t.dispatch=function(e){var t=e.arrayLike,r=e.index,s=e.length,i=e.mapFn,o=e.subscriber;if(!o.isUnsubscribed){if(r>=s)return void o.complete();var n=i?i(t[r],r):t[r];o.next(n),e.index=r+1,this.schedule(e)}},t.prototype._subscribe=function(e){var r=0,s=this,i=s.arrayLike,o=s.mapFn,n=s.scheduler,a=i.length;if(n)return n.schedule(t.dispatch,0,{arrayLike:i,index:r,length:a,mapFn:o,subscriber:e});for(var u=0;a>u&&!e.isUnsubscribed;u++){var c=o?o(i[u],u):i[u];e.next(c)}e.complete()},t}(o.Observable);return e.ArrayLikeObservable=u,r.define=s,t.exports}),System.register("rxjs/Notification",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=function(){function e(e,t,r){this.kind=e,this.value=t,this.exception=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.exception);case"C":return e.complete&&e.complete()}},e.prototype["do"]=function(e,t,r){var s=this.kind;switch(s){case"N":return e&&e(this.value);case"E":return t&&t(this.exception);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this["do"](e,t,r)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return i.Observable.of(this.value);case"E":return i.Observable["throw"](this.exception);case"C":return i.Observable.empty()}},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):this.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return this.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();return e.Notification=o,r.define=s,t.exports}),System.register("rxjs/observable/FromEventObservable",["rxjs/Observable","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/Subscription"],!0,function(require,e,t){function r(e){return!!e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function s(e){return!!e&&"function"==typeof e.on&&"function"==typeof e.off}function i(e){return!!e&&"[object NodeList]"===e.toString()}function o(e){return!!e&&"[object HTMLCollection]"===e.toString()}function n(e){return!!e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}var a=System.global,u=a.define;a.define=void 0;var c=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},l=require("rxjs/Observable"),b=require("rxjs/util/tryCatch"),p=require("rxjs/util/errorObject"),h=require("rxjs/Subscription"),d=function(e){function t(t,r,s){e.call(this),this.sourceObj=t,this.eventName=r,this.selector=s}return c(t,e),t.create=function(e,r,s){return new t(e,r,s)},t.setupSubscription=function(e,a,u,c){var l;if(i(e)||o(e))for(var b=0,p=e.length;p>b;b++)t.setupSubscription(e[b],a,u,c);else if(n(e)){var d=e;e.addEventListener(a,u),l=function(){return d.removeEventListener(a,u)}}else if(s(e)){var f=e;e.on(a,u),l=function(){return f.off(a,u)}}else if(r(e)){var v=e;e.addListener(a,u),l=function(){return v.removeListener(a,u)}}c.add(new h.Subscription(l))},t.prototype._subscribe=function(e){var r=this.sourceObj,s=this.eventName,i=this.selector,o=i?function(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var s=b.tryCatch(i).apply(void 0,t);s===p.errorObject?e.error(p.errorObject.e):e.next(s)}:function(t){return e.next(t)};t.setupSubscription(r,s,o,e)},t}(l.Observable);return e.FromEventObservable=d,a.define=u,t.exports}),System.register("rxjs/observable/FromEventPatternObservable",["rxjs/Observable","rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/Subscription"),a=function(e){function t(t,r,s){e.call(this),this.addHandler=t,this.removeHandler=r,this.selector=s}return i(t,e),t.create=function(e,r,s){return new t(e,r,s)},t.prototype._subscribe=function(e){var t=this,r=this.removeHandler,s=this.selector?function(){for(var r=[],s=0;s<arguments.length;s++)r[s-0]=arguments[s];t._callSelector(e,r)}:function(t){e.next(t)};this._callAddHandler(s,e),e.add(new n.Subscription(function(){r(s)}))},t.prototype._callSelector=function(e,t){try{var r=this.selector.apply(this,t);e.next(r)}catch(s){e.error(s)}},t.prototype._callAddHandler=function(e,t){try{this.addHandler(e)}catch(r){t.error(r)}},t}(o.Observable);return e.FromEventPatternObservable=a,r.define=s,t.exports}),System.register("rxjs/observable/fromPromise",["rxjs/observable/PromiseObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/PromiseObservable");return e.fromPromise=i.PromiseObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/GenerateObservable",["rxjs/Observable","rxjs/util/isScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/util/isScheduler"),a=function(e){return e},u=function(e){function t(t,r,s,i,o){e.call(this),this.initialState=t,this.condition=r,this.iterate=s,this.resultSelector=i,this.scheduler=o}return i(t,e),t.create=function(e,r,s,i,o){return 1==arguments.length?new t(e.initialState,e.condition,e.iterate,e.resultSelector||a,e.scheduler):void 0===i||n.isScheduler(i)?new t(e,r,s,a,i):new t(e,r,s,i,o)},t.prototype._subscribe=function(e){var r=this.initialState;if(this.scheduler)return this.scheduler.schedule(t.dispatch,0,{subscriber:e,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:r});for(var s=this,i=s.condition,o=s.resultSelector,n=s.iterate;;){if(i){var a=void 0;try{a=i(r)}catch(u){return void e.error(u)}if(!a){e.complete();break}}var c=void 0;try{c=o(r)}catch(u){return void e.error(u)}if(e.next(c),e.isUnsubscribed)break;try{r=n(r)}catch(u){return void e.error(u)}}},t.dispatch=function(e){var t=e.subscriber,r=e.condition;if(!t.isUnsubscribed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(s){return void t.error(s)}else e.needIterate=!0;if(r){var i=void 0;try{i=r(e.state)}catch(s){return void t.error(s)}if(!i)return void t.complete();if(t.isUnsubscribed)return}var o;try{o=e.resultSelector(e.state)}catch(s){return void t.error(s)}if(!t.isUnsubscribed&&(t.next(o),!t.isUnsubscribed))return this.schedule(e)}},t}(o.Observable);return e.GenerateObservable=u,r.define=s,t.exports}),System.register("rxjs/observable/IfObservable",["rxjs/Observable","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/util/subscribeToResult"),a=require("rxjs/OuterSubscriber"),u=function(e){function t(t,r,s){e.call(this),this.condition=t,this.thenSource=r,this.elseSource=s}return i(t,e),t.create=function(e,r,s){return new t(e,r,s)},t.prototype._subscribe=function(e){var t=this,r=t.condition,s=t.thenSource,i=t.elseSource;return new c(e,r,s,i)},t}(o.Observable);e.IfObservable=u;var c=function(e){function t(t,r,s,i){e.call(this,t),this.condition=r,this.thenSource=s,this.elseSource=i,this.tryIf()}return i(t,e),t.prototype.tryIf=function(){var e,t=this,r=t.condition,s=t.thenSource,i=t.elseSource;try{e=r();var o=e?s:i;o?this.add(n.subscribeToResult(this,o)):this._complete()}catch(a){this._error(a)}},t}(a.OuterSubscriber);return r.define=s,t.exports}),System.register("rxjs/util/isNumeric",["rxjs/util/isArray"],!0,function(require,e,t){function r(e){return!o.isArray(e)&&e-parseFloat(e)+1>=0}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/util/isArray");return e.isNumeric=r,s.define=i,t.exports}),System.register("rxjs/scheduler/FutureAction",["rxjs/util/root","rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/root"),n=require("rxjs/Subscription"),a=function(e){function t(t,r){e.call(this),this.scheduler=t,this.work=r,this.pending=!1}return i(t,e),t.prototype.execute=function(){if(this.isUnsubscribed)this.error=new Error("executing a cancelled action");else try{this.work(this.state)}catch(e){this.unsubscribe(),this.error=e}},t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this.isUnsubscribed?this:this._schedule(e,t)},t.prototype._schedule=function(e,t){var r=this;void 0===t&&(t=0),this.state=e,this.pending=!0;var s=this.id;return null!=s&&this.delay===t?this:(this.delay=t,null!=s&&(this.id=null,o.root.clearInterval(s)),this.id=o.root.setInterval(function(){r.pending=!1;var e=r,t=e.id,s=e.scheduler;s.actions.push(r),s.flush(),r.pending===!1&&null!=t&&(r.id=null,o.root.clearInterval(t))},t),this)},t.prototype._unsubscribe=function(){this.pending=!1;var e=this,t=e.id,r=e.scheduler,s=r.actions,i=s.indexOf(this);null!=t&&(this.id=null,o.root.clearInterval(t)),-1!==i&&s.splice(i,1),this.work=null,this.state=null,this.scheduler=null},t}(n.Subscription);return e.FutureAction=a,r.define=s,t.exports}),System.register("rxjs/scheduler/QueueAction",["rxjs/scheduler/FutureAction"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/scheduler/FutureAction"),n=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype._schedule=function(t,r){if(void 0===r&&(r=0),r>0)return e.prototype._schedule.call(this,t,r);this.delay=r,this.state=t;var s=this.scheduler;return s.actions.push(this),s.flush(),this},t}(o.FutureAction);return e.QueueAction=n,r.define=s,t.exports}),System.register("rxjs/operator/merge",["rxjs/observable/ArrayObservable","rxjs/operator/mergeAll","rxjs/util/isScheduler"],!0,function(require,e,t){
function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.unshift(this),s.apply(this,e)}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=Number.POSITIVE_INFINITY,s=null,i=e[e.length-1];return u.isScheduler(i)?(s=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),1===e.length?e[0]:new n.ArrayObservable(e,s).lift(new a.MergeAllOperator(r))}var i=System.global,o=i.define;i.define=void 0;var n=require("rxjs/observable/ArrayObservable"),a=require("rxjs/operator/mergeAll"),u=require("rxjs/util/isScheduler");return e.merge=r,e.mergeStatic=s,i.define=o,t.exports}),System.register("rxjs/operator/race",["rxjs/util/isArray","rxjs/observable/ArrayObservable","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&a.isArray(e[0])&&(e=e[0]),e.unshift(this),s.apply(this,e)}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(1===e.length){if(!a.isArray(e[0]))return e[0];e=e[0]}return new u.ArrayObservable(e).lift(new b)}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/util/isArray"),u=require("rxjs/observable/ArrayObservable"),c=require("rxjs/OuterSubscriber"),l=require("rxjs/util/subscribeToResult");e.race=r,e.raceStatic=s;var b=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new p(e))},e}();e.RaceOperator=b;var p=function(e){function t(t){e.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return n(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;t>r;r++){var s=e[r],i=l.subscribeToResult(this,s,s,r);this.subscriptions&&(this.subscriptions.push(i),this.add(i))}this.observables=null}},t.prototype.notifyNext=function(e,t,r,s,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var n=this.subscriptions[o];n.unsubscribe(),this.remove(n)}this.subscriptions=null}this.destination.next(t)},t}(c.OuterSubscriber);return e.RaceSubscriber=p,i.define=o,t.exports}),System.register("rxjs/util/noop",[],!0,function(require,e,t){function r(){}var s=System.global,i=s.define;return s.define=void 0,e.noop=r,s.define=i,t.exports}),System.register("rxjs/observable/of",["rxjs/observable/ArrayObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/ArrayObservable");return e.of=i.ArrayObservable.of,r.define=s,t.exports}),System.register("rxjs/operator/onErrorResumeNext",["rxjs/observable/FromObservable","rxjs/util/isArray","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return 1===e.length&&u.isArray(e[0])&&(e=e[0]),this.lift(new b(e))}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return 1===e.length&&u.isArray(e[0])&&(e=e[0]),r=e.shift(),new a.FromObservable(r,null).lift(new b(e))}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/observable/FromObservable"),u=require("rxjs/util/isArray"),c=require("rxjs/OuterSubscriber"),l=require("rxjs/util/subscribeToResult");e.onErrorResumeNext=r,e.onErrorResumeNextStatic=s;var b=function(){function e(e){this.nextSources=e}return e.prototype.call=function(e,t){return t._subscribe(new p(e,this.nextSources))},e}(),p=function(e){function t(t,r){e.call(this,t),this.destination=t,this.nextSources=r}return n(t,e),t.prototype.notifyError=function(e,t){this.subscribeToNextSource()},t.prototype.notifyComplete=function(e){this.subscribeToNextSource()},t.prototype._error=function(e){this.subscribeToNextSource()},t.prototype._complete=function(){this.subscribeToNextSource()},t.prototype.subscribeToNextSource=function(){var e=this.nextSources.shift();e?this.add(l.subscribeToResult(this,e)):this.destination.complete()},t}(c.OuterSubscriber);return i.define=o,t.exports}),System.register("rxjs/observable/RangeObservable",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=function(e){function t(t,r,s){e.call(this),this.start=t,this._count=r,this.scheduler=s}return i(t,e),t.create=function(e,r,s){return void 0===e&&(e=0),void 0===r&&(r=0),new t(e,r,s)},t.dispatch=function(e){var t=e.start,r=e.index,s=e.count,i=e.subscriber;return r>=s?void i.complete():(i.next(t),void(i.isUnsubscribed||(e.index=r+1,e.start=t+1,this.schedule(e))))},t.prototype._subscribe=function(e){var r=0,s=this.start,i=this._count,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{index:r,count:i,start:s,subscriber:e});for(;;){if(r++>=i){e.complete();break}if(e.next(s++),e.isUnsubscribed)break}},t}(o.Observable);return e.RangeObservable=n,r.define=s,t.exports}),System.register("rxjs/observable/UsingObservable",["rxjs/Observable","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/util/subscribeToResult"),a=require("rxjs/OuterSubscriber"),u=function(e){function t(t,r){e.call(this),this.resourceFactory=t,this.observableFactory=r}return i(t,e),t.create=function(e,r){return new t(e,r)},t.prototype._subscribe=function(e){var t,r=this,s=r.resourceFactory,i=r.observableFactory;try{return t=s(),new c(e,t,i)}catch(o){e.error(o)}},t}(o.Observable);e.UsingObservable=u;var c=function(e){function t(t,r,s){e.call(this,t),this.resource=r,this.observableFactory=s,t.add(r),this.tryUse()}return i(t,e),t.prototype.tryUse=function(){try{var e=this.observableFactory.call(this,this.resource);e&&this.add(n.subscribeToResult(this,e))}catch(t){this._error(t)}},t}(a.OuterSubscriber);return r.define=s,t.exports}),System.register("rxjs/observable/ErrorObservable",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=function(e){function t(t,r){e.call(this),this.error=t,this.scheduler=r}return i(t,e),t.create=function(e,r){return new t(e,r)},t.dispatch=function(e){var t=e.error,r=e.subscriber;r.error(t)},t.prototype._subscribe=function(e){var r=this.error,s=this.scheduler;return s?s.schedule(t.dispatch,0,{error:r,subscriber:e}):void e.error(r)},t}(o.Observable);return e.ErrorObservable=n,r.define=s,t.exports}),System.register("rxjs/util/isDate",[],!0,function(require,e,t){function r(e){return e instanceof Date&&!isNaN(+e)}var s=System.global,i=s.define;return s.define=void 0,e.isDate=r,s.define=i,t.exports}),System.register("rxjs/operator/zip",["rxjs/observable/ArrayObservable","rxjs/util/isArray","rxjs/Subscriber","rxjs/OuterSubscriber","rxjs/util/subscribeToResult","rxjs/symbol/iterator"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return e.unshift(this),s.apply(this,e)}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),new a.ArrayObservable(e).lift(new h(r))}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/observable/ArrayObservable"),u=require("rxjs/util/isArray"),c=require("rxjs/Subscriber"),l=require("rxjs/OuterSubscriber"),b=require("rxjs/util/subscribeToResult"),p=require("rxjs/symbol/iterator");e.zipProto=r,e.zipStatic=s;var h=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t._subscribe(new d(e,this.project))},e}();e.ZipOperator=h;var d=function(e){function t(t,r,s){void 0===s&&(s=Object.create(null)),e.call(this,t),this.index=0,this.iterators=[],this.active=0,this.project="function"==typeof r?r:null,this.values=s}return n(t,e),t.prototype._next=function(e){var t=this.iterators,r=this.index++;u.isArray(e)?t.push(new v(e)):"function"==typeof e[p.$$iterator]?t.push(new f(e[p.$$iterator]())):t.push(new x(this.destination,this,e,r))},t.prototype._complete=function(){var e=this.iterators,t=e.length;this.active=t;for(var r=0;t>r;r++){var s=e[r];s.stillUnsubscribed?this.add(s.subscribe(s,r)):this.active--}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,s=0;t>s;s++){var i=e[s];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,n=[],s=0;t>s;s++){var i=e[s],a=i.next();if(i.hasCompleted()&&(o=!0),a.done)return void r.complete();n.push(a.value)}this.project?this._tryProject(n):r.next(n),o&&r.complete()},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(c.Subscriber);e.ZipSubscriber=d;var f=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),v=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[p.$$iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),x=function(e){function t(t,r,s,i){e.call(this,t),this.parent=r,this.observable=s,this.index=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}return n(t,e),t.prototype[p.$$iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return b.subscribeToResult(this,this.observable,this,t)},t}(l.OuterSubscriber);return i.define=o,t.exports}),System.register("rxjs/observable/dom/AjaxObservable",["rxjs/util/root","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/Observable","rxjs/Subscriber"],!0,function(require,e,t){function r(){var e=new p.root.XMLHttpRequest;if(this.crossDomain){if("withCredentials"in e)return e.withCredentials=!0,e;if(p.root.XDomainRequest)return new p.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}return e}function s(e){return e.response}function i(e,t,r){return void 0===t&&(t=s),void 0===r&&(r=null),new x({method:"GET",url:e,resultSelector:t,headers:r})}function o(e,t,r){return new x({method:"POST",url:e,body:t,headers:r})}function n(e,t){return new x({method:"DELETE",url:e,headers:t})}function a(e,t,r){return new x({method:"PUT",url:e,body:t,headers:r})}function u(e,t,r){var s=t?function(e){return t(e.response)}:function(e){return e.response};return new x({method:"GET",url:e,responseType:"json",resultSelector:s,headers:r})}var c=System.global,l=c.define;c.define=void 0;var b=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},p=require("rxjs/util/root"),h=require("rxjs/util/tryCatch"),d=require("rxjs/util/errorObject"),f=require("rxjs/Observable"),v=require("rxjs/Subscriber");e.ajaxGet=i,e.ajaxPost=o,e.ajaxDelete=n,e.ajaxPut=a,e.ajaxGetJSON=u;var x=function(e){function t(t){e.call(this);var s={async:!0,createXHR:r,crossDomain:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)s.url=t;else for(var i in t)t.hasOwnProperty(i)&&(s[i]=t[i]);this.request=s}return b(t,e),t._create_stub=function(){return null},t.prototype._subscribe=function(e){return new y(e,this.request)},t.create=function(){var e=function(e){return new t(e)};return e.get=i,e.post=o,e["delete"]=n,e.put=a,e.getJSON=u,e}(),t}(f.Observable);e.AjaxObservable=x;var y=function(e){function t(t,r){e.call(this,t),this.request=r,this.done=!1;var s=r.headers=r.headers||{};r.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in s||(s["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=this.serializeBody(r.body,r.headers["Content-Type"]),this.resultSelector=r.resultSelector,this.send()}return b(t,e),t.prototype.next=function(e){this.done=!0;var t=this,r=t.resultSelector,s=t.xhr,i=t.request,o=t.destination,n=new j(e,s,i);if(r){var a=h.tryCatch(r)(n);a===d.errorObject?this.error(d.errorObject.e):o.next(a)}else o.next(n)},t.prototype.send=function(){var e=this,t=e.request,r=e.request,s=r.user,i=r.method,o=r.url,n=r.async,a=r.password,u=r.headers,c=r.body,l=t.createXHR,b=h.tryCatch(l).call(t);if(b===d.errorObject)this.error(d.errorObject.e);else{this.xhr=b;var p=void 0;if(p=s?h.tryCatch(b.open).call(b,i,o,n,s,a):h.tryCatch(b.open).call(b,i,o,n),p===d.errorObject)return void this.error(d.errorObject.e);b.timeout=t.timeout,b.responseType=t.responseType,this.setHeaders(b,u),this.setupEvents(b,t),c?b.send(c):b.send()}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(p.root.FormData&&e instanceof p.root.FormData)return e;var r=t.indexOf(";");switch(-1!==r&&(t=t.substring(0,r)),t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURI(t)+"="+encodeURI(e[t])}).join("&");case"application/json":return JSON.stringify(e)}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;e.ontimeout=function s(e){var t=s,r=t.subscriber,i=t.progressSubscriber,o=t.request;i&&i.error(e),r.error(new S(this,o))},e.ontimeout.request=t,e.ontimeout.subscriber=this,e.ontimeout.progressSubscriber=r,e.upload&&"withCredentials"in e&&p.root.XDomainRequest&&(r&&(e.onprogress=function i(e){var t=i.progressSubscriber;t.next(e)},e.onprogress.progressSubscriber=r),e.onerror=function o(e){var t=o,r=t.progressSubscriber,s=t.subscriber,i=t.request;r&&r.error(e),s.error(new m("ajax error",this,i))},e.onerror.request=t,e.onerror.subscriber=this,e.onerror.progressSubscriber=r),e.onreadystatechange=function n(e){var t=n,r=t.subscriber,s=t.progressSubscriber,i=t.request;if(4===this.readyState){var o=1223===this.status?204:this.status,a="text"===this.responseType?this.response||this.responseText:this.response;0===o&&(o=a?200:0),o>=200&&300>o?(s&&s.complete(),r.next(e),r.complete()):(s&&s.error(e),r.error(new m("ajax error "+o,this,i)))}},e.onreadystatechange.subscriber=this,e.onreadystatechange.progressSubscriber=r,e.onreadystatechange.request=t},t.prototype.unsubscribe=function(){var t=this,r=t.done,s=t.xhr;!r&&s&&4!==s.readyState&&s.abort(),e.prototype.unsubscribe.call(this)},t}(v.Subscriber);e.AjaxSubscriber=y;var j=function(){function e(e,t,r){switch(this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.responseType){case"json":"response"in t?this.response=t.responseType?t.response:JSON.parse(t.response||t.responseText||""):this.response=JSON.parse(t.responseText||"");break;case"xml":this.response=t.responseXML;break;case"text":default:this.response="response"in t?t.response:t.responseText}}return e}();e.AjaxResponse=j;var m=function(e){function t(t,r,s){e.call(this,t),this.message=t,this.xhr=r,this.request=s,this.status=r.status}return b(t,e),t}(Error);e.AjaxError=m;var S=function(e){function t(t,r){e.call(this,"ajax timeout",t,r)}return b(t,e),t}(m);return e.AjaxTimeoutError=S,c.define=l,t.exports}),System.register("rxjs/scheduler/queue",["rxjs/scheduler/QueueScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/scheduler/QueueScheduler");return e.queue=new i.QueueScheduler,r.define=s,t.exports}),System.register("rxjs/util/assign",["rxjs/util/root"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=i.root.Object;return"function"!=typeof o.assign&&!function(){o.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var s=o(e),i=t.length,n=0;i>n;n++){var a=t[n];if(void 0!==a&&null!==a)for(var u in a)a.hasOwnProperty(u)&&(s[u]=a[u])}return s}}(),e.assign=o.assign,r.define=s,t.exports}),System.register("rxjs/operator/buffer",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.buffer=r;var u=function(){function e(e){this.closingNotifier=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.closingNotifier))},e}(),c=function(e){function t(t,r){e.call(this,t),this.buffer=[],this.add(a.subscribeToResult(this,r))}return o(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype.notifyNext=function(e,t,r,s,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/bufferCount",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=null),this.lift(new a(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.bufferCount=r;var a=function(){function e(e,t){this.bufferSize=e,this.startBufferEvery=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.bufferSize,this.startBufferEvery))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.bufferSize=r,this.startBufferEvery=s,this.buffers=[[]],this.count=0}return o(t,e),t.prototype._next=function(e){var t=this.count+=1,r=this.destination,s=this.bufferSize,i=null==this.startBufferEvery?s:this.startBufferEvery,o=this.buffers,n=o.length,a=-1;t%i===0&&o.push([]);for(var u=0;n>u;u++){var c=o[u];c.push(e),c.length===s&&(a=u,r.next(c))}-1!==a&&o.splice(a,1)},t.prototype._complete=function(){for(var t=this.destination,r=this.buffers;r.length>0;){var s=r.shift();s.length>0&&t.next(s)}e.prototype._complete.call(this)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/bufferTime",["rxjs/Subscriber","rxjs/scheduler/async","rxjs/util/isScheduler"],!0,function(require,e,t){function r(e){var t=arguments.length,r=l.async;b.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var s=null;t>=2&&(s=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),this.lift(new p(e,s,i,r))}function s(e){var t=e.subscriber,r=e.context;r&&t.closeContext(r),e.context=t.openContext(),t.isUnsubscribed||(e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function i(e){var t=e.bufferCreationInterval,r=e.bufferTimeSpan,s=e.subscriber,i=e.scheduler,n=s.openContext(),a=this;s.isUnsubscribed||(s.add(n.closeAction=i.schedule(o,r,{subscriber:s,context:n})),a.schedule(e,t))}function o(e){var t=e.subscriber,r=e.context;t.closeContext(r)}var n=System.global,a=n.define;n.define=void 0;var u=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=require("rxjs/Subscriber"),l=require("rxjs/scheduler/async"),b=require("rxjs/util/isScheduler");e.bufferTime=r;var p=function(){function e(e,t,r,s){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=s}return e.prototype.call=function(e,t){return t._subscribe(new d(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),h=function(){function e(){this.buffer=[]}return e}(),d=function(e){function t(t,r,n,a,u){e.call(this,t),this.bufferTimeSpan=r,this.bufferCreationInterval=n,this.maxBufferSize=a,this.scheduler=u,this.contexts=[];var c=this.openContext();if(this.timespanOnly=null==n||0>n,this.timespanOnly){var l={subscriber:this,context:c,bufferTimeSpan:r};this.add(c.closeAction=u.schedule(s,r,l))}else{var b={subscriber:this,context:c},p={bufferTimeSpan:r,bufferCreationInterval:n,subscriber:this,scheduler:u};this.add(c.closeAction=u.schedule(o,r,b)),this.add(u.schedule(i,n,p))}}return u(t,e),t.prototype._next=function(e){for(var t,r=this.contexts,s=r.length,i=0;s>i;i++){var o=r[i],n=o.buffer;n.push(e),n.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this,r=t.contexts,s=t.destination;r.length>0;){var i=r.shift();s.next(i.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),this.timespanOnly){e=this.openContext();var r=this.bufferTimeSpan,i={subscriber:this,context:e,bufferTimeSpan:r};this.add(e.closeAction=this.scheduler.schedule(s,r,i))}},t.prototype.openContext=function(){var e=new h;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;t.splice(t.indexOf(e),1)},t}(c.Subscriber);return n.define=a,t.exports}),System.register("rxjs/operator/bufferToggle",["rxjs/Subscription","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){function r(e,t){return this.lift(new c(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscription"),a=require("rxjs/util/subscribeToResult"),u=require("rxjs/OuterSubscriber");e.bufferToggle=r;var c=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.openings,this.closingSelector))},e}(),l=function(e){function t(t,r,s){e.call(this,t),this.openings=r,this.closingSelector=s,this.contexts=[],this.add(a.subscribeToResult(this,r))}return o(t,e),t.prototype._next=function(e){for(var t=this.contexts,r=t.length,s=0;r>s;s++)t[s].buffer.push(e)},t.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var s=r.shift();s.subscription.unsubscribe(),s.buffer=null,s.subscription=null}this.contexts=null,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,s,i){e?this.closeBuffer(e):this.openBuffer(t)},t.prototype.notifyComplete=function(e){this.closeBuffer(e.context)},t.prototype.openBuffer=function(e){try{var t=this.closingSelector,r=t.call(this,e);r&&this.trySubscribe(r)}catch(s){this._error(s)}},t.prototype.closeBuffer=function(e){var t=this.contexts;if(t&&e){var r=e.buffer,s=e.subscription;this.destination.next(r),t.splice(t.indexOf(e),1),this.remove(s),s.unsubscribe()}},t.prototype.trySubscribe=function(e){var t=this.contexts,r=[],s=new n.Subscription,i={buffer:r,subscription:s};t.push(i);var o=a.subscribeToResult(this,e,i);!o||o.isUnsubscribed?this.closeBuffer(i):(o.context=i,this.add(o),s.add(o))},t}(u.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/bufferWhen",["rxjs/Subscription","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new b(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscription"),a=require("rxjs/util/tryCatch"),u=require("rxjs/util/errorObject"),c=require("rxjs/OuterSubscriber"),l=require("rxjs/util/subscribeToResult");e.bufferWhen=r;var b=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new p(e,this.closingSelector))},e}(),p=function(e){function t(t,r){e.call(this,t),this.closingSelector=r,this.subscribing=!1,this.openBuffer()}return o(t,e),t.prototype._next=function(e){this.buffer.push(e)},t.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},t.prototype.notifyNext=function(e,t,r,s,i){this.openBuffer()},t.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},t.prototype.openBuffer=function(){var e=this.closingSubscription;e&&(this.remove(e),e.unsubscribe());var t=this.buffer;this.buffer&&this.destination.next(t),this.buffer=[];var r=a.tryCatch(this.closingSelector)();r===u.errorObject?this.error(u.errorObject.e):(e=new n.Subscription,this.closingSubscription=e,this.add(e),this.subscribing=!0,e.add(l.subscribeToResult(this,r)),this.subscribing=!1)},t}(c.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/cache",["rxjs/Observable","rxjs/ReplaySubject"],!0,function(require,e,t){function r(e,t,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var s,i,a=this,u=0,c=function(){return s=new n.ReplaySubject(e,t,r)};return new o.Observable(function(e){s||(s=c(),i=a.subscribe(function(e){return s.next(e)},function(e){var t=s;s=null,t.error(e)},function(){return s.complete()})),u++,s||(s=c());var t=s.subscribe(e);return function(){u--,t&&t.unsubscribe(),0===u&&i.unsubscribe()}})}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/Observable"),n=require("rxjs/ReplaySubject");return e.cache=r,s.define=i,t.exports}),System.register("rxjs/operator/catch",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){var t=new a(e),r=this.lift(t);return t.caught=r}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e._catch=r;var a=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.selector,this.caught))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.selector=r,this.caught=s}return o(t,e),t.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void this.destination.error(e)}this._innerSub(t)}},t.prototype._innerSub=function(e){this.unsubscribe(),this.destination.remove(this),e.subscribe(this.destination)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/combineAll",["rxjs/operator/combineLatest"],!0,function(require,e,t){function r(e){return this.lift(new o.CombineLatestOperator(e))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/combineLatest");return e.combineAll=r,s.define=i,t.exports}),System.register("rxjs/add/operator/combineLatest",["rxjs/Observable","rxjs/operator/combineLatest"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/combineLatest");return i.Observable.prototype.combineLatest=o.combineLatest,r.define=s,t.exports}),System.register("rxjs/add/operator/concat",["rxjs/Observable","rxjs/operator/concat"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/concat");return i.Observable.prototype.concat=o.concat,r.define=s,t.exports}),System.register("rxjs/operator/concatAll",["rxjs/operator/mergeAll"],!0,function(require,e,t){function r(){return this.lift(new o.MergeAllOperator(1))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/mergeAll");return e.concatAll=r,s.define=i,t.exports}),System.register("rxjs/operator/mergeMap",["rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){function r(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new u(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/util/subscribeToResult"),a=require("rxjs/OuterSubscriber");e.mergeMap=r;var u=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.project,this.resultSelector,this.concurrent))},e}();e.MergeMapOperator=u;var c=function(e){function t(t,r,s,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.project=r,this.resultSelector=s,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){this.add(n.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){this.resultSelector?this._notifyResultSelector(e,t,r,s):this.destination.next(t)},t.prototype._notifyResultSelector=function(e,t,r,s){var i;try{i=this.resultSelector(e,t,r,s)}catch(o){return void this.destination.error(o)}this.destination.next(i)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete();
},t}(a.OuterSubscriber);return e.MergeMapSubscriber=c,s.define=i,t.exports}),System.register("rxjs/operator/mergeMapTo",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"number"==typeof t&&(r=t,t=null),this.lift(new u(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.mergeMapTo=r;var u=function(){function e(e,t,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.ish=e,this.resultSelector=t,this.concurrent=r}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.ish,this.resultSelector,this.concurrent))},e}();e.MergeMapToOperator=u;var c=function(e){function t(t,r,s,i){void 0===i&&(i=Number.POSITIVE_INFINITY),e.call(this,t),this.ish=r,this.resultSelector=s,this.concurrent=i,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.resultSelector,r=this.index++,s=this.ish,i=this.destination;this.active++,this._innerSub(s,i,t,e,r)}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r,s,i){this.add(a.subscribeToResult(this,e,s,i))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){var o=this,n=o.resultSelector,a=o.destination;n?this.trySelectResult(e,t,r,s):a.next(t)},t.prototype.trySelectResult=function(e,t,r,s){var i,o=this,n=o.resultSelector,a=o.destination;try{i=n(e,t,r,s)}catch(u){return void a.error(u)}a.next(i)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);return e.MergeMapToSubscriber=c,s.define=i,t.exports}),System.register("rxjs/operator/count",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return this.lift(new a(e,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.count=r;var a=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.source))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.predicate=r,this.source=s,this.count=0,this.index=0}return o(t,e),t.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},t.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(r){return void this.destination.error(r)}t&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/dematerialize",["rxjs/Subscriber"],!0,function(require,e,t){function r(){return this.lift(new a)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.dematerialize=r;var a=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new u(e))},e}(),u=function(e){function t(t){e.call(this,t)}return o(t,e),t.prototype._next=function(e){e.observe(this.destination)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/debounce",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.debounce=r;var u=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1,this.durationSubscription=null}return o(t,e),t.prototype._next=function(e){try{var t=this.durationSelector.call(this,e);t&&this._tryNext(e,t)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.emitValue(),this.destination.complete()},t.prototype._tryNext=function(e,t){var r=this.durationSubscription;this.value=e,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),r=a.subscribeToResult(this,t),r.isUnsubscribed||this.add(this.durationSubscription=r)},t.prototype.notifyNext=function(e,t,r,s,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=null,r.unsubscribe(),this.remove(r)),this.value=null,this.hasValue=!1,e.prototype._next.call(this,t)}},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/debounceTime",["rxjs/Subscriber","rxjs/scheduler/async"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=u.async),this.lift(new c(e,t))}function s(e){e.debouncedNext()}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/Subscriber"),u=require("rxjs/scheduler/async");e.debounceTime=r;var c=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.dueTime,this.scheduler))},e}(),l=function(e){function t(t,r,s){e.call(this,t),this.dueTime=r,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(s,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(a.Subscriber);return i.define=o,t.exports}),System.register("rxjs/operator/defaultIfEmpty",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return void 0===e&&(e=null),this.lift(new a(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.defaultIfEmpty=r;var a=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.defaultValue))},e}(),u=function(e){function t(t,r){e.call(this,t),this.defaultValue=r,this.isEmpty=!0}return o(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/delay",["rxjs/scheduler/async","rxjs/util/isDate","rxjs/Subscriber","rxjs/Notification"],!0,function(require,e,t){function r(e,t){void 0===t&&(t=n.async);var r=a.isDate(e),s=r?+e-t.now():Math.abs(e);return this.lift(new l(s,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/scheduler/async"),a=require("rxjs/util/isDate"),u=require("rxjs/Subscriber"),c=require("rxjs/Notification");e.delay=r;var l=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.delay,this.scheduler))},e}(),b=function(e){function t(t,r,s){e.call(this,t),this.delay=r,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}return o(t,e),t.dispatch=function(e){for(var t=e.source,r=t.queue,s=e.scheduler,i=e.destination;r.length>0&&r[0].time-s.now()<=0;)r.shift().notification.observe(i);if(r.length>0){var o=Math.max(0,r[0].time-s.now());this.schedule(e,o)}else t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(this.errored!==!0){var t=this.scheduler,r=new p(t.now()+this.delay,e);this.queue.push(r),this.active===!1&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(c.Notification.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e)},t.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete())},t}(u.Subscriber),p=function(){function e(e,t){this.time=e,this.notification=t}return e}();return s.define=i,t.exports}),System.register("rxjs/operator/delayWhen",["rxjs/Subscriber","rxjs/Observable","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return t?new p(this,t).lift(new l(e)):this.lift(new l(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Observable"),u=require("rxjs/OuterSubscriber"),c=require("rxjs/util/subscribeToResult");e.delayWhen=r;var l=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.delayDurationSelector))},e}(),b=function(e){function t(t,r){e.call(this,t),this.delayDurationSelector=r,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}return o(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){try{var t=this.delayDurationSelector(e);t&&this.tryDelay(t,e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e),r=null;return-1!==t&&(r=this.values[t],this.delayNotifierSubscriptions.splice(t,1),this.values.splice(t,1)),r},t.prototype.tryDelay=function(e,t){var r=c.subscribeToResult(this,e,t);this.add(r),this.delayNotifierSubscriptions.push(r),this.values.push(t)},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(u.OuterSubscriber),p=function(e){function t(t,r){e.call(this),this.source=t,this.subscriptionDelay=r}return o(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new h(e,this.source))},t}(a.Observable),h=function(e){function t(t,r){e.call(this),this.parent=t,this.source=r,this.sourceSubscribed=!1}return o(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/distinct",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.distinct=r;var u=function(){function e(e,t){this.compare=e,this.flushes=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.compare,this.flushes))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.values=[],"function"==typeof r&&(this.compare=r),s&&this.add(a.subscribeToResult(this,s))}return o(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.values.length=0},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype._next=function(e){var t=!1,r=this.values,s=r.length;try{for(var i=0;s>i;i++)if(this.compare(r[i],e))return void(t=!0)}catch(o){return void this.destination.error(o)}this.values.push(e),this.destination.next(e)},t.prototype.compare=function(e,t){return e===t},t}(n.OuterSubscriber);return e.DistinctSubscriber=c,s.define=i,t.exports}),System.register("rxjs/operator/distinctKey",["rxjs/operator/distinct"],!0,function(require,e,t){function r(e,t,r){return o.distinct.call(this,function(r,s){return t?t(r[e],s[e]):r[e]===s[e]},r)}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/distinct");return e.distinctKey=r,s.define=i,t.exports}),System.register("rxjs/operator/distinctUntilChanged",["rxjs/Subscriber","rxjs/util/tryCatch","rxjs/util/errorObject"],!0,function(require,e,t){function r(e,t){return this.lift(new c(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/tryCatch"),u=require("rxjs/util/errorObject");e.distinctUntilChanged=r;var c=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.compare,this.keySelector))},e}(),l=function(e){function t(t,r,s){e.call(this,t),this.keySelector=s,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}return o(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t=this.keySelector,r=e;if(t&&(r=a.tryCatch(this.keySelector)(e),r===u.errorObject))return this.destination.error(u.errorObject.e);var s=!1;if(this.hasKey){if(s=a.tryCatch(this.compare)(this.key,r),s===u.errorObject)return this.destination.error(u.errorObject.e)}else this.hasKey=!0;Boolean(s)===!1&&(this.key=r,this.destination.next(e))},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/distinctUntilKeyChanged",["rxjs/operator/distinctUntilChanged"],!0,function(require,e,t){function r(e,t){return o.distinctUntilChanged.call(this,function(r,s){return t?t(r[e],s[e]):r[e]===s[e]})}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/distinctUntilChanged");return e.distinctUntilKeyChanged=r,s.define=i,t.exports}),System.register("rxjs/operator/do",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t,r){return this.lift(new a(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e._do=r;var a=function(){function e(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.nextOrObserver,this.error,this.complete))},e}(),u=function(e){function t(t,r,s,i){e.call(this,t);var o=new n.Subscriber(r,s,i);o.syncErrorThrowable=!0,this.add(o),this.safeSubscriber=o}return o(t,e),t.prototype._next=function(e){var t=this.safeSubscriber;t.next(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.next(e)},t.prototype._error=function(e){var t=this.safeSubscriber;t.error(e),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.error(e)},t.prototype._complete=function(){var e=this.safeSubscriber;e.complete(),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/exhaust",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){return this.lift(new u)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.exhaust=r;var u=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new c(e))},e}(),c=function(e){function t(t){e.call(this,t),this.hasCompleted=!1,this.hasSubscription=!1}return o(t,e),t.prototype._next=function(e){this.hasSubscription||(this.hasSubscription=!0,this.add(a.subscribeToResult(this,e)))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/exhaustMap",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.exhaustMap=r;var u=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.project,this.resultSelector))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.project=r,this.resultSelector=s,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return o(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++,r=this.destination;try{var s=this.project(e,t);this.hasSubscription=!0,this.add(a.subscribeToResult(this,s,e,t))}catch(i){r.error(i)}},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){var o=this,n=o.resultSelector,a=o.destination;n?this.trySelectResult(e,t,r,s):a.next(t)},t.prototype.trySelectResult=function(e,t,r,s){var i=this,o=i.resultSelector,n=i.destination;try{var a=o(e,t,r,s);n.next(a)}catch(u){n.error(u)}},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/expand",["rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t,r){return void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=void 0),t=1>(t||0)?Number.POSITIVE_INFINITY:t,this.lift(new l(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/util/tryCatch"),a=require("rxjs/util/errorObject"),u=require("rxjs/OuterSubscriber"),c=require("rxjs/util/subscribeToResult");e.expand=r;var l=function(){function e(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.project,this.concurrent,this.scheduler))},e}();e.ExpandOperator=l;var b=function(e){function t(t,r,s,i){e.call(this,t),this.project=r,this.concurrent=s,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,s<Number.POSITIVE_INFINITY&&(this.buffer=[])}return o(t,e),t.dispatch=function(e){var t=e.subscriber,r=e.result,s=e.value,i=e.index;t.subscribeToProjection(r,s,i)},t.prototype._next=function(e){var r=this.destination;if(r.isUnsubscribed)return void this._complete();var s=this.index++;if(this.active<this.concurrent){r.next(e);var i=n.tryCatch(this.project)(e,s);if(i===a.errorObject)r.error(a.errorObject.e);else if(this.scheduler){var o={subscriber:this,result:i,value:e,index:s};this.add(this.scheduler.schedule(t.dispatch,0,o))}else this.subscribeToProjection(i,e,s)}else this.buffer.push(e)},t.prototype.subscribeToProjection=function(e,t,r){this.active++,this.add(c.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){this._next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(u.OuterSubscriber);return e.ExpandSubscriber=b,s.define=i,t.exports}),System.register("rxjs/util/ArgumentOutOfRangeError",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(){e.call(this,"argument out of range"),this.name="ArgumentOutOfRangeError"}return i(t,e),t}(Error);return e.ArgumentOutOfRangeError=o,r.define=s,t.exports}),System.register("rxjs/operator/filter",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return this.lift(new a(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.predicate=r,this.thisArg=s,this.count=0,this.predicate=r}return o(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/finally",["rxjs/Subscriber","rxjs/Subscription"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Subscription");e._finally=r;var u=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.callback))},e}(),c=function(e){function t(t,r){e.call(this,t),this.add(new a.Subscription(r))}return o(t,e),t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/find",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){if("function"!=typeof e)throw new TypeError("predicate is not a function");return this.lift(new a(e,this,!1,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.find=r;var a=function(){function e(e,t,r,s){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=s}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},e}();e.FindValueOperator=a;var u=function(e){function t(t,r,s,i,o){e.call(this,t),this.predicate=r,this.source=s,this.yieldIndex=i,this.thisArg=o,this.index=0}return o(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){var t=this,r=t.predicate,s=t.thisArg,i=this.index++;try{var o=r.call(s||this,e,i,this.source);o&&this.notifyComplete(this.yieldIndex?i:e)}catch(n){this.destination.error(n)}},t.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},t}(n.Subscriber);return e.FindValueSubscriber=u,s.define=i,t.exports}),System.register("rxjs/operator/findIndex",["rxjs/operator/find"],!0,function(require,e,t){function r(e,t){return this.lift(new o.FindValueOperator(e,this,!0,t))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/find");return e.findIndex=r,s.define=i,t.exports}),System.register("rxjs/util/EmptyError",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=function(e){function t(){e.call(this,"no elements in sequence"),this.name="EmptyError"}return i(t,e),t}(Error);return e.EmptyError=o,r.define=s,t.exports}),System.register("rxjs/util/MapPolyfill",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype.get=function(e){var t=this._keys.indexOf(e);return-1===t?void 0:this._values[t]},e.prototype.set=function(e,t){var r=this._keys.indexOf(e);return-1===r?(this._keys.push(e),this._values.push(t),this.size++):this._values[r]=t,this},e.prototype["delete"]=function(e){var t=this._keys.indexOf(e);return-1===t?!1:(this._values.splice(t,1),this._keys.splice(t,1),this.size--,!0)},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0},e.prototype.forEach=function(e,t){for(var r=0;r<this.size;r++)e.call(t,this._values[r],this._keys[r])},e}();return e.MapPolyfill=i,r.define=s,t.exports}),System.register("rxjs/util/FastMap",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=function(){function e(){this.values={}}return e.prototype["delete"]=function(e){return this.values[e]=null,!0},e.prototype.set=function(e,t){return this.values[e]=t,this},e.prototype.get=function(e){return this.values[e]},e.prototype.forEach=function(e,t){var r=this.values;for(var s in r)r.hasOwnProperty(s)&&null!==r[s]&&e.call(t,r[s],s)},e.prototype.clear=function(){this.values={}},e}();return e.FastMap=i,r.define=s,t.exports}),System.register("rxjs/operator/ignoreElements",["rxjs/Subscriber","rxjs/util/noop"],!0,function(require,e,t){function r(){return this.lift(new u)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/noop");e.ignoreElements=r;var u=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new c(e))},e}(),c=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype._next=function(e){a.noop()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/isEmpty",["rxjs/Subscriber"],!0,function(require,e,t){function r(){return this.lift(new a)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.isEmpty=r;var a=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new u(e))},e}(),u=function(e){function t(t){e.call(this,t)}return o(t,e),t.prototype.notifyComplete=function(e){var t=this.destination;t.next(e),t.complete()},t.prototype._next=function(e){this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/audit",["rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new l(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/util/tryCatch"),a=require("rxjs/util/errorObject"),u=require("rxjs/OuterSubscriber"),c=require("rxjs/util/subscribeToResult");e.audit=r;var l=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.durationSelector))},e}(),b=function(e){function t(t,r){e.call(this,t),this.durationSelector=r,this.hasValue=!1}return o(t,e),t.prototype._next=function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t=n.tryCatch(this.durationSelector)(e);t===a.errorObject?this.destination.error(a.errorObject.e):this.add(this.throttled=c.subscribeToResult(this,t))}},t.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,s=e.throttled;s&&(this.remove(s),this.throttled=null,s.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t.prototype.notifyNext=function(e,t,r,s){this.clearThrottle()},t.prototype.notifyComplete=function(){this.clearThrottle()},t}(u.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/auditTime",["rxjs/scheduler/async","rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=a.async),this.lift(new c(e,t))}function s(e){e.clearThrottle()}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/scheduler/async"),u=require("rxjs/Subscriber");e.auditTime=r;var c=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.duration,this.scheduler))},e}(),l=function(e){function t(t,r,s){e.call(this,t),this.duration=r,this.scheduler=s,this.hasValue=!1}return n(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0,this.throttled||this.add(this.throttled=this.scheduler.schedule(s,this.duration,this))},t.prototype.clearThrottle=function(){var e=this,t=e.value,r=e.hasValue,s=e.throttled;s&&(this.remove(s),this.throttled=null,s.unsubscribe()),r&&(this.value=null,this.hasValue=!1,this.destination.next(t))},t}(u.Subscriber);return i.define=o,t.exports}),System.register("rxjs/operator/last",["rxjs/Subscriber","rxjs/util/EmptyError"],!0,function(require,e,t){function r(e,t,r){return this.lift(new u(e,t,r,this))}var s=System.global,i=s.define;s.define=void 0;
var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/EmptyError");e.last=r;var u=function(){function e(e,t,r,s){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=s}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),c=function(e){function t(t,r,s,i,o){e.call(this,t),this.predicate=r,this.resultSelector=s,this.defaultValue=i,this.source=o,this.hasValue=!1,this.index=0,"undefined"!=typeof i&&(this.lastValue=i,this.hasValue=!0)}return o(t,e),t.prototype._next=function(e){var t=this.index++;if(this.predicate)this._tryPredicate(e,t);else{if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(s){return void this.destination.error(s)}if(r){if(this.resultSelector)return void this._tryResultSelector(e,t);this.lastValue=e,this.hasValue=!0}},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(s){return void this.destination.error(s)}this.lastValue=r,this.hasValue=!0},t.prototype._complete=function(){var e=this.destination;this.hasValue?(e.next(this.lastValue),e.complete()):e.error(new a.EmptyError)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/let",[],!0,function(require,e,t){function r(e){return e(this)}var s=System.global,i=s.define;return s.define=void 0,e.letProto=r,s.define=i,t.exports}),System.register("rxjs/operator/every",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return this.lift(new a(e,t,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.every=r;var a=function(){function e(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate,this.thisArg,this.source))},e}(),u=function(e){function t(t,r,s,i){e.call(this,t),this.predicate=r,this.thisArg=s,this.source=i,this.index=0,this.thisArg=s||this}return o(t,e),t.prototype.notifyComplete=function(e){this.destination.next(e),this.destination.complete()},t.prototype._next=function(e){var t=!1;try{t=this.predicate.call(this.thisArg,e,this.index++,this.source)}catch(r){return void this.destination.error(r)}t||this.notifyComplete(!1)},t.prototype._complete=function(){this.notifyComplete(!0)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/map",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.project=r,this.count=0,this.thisArg=s||this}return o(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/mapTo",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return this.lift(new a(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.mapTo=r;var a=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.value))},e}(),u=function(e){function t(t,r){e.call(this,t),this.value=r}return o(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/materialize",["rxjs/Subscriber","rxjs/Notification"],!0,function(require,e,t){function r(){return this.lift(new u)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Notification");e.materialize=r;var u=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new c(e))},e}(),c=function(e){function t(t){e.call(this,t)}return o(t,e),t.prototype._next=function(e){this.destination.next(a.Notification.createNext(e))},t.prototype._error=function(e){var t=this.destination;t.next(a.Notification.createError(e)),t.complete()},t.prototype._complete=function(){var e=this.destination;e.next(a.Notification.createComplete()),e.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/reduce",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return this.lift(new a(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.reduce=r;var a=function(){function e(e,t){this.accumulator=e,this.seed=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.accumulator,this.seed))},e}();e.ReduceOperator=a;var u=function(e){function t(t,r,s){e.call(this,t),this.accumulator=r,this.hasValue=!1,this.acc=s,this.accumulator=r,this.hasSeed="undefined"!=typeof s}return o(t,e),t.prototype._next=function(e){this.hasValue||(this.hasValue=this.hasSeed)?this._tryReduce(e):(this.acc=e,this.hasValue=!0)},t.prototype._tryReduce=function(e){var t;try{t=this.accumulator(this.acc,e)}catch(r){return void this.destination.error(r)}this.acc=t},t.prototype._complete=function(){(this.hasValue||this.hasSeed)&&this.destination.next(this.acc),this.destination.complete()},t}(n.Subscriber);return e.ReduceSubscriber=u,s.define=i,t.exports}),System.register("rxjs/add/operator/merge",["rxjs/Observable","rxjs/operator/merge"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/merge");return i.Observable.prototype.merge=o.merge,r.define=s,t.exports}),System.register("rxjs/add/operator/mergeAll",["rxjs/Observable","rxjs/operator/mergeAll"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/mergeAll");return i.Observable.prototype.mergeAll=o.mergeAll,r.define=s,t.exports}),System.register("rxjs/add/operator/mergeMap",["rxjs/Observable","rxjs/operator/mergeMap"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/mergeMap");return i.Observable.prototype.mergeMap=o.mergeMap,i.Observable.prototype.flatMap=o.mergeMap,r.define=s,t.exports}),System.register("rxjs/add/operator/mergeMapTo",["rxjs/Observable","rxjs/operator/mergeMapTo"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/mergeMapTo");return i.Observable.prototype.flatMapTo=o.mergeMapTo,i.Observable.prototype.mergeMapTo=o.mergeMapTo,r.define=s,t.exports}),System.register("rxjs/operator/mergeScan",["rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/util/subscribeToResult","rxjs/OuterSubscriber"],!0,function(require,e,t){function r(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),this.lift(new l(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/util/tryCatch"),a=require("rxjs/util/errorObject"),u=require("rxjs/util/subscribeToResult"),c=require("rxjs/OuterSubscriber");e.mergeScan=r;var l=function(){function e(e,t,r){this.project=e,this.seed=t,this.concurrent=r}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.project,this.seed,this.concurrent))},e}();e.MergeScanOperator=l;var b=function(e){function t(t,r,s,i){e.call(this,t),this.project=r,this.acc=s,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return o(t,e),t.prototype._next=function(e){if(this.active<this.concurrent){var t=this.index++,r=n.tryCatch(this.project)(this.acc,e),s=this.destination;r===a.errorObject?s.error(a.errorObject.e):(this.active++,this._innerSub(r,e,t))}else this.buffer.push(e)},t.prototype._innerSub=function(e,t,r){this.add(u.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t.prototype.notifyNext=function(e,t,r,s,i){var o=this.destination;this.acc=t,this.hasValue=!0,o.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},t}(c.OuterSubscriber);return e.MergeScanSubscriber=b,s.define=i,t.exports}),System.register("rxjs/operator/min",["rxjs/operator/reduce"],!0,function(require,e,t){function r(e){var t="function"==typeof e?e:function(e,t){return t>e?e:t};return this.lift(new o.ReduceOperator(t))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/reduce");return e.min=r,s.define=i,t.exports}),System.register("rxjs/observable/MulticastObservable",["rxjs/Observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=function(e){function t(t,r,s){e.call(this),this.source=t,this.connectable=r,this.selector=s}return i(t,e),t.prototype._subscribe=function(e){var t=this,r=t.selector,s=t.connectable,i=r(s).subscribe(e);return i.add(s.connect()),i},t}(o.Observable);return e.MulticastObservable=n,r.define=s,t.exports}),System.register("rxjs/observable/ConnectableObservable",["rxjs/Subject","rxjs/Observable","rxjs/Subscriber","rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/Observable"),a=require("rxjs/Subscriber"),u=require("rxjs/Subscription"),c=function(e){function t(t,r){e.call(this),this.source=t,this.subjectFactory=r,this._refCount=0}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(e=this._connection=new u.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.isUnsubscribed?(this._connection=null,e=u.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new b(this))},t}(n.Observable);e.ConnectableObservable=c;var l=function(e){function t(t,r){e.call(this,t),this.connectable=r}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.SubjectSubscriber),b=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var s=new p(e,r),i=t._subscribe(s);return s.isUnsubscribed||(s.connection=r.connect()),i},e}(),p=function(e){function t(t,r){e.call(this,t),this.connectable=r}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(0>=t)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var r=this.connection,s=e._connection;this.connection=null,!s||r&&s!==r||s.unsubscribe()},t}(a.Subscriber);return r.define=s,t.exports}),System.register("rxjs/add/operator/observeOn",["rxjs/Observable","rxjs/operator/observeOn"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/observeOn");return i.Observable.prototype.observeOn=o.observeOn,r.define=s,t.exports}),System.register("rxjs/add/operator/onErrorResumeNext",["rxjs/Observable","rxjs/operator/onErrorResumeNext"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/onErrorResumeNext");return i.Observable.prototype.onErrorResumeNext=o.onErrorResumeNext,r.define=s,t.exports}),System.register("rxjs/operator/pairwise",["rxjs/Subscriber"],!0,function(require,e,t){function r(){return this.lift(new a)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.pairwise=r;var a=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new u(e))},e}(),u=function(e){function t(t){e.call(this,t),this.hasPrev=!1}return o(t,e),t.prototype._next=function(e){this.hasPrev?this.destination.next([this.prev,e]):this.hasPrev=!0,this.prev=e},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/util/not",[],!0,function(require,e,t){function r(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}var s=System.global,i=s.define;return s.define=void 0,e.not=r,s.define=i,t.exports}),System.register("rxjs/operator/pluck",["rxjs/operator/map"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e.length;if(0===r)throw new Error("List of properties cannot be empty.");return n.map.call(this,s(e,r))}function s(e,t){var r=function(r){for(var s=r,i=0;t>i;i++){var o=s[e[i]];if("undefined"==typeof o)return;s=o}return s};return r}var i=System.global,o=i.define;i.define=void 0;var n=require("rxjs/operator/map");return e.pluck=r,i.define=o,t.exports}),System.register("rxjs/operator/publish",["rxjs/Subject","rxjs/operator/multicast"],!0,function(require,e,t){function r(e){return e?n.multicast.call(this,function(){return new o.Subject},e):n.multicast.call(this,new o.Subject)}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/Subject"),n=require("rxjs/operator/multicast");return e.publish=r,s.define=i,t.exports}),System.register("rxjs/util/throwError",[],!0,function(require,e,t){function r(e){throw e}var s=System.global,i=s.define;return s.define=void 0,e.throwError=r,s.define=i,t.exports}),System.register("rxjs/operator/publishReplay",["rxjs/ReplaySubject","rxjs/operator/multicast"],!0,function(require,e,t){function r(e,t,r){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),n.multicast.call(this,new o.ReplaySubject(e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/ReplaySubject"),n=require("rxjs/operator/multicast");return e.publishReplay=r,s.define=i,t.exports}),System.register("rxjs/operator/publishLast",["rxjs/AsyncSubject","rxjs/operator/multicast"],!0,function(require,e,t){function r(){return n.multicast.call(this,new o.AsyncSubject)}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/AsyncSubject"),n=require("rxjs/operator/multicast");return e.publishLast=r,s.define=i,t.exports}),System.register("rxjs/add/operator/race",["rxjs/Observable","rxjs/operator/race"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/race");return i.Observable.prototype.race=o.race,r.define=s,t.exports}),System.register("rxjs/add/operator/reduce",["rxjs/Observable","rxjs/operator/reduce"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/reduce");return i.Observable.prototype.reduce=o.reduce,r.define=s,t.exports}),System.register("rxjs/operator/repeat",["rxjs/Subscriber","rxjs/observable/EmptyObservable"],!0,function(require,e,t){function r(e){return void 0===e&&(e=-1),0===e?new a.EmptyObservable:0>e?this.lift(new u(-1,this)):this.lift(new u(e-1,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/observable/EmptyObservable");e.repeat=r;var u=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.count,this.source))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.count=r,this.source=s}return o(t,e),t.prototype.complete=function(){if(!this.isStopped){var t=this,r=t.source,s=t.count;if(0===s)return e.prototype.complete.call(this);s>-1&&(this.count=s-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,r.subscribe(this)}},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/retry",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return void 0===e&&(e=-1),this.lift(new a(e,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.retry=r;var a=function(){function e(e,t){this.count=e,this.source=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.count,this.source))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.count=r,this.source=s}return o(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this,s=r.source,i=r.count;if(0===i)return e.prototype.error.call(this,t);i>-1&&(this.count=i-1),this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,s.subscribe(this)}},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/retryWhen",["rxjs/Subject","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new b(e,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subject"),a=require("rxjs/util/tryCatch"),u=require("rxjs/util/errorObject"),c=require("rxjs/OuterSubscriber"),l=require("rxjs/util/subscribeToResult");e.retryWhen=r;var b=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t._subscribe(new p(e,this.notifier,this.source))},e}(),p=function(e){function t(t,r,s){e.call(this,t),this.notifier=r,this.source=s}return o(t,e),t.prototype.error=function(t){if(!this.isStopped){var r=this.errors,s=this.retries,i=this.retriesSubscription;if(s)this.errors=null,this.retriesSubscription=null;else{if(r=new n.Subject,s=a.tryCatch(this.notifier)(r),s===u.errorObject)return e.prototype.error.call(this,u.errorObject.e);i=l.subscribeToResult(this,s)}this.unsubscribe(),this.isUnsubscribed=!1,this.errors=r,this.retries=s,this.retriesSubscription=i,r.next(t)}},t.prototype._unsubscribe=function(){var e=this,t=e.errors,r=e.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),r&&(r.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(e,t,r,s,i){var o=this,n=o.errors,a=o.retries,u=o.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this.unsubscribe(),this.isStopped=!1,this.isUnsubscribed=!1,this.errors=n,this.retries=a,this.retriesSubscription=u,this.source.subscribe(this)},t}(c.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/sample",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.sample=r;var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.notifier))},e}(),c=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.add(a.subscribeToResult(this,r))}return o(t,e),t.prototype._next=function(e){this.value=e,this.hasValue=!0},t.prototype.notifyNext=function(e,t,r,s,i){this.emitValue()},t.prototype.notifyComplete=function(){this.emitValue()},t.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/sampleTime",["rxjs/Subscriber","rxjs/scheduler/async"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=u.async),this.lift(new c(e,t))}function s(e){var t=e.subscriber,r=e.period;t.notifyNext(),this.schedule(e,r)}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/Subscriber"),u=require("rxjs/scheduler/async");e.sampleTime=r;var c=function(){function e(e,t){this.period=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.period,this.scheduler))},e}(),l=function(e){function t(t,r,i){e.call(this,t),this.period=r,this.scheduler=i,this.hasValue=!1,this.add(i.schedule(s,r,{subscriber:this,period:r}))}return n(t,e),t.prototype._next=function(e){this.lastValue=e,this.hasValue=!0},t.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},t}(a.Subscriber);return i.define=o,t.exports}),System.register("rxjs/operator/scan",["rxjs/Subscriber"],!0,function(require,e,t){function r(e,t){return this.lift(new a(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.scan=r;var a=function(){function e(e,t){this.accumulator=e,this.seed=t}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.accumulator,this.seed))},e}(),u=function(e){function t(t,r,s){e.call(this,t),this.accumulator=r,this.index=0,this.accumulatorSet=!1,this.seed=s,this.accumulatorSet="undefined"!=typeof s}return o(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.accumulatorSet=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){return this.accumulatorSet?this._tryNext(e):(this.seed=e,void this.destination.next(e))},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.accumulator(this.seed,e,r)}catch(s){this.destination.error(s)}this.seed=t,this.destination.next(t)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/share",["rxjs/operator/multicast","rxjs/Subject"],!0,function(require,e,t){function r(){return new a.Subject}function s(){return n.multicast.call(this,r).refCount()}var i=System.global,o=i.define;i.define=void 0;var n=require("rxjs/operator/multicast"),a=require("rxjs/Subject");return e.share=s,i.define=o,t.exports}),System.register("rxjs/operator/single",["rxjs/Subscriber","rxjs/util/EmptyError"],!0,function(require,e,t){function r(e){return this.lift(new u(e,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/EmptyError");e.single=r;var u=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.predicate,this.source))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.predicate=r,this.source=s,this.seenValue=!1,this.index=0}return o(t,e),t.prototype.applySingleValue=function(e){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=e)},t.prototype._next=function(e){var t=this.predicate;this.index++,t?this.tryNext(e):this.applySingleValue(e)},t.prototype.tryNext=function(e){try{var t=this.predicate(e,this.index,this.source);t&&this.applySingleValue(e)}catch(r){this.destination.error(r)}},t.prototype._complete=function(){var e=this.destination;this.index>0?(e.next(this.seenValue?this.singleValue:void 0),e.complete()):e.error(new a.EmptyError)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/skip",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return this.lift(new a(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.skip=r;var a=function(){function e(e){this.total=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return o(t,e),t.prototype._next=function(e){++this.count>this.total&&this.destination.next(e)},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/skipUntil",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.skipUntil=r;var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.notifier))},e}(),c=function(e){function t(t,r){e.call(this,t),this.hasValue=!1,this.isInnerStopped=!1,this.add(a.subscribeToResult(this,r))}return o(t,e),t.prototype._next=function(t){this.hasValue&&e.prototype._next.call(this,t)},t.prototype._complete=function(){this.isInnerStopped?e.prototype._complete.call(this):this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,s,i){this.hasValue=!0},t.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&e.prototype._complete.call(this)},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/skipWhile",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return this.lift(new a(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.skipWhile=r;var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate))},e}(),u=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.skipping=!0,this.index=0}return o(t,e),t.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},t.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(r){this.destination.error(r)}},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/startWith",["rxjs/observable/ArrayObservable","rxjs/observable/ScalarObservable","rxjs/observable/EmptyObservable","rxjs/operator/concat","rxjs/util/isScheduler"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=e[e.length-1];c.isScheduler(r)?e.pop():r=null;var s=e.length;return 1===s?u.concatStatic(new n.ScalarObservable(e[0],r),this):s>1?u.concatStatic(new o.ArrayObservable(e,r),this):u.concatStatic(new a.EmptyObservable(r),this)}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/observable/ArrayObservable"),n=require("rxjs/observable/ScalarObservable"),a=require("rxjs/observable/EmptyObservable"),u=require("rxjs/operator/concat"),c=require("rxjs/util/isScheduler");return e.startWith=r,s.define=i,t.exports}),System.register("rxjs/util/Immediate",["rxjs/util/root"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=function(){function e(e){if(this.root=e,e.setImmediate&&"function"==typeof e.setImmediate)this.setImmediate=e.setImmediate.bind(e),this.clearImmediate=e.clearImmediate.bind(e);else{this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();var t=function r(e){delete r.instance.tasksByHandle[e]};t.instance=this,this.clearImmediate=t}}return e.prototype.identify=function(e){return this.root.Object.prototype.toString.call(e)},e.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)},e.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)},e.prototype.canUseReadyStateChange=function(){var e=this.root.document;return Boolean(e&&"onreadystatechange"in e.createElement("script"))},e.prototype.canUsePostMessage=function(){var e=this.root;if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}return!1},e.prototype.partiallyApplied=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var s=function i(){var e=i,t=e.handler,r=e.args;"function"==typeof t?t.apply(void 0,r):new Function(""+t)()};return s.handler=e,s.args=t,s},e.prototype.addFromSetImmediateArguments=function(e){return this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,e),
this.nextHandle++},e.prototype.createProcessNextTickSetImmediate=function(){var e=function t(){var e=t.instance,r=e.addFromSetImmediateArguments(arguments);return e.root.process.nextTick(e.partiallyApplied(e.runIfPresent,r)),r};return e.instance=this,e},e.prototype.createPostMessageSetImmediate=function(){var e=this.root,t="setImmediate$"+e.Math.random()+"$",r=function i(r){var s=i.instance;r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&s.runIfPresent(+r.data.slice(t.length))};r.instance=this,e.addEventListener("message",r,!1);var s=function o(){var e=o,t=e.messagePrefix,r=e.instance,s=r.addFromSetImmediateArguments(arguments);return r.root.postMessage(t+s,"*"),s};return s.instance=this,s.messagePrefix=t,s},e.prototype.runIfPresent=function(e){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,e),0);else{var t=this.tasksByHandle[e];if(t){this.currentlyRunningATask=!0;try{t()}finally{this.clearImmediate(e),this.currentlyRunningATask=!1}}}},e.prototype.createMessageChannelSetImmediate=function(){var e=this,t=new this.root.MessageChannel;t.port1.onmessage=function(t){var r=t.data;e.runIfPresent(r)};var r=function s(){var e=s,t=e.channel,r=e.instance,i=r.addFromSetImmediateArguments(arguments);return t.port2.postMessage(i),i};return r.channel=t,r.instance=this,r},e.prototype.createReadyStateChangeSetImmediate=function(){var e=function t(){var e=t.instance,r=e.root,s=r.document,i=s.documentElement,o=e.addFromSetImmediateArguments(arguments),n=s.createElement("script");return n.onreadystatechange=function(){e.runIfPresent(o),n.onreadystatechange=null,i.removeChild(n),n=null},i.appendChild(n),o};return e.instance=this,e},e.prototype.createSetTimeoutSetImmediate=function(){var e=function t(){var e=t.instance,r=e.addFromSetImmediateArguments(arguments);return e.root.setTimeout(e.partiallyApplied(e.runIfPresent,r),0),r};return e.instance=this,e},e}();return e.ImmediateDefinition=o,e.Immediate=new o(i.root),r.define=s,t.exports}),System.register("rxjs/operator/switch",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){return this.lift(new u)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e._switch=r;var u=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new c(e))},e}(),c=function(e){function t(t){e.call(this,t),this.active=0,this.hasCompleted=!1}return o(t,e),t.prototype._next=function(e){this.unsubscribeInner(),this.active++,this.add(this.innerSubscription=a.subscribeToResult(this,e))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&this.destination.complete()},t.prototype.unsubscribeInner=function(){this.active=this.active>0?this.active-1:0;var e=this.innerSubscription;e&&(e.unsubscribe(),this.remove(e))},t.prototype.notifyNext=function(e,t,r,s,i){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.unsubscribeInner(),this.hasCompleted&&0===this.active&&this.destination.complete()},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/switchMap",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.switchMap=r;var u=function(){function e(e,t){this.project=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.project,this.resultSelector))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.project=r,this.resultSelector=s,this.index=0}return o(t,e),t.prototype._next=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(s){return void this.destination.error(s)}this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var s=this.innerSubscription;s&&s.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,e,t,r))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.isUnsubscribed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,s,i){this.resultSelector?this._tryNotifyNext(e,t,r,s):this.destination.next(t)},t.prototype._tryNotifyNext=function(e,t,r,s){var i;try{i=this.resultSelector(e,t,r,s)}catch(o){return void this.destination.error(o)}this.destination.next(i)},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/switchMapTo",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.switchMapTo=r;var u=function(){function e(e,t){this.observable=e,this.resultSelector=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.observable,this.resultSelector))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.inner=r,this.resultSelector=s,this.index=0}return o(t,e),t.prototype._next=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),this.add(this.innerSubscription=a.subscribeToResult(this,this.inner,e,this.index++))},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.isUnsubscribed||e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.innerSubscription=null},t.prototype.notifyComplete=function(t){this.remove(t),this.innerSubscription=null,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e,t,r,s,i){var o=this,n=o.resultSelector,a=o.destination;n?this.tryResultSelector(e,t,r,s):a.next(t)},t.prototype.tryResultSelector=function(e,t,r,s){var i,o=this,n=o.resultSelector,a=o.destination;try{i=n(e,t,r,s)}catch(u){return void a.error(u)}a.next(i)},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/take",["rxjs/Subscriber","rxjs/util/ArgumentOutOfRangeError","rxjs/observable/EmptyObservable"],!0,function(require,e,t){function r(e){return 0===e?new u.EmptyObservable:this.lift(new c(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/ArgumentOutOfRangeError"),u=require("rxjs/observable/EmptyObservable");e.take=r;var c=function(){function e(e){if(this.total=e,this.total<0)throw new a.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,r){e.call(this,t),this.total=r,this.count=0}return o(t,e),t.prototype._next=function(e){var t=this.total;++this.count<=t&&(this.destination.next(e),this.count===t&&(this.destination.complete(),this.unsubscribe()))},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/takeLast",["rxjs/Subscriber","rxjs/util/ArgumentOutOfRangeError","rxjs/observable/EmptyObservable"],!0,function(require,e,t){function r(e){return 0===e?new u.EmptyObservable:this.lift(new c(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/ArgumentOutOfRangeError"),u=require("rxjs/observable/EmptyObservable");e.takeLast=r;var c=function(){function e(e){if(this.total=e,this.total<0)throw new a.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.total))},e}(),l=function(e){function t(t,r){e.call(this,t),this.total=r,this.ring=new Array,this.count=0}return o(t,e),t.prototype._next=function(e){var t=this.ring,r=this.total,s=this.count++;if(t.length<r)t.push(e);else{var i=s%r;t[i]=e}},t.prototype._complete=function(){var e=this.destination,t=this.count;if(t>0)for(var r=this.count>=this.total?this.total:this.count,s=this.ring,i=0;r>i;i++){var o=t++%r;e.next(s[o])}e.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/takeUntil",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.takeUntil=r;var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.notifier))},e}(),c=function(e){function t(t,r){e.call(this,t),this.notifier=r,this.add(a.subscribeToResult(this,r))}return o(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.complete()},t.prototype.notifyComplete=function(){},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/takeWhile",["rxjs/Subscriber"],!0,function(require,e,t){function r(e){return this.lift(new a(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.takeWhile=r;var a=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t._subscribe(new u(e,this.predicate))},e}(),u=function(e){function t(t,r){e.call(this,t),this.predicate=r,this.index=0}return o(t,e),t.prototype._next=function(e){var t,r=this.destination;try{t=this.predicate(e,this.index++)}catch(s){return void r.error(s)}this.nextOrComplete(e,t)},t.prototype.nextOrComplete=function(e,t){var r=this.destination;Boolean(t)?r.next(e):r.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/throttle",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new u(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.throttle=r;var u=function(){function e(e){this.durationSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.durationSelector))},e}(),c=function(e){function t(t,r){e.call(this,t),this.destination=t,this.durationSelector=r}return o(t,e),t.prototype._next=function(e){this.throttled||this.tryDurationSelector(e)},t.prototype.tryDurationSelector=function(e){var t=null;try{t=this.durationSelector(e)}catch(r){return void this.destination.error(r)}this.emitAndThrottle(e,t)},t.prototype.emitAndThrottle=function(e,t){this.add(this.throttled=a.subscribeToResult(this,t)),this.destination.next(e)},t.prototype._unsubscribe=function(){var e=this.throttled;e&&(this.remove(e),this.throttled=null,e.unsubscribe())},t.prototype.notifyNext=function(e,t,r,s,i){this._unsubscribe()},t.prototype.notifyComplete=function(){this._unsubscribe()},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/throttleTime",["rxjs/Subscriber","rxjs/scheduler/async"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=u.async),this.lift(new c(e,t))}function s(e){var t=e.subscriber;t.clearThrottle()}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/Subscriber"),u=require("rxjs/scheduler/async");e.throttleTime=r;var c=function(){function e(e,t){this.duration=e,this.scheduler=t}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.duration,this.scheduler))},e}(),l=function(e){function t(t,r,s){e.call(this,t),this.duration=r,this.scheduler=s}return n(t,e),t.prototype._next=function(e){this.throttled||(this.add(this.throttled=this.scheduler.schedule(s,this.duration,{subscriber:this})),this.destination.next(e))},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(e.unsubscribe(),this.remove(e),this.throttled=null)},t}(a.Subscriber);return i.define=o,t.exports}),System.register("rxjs/operator/timeInterval",["rxjs/Subscriber","rxjs/scheduler/async"],!0,function(require,e,t){function r(e){return void 0===e&&(e=a.async),this.lift(new c(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/scheduler/async");e.timeInterval=r;var u=function(){function e(e,t){this.value=e,this.interval=t}return e}();e.TimeInterval=u;var c=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,r){e.call(this,t),this.scheduler=r,this.lastTime=0,this.lastTime=r.now()}return o(t,e),t.prototype._next=function(e){var t=this.scheduler.now(),r=t-this.lastTime;this.lastTime=t,this.destination.next(new u(e,r))},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/timeout",["rxjs/scheduler/async","rxjs/util/isDate","rxjs/Subscriber"],!0,function(require,e,t){function r(e,t,r){void 0===t&&(t=null),void 0===r&&(r=n.async);var s=a.isDate(e),i=s?+e-r.now():Math.abs(e);return this.lift(new c(i,s,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/scheduler/async"),a=require("rxjs/util/isDate"),u=require("rxjs/Subscriber");e.timeout=r;var c=function(){function e(e,t,r,s){this.waitFor=e,this.absoluteTimeout=t,this.errorToSend=r,this.scheduler=s}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))},e}(),l=function(e){function t(t,r,s,i,o){e.call(this,t),this.absoluteTimeout=r,this.waitFor=s,this.errorToSend=i,this.scheduler=o,this.index=0,this._previousIndex=0,this._hasCompleted=!1,this.scheduleTimeout()}return o(t,e),Object.defineProperty(t.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),t.dispatchTimeout=function(e){var t=e.subscriber,r=e.index;t.hasCompleted||t.previousIndex!==r||t.notifyTimeout()},t.prototype.scheduleTimeout=function(){var e=this.index;this.scheduler.schedule(t.dispatchTimeout,this.waitFor,{subscriber:this,index:e}),this.index++,this._previousIndex=e},t.prototype._next=function(e){this.destination.next(e),this.absoluteTimeout||this.scheduleTimeout()},t.prototype._error=function(e){this.destination.error(e),this._hasCompleted=!0},t.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},t.prototype.notifyTimeout=function(){this.error(this.errorToSend||new Error("timeout"))},t}(u.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/timeoutWith",["rxjs/scheduler/async","rxjs/util/isDate","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t,r){void 0===r&&(r=n.async);var s=a.isDate(e),i=s?+e-r.now():Math.abs(e);return this.lift(new l(i,s,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/scheduler/async"),a=require("rxjs/util/isDate"),u=require("rxjs/OuterSubscriber"),c=require("rxjs/util/subscribeToResult");e.timeoutWith=r;var l=function(){function e(e,t,r,s){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=s}return e.prototype.call=function(e,t){return t._subscribe(new b(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),b=function(e){function t(t,r,s,i,o){e.call(this),this.destination=t,this.absoluteTimeout=r,this.waitFor=s,this.withObservable=i,this.scheduler=o,this.timeoutSubscription=void 0,this.index=0,this._previousIndex=0,this._hasCompleted=!1,t.add(this),this.scheduleTimeout()}return o(t,e),Object.defineProperty(t.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0}),t.dispatchTimeout=function(e){var t=e.subscriber,r=e.index;t.hasCompleted||t.previousIndex!==r||t.handleTimeout()},t.prototype.scheduleTimeout=function(){var e=this.index,r={subscriber:this,index:e};this.scheduler.schedule(t.dispatchTimeout,this.waitFor,r),this.index++,this._previousIndex=e},t.prototype._next=function(e){this.destination.next(e),this.absoluteTimeout||this.scheduleTimeout()},t.prototype._error=function(e){this.destination.error(e),this._hasCompleted=!0},t.prototype._complete=function(){this.destination.complete(),this._hasCompleted=!0},t.prototype.handleTimeout=function(){if(!this.isUnsubscribed){var e=this.withObservable;this.unsubscribe(),this.destination.add(this.timeoutSubscription=c.subscribeToResult(this,e))}},t}(u.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/timestamp",["rxjs/Subscriber","rxjs/scheduler/async"],!0,function(require,e,t){function r(e){return void 0===e&&(e=a.async),this.lift(new c(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/scheduler/async");e.timestamp=r;var u=function(){function e(e,t){this.value=e,this.timestamp=t}return e}();e.Timestamp=u;var c=function(){function e(e){this.scheduler=e}return e.prototype.call=function(e,t){return t._subscribe(new l(e,this.scheduler))},e}(),l=function(e){function t(t,r){e.call(this,t),this.scheduler=r}return o(t,e),t.prototype._next=function(e){var t=this.scheduler.now();this.destination.next(new u(e,t))},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/toArray",["rxjs/Subscriber"],!0,function(require,e,t){function r(){return this.lift(new a)}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber");e.toArray=r;var a=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new u(e))},e}(),u=function(e){function t(t){e.call(this,t),this.array=[]}return o(t,e),t.prototype._next=function(e){this.array.push(e)},t.prototype._complete=function(){this.destination.next(this.array),this.destination.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/toPromise",["rxjs/util/root"],!0,function(require,e,t){function r(e){var t=this;if(e||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?e=o.root.Rx.config.Promise:o.root.Promise&&(e=o.root.Promise)),!e)throw new Error("no Promise impl found");return new e(function(e,r){var s;t.subscribe(function(e){return s=e},function(e){return r(e)},function(){return e(s)})})}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/util/root");return e.toPromise=r,s.define=i,t.exports}),System.register("rxjs/operator/window",["rxjs/Subject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new c(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subject"),a=require("rxjs/OuterSubscriber"),u=require("rxjs/util/subscribeToResult");e.window=r;var c=function(){function e(e){this.windowBoundaries=e}return e.prototype.call=function(e,t){var r=new l(e),s=t._subscribe(r);return s.isUnsubscribed||r.add(u.subscribeToResult(r,this.windowBoundaries)),s},e}(),l=function(e){function t(t){e.call(this,t),this.window=new n.Subject,t.next(this.window)}return o(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.openWindow()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this._complete()},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e)},t.prototype._complete=function(){this.window.complete(),this.destination.complete()},t.prototype._unsubscribe=function(){this.window=null},t.prototype.openWindow=function(){var e=this.window;e&&e.complete();var t=this.destination,r=this.window=new n.Subject;t.next(r)},t}(a.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/windowCount",["rxjs/Subscriber","rxjs/Subject"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=0),this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Subject");e.windowCount=r;var u=function(){function e(e,t){this.windowSize=e,this.startWindowEvery=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.windowSize,this.startWindowEvery))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.destination=t,this.windowSize=r,this.startWindowEvery=s,this.windows=[new a.Subject],this.count=0,t.next(this.windows[0])}return o(t,e),t.prototype._next=function(e){for(var t=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,r=this.destination,s=this.windowSize,i=this.windows,o=i.length,n=0;o>n&&!this.isUnsubscribed;n++)i[n].next(e);var u=this.count-s+1;if(u>=0&&u%t===0&&!this.isUnsubscribed&&i.shift().complete(),++this.count%t===0&&!this.isUnsubscribed){var c=new a.Subject;i.push(c),r.next(c)}},t.prototype._error=function(e){var t=this.windows;if(t)for(;t.length>0&&!this.isUnsubscribed;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){var e=this.windows;if(e)for(;e.length>0&&!this.isUnsubscribed;)e.shift().complete();this.destination.complete()},t.prototype._unsubscribe=function(){this.count=0,this.windows=null},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/operator/windowTime",["rxjs/Subscriber","rxjs/Subject","rxjs/scheduler/async"],!0,function(require,e,t){function r(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=b.async),this.lift(new p(e,t,r))}function s(e){var t=e.subscriber,r=e.windowTimeSpan,s=e.window;s&&s.complete(),e.window=t.openWindow(),this.schedule(e,r)}function i(e){var t=e.windowTimeSpan,r=e.subscriber,s=e.scheduler,i=e.windowCreationInterval,n=r.openWindow(),a=this,u={action:a,subscription:null},c={subscriber:r,window:n,context:u};u.subscription=s.schedule(o,t,c),a.add(u.subscription),a.schedule(e,i)}function o(e){var t=e.subscriber,r=e.window,s=e.context;s&&s.action&&s.subscription&&s.action.remove(s.subscription),t.closeWindow(r)}var n=System.global,a=n.define;n.define=void 0;var u=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},c=require("rxjs/Subscriber"),l=require("rxjs/Subject"),b=require("rxjs/scheduler/async");e.windowTime=r;var p=function(){function e(e,t,r){this.windowTimeSpan=e,this.windowCreationInterval=t,this.scheduler=r}return e.prototype.call=function(e,t){return t._subscribe(new h(e,this.windowTimeSpan,this.windowCreationInterval,this.scheduler))},e}(),h=function(e){function t(t,r,n,a){if(e.call(this,t),this.destination=t,this.windowTimeSpan=r,this.windowCreationInterval=n,this.scheduler=a,this.windows=[],null!==n&&n>=0){var u=this.openWindow(),c={subscriber:this,window:u,context:null},l={windowTimeSpan:r,windowCreationInterval:n,subscriber:this,scheduler:a};this.add(a.schedule(o,r,c)),this.add(a.schedule(i,n,l))}else{var b=this.openWindow(),p={subscriber:this,window:b,windowTimeSpan:r};this.add(a.schedule(s,r,p))}}return u(t,e),t.prototype._next=function(e){for(var t=this.windows,r=t.length,s=0;r>s;s++){var i=t[s];i.isUnsubscribed||i.next(e)}},t.prototype._error=function(e){for(var t=this.windows;t.length>0;)t.shift().error(e);this.destination.error(e)},t.prototype._complete=function(){for(var e=this.windows;e.length>0;){var t=e.shift();t.isUnsubscribed||t.complete()}this.destination.complete()},t.prototype.openWindow=function(){var e=new l.Subject;this.windows.push(e);var t=this.destination;return t.next(e),e},t.prototype.closeWindow=function(e){e.complete();var t=this.windows;t.splice(t.indexOf(e),1)},t}(c.Subscriber);return n.define=a,t.exports}),System.register("rxjs/operator/windowToggle",["rxjs/Subject","rxjs/Subscription","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e,t){return this.lift(new p(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subject"),a=require("rxjs/Subscription"),u=require("rxjs/util/tryCatch"),c=require("rxjs/util/errorObject"),l=require("rxjs/OuterSubscriber"),b=require("rxjs/util/subscribeToResult");e.windowToggle=r;var p=function(){function e(e,t){this.openings=e,this.closingSelector=t}return e.prototype.call=function(e,t){return t._subscribe(new h(e,this.openings,this.closingSelector))},e}(),h=function(e){function t(t,r,s){e.call(this,t),this.openings=r,this.closingSelector=s,this.contexts=[],this.add(this.openSubscription=b.subscribeToResult(this,r,r))}return o(t,e),t.prototype._next=function(e){var t=this.contexts;if(t)for(var r=t.length,s=0;r>s;s++)t[s].window.next(e)},t.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var s=r.length,i=-1;++i<s;){var o=r[i];o.window.error(t),o.subscription.unsubscribe()}e.prototype._error.call(this,t)},t.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,s=-1;++s<r;){var i=t[s];i.window.complete(),i.subscription.unsubscribe()}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.contexts;if(this.contexts=null,e)for(var t=e.length,r=-1;++r<t;){var s=e[r];s.window.unsubscribe(),s.subscription.unsubscribe()}},t.prototype.notifyNext=function(e,t,r,s,i){if(e===this.openings){var o=this.closingSelector,l=u.tryCatch(o)(t);if(l===c.errorObject)return this.error(c.errorObject.e);var p=new n.Subject,h=new a.Subscription,d={window:p,subscription:h};this.contexts.push(d);var f=b.subscribeToResult(this,l,d);f.isUnsubscribed?this.closeWindow(this.contexts.length-1):(f.context=d,h.add(f)),this.destination.next(p)}else this.closeWindow(this.contexts.indexOf(e))},t.prototype.notifyError=function(e){this.error(e)},t.prototype.notifyComplete=function(e){e!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(e.context))},t.prototype.closeWindow=function(e){if(-1!==e){var t=this.contexts,r=t[e],s=r.window,i=r.subscription;t.splice(e,1),s.complete(),i.unsubscribe()}},t}(l.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/windowWhen",["rxjs/Subject","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(e){return this.lift(new b(e))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subject"),a=require("rxjs/util/tryCatch"),u=require("rxjs/util/errorObject"),c=require("rxjs/OuterSubscriber"),l=require("rxjs/util/subscribeToResult");e.windowWhen=r;var b=function(){function e(e){this.closingSelector=e}return e.prototype.call=function(e,t){return t._subscribe(new p(e,this.closingSelector))},e}(),p=function(e){function t(t,r){e.call(this,t),this.destination=t,this.closingSelector=r,this.openWindow()}return o(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.openWindow(i)},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){this.openWindow(e)},t.prototype._next=function(e){this.window.next(e)},t.prototype._error=function(e){this.window.error(e),this.destination.error(e),this.unsubscribeClosingNotification()},t.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},t.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},t.prototype.openWindow=function(e){void 0===e&&(e=null),e&&(this.remove(e),e.unsubscribe());var t=this.window;t&&t.complete();var r=this.window=new n.Subject;this.destination.next(r);var s=a.tryCatch(this.closingSelector)();if(s===u.errorObject){var i=u.errorObject.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=l.subscribeToResult(this,s))},t}(c.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/operator/withLatestFrom",["rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r;"function"==typeof e[e.length-1]&&(r=e.pop());var s=e;return this.lift(new u(s,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/OuterSubscriber"),a=require("rxjs/util/subscribeToResult");e.withLatestFrom=r;var u=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.observables,this.project))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.observables=r,this.project=s,this.toRespond=[];var i=r.length;this.values=new Array(i);for(var o=0;i>o;o++)this.toRespond.push(o);for(var o=0;i>o;o++){var n=r[o];this.add(a.subscribeToResult(this,n,n,o))}}return o(t,e),
t.prototype.notifyNext=function(e,t,r,s,i){this.values[r]=t;var o=this.toRespond;if(o.length>0){var n=o.indexOf(r);-1!==n&&o.splice(n,1)}},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(n.OuterSubscriber);return s.define=i,t.exports}),System.register("rxjs/add/operator/zip",["rxjs/Observable","rxjs/operator/zip"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/zip");return i.Observable.prototype.zip=o.zipProto,r.define=s,t.exports}),System.register("rxjs/operator/zipAll",["rxjs/operator/zip"],!0,function(require,e,t){function r(e){return this.lift(new o.ZipOperator(e))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/zip");return e.zipAll=r,s.define=i,t.exports}),System.register("rxjs/Operator",["rxjs/Subscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Subscriber"),o=function(){function e(){}return e.prototype.call=function(e,t){return t._subscribe(new i.Subscriber(e))},e}();return e.Operator=o,r.define=s,t.exports}),System.register("rxjs/scheduler/VirtualTimeScheduler",["rxjs/Subscription"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subscription"),n=function(){function e(){this.actions=[],this.active=!1,this.scheduledId=null,this.index=0,this.sorted=!1,this.frame=0,this.maxFrames=750}return e.prototype.now=function(){return this.frame},e.prototype.flush=function(){for(var e=this.actions,t=this.maxFrames;e.length>0;){var r=e.shift();if(this.frame=r.delay,!(this.frame<=t))break;if(r.execute(),r.error)throw e.length=0,this.frame=0,r.error}e.length=0,this.frame=0},e.prototype.addAction=function(e){var t=this.actions;t.push(e),t.sort(function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1})},e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),this.sorted=!1,new a(this,e,this.index++).schedule(r,t)},e.frameTimeFactor=10,e}();e.VirtualTimeScheduler=n;var a=function(e){function t(t,r,s){e.call(this),this.scheduler=t,this.work=r,this.index=s,this.calls=0}return i(t,e),t.prototype.schedule=function(e,r){if(void 0===r&&(r=0),this.isUnsubscribed)return this;var s=this.scheduler,i=null;return 0===this.calls++?i=this:(i=new t(s,this.work,s.index+=1),this.add(i)),i.state=e,i.delay=s.frame+r,s.addAction(i),this},t.prototype.execute=function(){if(this.isUnsubscribed)throw new Error("How did did we execute a canceled Action?");this.work(this.state)},t.prototype.unsubscribe=function(){var t=this.scheduler.actions,r=t.indexOf(this);this.work=void 0,this.state=void 0,this.scheduler=void 0,-1!==r&&t.splice(r,1),e.prototype.unsubscribe.call(this)},t}(o.Subscription);return r.define=s,t.exports}),System.register("rxjs/testing/SubscriptionLog",[],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=t}return e}();return e.SubscriptionLog=i,r.define=s,t.exports}),System.register("rxjs/util/applyMixins",[],!0,function(require,e,t){function r(e,t){for(var r=0,s=t.length;s>r;r++)for(var i=t[r],o=Object.getOwnPropertyNames(i.prototype),n=0,a=o.length;a>n;n++){var u=o[n];e.prototype[u]=i.prototype[u]}}var s=System.global,i=s.define;return s.define=void 0,e.applyMixins=r,s.define=i,t.exports}),System.register("rxjs/testing/HotObservable",["rxjs/Subject","rxjs/Subscription","rxjs/testing/SubscriptionLoggable","rxjs/util/applyMixins"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/Subscription"),a=require("rxjs/testing/SubscriptionLoggable"),u=require("rxjs/util/applyMixins"),c=function(e){function t(t,r){e.call(this),this.messages=t,this.subscriptions=[],this.scheduler=r}return i(t,e),t.prototype._subscribe=function(t){var r=this,s=r.logSubscribedFrame();return t.add(new n.Subscription(function(){r.logUnsubscribedFrame(s)})),e.prototype._subscribe.call(this,t)},t.prototype.setup=function(){for(var e=this,t=e.messages.length,r=0;t>r;r++)!function(){var t=e.messages[r];e.scheduler.schedule(function(){t.notification.observe(e)},t.frame)}()},t}(o.Subject);return e.HotObservable=c,u.applyMixins(c,[a.SubscriptionLoggable]),r.define=s,t.exports}),System.register("rxjs/util/AnimationFrame",["rxjs/util/root"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=function(){function e(e){e.requestAnimationFrame?(this.cancelAnimationFrame=e.cancelAnimationFrame.bind(e),this.requestAnimationFrame=e.requestAnimationFrame.bind(e)):e.mozRequestAnimationFrame?(this.cancelAnimationFrame=e.mozCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.mozRequestAnimationFrame.bind(e)):e.webkitRequestAnimationFrame?(this.cancelAnimationFrame=e.webkitCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.webkitRequestAnimationFrame.bind(e)):e.msRequestAnimationFrame?(this.cancelAnimationFrame=e.msCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.msRequestAnimationFrame.bind(e)):e.oRequestAnimationFrame?(this.cancelAnimationFrame=e.oCancelAnimationFrame.bind(e),this.requestAnimationFrame=e.oRequestAnimationFrame.bind(e)):(this.cancelAnimationFrame=e.clearTimeout.bind(e),this.requestAnimationFrame=function(t){return e.setTimeout(t,1e3/60)})}return e}();return e.RequestAnimationFrameDefinition=o,e.AnimationFrame=new o(i.root),r.define=s,t.exports}),System.register("rxjs/util/tryCatch",["rxjs/util/errorObject"],!0,function(require,e,t){function r(){try{return n.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function s(e){return n=e,r}var i=System.global,o=i.define;i.define=void 0;var n,a=require("rxjs/util/errorObject");return e.tryCatch=s,i.define=o,t.exports}),System.register("symbol-observable",["ponyfill"],!0,function(require,e,t){var r=System.global,s=r.define;return r.define=void 0,t.exports=require("ponyfill")(r||window||this),r.define=s,t.exports}),System.register("rxjs/observable/BoundCallbackObservable",["rxjs/Observable","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/AsyncSubject"],!0,function(require,e,t){function r(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function s(e){var t=e.err,r=e.subject;r.error(t)}var i=System.global,o=i.define;i.define=void 0;var n=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=require("rxjs/Observable"),u=require("rxjs/util/tryCatch"),c=require("rxjs/util/errorObject"),l=require("rxjs/AsyncSubject"),b=function(e){function t(t,r,s,i){e.call(this),this.callbackFunc=t,this.selector=r,this.args=s,this.scheduler=i}return n(t,e),t.create=function(e,r,s){return void 0===r&&(r=void 0),function(){for(var i=[],o=0;o<arguments.length;o++)i[o-0]=arguments[o];return new t(e,r,i,s)}},t.prototype._subscribe=function(e){var r=this.callbackFunc,s=this.args,i=this.scheduler,o=this.subject;if(i)return i.schedule(t.dispatch,0,{source:this,subscriber:e});if(!o){o=this.subject=new l.AsyncSubject;var n=function b(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=b.source,s=r.selector,i=r.subject;if(s){var o=u.tryCatch(s).apply(this,e);o===c.errorObject?i.error(c.errorObject.e):(i.next(o),i.complete())}else i.next(1===e.length?e[0]:e),i.complete()};n.source=this;var a=u.tryCatch(r).apply(this,s.concat(n));a===c.errorObject&&o.error(c.errorObject.e)}return o.subscribe(e)},t.dispatch=function(e){var t=this,i=e.source,o=e.subscriber,n=i.callbackFunc,a=i.args,b=i.scheduler,p=i.subject;if(!p){p=i.subject=new l.AsyncSubject;var h=function f(){for(var e=[],i=0;i<arguments.length;i++)e[i-0]=arguments[i];var o=f.source,n=o.selector,a=o.subject;if(n){var l=u.tryCatch(n).apply(this,e);l===c.errorObject?t.add(b.schedule(s,0,{err:c.errorObject.e,subject:a})):t.add(b.schedule(r,0,{value:l,subject:a}))}else{var p=1===e.length?e[0]:e;t.add(b.schedule(r,0,{value:p,subject:a}))}};h.source=i;var d=u.tryCatch(n).apply(this,a.concat(h));d===c.errorObject&&p.error(c.errorObject.e)}t.add(p.subscribe(o))},t}(a.Observable);return e.BoundCallbackObservable=b,i.define=o,t.exports}),System.register("rxjs/observable/bindNodeCallback",["rxjs/observable/BoundNodeCallbackObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/BoundNodeCallbackObservable");return e.bindNodeCallback=i.BoundNodeCallbackObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/ArrayObservable",["rxjs/Observable","rxjs/observable/ScalarObservable","rxjs/observable/EmptyObservable","rxjs/util/isScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/observable/ScalarObservable"),a=require("rxjs/observable/EmptyObservable"),u=require("rxjs/util/isScheduler"),c=function(e){function t(t,r){e.call(this),this.array=t,this.scheduler=r,r||1!==t.length||(this._isScalar=!0,this.value=t[0])}return i(t,e),t.create=function(e,r){return new t(e,r)},t.of=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];var s=e[e.length-1];u.isScheduler(s)?e.pop():s=null;var i=e.length;return i>1?new t(e,s):1===i?new n.ScalarObservable(e[0],s):new a.EmptyObservable(s)},t.dispatch=function(e){var t=e.array,r=e.index,s=e.count,i=e.subscriber;return r>=s?void i.complete():(i.next(t[r]),void(i.isUnsubscribed||(e.index=r+1,this.schedule(e))))},t.prototype._subscribe=function(e){var r=0,s=this.array,i=s.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:s,index:r,count:i,subscriber:e});for(var n=0;i>n&&!e.isUnsubscribed;n++)e.next(s[n]);e.complete()},t}(o.Observable);return e.ArrayObservable=c,r.define=s,t.exports}),System.register("rxjs/util/subscribeToResult",["rxjs/util/root","rxjs/util/isArray","rxjs/util/isPromise","rxjs/Observable","rxjs/symbol/iterator","rxjs/InnerSubscriber","symbol-observable"],!0,function(require,e,t){function r(e,t,r,s){var i=new l.InnerSubscriber(e,r,s);if(!i.isUnsubscribed){if(t instanceof u.Observable)return t._isScalar?(i.next(t.value),void i.complete()):t.subscribe(i);if(n.isArray(t)){for(var p=0,h=t.length;h>p&&!i.isUnsubscribed;p++)i.next(t[p]);i.isUnsubscribed||i.complete()}else{if(a.isPromise(t))return t.then(function(e){i.isUnsubscribed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,function(e){o.root.setTimeout(function(){throw e})}),i;if("function"==typeof t[c.$$iterator]){for(var d=0,f=t;d<f.length;d++){var v=f[d];if(i.next(v),i.isUnsubscribed)break}i.isUnsubscribed||i.complete()}else if("function"==typeof t[b]){var x=t[b]();if("function"==typeof x.subscribe)return x.subscribe(new l.InnerSubscriber(e,r,s));i.error("invalid observable")}else i.error(new TypeError("unknown type returned"))}}}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/util/root"),n=require("rxjs/util/isArray"),a=require("rxjs/util/isPromise"),u=require("rxjs/Observable"),c=require("rxjs/symbol/iterator"),l=require("rxjs/InnerSubscriber"),b=require("symbol-observable");return e.subscribeToResult=r,s.define=i,t.exports}),System.register("rxjs/operator/concat",["rxjs/util/isScheduler","rxjs/observable/ArrayObservable","rxjs/operator/mergeAll"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return s.apply(void 0,[this].concat(e))}function s(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,s=e;return n.isScheduler(s[e.length-1])&&(r=s.pop()),new a.ArrayObservable(e,r).lift(new u.MergeAllOperator(1))}var i=System.global,o=i.define;i.define=void 0;var n=require("rxjs/util/isScheduler"),a=require("rxjs/observable/ArrayObservable"),u=require("rxjs/operator/mergeAll");return e.concat=r,e.concatStatic=s,i.define=o,t.exports}),System.register("rxjs/observable/defer",["rxjs/observable/DeferObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/DeferObservable");return e.defer=i.DeferObservable.create,r.define=s,t.exports}),System.register("rxjs/add/observable/empty",["rxjs/Observable","rxjs/observable/empty"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/empty");return i.Observable.empty=o.empty,r.define=s,t.exports}),System.register("rxjs/observable/forkJoin",["rxjs/observable/ForkJoinObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/ForkJoinObservable");return e.forkJoin=i.ForkJoinObservable.create,r.define=s,t.exports}),System.register("rxjs/operator/observeOn",["rxjs/Subscriber","rxjs/Notification"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=0),this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Notification");e.observeOn=r;var u=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.scheduler,this.delay))},e}();e.ObserveOnOperator=u;var c=function(e){function t(t,r,s){void 0===s&&(s=0),e.call(this,t),this.scheduler=r,this.delay=s}return o(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r)},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new l(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(n.Subscriber);e.ObserveOnSubscriber=c;var l=function(){function e(e,t){this.notification=e,this.destination=t}return e}();return e.ObserveOnMessage=l,s.define=i,t.exports}),System.register("rxjs/observable/fromEvent",["rxjs/observable/FromEventObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/FromEventObservable");return e.fromEvent=i.FromEventObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/fromEventPattern",["rxjs/observable/FromEventPatternObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/FromEventPatternObservable");return e.fromEventPattern=i.FromEventPatternObservable.create,r.define=s,t.exports}),System.register("rxjs/add/observable/fromPromise",["rxjs/Observable","rxjs/observable/fromPromise"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/fromPromise");return i.Observable.fromPromise=o.fromPromise,r.define=s,t.exports}),System.register("rxjs/add/observable/generate",["rxjs/Observable","rxjs/observable/GenerateObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/GenerateObservable");return i.Observable.generate=o.GenerateObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/if",["rxjs/observable/IfObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/IfObservable");return e._if=i.IfObservable.create,r.define=s,t.exports}),System.register("rxjs/scheduler/QueueScheduler",["rxjs/scheduler/QueueAction","rxjs/scheduler/FutureAction"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/scheduler/QueueAction"),o=require("rxjs/scheduler/FutureAction"),n=function(){function e(){this.active=!1,this.actions=[],this.scheduledId=null}return e.prototype.now=function(){return Date.now()},e.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var e=this.actions,t=null;t=e.shift();)if(t.execute(),t.error)throw this.active=!1,t.error;this.active=!1}},e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),0>=t?this.scheduleNow(e,r):this.scheduleLater(e,t,r)},e.prototype.scheduleNow=function(e,t){return new i.QueueAction(this,e).schedule(t)},e.prototype.scheduleLater=function(e,t,r){return new o.FutureAction(this,e).schedule(r,t)},e}();return e.QueueScheduler=n,r.define=s,t.exports}),System.register("rxjs/observable/merge",["rxjs/operator/merge"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/operator/merge");return e.merge=i.mergeStatic,r.define=s,t.exports}),System.register("rxjs/add/observable/race",["rxjs/Observable","rxjs/operator/race"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/race");return i.Observable.race=o.raceStatic,r.define=s,t.exports}),System.register("rxjs/observable/NeverObservable",["rxjs/Observable","rxjs/util/noop"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/util/noop"),a=function(e){function t(){e.call(this)}return i(t,e),t.create=function(){return new t},t.prototype._subscribe=function(e){n.noop()},t}(o.Observable);return e.NeverObservable=a,r.define=s,t.exports}),System.register("rxjs/add/observable/of",["rxjs/Observable","rxjs/observable/of"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/of");return i.Observable.of=o.of,r.define=s,t.exports}),System.register("rxjs/add/observable/onErrorResumeNext",["rxjs/Observable","rxjs/operator/onErrorResumeNext"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/onErrorResumeNext");return i.Observable.onErrorResumeNext=o.onErrorResumeNextStatic,r.define=s,t.exports}),System.register("rxjs/observable/range",["rxjs/observable/RangeObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/RangeObservable");return e.range=i.RangeObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/using",["rxjs/observable/UsingObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/UsingObservable");return e.using=i.UsingObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/throw",["rxjs/observable/ErrorObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/ErrorObservable");return e._throw=i.ErrorObservable.create,r.define=s,t.exports}),System.register("rxjs/observable/TimerObservable",["rxjs/util/isNumeric","rxjs/Observable","rxjs/scheduler/async","rxjs/util/isScheduler","rxjs/util/isDate"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/isNumeric"),n=require("rxjs/Observable"),a=require("rxjs/scheduler/async"),u=require("rxjs/util/isScheduler"),c=require("rxjs/util/isDate"),l=function(e){function t(t,r,s){void 0===t&&(t=0),e.call(this),this.period=-1,this.dueTime=0,o.isNumeric(r)?this.period=Number(r)<1&&1||Number(r):u.isScheduler(r)&&(s=r),u.isScheduler(s)||(s=a.async),this.scheduler=s,this.dueTime=c.isDate(t)?+t-this.scheduler.now():t}return i(t,e),t.create=function(e,r,s){return void 0===e&&(e=0),new t(e,r,s)},t.dispatch=function(e){var t=e.index,r=e.period,s=e.subscriber,i=this;if(s.next(t),!s.isUnsubscribed){if(-1===r)return s.complete();e.index=t+1,i.schedule(e,r)}},t.prototype._subscribe=function(e){var r=0,s=this,i=s.period,o=s.dueTime,n=s.scheduler;return n.schedule(t.dispatch,o,{index:r,period:i,subscriber:e})},t}(n.Observable);return e.TimerObservable=l,r.define=s,t.exports}),System.register("rxjs/observable/zip",["rxjs/operator/zip"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/operator/zip");return e.zip=i.zipStatic,r.define=s,t.exports}),System.register("rxjs/observable/dom/ajax",["rxjs/observable/dom/AjaxObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/dom/AjaxObservable");return e.ajax=i.AjaxObservable.create,r.define=s,t.exports}),System.register("rxjs/ReplaySubject",["rxjs/Subject","rxjs/scheduler/queue","rxjs/operator/observeOn"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/scheduler/queue"),a=require("rxjs/operator/observeOn"),u=function(e){function t(t,r,s){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=s,this._events=[],this._bufferSize=1>t?1:t,this._windowTime=1>r?1:r}return i(t,e),t.prototype.next=function(t){var r=this._getNow();this._events.push(new c(r,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(t){var r=this._trimBufferThenGetEvents(),s=this.scheduler;s&&t.add(t=new a.ObserveOnSubscriber(t,s));for(var i=r.length,o=0;i>o&&!t.isUnsubscribed;o++)t.next(r[o].value);return e.prototype._subscribe.call(this,t)},t.prototype._getNow=function(){return(this.scheduler||n.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,s=this._events,i=s.length,o=0;i>o&&!(e-s[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&s.splice(0,o),s},t}(o.Subject);e.ReplaySubject=u;var c=function(){function e(e,t){this.time=e,this.value=t}return e}();return r.define=s,t.exports}),System.register("rxjs/add/operator/buffer",["rxjs/Observable","rxjs/operator/buffer"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/buffer");return i.Observable.prototype.buffer=o.buffer,r.define=s,t.exports}),System.register("rxjs/add/operator/bufferCount",["rxjs/Observable","rxjs/operator/bufferCount"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/bufferCount");return i.Observable.prototype.bufferCount=o.bufferCount,r.define=s,t.exports}),System.register("rxjs/add/operator/bufferTime",["rxjs/Observable","rxjs/operator/bufferTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/bufferTime");return i.Observable.prototype.bufferTime=o.bufferTime,r.define=s,t.exports}),System.register("rxjs/add/operator/bufferToggle",["rxjs/Observable","rxjs/operator/bufferToggle"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/bufferToggle");return i.Observable.prototype.bufferToggle=o.bufferToggle,r.define=s,t.exports}),System.register("rxjs/add/operator/bufferWhen",["rxjs/Observable","rxjs/operator/bufferWhen"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/bufferWhen");return i.Observable.prototype.bufferWhen=o.bufferWhen,r.define=s,t.exports}),System.register("rxjs/add/operator/cache",["rxjs/Observable","rxjs/operator/cache"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/cache");return i.Observable.prototype.cache=o.cache,r.define=s,t.exports}),System.register("rxjs/add/operator/catch",["rxjs/Observable","rxjs/operator/catch"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/catch");return i.Observable.prototype["catch"]=o._catch,r.define=s,t.exports}),System.register("rxjs/add/operator/combineAll",["rxjs/Observable","rxjs/operator/combineAll"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/combineAll");return i.Observable.prototype.combineAll=o.combineAll,r.define=s,t.exports}),System.register("rxjs/add/operator/concatAll",["rxjs/Observable","rxjs/operator/concatAll"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/concatAll");return i.Observable.prototype.concatAll=o.concatAll,r.define=s,t.exports}),System.register("rxjs/operator/concatMap",["rxjs/operator/mergeMap"],!0,function(require,e,t){function r(e,t){return this.lift(new o.MergeMapOperator(e,t,1))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/mergeMap");return e.concatMap=r,s.define=i,t.exports}),System.register("rxjs/operator/concatMapTo",["rxjs/operator/mergeMapTo"],!0,function(require,e,t){function r(e,t){return this.lift(new o.MergeMapToOperator(e,t,1))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/mergeMapTo");return e.concatMapTo=r,s.define=i,t.exports}),System.register("rxjs/add/operator/count",["rxjs/Observable","rxjs/operator/count"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/count");return i.Observable.prototype.count=o.count,r.define=s,t.exports}),System.register("rxjs/add/operator/dematerialize",["rxjs/Observable","rxjs/operator/dematerialize"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/dematerialize");return i.Observable.prototype.dematerialize=o.dematerialize,r.define=s,t.exports}),System.register("rxjs/add/operator/debounce",["rxjs/Observable","rxjs/operator/debounce"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/debounce");return i.Observable.prototype.debounce=o.debounce,r.define=s,t.exports}),System.register("rxjs/add/operator/debounceTime",["rxjs/Observable","rxjs/operator/debounceTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/debounceTime");return i.Observable.prototype.debounceTime=o.debounceTime,r.define=s,t.exports}),System.register("rxjs/add/operator/defaultIfEmpty",["rxjs/Observable","rxjs/operator/defaultIfEmpty"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/defaultIfEmpty");return i.Observable.prototype.defaultIfEmpty=o.defaultIfEmpty,r.define=s,t.exports}),System.register("rxjs/add/operator/delay",["rxjs/Observable","rxjs/operator/delay"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/delay");return i.Observable.prototype.delay=o.delay,r.define=s,t.exports}),System.register("rxjs/add/operator/delayWhen",["rxjs/Observable","rxjs/operator/delayWhen"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/delayWhen");return i.Observable.prototype.delayWhen=o.delayWhen,r.define=s,t.exports}),System.register("rxjs/add/operator/distinct",["rxjs/Observable","rxjs/operator/distinct"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/distinct");return i.Observable.prototype.distinct=o.distinct,r.define=s,t.exports}),System.register("rxjs/add/operator/distinctKey",["rxjs/Observable","rxjs/operator/distinctKey"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/distinctKey");return i.Observable.prototype.distinctKey=o.distinctKey,r.define=s,t.exports}),System.register("rxjs/add/operator/distinctUntilChanged",["rxjs/Observable","rxjs/operator/distinctUntilChanged"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/distinctUntilChanged");return i.Observable.prototype.distinctUntilChanged=o.distinctUntilChanged,r.define=s,t.exports}),System.register("rxjs/add/operator/distinctUntilKeyChanged",["rxjs/Observable","rxjs/operator/distinctUntilKeyChanged"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/distinctUntilKeyChanged");return i.Observable.prototype.distinctUntilKeyChanged=o.distinctUntilKeyChanged,r.define=s,t.exports}),System.register("rxjs/add/operator/do",["rxjs/Observable","rxjs/operator/do"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/do");return i.Observable.prototype["do"]=o._do,r.define=s,t.exports}),System.register("rxjs/add/operator/exhaust",["rxjs/Observable","rxjs/operator/exhaust"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/exhaust");return i.Observable.prototype.exhaust=o.exhaust,r.define=s,t.exports}),System.register("rxjs/add/operator/exhaustMap",["rxjs/Observable","rxjs/operator/exhaustMap"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/exhaustMap");return i.Observable.prototype.exhaustMap=o.exhaustMap,r.define=s,t.exports}),System.register("rxjs/add/operator/expand",["rxjs/Observable","rxjs/operator/expand"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/expand");return i.Observable.prototype.expand=o.expand,r.define=s,t.exports}),System.register("rxjs/operator/elementAt",["rxjs/Subscriber","rxjs/util/ArgumentOutOfRangeError"],!0,function(require,e,t){function r(e,t){return this.lift(new u(e,t))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/ArgumentOutOfRangeError");e.elementAt=r;var u=function(){function e(e,t){if(this.index=e,this.defaultValue=t,0>e)throw new a.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){
return t._subscribe(new c(e,this.index,this.defaultValue))},e}(),c=function(e){function t(t,r,s){e.call(this,t),this.index=r,this.defaultValue=s}return o(t,e),t.prototype._next=function(e){0===this.index--&&(this.destination.next(e),this.destination.complete())},t.prototype._complete=function(){var e=this.destination;this.index>=0&&("undefined"!=typeof this.defaultValue?e.next(this.defaultValue):e.error(new a.ArgumentOutOfRangeError)),e.complete()},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/add/operator/filter",["rxjs/Observable","rxjs/operator/filter"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/filter");return i.Observable.prototype.filter=o.filter,r.define=s,t.exports}),System.register("rxjs/add/operator/finally",["rxjs/Observable","rxjs/operator/finally"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/finally");return i.Observable.prototype["finally"]=o._finally,r.define=s,t.exports}),System.register("rxjs/add/operator/find",["rxjs/Observable","rxjs/operator/find"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/find");return i.Observable.prototype.find=o.find,r.define=s,t.exports}),System.register("rxjs/add/operator/findIndex",["rxjs/Observable","rxjs/operator/findIndex"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/findIndex");return i.Observable.prototype.findIndex=o.findIndex,r.define=s,t.exports}),System.register("rxjs/operator/first",["rxjs/Subscriber","rxjs/util/EmptyError"],!0,function(require,e,t){function r(e,t,r){return this.lift(new u(e,t,r,this))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/util/EmptyError");e.first=r;var u=function(){function e(e,t,r,s){this.predicate=e,this.resultSelector=t,this.defaultValue=r,this.source=s}return e.prototype.call=function(e,t){return t._subscribe(new c(e,this.predicate,this.resultSelector,this.defaultValue,this.source))},e}(),c=function(e){function t(t,r,s,i,o){e.call(this,t),this.predicate=r,this.resultSelector=s,this.defaultValue=i,this.source=o,this.index=0,this.hasCompleted=!1}return o(t,e),t.prototype._next=function(e){var t=this.index++;this.predicate?this._tryPredicate(e,t):this._emit(e,t)},t.prototype._tryPredicate=function(e,t){var r;try{r=this.predicate(e,t,this.source)}catch(s){return void this.destination.error(s)}r&&this._emit(e,t)},t.prototype._emit=function(e,t){return this.resultSelector?void this._tryResultSelector(e,t):void this._emitFinal(e)},t.prototype._tryResultSelector=function(e,t){var r;try{r=this.resultSelector(e,t)}catch(s){return void this.destination.error(s)}this._emitFinal(r)},t.prototype._emitFinal=function(e){var t=this.destination;t.next(e),t.complete(),this.hasCompleted=!0},t.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?this.hasCompleted||e.error(new a.EmptyError):(e.next(this.defaultValue),e.complete())},t}(n.Subscriber);return s.define=i,t.exports}),System.register("rxjs/util/Map",["rxjs/util/root","rxjs/util/MapPolyfill"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=require("rxjs/util/MapPolyfill");return e.Map=i.root.Map||function(){return o.MapPolyfill}(),r.define=s,t.exports}),System.register("rxjs/add/operator/ignoreElements",["rxjs/Observable","rxjs/operator/ignoreElements"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/ignoreElements");return i.Observable.prototype.ignoreElements=o.ignoreElements,r.define=s,t.exports}),System.register("rxjs/add/operator/isEmpty",["rxjs/Observable","rxjs/operator/isEmpty"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/isEmpty");return i.Observable.prototype.isEmpty=o.isEmpty,r.define=s,t.exports}),System.register("rxjs/add/operator/audit",["rxjs/Observable","rxjs/operator/audit"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/audit");return i.Observable.prototype.audit=o.audit,r.define=s,t.exports}),System.register("rxjs/add/operator/auditTime",["rxjs/Observable","rxjs/operator/auditTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/auditTime");return i.Observable.prototype.auditTime=o.auditTime,r.define=s,t.exports}),System.register("rxjs/add/operator/last",["rxjs/Observable","rxjs/operator/last"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/last");return i.Observable.prototype.last=o.last,r.define=s,t.exports}),System.register("rxjs/add/operator/let",["rxjs/Observable","rxjs/operator/let"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/let");return i.Observable.prototype.let=o.letProto,i.Observable.prototype.letBind=o.letProto,r.define=s,t.exports}),System.register("rxjs/add/operator/every",["rxjs/Observable","rxjs/operator/every"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/every");return i.Observable.prototype.every=o.every,r.define=s,t.exports}),System.register("rxjs/add/operator/map",["rxjs/Observable","rxjs/operator/map"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/map");return i.Observable.prototype.map=o.map,r.define=s,t.exports}),System.register("rxjs/add/operator/mapTo",["rxjs/Observable","rxjs/operator/mapTo"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/mapTo");return i.Observable.prototype.mapTo=o.mapTo,r.define=s,t.exports}),System.register("rxjs/add/operator/materialize",["rxjs/Observable","rxjs/operator/materialize"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/materialize");return i.Observable.prototype.materialize=o.materialize,r.define=s,t.exports}),System.register("rxjs/operator/max",["rxjs/operator/reduce"],!0,function(require,e,t){function r(e){var t="function"==typeof e?e:function(e,t){return e>t?e:t};return this.lift(new o.ReduceOperator(t))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/operator/reduce");return e.max=r,s.define=i,t.exports}),System.register("rxjs/add/operator/mergeScan",["rxjs/Observable","rxjs/operator/mergeScan"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/mergeScan");return i.Observable.prototype.mergeScan=o.mergeScan,r.define=s,t.exports}),System.register("rxjs/add/operator/min",["rxjs/Observable","rxjs/operator/min"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/min");return i.Observable.prototype.min=o.min,r.define=s,t.exports}),System.register("rxjs/operator/multicast",["rxjs/observable/MulticastObservable","rxjs/observable/ConnectableObservable"],!0,function(require,e,t){function r(e,t){var r;r="function"==typeof e?e:function(){return e};var s=new n.ConnectableObservable(this,r);return t?new o.MulticastObservable(this,s,t):s}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/observable/MulticastObservable"),n=require("rxjs/observable/ConnectableObservable");return e.multicast=r,s.define=i,t.exports}),System.register("rxjs/add/operator/pairwise",["rxjs/Observable","rxjs/operator/pairwise"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/pairwise");return i.Observable.prototype.pairwise=o.pairwise,r.define=s,t.exports}),System.register("rxjs/operator/partition",["rxjs/util/not","rxjs/operator/filter"],!0,function(require,e,t){function r(e,t){return[n.filter.call(this,e),n.filter.call(this,o.not(e,t))]}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/util/not"),n=require("rxjs/operator/filter");return e.partition=r,s.define=i,t.exports}),System.register("rxjs/add/operator/pluck",["rxjs/Observable","rxjs/operator/pluck"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/pluck");return i.Observable.prototype.pluck=o.pluck,r.define=s,t.exports}),System.register("rxjs/add/operator/publish",["rxjs/Observable","rxjs/operator/publish"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/publish");return i.Observable.prototype.publish=o.publish,r.define=s,t.exports}),System.register("rxjs/BehaviorSubject",["rxjs/Subject","rxjs/util/throwError","rxjs/util/ObjectUnsubscribedError"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/util/throwError"),a=require("rxjs/util/ObjectUnsubscribedError"),u=function(e){function t(t){e.call(this),this._value=t}return i(t,e),t.prototype.getValue=function(){if(this.hasError)n.throwError(this.thrownError);else{if(!this.isUnsubscribed)return this._value;n.throwError(new a.ObjectUnsubscribedError)}},Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.isUnsubscribed&&t.next(this._value),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(o.Subject);return e.BehaviorSubject=u,r.define=s,t.exports}),System.register("rxjs/add/operator/publishReplay",["rxjs/Observable","rxjs/operator/publishReplay"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/publishReplay");return i.Observable.prototype.publishReplay=o.publishReplay,r.define=s,t.exports}),System.register("rxjs/add/operator/publishLast",["rxjs/Observable","rxjs/operator/publishLast"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/publishLast");return i.Observable.prototype.publishLast=o.publishLast,r.define=s,t.exports}),System.register("rxjs/add/operator/repeat",["rxjs/Observable","rxjs/operator/repeat"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/repeat");return i.Observable.prototype.repeat=o.repeat,r.define=s,t.exports}),System.register("rxjs/add/operator/retry",["rxjs/Observable","rxjs/operator/retry"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/retry");return i.Observable.prototype.retry=o.retry,r.define=s,t.exports}),System.register("rxjs/add/operator/retryWhen",["rxjs/Observable","rxjs/operator/retryWhen"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/retryWhen");return i.Observable.prototype.retryWhen=o.retryWhen,r.define=s,t.exports}),System.register("rxjs/add/operator/sample",["rxjs/Observable","rxjs/operator/sample"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/sample");return i.Observable.prototype.sample=o.sample,r.define=s,t.exports}),System.register("rxjs/add/operator/sampleTime",["rxjs/Observable","rxjs/operator/sampleTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/sampleTime");return i.Observable.prototype.sampleTime=o.sampleTime,r.define=s,t.exports}),System.register("rxjs/add/operator/scan",["rxjs/Observable","rxjs/operator/scan"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/scan");return i.Observable.prototype.scan=o.scan,r.define=s,t.exports}),System.register("rxjs/add/operator/share",["rxjs/Observable","rxjs/operator/share"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/share");return i.Observable.prototype.share=o.share,r.define=s,t.exports}),System.register("rxjs/add/operator/single",["rxjs/Observable","rxjs/operator/single"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/single");return i.Observable.prototype.single=o.single,r.define=s,t.exports}),System.register("rxjs/add/operator/skip",["rxjs/Observable","rxjs/operator/skip"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/skip");return i.Observable.prototype.skip=o.skip,r.define=s,t.exports}),System.register("rxjs/add/operator/skipUntil",["rxjs/Observable","rxjs/operator/skipUntil"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/skipUntil");return i.Observable.prototype.skipUntil=o.skipUntil,r.define=s,t.exports}),System.register("rxjs/add/operator/skipWhile",["rxjs/Observable","rxjs/operator/skipWhile"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/skipWhile");return i.Observable.prototype.skipWhile=o.skipWhile,r.define=s,t.exports}),System.register("rxjs/add/operator/startWith",["rxjs/Observable","rxjs/operator/startWith"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/startWith");return i.Observable.prototype.startWith=o.startWith,r.define=s,t.exports}),System.register("rxjs/scheduler/AsapAction",["rxjs/util/Immediate","rxjs/scheduler/FutureAction"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/Immediate"),n=require("rxjs/scheduler/FutureAction"),a=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype._schedule=function(t,r){if(void 0===r&&(r=0),r>0)return e.prototype._schedule.call(this,t,r);this.delay=r,this.state=t;var s=this.scheduler;return s.actions.push(this),s.scheduledId||(s.scheduledId=o.Immediate.setImmediate(function(){s.scheduledId=null,s.flush()})),this},t.prototype._unsubscribe=function(){var t=this.scheduler,r=t.scheduledId,s=t.actions;e.prototype._unsubscribe.call(this),0===s.length&&(t.active=!1,null!=r&&(t.scheduledId=null,o.Immediate.clearImmediate(r)))},t}(n.FutureAction);return e.AsapAction=a,r.define=s,t.exports}),System.register("rxjs/add/operator/switch",["rxjs/Observable","rxjs/operator/switch"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/switch");return i.Observable.prototype["switch"]=o._switch,r.define=s,t.exports}),System.register("rxjs/add/operator/switchMap",["rxjs/Observable","rxjs/operator/switchMap"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/switchMap");return i.Observable.prototype.switchMap=o.switchMap,r.define=s,t.exports}),System.register("rxjs/add/operator/switchMapTo",["rxjs/Observable","rxjs/operator/switchMapTo"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/switchMapTo");return i.Observable.prototype.switchMapTo=o.switchMapTo,r.define=s,t.exports}),System.register("rxjs/add/operator/take",["rxjs/Observable","rxjs/operator/take"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/take");return i.Observable.prototype.take=o.take,r.define=s,t.exports}),System.register("rxjs/add/operator/takeLast",["rxjs/Observable","rxjs/operator/takeLast"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/takeLast");return i.Observable.prototype.takeLast=o.takeLast,r.define=s,t.exports}),System.register("rxjs/add/operator/takeUntil",["rxjs/Observable","rxjs/operator/takeUntil"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/takeUntil");return i.Observable.prototype.takeUntil=o.takeUntil,r.define=s,t.exports}),System.register("rxjs/add/operator/takeWhile",["rxjs/Observable","rxjs/operator/takeWhile"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/takeWhile");return i.Observable.prototype.takeWhile=o.takeWhile,r.define=s,t.exports}),System.register("rxjs/add/operator/throttle",["rxjs/Observable","rxjs/operator/throttle"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/throttle");return i.Observable.prototype.throttle=o.throttle,r.define=s,t.exports}),System.register("rxjs/add/operator/throttleTime",["rxjs/Observable","rxjs/operator/throttleTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/throttleTime");return i.Observable.prototype.throttleTime=o.throttleTime,r.define=s,t.exports}),System.register("rxjs/add/operator/timeInterval",["rxjs/Observable","rxjs/operator/timeInterval"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/timeInterval");return i.Observable.prototype.timeInterval=o.timeInterval,r.define=s,t.exports}),System.register("rxjs/add/operator/timeout",["rxjs/Observable","rxjs/operator/timeout"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/timeout");return i.Observable.prototype.timeout=o.timeout,r.define=s,t.exports}),System.register("rxjs/add/operator/timeoutWith",["rxjs/Observable","rxjs/operator/timeoutWith"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/timeoutWith");return i.Observable.prototype.timeoutWith=o.timeoutWith,r.define=s,t.exports}),System.register("rxjs/add/operator/timestamp",["rxjs/Observable","rxjs/operator/timestamp"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/timestamp");return i.Observable.prototype.timestamp=o.timestamp,r.define=s,t.exports}),System.register("rxjs/add/operator/toArray",["rxjs/Observable","rxjs/operator/toArray"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/toArray");return i.Observable.prototype.toArray=o.toArray,r.define=s,t.exports}),System.register("rxjs/add/operator/toPromise",["rxjs/Observable","rxjs/operator/toPromise"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/toPromise");return i.Observable.prototype.toPromise=o.toPromise,r.define=s,t.exports}),System.register("rxjs/add/operator/window",["rxjs/Observable","rxjs/operator/window"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/window");return i.Observable.prototype.window=o.window,r.define=s,t.exports}),System.register("rxjs/add/operator/windowCount",["rxjs/Observable","rxjs/operator/windowCount"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/windowCount");return i.Observable.prototype.windowCount=o.windowCount,r.define=s,t.exports}),System.register("rxjs/add/operator/windowTime",["rxjs/Observable","rxjs/operator/windowTime"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/windowTime");return i.Observable.prototype.windowTime=o.windowTime,r.define=s,t.exports}),System.register("rxjs/add/operator/windowToggle",["rxjs/Observable","rxjs/operator/windowToggle"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/windowToggle");return i.Observable.prototype.windowToggle=o.windowToggle,r.define=s,t.exports}),System.register("rxjs/add/operator/windowWhen",["rxjs/Observable","rxjs/operator/windowWhen"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/windowWhen");return i.Observable.prototype.windowWhen=o.windowWhen,r.define=s,t.exports}),System.register("rxjs/add/operator/withLatestFrom",["rxjs/Observable","rxjs/operator/withLatestFrom"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/withLatestFrom");return i.Observable.prototype.withLatestFrom=o.withLatestFrom,r.define=s,t.exports}),System.register("rxjs/add/operator/zipAll",["rxjs/Observable","rxjs/operator/zipAll"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/zipAll");return i.Observable.prototype.zipAll=o.zipAll,r.define=s,t.exports}),System.register("rxjs/testing/SubscriptionLoggable",["rxjs/testing/SubscriptionLog"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/testing/SubscriptionLog"),o=function(){function e(){this.subscriptions=[]}return e.prototype.logSubscribedFrame=function(){return this.subscriptions.push(new i.SubscriptionLog(this.scheduler.now())),this.subscriptions.length-1},e.prototype.logUnsubscribedFrame=function(e){var t=this.subscriptions,r=t[e];t[e]=new i.SubscriptionLog(r.subscribedFrame,this.scheduler.now())},e}();return e.SubscriptionLoggable=o,r.define=s,t.exports}),System.register("rxjs/scheduler/AnimationFrameAction",["rxjs/scheduler/FutureAction","rxjs/util/AnimationFrame"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/scheduler/FutureAction"),n=require("rxjs/util/AnimationFrame"),a=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype._schedule=function(t,r){if(void 0===r&&(r=0),r>0)return e.prototype._schedule.call(this,t,r);this.delay=r,this.state=t;var s=this.scheduler;return s.actions.push(this),s.scheduledId||(s.scheduledId=n.AnimationFrame.requestAnimationFrame(function(){s.scheduledId=null,s.flush()})),this},t.prototype._unsubscribe=function(){var t=this.scheduler,r=t.scheduledId,s=t.actions;e.prototype._unsubscribe.call(this),0===s.length&&(t.active=!1,null!=r&&(t.scheduledId=null,n.AnimationFrame.cancelAnimationFrame(r)))},t}(o.FutureAction);return e.AnimationFrameAction=a,r.define=s,t.exports}),System.register("rxjs/Subscription",["rxjs/util/isArray","rxjs/util/isObject","rxjs/util/isFunction","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/util/UnsubscriptionError"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/isArray"),o=require("rxjs/util/isObject"),n=require("rxjs/util/isFunction"),a=require("rxjs/util/tryCatch"),u=require("rxjs/util/errorObject"),c=require("rxjs/util/UnsubscriptionError"),l=function(){function e(e){this.isUnsubscribed=!1,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var r=this,s=r._unsubscribe,l=r._subscriptions;if(this._subscriptions=null,n.isFunction(s)){var b=a.tryCatch(s).call(this);b===u.errorObject&&(t=!0,(e=e||[]).push(u.errorObject.e))}if(i.isArray(l))for(var p=-1,h=l.length;++p<h;){var d=l[p];if(o.isObject(d)){var b=a.tryCatch(d.unsubscribe).call(d);if(b===u.errorObject){t=!0,e=e||[];var f=u.errorObject.e;f instanceof c.UnsubscriptionError?e=e.concat(f.errors):e.push(f)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(t&&t!==this&&t!==e.EMPTY){var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.isUnsubscribed||"function"!=typeof r.unsubscribe)break;this.isUnsubscribed?r.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(r);break;default:throw new Error("Unrecognized teardown "+t+" added to Subscription.")}return r}},e.prototype.remove=function(t){if(null!=t&&t!==this&&t!==e.EMPTY){var r=this._subscriptions;if(r){var s=r.indexOf(t);-1!==s&&r.splice(s,1)}}},e.EMPTY=function(e){return e.isUnsubscribed=!0,e}(new e),e}();return e.Subscription=l,r.define=s,t.exports}),System.register("rxjs/observable/bindCallback",["rxjs/observable/BoundCallbackObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/BoundCallbackObservable");return e.bindCallback=i.BoundCallbackObservable.create,r.define=s,t.exports}),System.register("rxjs/add/observable/bindNodeCallback",["rxjs/Observable","rxjs/observable/bindNodeCallback"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/bindNodeCallback");return i.Observable.bindNodeCallback=o.bindNodeCallback,r.define=s,t.exports}),System.register("rxjs/operator/combineLatest",["rxjs/observable/ArrayObservable","rxjs/util/isArray","rxjs/OuterSubscriber","rxjs/util/subscribeToResult"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&a.isArray(e[0])&&(e=e[0]),e.unshift(this),new n.ArrayObservable(e).lift(new b(r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/observable/ArrayObservable"),a=require("rxjs/util/isArray"),u=require("rxjs/OuterSubscriber"),c=require("rxjs/util/subscribeToResult"),l={};e.combineLatest=r;var b=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t._subscribe(new p(e,this.project))},e}();e.CombineLatestOperator=b;var p=function(e){function t(t,r){e.call(this,t),this.project=r,this.active=0,this.values=[],this.observables=[]}return o(t,e),t.prototype._next=function(e){this.values.push(l),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;t>r;r++){var s=e[r];this.add(c.subscribeToResult(this,s,s,r))}}},t.prototype.notifyComplete=function(e){0===(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,s,i){var o=this.values,n=o[r],a=this.toRespond?n===l?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.project?this._tryProject(o):this.destination.next(o))},t.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)},t}(u.OuterSubscriber);return e.CombineLatestSubscriber=p,s.define=i,t.exports}),System.register("rxjs/observable/concat",["rxjs/operator/concat"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/operator/concat");return e.concat=i.concatStatic,r.define=s,t.exports}),System.register("rxjs/add/observable/defer",["rxjs/Observable","rxjs/observable/defer"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/defer");return i.Observable.defer=o.defer,r.define=s,t.exports}),System.register("rxjs/add/observable/forkJoin",["rxjs/Observable","rxjs/observable/forkJoin"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/forkJoin");return i.Observable.forkJoin=o.forkJoin,r.define=s,t.exports}),System.register("rxjs/observable/FromObservable",["rxjs/util/isArray","rxjs/util/isFunction","rxjs/util/isPromise","rxjs/util/isScheduler","rxjs/observable/PromiseObservable","rxjs/observable/IteratorObservable","rxjs/observable/ArrayObservable","rxjs/observable/ArrayLikeObservable","rxjs/symbol/iterator","rxjs/Observable","rxjs/operator/observeOn","symbol-observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/isArray"),n=require("rxjs/util/isFunction"),a=require("rxjs/util/isPromise"),u=require("rxjs/util/isScheduler"),c=require("rxjs/observable/PromiseObservable"),l=require("rxjs/observable/IteratorObservable"),b=require("rxjs/observable/ArrayObservable"),p=require("rxjs/observable/ArrayLikeObservable"),h=require("rxjs/symbol/iterator"),d=require("rxjs/Observable"),f=require("rxjs/operator/observeOn"),v=require("symbol-observable"),x=function(e){return e&&"number"==typeof e.length},y=function(e){function t(t,r){e.call(this,null),this.ish=t,this.scheduler=r}return i(t,e),t.create=function(e,r,s,i){var f=null,y=null;if(n.isFunction(r)?(f=i||null,y=r):u.isScheduler(f)&&(f=r),null!=e){if("function"==typeof e[v])return e instanceof d.Observable&&!f?e:new t(e,f);if(o.isArray(e))return new b.ArrayObservable(e,f);if(a.isPromise(e))return new c.PromiseObservable(e,f);if("function"==typeof e[h.$$iterator]||"string"==typeof e)return new l.IteratorObservable(e,null,null,f);if(x(e))return new p.ArrayLikeObservable(e,y,s,f)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")},t.prototype._subscribe=function(e){var t=this.ish,r=this.scheduler;return null==r?t[v]().subscribe(e):t[v]().subscribe(new f.ObserveOnSubscriber(e,r,0))},t}(d.Observable);return e.FromObservable=y,r.define=s,t.exports}),System.register("rxjs/add/observable/fromEvent",["rxjs/Observable","rxjs/observable/fromEvent"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/fromEvent");return i.Observable.fromEvent=o.fromEvent,r.define=s,t.exports}),System.register("rxjs/add/observable/fromEventPattern",["rxjs/Observable","rxjs/observable/fromEventPattern"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/fromEventPattern");return i.Observable.fromEventPattern=o.fromEventPattern,
r.define=s,t.exports}),System.register("rxjs/add/observable/if",["rxjs/Observable","rxjs/observable/if"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/if");return i.Observable["if"]=o._if,r.define=s,t.exports}),System.register("rxjs/scheduler/AsyncScheduler",["rxjs/scheduler/FutureAction","rxjs/scheduler/QueueScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/scheduler/FutureAction"),n=require("rxjs/scheduler/QueueScheduler"),a=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.scheduleNow=function(e,t){return new o.FutureAction(this,e).schedule(t,0)},t}(n.QueueScheduler);return e.AsyncScheduler=a,r.define=s,t.exports}),System.register("rxjs/add/observable/merge",["rxjs/Observable","rxjs/observable/merge"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/merge");return i.Observable.merge=o.merge,r.define=s,t.exports}),System.register("rxjs/observable/never",["rxjs/observable/NeverObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/NeverObservable");return e.never=i.NeverObservable.create,r.define=s,t.exports}),System.register("rxjs/add/observable/range",["rxjs/Observable","rxjs/observable/range"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/range");return i.Observable.range=o.range,r.define=s,t.exports}),System.register("rxjs/add/observable/using",["rxjs/Observable","rxjs/observable/using"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/using");return i.Observable.using=o.using,r.define=s,t.exports}),System.register("rxjs/add/observable/throw",["rxjs/Observable","rxjs/observable/throw"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/throw");return i.Observable["throw"]=o._throw,r.define=s,t.exports}),System.register("rxjs/observable/timer",["rxjs/observable/TimerObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/TimerObservable");return e.timer=i.TimerObservable.create,r.define=s,t.exports}),System.register("rxjs/add/observable/zip",["rxjs/Observable","rxjs/observable/zip"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/zip");return i.Observable.zip=o.zip,r.define=s,t.exports}),System.register("rxjs/add/observable/dom/ajax",["rxjs/Observable","rxjs/observable/dom/ajax"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/dom/ajax");return i.Observable.ajax=o.ajax,r.define=s,t.exports}),System.register("rxjs/observable/dom/WebSocketSubject",["rxjs/Subject","rxjs/Subscriber","rxjs/Observable","rxjs/Subscription","rxjs/util/root","rxjs/ReplaySubject","rxjs/util/tryCatch","rxjs/util/errorObject","rxjs/util/assign"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Subject"),n=require("rxjs/Subscriber"),a=require("rxjs/Observable"),u=require("rxjs/Subscription"),c=require("rxjs/util/root"),l=require("rxjs/ReplaySubject"),b=require("rxjs/util/tryCatch"),p=require("rxjs/util/errorObject"),h=require("rxjs/util/assign"),d=function(e){function t(t,r){if(e.call(this),this._output=new o.Subject,this.WebSocketCtor=c.root.WebSocket,"string"==typeof t?this.url=t:h.assign(this,t),!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new l.ReplaySubject}return i(t,e),t.prototype.resultSelector=function(e){return JSON.parse(e.data)},t.create=function(e){return new t(e)},t.prototype.multiplex=function(e,t,r){var s=this;return new a.Observable(function(i){var o=b.tryCatch(e)();o===p.errorObject?i.error(p.errorObject.e):s.next(o);var n=s.subscribe(function(e){var t=b.tryCatch(r)(e);t===p.errorObject?i.error(p.errorObject.e):t&&i.next(e)},function(e){return i.error(e)},function(){return i.complete()});return function(){var e=b.tryCatch(t)();e===p.errorObject?i.error(p.errorObject.e):s.next(e),n.unsubscribe()}})},t.prototype._connectSocket=function(){var e=this,t=this.protocol?new WebSocket(this.url,this.protocol):new WebSocket(this.url);this.socket=t;var r=new u.Subscription(function(){e.socket=null,t&&1===t.readyState&&t.close()}),s=this._output;t.onopen=function(i){var o=e.openObserver;o&&o.next(i);var a=e.destination;e.destination=n.Subscriber.create(function(e){return 1===t.readyState&&t.send(e)},function(r){var i=e.closingObserver;i&&i.next(void 0),r&&r.code?t.close(r.code,r.reason):s.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e.destination=new l.ReplaySubject,e.socket=null},function(){var r=e.closingObserver;r&&r.next(void 0),t.close(),e.destination=new l.ReplaySubject,e.socket=null}),a&&a instanceof l.ReplaySubject&&r.add(a.subscribe(e.destination))},t.onerror=function(e){return s.error(e)},t.onclose=function(t){var r=e.closeObserver;r&&r.next(t),t.wasClean?s.complete():s.error(t)},t.onmessage=function(t){var r=b.tryCatch(e.resultSelector)(t);r===p.errorObject?s.error(p.errorObject.e):s.next(r)}},t.prototype._subscribe=function(e){var t=this;this.socket||this._connectSocket();var r=new u.Subscription;return r.add(this._output.subscribe(e)),r.add(function(){var e=t.socket;e&&1===e.readyState&&(e.close(),t.socket=null)}),r},t.prototype.unsubscribe=function(){var t=this.socket;t&&1===t.readyState&&(t.close(),this.socket=null),e.prototype.unsubscribe.call(this),this.destination=new l.ReplaySubject},t}(o.AnonymousSubject);return e.WebSocketSubject=d,r.define=s,t.exports}),System.register("rxjs/add/operator/concatMap",["rxjs/Observable","rxjs/operator/concatMap"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/concatMap");return i.Observable.prototype.concatMap=o.concatMap,r.define=s,t.exports}),System.register("rxjs/add/operator/concatMapTo",["rxjs/Observable","rxjs/operator/concatMapTo"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/concatMapTo");return i.Observable.prototype.concatMapTo=o.concatMapTo,r.define=s,t.exports}),System.register("rxjs/add/operator/elementAt",["rxjs/Observable","rxjs/operator/elementAt"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/elementAt");return i.Observable.prototype.elementAt=o.elementAt,r.define=s,t.exports}),System.register("rxjs/add/operator/first",["rxjs/Observable","rxjs/operator/first"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/first");return i.Observable.prototype.first=o.first,r.define=s,t.exports}),System.register("rxjs/operator/groupBy",["rxjs/Subscriber","rxjs/Subscription","rxjs/Observable","rxjs/Subject","rxjs/util/Map","rxjs/util/FastMap"],!0,function(require,e,t){function r(e,t,r){return this.lift(new p(this,e,t,r))}var s=System.global,i=s.define;s.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},n=require("rxjs/Subscriber"),a=require("rxjs/Subscription"),u=require("rxjs/Observable"),c=require("rxjs/Subject"),l=require("rxjs/util/Map"),b=require("rxjs/util/FastMap");e.groupBy=r;var p=function(){function e(e,t,r,s){this.source=e,this.keySelector=t,this.elementSelector=r,this.durationSelector=s}return e.prototype.call=function(e,t){return t._subscribe(new h(e,this.keySelector,this.elementSelector,this.durationSelector))},e}(),h=function(e){function t(t,r,s,i){e.call(this,t),this.keySelector=r,this.elementSelector=s,this.durationSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}return o(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(r){return void this.error(r)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups="string"==typeof t?new b.FastMap:new l.Map);var s,i=r.get(t);if(this.elementSelector)try{s=this.elementSelector(e)}catch(o){this.error(o)}else s=e;if(!i){r.set(t,i=new c.Subject);var n=new f(t,i,this);if(this.destination.next(n),this.durationSelector){var a=void 0;try{a=this.durationSelector(new f(t,i))}catch(o){return void this.error(o)}this.add(a.subscribe(new d(t,i,this)))}}i.isUnsubscribed||i.next(s)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach(function(t,r){t.error(e)}),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups["delete"](e)},t.prototype.unsubscribe=function(){this.isUnsubscribed||this.attemptedToUnsubscribe||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(n.Subscriber),d=function(e){function t(t,r,s){e.call(this),this.key=t,this.group=r,this.parent=s}return o(t,e),t.prototype._next=function(e){this._complete()},t.prototype._error=function(e){var t=this.group;t.isUnsubscribed||t.error(e),this.parent.removeGroup(this.key)},t.prototype._complete=function(){var e=this.group;e.isUnsubscribed||e.complete(),this.parent.removeGroup(this.key)},t}(n.Subscriber),f=function(e){function t(t,r,s){e.call(this),this.key=t,this.groupSubject=r,this.refCountSubscription=s}return o(t,e),t.prototype._subscribe=function(e){var t=new a.Subscription,r=this,s=r.refCountSubscription,i=r.groupSubject;return s&&!s.isUnsubscribed&&t.add(new v(s)),t.add(i.subscribe(e)),t},t}(u.Observable);e.GroupedObservable=f;var v=function(e){function t(t){e.call(this),this.parent=t,t.count++}return o(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.isUnsubscribed||this.isUnsubscribed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(a.Subscription);return s.define=i,t.exports}),System.register("rxjs/add/operator/max",["rxjs/Observable","rxjs/operator/max"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/max");return i.Observable.prototype.max=o.max,r.define=s,t.exports}),System.register("rxjs/add/operator/multicast",["rxjs/Observable","rxjs/operator/multicast"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/multicast");return i.Observable.prototype.multicast=o.multicast,r.define=s,t.exports}),System.register("rxjs/add/operator/partition",["rxjs/Observable","rxjs/operator/partition"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/partition");return i.Observable.prototype.partition=o.partition,r.define=s,t.exports}),System.register("rxjs/operator/publishBehavior",["rxjs/BehaviorSubject","rxjs/operator/multicast"],!0,function(require,e,t){function r(e){return n.multicast.call(this,new o.BehaviorSubject(e))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/BehaviorSubject"),n=require("rxjs/operator/multicast");return e.publishBehavior=r,s.define=i,t.exports}),System.register("rxjs/scheduler/AsapScheduler",["rxjs/scheduler/AsapAction","rxjs/scheduler/QueueScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/scheduler/AsapAction"),n=require("rxjs/scheduler/QueueScheduler"),a=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.scheduleNow=function(e,t){return new o.AsapAction(this,e).schedule(t)},t}(n.QueueScheduler);return e.AsapScheduler=a,r.define=s,t.exports}),System.register("rxjs/testing/ColdObservable",["rxjs/Observable","rxjs/Subscription","rxjs/testing/SubscriptionLoggable","rxjs/util/applyMixins"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/Subscription"),a=require("rxjs/testing/SubscriptionLoggable"),u=require("rxjs/util/applyMixins"),c=function(e){function t(t,r){e.call(this,function(e){var t=this,r=t.logSubscribedFrame();return e.add(new n.Subscription(function(){t.logUnsubscribedFrame(r)})),t.scheduleMessages(e),e}),this.messages=t,this.subscriptions=[],this.scheduler=r}return i(t,e),t.prototype.scheduleMessages=function(e){for(var t=this.messages.length,r=0;t>r;r++){var s=this.messages[r];e.add(this.scheduler.schedule(function(e){var t=e.message,r=e.subscriber;t.notification.observe(r)},s.frame,{message:s,subscriber:e}))}},t}(o.Observable);return e.ColdObservable=c,u.applyMixins(c,[a.SubscriptionLoggable]),r.define=s,t.exports}),System.register("rxjs/scheduler/AnimationFrameScheduler",["rxjs/scheduler/QueueScheduler","rxjs/scheduler/AnimationFrameAction"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/scheduler/QueueScheduler"),n=require("rxjs/scheduler/AnimationFrameAction"),a=function(e){function t(){e.apply(this,arguments)}return i(t,e),t.prototype.scheduleNow=function(e,t){return new n.AnimationFrameAction(this,e).schedule(t)},t}(o.QueueScheduler);return e.AnimationFrameScheduler=a,r.define=s,t.exports}),System.register("rxjs/Subscriber",["rxjs/util/isFunction","rxjs/Subscription","rxjs/Observer","rxjs/symbol/rxSubscriber"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/isFunction"),n=require("rxjs/Subscription"),a=require("rxjs/Observer"),u=require("rxjs/symbol/rxSubscriber"),c=function(e){function t(r,s,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!r){this.destination=a.empty;break}if("object"==typeof r){r instanceof t?(this.destination=r,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,r));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,r,s,i)}}return i(t,e),t.prototype[u.$$rxSubscriber]=function(){return this},t.create=function(e,r,s){var i=new t(e,r,s);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t}(n.Subscription);e.Subscriber=c;var l=function(e){function t(t,r,s,i){e.call(this),this._parent=t;var n,a=this;o.isFunction(r)?n=r:r&&(a=r,n=r.next,s=r.error,i=r.complete,o.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this)),this._context=a,this._next=n,this._error=s,this._complete=i}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parent;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parent;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){if(!this.isStopped){var e=this._parent;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(r){throw this.unsubscribe(),r}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(s){return e.syncErrorValue=s,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parent;this._context=null,this._parent=null,e.unsubscribe()},t}(c);return r.define=s,t.exports}),System.register("rxjs/add/observable/bindCallback",["rxjs/Observable","rxjs/observable/bindCallback"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/bindCallback");return i.Observable.bindCallback=o.bindCallback,r.define=s,t.exports}),System.register("rxjs/observable/combineLatest",["rxjs/util/isScheduler","rxjs/util/isArray","rxjs/observable/ArrayObservable","rxjs/operator/combineLatest"],!0,function(require,e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null,s=null;return o.isScheduler(e[e.length-1])&&(s=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&n.isArray(e[0])&&(e=e[0]),new a.ArrayObservable(e,s).lift(new u.CombineLatestOperator(r))}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/util/isScheduler"),n=require("rxjs/util/isArray"),a=require("rxjs/observable/ArrayObservable"),u=require("rxjs/operator/combineLatest");return e.combineLatest=r,s.define=i,t.exports}),System.register("rxjs/add/observable/concat",["rxjs/Observable","rxjs/observable/concat"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/concat");return i.Observable.concat=o.concat,r.define=s,t.exports}),System.register("rxjs/observable/from",["rxjs/observable/FromObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/FromObservable");return e.from=i.FromObservable.create,r.define=s,t.exports}),System.register("rxjs/scheduler/async",["rxjs/scheduler/AsyncScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/scheduler/AsyncScheduler");return e.async=new i.AsyncScheduler,r.define=s,t.exports}),System.register("rxjs/add/observable/never",["rxjs/Observable","rxjs/observable/never"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/never");return i.Observable.never=o.never,r.define=s,t.exports}),System.register("rxjs/add/observable/timer",["rxjs/Observable","rxjs/observable/timer"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/timer");return i.Observable.timer=o.timer,r.define=s,t.exports}),System.register("rxjs/observable/dom/webSocket",["rxjs/observable/dom/WebSocketSubject"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/dom/WebSocketSubject");return e.webSocket=i.WebSocketSubject.create,r.define=s,t.exports}),System.register("rxjs/add/operator/groupBy",["rxjs/Observable","rxjs/operator/groupBy"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/groupBy");return i.Observable.prototype.groupBy=o.groupBy,r.define=s,t.exports}),System.register("rxjs/add/operator/publishBehavior",["rxjs/Observable","rxjs/operator/publishBehavior"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/publishBehavior");return i.Observable.prototype.publishBehavior=o.publishBehavior,r.define=s,t.exports}),System.register("rxjs/scheduler/asap",["rxjs/scheduler/AsapScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/scheduler/AsapScheduler");return e.asap=new i.AsapScheduler,r.define=s,t.exports}),System.register("rxjs/testing/TestScheduler",["rxjs/Observable","rxjs/scheduler/VirtualTimeScheduler","rxjs/Notification","rxjs/testing/ColdObservable","rxjs/testing/HotObservable","rxjs/testing/SubscriptionLog"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/scheduler/VirtualTimeScheduler"),a=require("rxjs/Notification"),u=require("rxjs/testing/ColdObservable"),c=require("rxjs/testing/HotObservable"),l=require("rxjs/testing/SubscriptionLog"),b=function(e){function t(t){e.call(this),this.assertDeepEqual=t,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}return i(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('Marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,s){if(-1!==e.indexOf("^"))throw new Error('Cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('Cold observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,s),o=new u.ColdObservable(i,this);return this.coldObservables.push(o),o},t.prototype.createHotObservable=function(e,r,s){if(-1!==e.indexOf("!"))throw new Error('Hot observable cannot have unsubscription marker "!"');var i=t.parseMarbles(e,r,s),o=new c.HotObservable(i,this);return this.hotObservables.push(o),o},t.prototype.materializeInnerObservable=function(e,t){var r=this,s=[];return e.subscribe(function(e){s.push({frame:r.frame-t,notification:a.Notification.createNext(e)})},function(e){s.push({frame:r.frame-t,notification:a.Notification.createError(e)})},function(){s.push({frame:r.frame-t,notification:a.Notification.createComplete()})}),s},t.prototype.expectObservable=function(e,r){var s=this;void 0===r&&(r=null);var i,n=[],u={actual:n,ready:!1},c=t.parseMarblesAsSubscriptions(r).unsubscribedFrame;return this.schedule(function(){i=e.subscribe(function(e){var t=e;e instanceof o.Observable&&(t=s.materializeInnerObservable(t,s.frame)),n.push({frame:s.frame,notification:a.Notification.createNext(t)})},function(e){n.push({frame:s.frame,notification:a.Notification.createError(e)})},function(){n.push({frame:s.frame,notification:a.Notification.createComplete()})})},0),c!==Number.POSITIVE_INFINITY&&this.schedule(function(){return i.unsubscribe()},c),this.flushTests.push(u),{toBe:function(e,r,s){u.ready=!0,u.expected=t.parseMarbles(e,r,s,!0)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};return this.flushTests.push(r),{toBe:function(e){var s="string"==typeof e?[e]:e;r.ready=!0,r.expected=s.map(function(e){return t.parseMarblesAsSubscriptions(e)})}}},t.prototype.flush=function(){for(var t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this);for(var r=this.flushTests.filter(function(e){return e.ready});r.length>0;){var s=r.shift();this.assertDeepEqual(s.actual,s.expected)}},t.parseMarblesAsSubscriptions=function(e){if("string"!=typeof e)return new l.SubscriptionLog(Number.POSITIVE_INFINITY);for(var t=e.length,r=-1,s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0;t>o;o++){var n=o*this.frameTimeFactor,a=e[o];switch(a){case"-":case" ":break;case"(":r=n;break;case")":r=-1;break;case"^":if(s!==Number.POSITIVE_INFINITY)throw new Error("Found a second subscription point '^' in a subscription marble diagram. There can only be one.");s=r>-1?r:n;break;case"!":if(i!==Number.POSITIVE_INFINITY)throw new Error("Found a second subscription point '^' in a subscription marble diagram. There can only be one.");i=r>-1?r:n;break;default:throw new Error("There can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+a+"'.")}}return 0>i?new l.SubscriptionLog(s):new l.SubscriptionLog(s,i)},t.parseMarbles=function(e,t,r,s){if(void 0===s&&(s=!1),-1!==e.indexOf("!"))throw new Error('Conventional marble diagrams cannot have the unsubscription marker "!"');for(var i=e.length,o=[],n=e.indexOf("^"),c=-1===n?0:n*-this.frameTimeFactor,l="object"!=typeof t?function(e){return e}:function(e){return s&&t[e]instanceof u.ColdObservable?t[e].messages:t[e]},b=-1,p=0;i>p;p++){var h=p*this.frameTimeFactor+c,d=void 0,f=e[p];switch(f){case"-":case" ":break;case"(":b=h;break;case")":b=-1;break;case"|":d=a.Notification.createComplete();break;case"^":break;case"#":d=a.Notification.createError(r||"error");break;default:d=a.Notification.createNext(l(f))}d&&o.push({frame:b>-1?b:h,notification:d})}return o},t}(n.VirtualTimeScheduler);return e.TestScheduler=b,r.define=s,t.exports}),System.register("rxjs/scheduler/animationFrame",["rxjs/scheduler/AnimationFrameScheduler"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/scheduler/AnimationFrameScheduler");return e.animationFrame=new i.AnimationFrameScheduler,r.define=s,t.exports}),System.register("rxjs/util/toSubscriber",["rxjs/Subscriber","rxjs/symbol/rxSubscriber"],!0,function(require,e,t){function r(e,t,r){if(e){if(e instanceof o.Subscriber)return e;if(e[n.$$rxSubscriber])return e[n.$$rxSubscriber]()}return e||t||r?new o.Subscriber(e,t,r):new o.Subscriber}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/Subscriber"),n=require("rxjs/symbol/rxSubscriber");return e.toSubscriber=r,s.define=i,t.exports}),System.register("rxjs/add/observable/combineLatest",["rxjs/Observable","rxjs/observable/combineLatest"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/combineLatest");return i.Observable.combineLatest=o.combineLatest,r.define=s,t.exports}),System.register("rxjs/add/observable/from",["rxjs/Observable","rxjs/observable/from"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/from");return i.Observable.from=o.from,r.define=s,t.exports}),System.register("rxjs/observable/IntervalObservable",["rxjs/util/isNumeric","rxjs/Observable","rxjs/scheduler/async"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/util/isNumeric"),n=require("rxjs/Observable"),a=require("rxjs/scheduler/async"),u=function(e){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=a.async),e.call(this),this.period=t,this.scheduler=r,(!o.isNumeric(t)||0>t)&&(this.period=0),r&&"function"==typeof r.schedule||(this.scheduler=a.async)}return i(t,e),t.create=function(e,r){return void 0===e&&(e=0),void 0===r&&(r=a.async),new t(e,r)},t.dispatch=function(e){var t=e.index,r=e.subscriber,s=e.period;r.next(t),r.isUnsubscribed||(e.index+=1,this.schedule(e,s))},t.prototype._subscribe=function(e){var r=0,s=this.period,i=this.scheduler;e.add(i.schedule(t.dispatch,s,{index:r,subscriber:e,period:s}))},t}(n.Observable);return e.IntervalObservable=u,r.define=s,t.exports}),System.register("rxjs/add/observable/dom/webSocket",["rxjs/Observable","rxjs/observable/dom/webSocket"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/dom/webSocket");return i.Observable.webSocket=o.webSocket,r.define=s,t.exports}),System.register("rxjs/observable/SubscribeOnObservable",["rxjs/Observable","rxjs/scheduler/asap","rxjs/util/isNumeric"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/scheduler/asap"),a=require("rxjs/util/isNumeric"),u=function(e){function t(t,r,s){void 0===r&&(r=0),void 0===s&&(s=n.asap),e.call(this),this.source=t,this.delayTime=r,this.scheduler=s,(!a.isNumeric(r)||0>r)&&(this.delayTime=0),s&&"function"==typeof s.schedule||(this.scheduler=n.asap)}return i(t,e),t.create=function(e,r,s){return void 0===r&&(r=0),void 0===s&&(s=n.asap),new t(e,r,s)},t.dispatch=function(e){var t=e.source,r=e.subscriber;return t.subscribe(r)},t.prototype._subscribe=function(e){var r=this.delayTime,s=this.source,i=this.scheduler;return i.schedule(t.dispatch,r,{source:s,subscriber:e})},t}(o.Observable);return e.SubscribeOnObservable=u,r.define=s,t.exports}),System.register("rxjs/Observable",["rxjs/util/root","rxjs/util/toSubscriber","symbol-observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/util/root"),o=require("rxjs/util/toSubscriber"),n=require("symbol-observable"),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var s=this.operator,i=o.toSubscriber(e,t,r);if(s?s.call(i,this):i.add(this._subscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype.forEach=function(e,t){var r=this;if(t||(i.root.Rx&&i.root.Rx.config&&i.root.Rx.config.Promise?t=i.root.Rx.config.Promise:i.root.Promise&&(t=i.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,s){var i=r.subscribe(function(t){if(i)try{e(t)}catch(r){s(r),i.unsubscribe()}else e(t)},s,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[n]=function(){return this},e.create=function(t){return new e(t)},e}();return e.Observable=a,r.define=s,t.exports}),System.register("rxjs/observable/interval",["rxjs/observable/IntervalObservable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/observable/IntervalObservable");return e.interval=i.IntervalObservable.create,r.define=s,t.exports}),System.register("rxjs/operator/subscribeOn",["rxjs/observable/SubscribeOnObservable"],!0,function(require,e,t){function r(e,t){return void 0===t&&(t=0),new o.SubscribeOnObservable(this,t,e)}var s=System.global,i=s.define;s.define=void 0;var o=require("rxjs/observable/SubscribeOnObservable");return e.subscribeOn=r,s.define=i,t.exports}),System.register("rxjs/Subject",["rxjs/Observable","rxjs/Subscriber","rxjs/Subscription","rxjs/util/ObjectUnsubscribedError","rxjs/SubjectSubscription","rxjs/symbol/rxSubscriber"],!0,function(require,e,t){
var r=System.global,s=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("rxjs/Observable"),n=require("rxjs/Subscriber"),a=require("rxjs/Subscription"),u=require("rxjs/util/ObjectUnsubscribedError"),c=require("rxjs/SubjectSubscription"),l=require("rxjs/symbol/rxSubscriber"),b=function(e){function t(t){e.call(this,t),this.destination=t}return i(t,e),t}(n.Subscriber);e.SubjectSubscriber=b;var p=function(e){function t(){e.call(this),this.observers=[],this.isUnsubscribed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return i(t,e),t.prototype[l.$$rxSubscriber]=function(){return new b(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,s=t.slice(),i=0;r>i;i++)s[i].next(e)},t.prototype.error=function(e){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,s=t.slice(),i=0;r>i;i++)s[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),s=0;t>s;s++)r[s].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.isUnsubscribed=!0,this.observers=null},t.prototype._subscribe=function(e){if(this.isUnsubscribed)throw new u.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new c.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new o.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(o.Observable);e.Subject=p;var h=function(e){function t(t,r){e.call(this),this.destination=t,this.source=r}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(p);return e.AnonymousSubject=h,r.define=s,t.exports}),System.register("rxjs/add/observable/interval",["rxjs/Observable","rxjs/observable/interval"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/observable/interval");return i.Observable.interval=o.interval,r.define=s,t.exports}),System.register("rxjs/add/operator/subscribeOn",["rxjs/Observable","rxjs/operator/subscribeOn"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Observable"),o=require("rxjs/operator/subscribeOn");return i.Observable.prototype.subscribeOn=o.subscribeOn,r.define=s,t.exports}),System.register("rxjs/Rx",["rxjs/Subject","rxjs/Observable","rxjs/add/observable/bindCallback","rxjs/add/observable/bindNodeCallback","rxjs/add/observable/combineLatest","rxjs/add/observable/concat","rxjs/add/observable/defer","rxjs/add/observable/empty","rxjs/add/observable/forkJoin","rxjs/add/observable/from","rxjs/add/observable/fromEvent","rxjs/add/observable/fromEventPattern","rxjs/add/observable/fromPromise","rxjs/add/observable/generate","rxjs/add/observable/if","rxjs/add/observable/interval","rxjs/add/observable/merge","rxjs/add/observable/race","rxjs/add/observable/never","rxjs/add/observable/of","rxjs/add/observable/onErrorResumeNext","rxjs/add/observable/range","rxjs/add/observable/using","rxjs/add/observable/throw","rxjs/add/observable/timer","rxjs/add/observable/zip","rxjs/add/observable/dom/ajax","rxjs/add/observable/dom/webSocket","rxjs/add/operator/buffer","rxjs/add/operator/bufferCount","rxjs/add/operator/bufferTime","rxjs/add/operator/bufferToggle","rxjs/add/operator/bufferWhen","rxjs/add/operator/cache","rxjs/add/operator/catch","rxjs/add/operator/combineAll","rxjs/add/operator/combineLatest","rxjs/add/operator/concat","rxjs/add/operator/concatAll","rxjs/add/operator/concatMap","rxjs/add/operator/concatMapTo","rxjs/add/operator/count","rxjs/add/operator/dematerialize","rxjs/add/operator/debounce","rxjs/add/operator/debounceTime","rxjs/add/operator/defaultIfEmpty","rxjs/add/operator/delay","rxjs/add/operator/delayWhen","rxjs/add/operator/distinct","rxjs/add/operator/distinctKey","rxjs/add/operator/distinctUntilChanged","rxjs/add/operator/distinctUntilKeyChanged","rxjs/add/operator/do","rxjs/add/operator/exhaust","rxjs/add/operator/exhaustMap","rxjs/add/operator/expand","rxjs/add/operator/elementAt","rxjs/add/operator/filter","rxjs/add/operator/finally","rxjs/add/operator/find","rxjs/add/operator/findIndex","rxjs/add/operator/first","rxjs/add/operator/groupBy","rxjs/add/operator/ignoreElements","rxjs/add/operator/isEmpty","rxjs/add/operator/audit","rxjs/add/operator/auditTime","rxjs/add/operator/last","rxjs/add/operator/let","rxjs/add/operator/every","rxjs/add/operator/map","rxjs/add/operator/mapTo","rxjs/add/operator/materialize","rxjs/add/operator/max","rxjs/add/operator/merge","rxjs/add/operator/mergeAll","rxjs/add/operator/mergeMap","rxjs/add/operator/mergeMapTo","rxjs/add/operator/mergeScan","rxjs/add/operator/min","rxjs/add/operator/multicast","rxjs/add/operator/observeOn","rxjs/add/operator/onErrorResumeNext","rxjs/add/operator/pairwise","rxjs/add/operator/partition","rxjs/add/operator/pluck","rxjs/add/operator/publish","rxjs/add/operator/publishBehavior","rxjs/add/operator/publishReplay","rxjs/add/operator/publishLast","rxjs/add/operator/race","rxjs/add/operator/reduce","rxjs/add/operator/repeat","rxjs/add/operator/retry","rxjs/add/operator/retryWhen","rxjs/add/operator/sample","rxjs/add/operator/sampleTime","rxjs/add/operator/scan","rxjs/add/operator/share","rxjs/add/operator/single","rxjs/add/operator/skip","rxjs/add/operator/skipUntil","rxjs/add/operator/skipWhile","rxjs/add/operator/startWith","rxjs/add/operator/subscribeOn","rxjs/add/operator/switch","rxjs/add/operator/switchMap","rxjs/add/operator/switchMapTo","rxjs/add/operator/take","rxjs/add/operator/takeLast","rxjs/add/operator/takeUntil","rxjs/add/operator/takeWhile","rxjs/add/operator/throttle","rxjs/add/operator/throttleTime","rxjs/add/operator/timeInterval","rxjs/add/operator/timeout","rxjs/add/operator/timeoutWith","rxjs/add/operator/timestamp","rxjs/add/operator/toArray","rxjs/add/operator/toPromise","rxjs/add/operator/window","rxjs/add/operator/windowCount","rxjs/add/operator/windowTime","rxjs/add/operator/windowToggle","rxjs/add/operator/windowWhen","rxjs/add/operator/withLatestFrom","rxjs/add/operator/zip","rxjs/add/operator/zipAll","rxjs/Operator","rxjs/Subscription","rxjs/Subscriber","rxjs/AsyncSubject","rxjs/ReplaySubject","rxjs/BehaviorSubject","rxjs/observable/MulticastObservable","rxjs/observable/ConnectableObservable","rxjs/Notification","rxjs/util/EmptyError","rxjs/util/ArgumentOutOfRangeError","rxjs/util/ObjectUnsubscribedError","rxjs/util/UnsubscriptionError","rxjs/operator/timeInterval","rxjs/operator/timestamp","rxjs/testing/TestScheduler","rxjs/scheduler/VirtualTimeScheduler","rxjs/observable/dom/AjaxObservable","rxjs/scheduler/asap","rxjs/scheduler/async","rxjs/scheduler/queue","rxjs/scheduler/animationFrame","rxjs/symbol/rxSubscriber","rxjs/symbol/iterator","symbol-observable"],!0,function(require,e,t){var r=System.global,s=r.define;r.define=void 0;var i=require("rxjs/Subject");e.Subject=i.Subject;var o=require("rxjs/Observable");e.Observable=o.Observable,require("rxjs/add/observable/bindCallback"),require("rxjs/add/observable/bindNodeCallback"),require("rxjs/add/observable/combineLatest"),require("rxjs/add/observable/concat"),require("rxjs/add/observable/defer"),require("rxjs/add/observable/empty"),require("rxjs/add/observable/forkJoin"),require("rxjs/add/observable/from"),require("rxjs/add/observable/fromEvent"),require("rxjs/add/observable/fromEventPattern"),require("rxjs/add/observable/fromPromise"),require("rxjs/add/observable/generate"),require("rxjs/add/observable/if"),require("rxjs/add/observable/interval"),require("rxjs/add/observable/merge"),require("rxjs/add/observable/race"),require("rxjs/add/observable/never"),require("rxjs/add/observable/of"),require("rxjs/add/observable/onErrorResumeNext"),require("rxjs/add/observable/range"),require("rxjs/add/observable/using"),require("rxjs/add/observable/throw"),require("rxjs/add/observable/timer"),require("rxjs/add/observable/zip"),require("rxjs/add/observable/dom/ajax"),require("rxjs/add/observable/dom/webSocket"),require("rxjs/add/operator/buffer"),require("rxjs/add/operator/bufferCount"),require("rxjs/add/operator/bufferTime"),require("rxjs/add/operator/bufferToggle"),require("rxjs/add/operator/bufferWhen"),require("rxjs/add/operator/cache"),require("rxjs/add/operator/catch"),require("rxjs/add/operator/combineAll"),require("rxjs/add/operator/combineLatest"),require("rxjs/add/operator/concat"),require("rxjs/add/operator/concatAll"),require("rxjs/add/operator/concatMap"),require("rxjs/add/operator/concatMapTo"),require("rxjs/add/operator/count"),require("rxjs/add/operator/dematerialize"),require("rxjs/add/operator/debounce"),require("rxjs/add/operator/debounceTime"),require("rxjs/add/operator/defaultIfEmpty"),require("rxjs/add/operator/delay"),require("rxjs/add/operator/delayWhen"),require("rxjs/add/operator/distinct"),require("rxjs/add/operator/distinctKey"),require("rxjs/add/operator/distinctUntilChanged"),require("rxjs/add/operator/distinctUntilKeyChanged"),require("rxjs/add/operator/do"),require("rxjs/add/operator/exhaust"),require("rxjs/add/operator/exhaustMap"),require("rxjs/add/operator/expand"),require("rxjs/add/operator/elementAt"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/finally"),require("rxjs/add/operator/find"),require("rxjs/add/operator/findIndex"),require("rxjs/add/operator/first"),require("rxjs/add/operator/groupBy"),require("rxjs/add/operator/ignoreElements"),require("rxjs/add/operator/isEmpty"),require("rxjs/add/operator/audit"),require("rxjs/add/operator/auditTime"),require("rxjs/add/operator/last"),require("rxjs/add/operator/let"),require("rxjs/add/operator/every"),require("rxjs/add/operator/map"),require("rxjs/add/operator/mapTo"),require("rxjs/add/operator/materialize"),require("rxjs/add/operator/max"),require("rxjs/add/operator/merge"),require("rxjs/add/operator/mergeAll"),require("rxjs/add/operator/mergeMap"),require("rxjs/add/operator/mergeMapTo"),require("rxjs/add/operator/mergeScan"),require("rxjs/add/operator/min"),require("rxjs/add/operator/multicast"),require("rxjs/add/operator/observeOn"),require("rxjs/add/operator/onErrorResumeNext"),require("rxjs/add/operator/pairwise"),require("rxjs/add/operator/partition"),require("rxjs/add/operator/pluck"),require("rxjs/add/operator/publish"),require("rxjs/add/operator/publishBehavior"),require("rxjs/add/operator/publishReplay"),require("rxjs/add/operator/publishLast"),require("rxjs/add/operator/race"),require("rxjs/add/operator/reduce"),require("rxjs/add/operator/repeat"),require("rxjs/add/operator/retry"),require("rxjs/add/operator/retryWhen"),require("rxjs/add/operator/sample"),require("rxjs/add/operator/sampleTime"),require("rxjs/add/operator/scan"),require("rxjs/add/operator/share"),require("rxjs/add/operator/single"),require("rxjs/add/operator/skip"),require("rxjs/add/operator/skipUntil"),require("rxjs/add/operator/skipWhile"),require("rxjs/add/operator/startWith"),require("rxjs/add/operator/subscribeOn"),require("rxjs/add/operator/switch"),require("rxjs/add/operator/switchMap"),require("rxjs/add/operator/switchMapTo"),require("rxjs/add/operator/take"),require("rxjs/add/operator/takeLast"),require("rxjs/add/operator/takeUntil"),require("rxjs/add/operator/takeWhile"),require("rxjs/add/operator/throttle"),require("rxjs/add/operator/throttleTime"),require("rxjs/add/operator/timeInterval"),require("rxjs/add/operator/timeout"),require("rxjs/add/operator/timeoutWith"),require("rxjs/add/operator/timestamp"),require("rxjs/add/operator/toArray"),require("rxjs/add/operator/toPromise"),require("rxjs/add/operator/window"),require("rxjs/add/operator/windowCount"),require("rxjs/add/operator/windowTime"),require("rxjs/add/operator/windowToggle"),require("rxjs/add/operator/windowWhen"),require("rxjs/add/operator/withLatestFrom"),require("rxjs/add/operator/zip"),require("rxjs/add/operator/zipAll");var n=require("rxjs/Operator");e.Operator=n.Operator;var a=require("rxjs/Subscription");e.Subscription=a.Subscription;var u=require("rxjs/Subscriber");e.Subscriber=u.Subscriber;var c=require("rxjs/AsyncSubject");e.AsyncSubject=c.AsyncSubject;var l=require("rxjs/ReplaySubject");e.ReplaySubject=l.ReplaySubject;var b=require("rxjs/BehaviorSubject");e.BehaviorSubject=b.BehaviorSubject;var p=require("rxjs/observable/MulticastObservable");e.MulticastObservable=p.MulticastObservable;var h=require("rxjs/observable/ConnectableObservable");e.ConnectableObservable=h.ConnectableObservable;var d=require("rxjs/Notification");e.Notification=d.Notification;var f=require("rxjs/util/EmptyError");e.EmptyError=f.EmptyError;var v=require("rxjs/util/ArgumentOutOfRangeError");e.ArgumentOutOfRangeError=v.ArgumentOutOfRangeError;var x=require("rxjs/util/ObjectUnsubscribedError");e.ObjectUnsubscribedError=x.ObjectUnsubscribedError;var y=require("rxjs/util/UnsubscriptionError");e.UnsubscriptionError=y.UnsubscriptionError;var j=require("rxjs/operator/timeInterval");e.TimeInterval=j.TimeInterval;var m=require("rxjs/operator/timestamp");e.Timestamp=m.Timestamp;var S=require("rxjs/testing/TestScheduler");e.TestScheduler=S.TestScheduler;var O=require("rxjs/scheduler/VirtualTimeScheduler");e.VirtualTimeScheduler=O.VirtualTimeScheduler;var g=require("rxjs/observable/dom/AjaxObservable");e.AjaxResponse=g.AjaxResponse,e.AjaxError=g.AjaxError,e.AjaxTimeoutError=g.AjaxTimeoutError;var w=require("rxjs/scheduler/asap"),_=require("rxjs/scheduler/async"),T=require("rxjs/scheduler/queue"),E=require("rxjs/scheduler/animationFrame"),A=require("rxjs/symbol/rxSubscriber"),C=require("rxjs/symbol/iterator"),I=require("symbol-observable"),P={asap:w.asap,async:_.async,queue:T.queue,animationFrame:E.animationFrame};e.Scheduler=P;var N={rxSubscriber:A.$$rxSubscriber,observable:I,iterator:C.$$iterator};return e.Symbol=N,r.define=s,t.exports});
//# sourceMappingURL=Rx.min.js.map

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVzNi1zaGltLm1pbi5qcyIsInN5c3RlbS1wb2x5ZmlsbHMuanMiLCJzeXN0ZW0uc3JjLmpzIiwiem9uZS5qcyIsIlJlZmxlY3QuanMiLCJSeC5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0Z0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbHlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDajhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gICogaHR0cHM6Ly9naXRodWIuY29tL3BhdWxtaWxsci9lczYtc2hpbVxuICAqIEBsaWNlbnNlIGVzNi1zaGltIENvcHlyaWdodCAyMDEzLTIwMTYgYnkgUGF1bCBNaWxsZXIgKGh0dHA6Ly9wYXVsbWlsbHIuY29tKVxuICAqICAgYW5kIGNvbnRyaWJ1dG9ycywgIE1JVCBMaWNlbnNlXG4gICogZXM2LXNoaW06IHYwLjM1LjFcbiAgKiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BhdWxtaWxsci9lczYtc2hpbS9ibG9iLzAuMzUuMS9MSUNFTlNFXG4gICogRGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbiAgKiBodHRwczovL2dpdGh1Yi5jb20vcGF1bG1pbGxyL2VzNi1zaGltL1xuICAqL1xuKGZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKHQpfWVsc2UgaWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiKXttb2R1bGUuZXhwb3J0cz10KCl9ZWxzZXtlLnJldHVybkV4cG9ydHM9dCgpfX0pKHRoaXMsZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgZT1GdW5jdGlvbi5jYWxsLmJpbmQoRnVuY3Rpb24uYXBwbHkpO3ZhciB0PUZ1bmN0aW9uLmNhbGwuYmluZChGdW5jdGlvbi5jYWxsKTt2YXIgcj1BcnJheS5pc0FycmF5O3ZhciBuPU9iamVjdC5rZXlzO3ZhciBvPWZ1bmN0aW9uIG5vdFRodW5rZXIodCl7cmV0dXJuIGZ1bmN0aW9uIG5vdFRodW5rKCl7cmV0dXJuIWUodCx0aGlzLGFyZ3VtZW50cyl9fTt2YXIgaT1mdW5jdGlvbihlKXt0cnl7ZSgpO3JldHVybiBmYWxzZX1jYXRjaCh0KXtyZXR1cm4gdHJ1ZX19O3ZhciBhPWZ1bmN0aW9uIHZhbHVlT3JGYWxzZUlmVGhyb3dzKGUpe3RyeXtyZXR1cm4gZSgpfWNhdGNoKHQpe3JldHVybiBmYWxzZX19O3ZhciB1PW8oaSk7dmFyIGY9ZnVuY3Rpb24oKXtyZXR1cm4haShmdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInhcIix7Z2V0OmZ1bmN0aW9uKCl7fX0pfSl9O3ZhciBzPSEhT2JqZWN0LmRlZmluZVByb3BlcnR5JiZmKCk7dmFyIGM9ZnVuY3Rpb24gZm9vKCl7fS5uYW1lPT09XCJmb29cIjt2YXIgbD1GdW5jdGlvbi5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpO3ZhciBwPUZ1bmN0aW9uLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUucmVkdWNlKTt2YXIgdj1GdW5jdGlvbi5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLmZpbHRlcik7dmFyIHk9RnVuY3Rpb24uY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5zb21lKTt2YXIgaD1mdW5jdGlvbihlLHQscixuKXtpZighbiYmdCBpbiBlKXtyZXR1cm59aWYocyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOnRydWUsZW51bWVyYWJsZTpmYWxzZSx3cml0YWJsZTp0cnVlLHZhbHVlOnJ9KX1lbHNle2VbdF09cn19O3ZhciBiPWZ1bmN0aW9uKGUsdCxyKXtsKG4odCksZnVuY3Rpb24obil7dmFyIG89dFtuXTtoKGUsbixvLCEhcil9KX07dmFyIGc9RnVuY3Rpb24uY2FsbC5iaW5kKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpO3ZhciBkPXR5cGVvZi9hYmMvPT09XCJmdW5jdGlvblwiP2Z1bmN0aW9uIElzQ2FsbGFibGVTbG93KGUpe3JldHVybiB0eXBlb2YgZT09PVwiZnVuY3Rpb25cIiYmZyhlKT09PVwiW29iamVjdCBGdW5jdGlvbl1cIn06ZnVuY3Rpb24gSXNDYWxsYWJsZUZhc3QoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJmdW5jdGlvblwifTt2YXIgTz17Z2V0dGVyOmZ1bmN0aW9uKGUsdCxyKXtpZighcyl7dGhyb3cgbmV3IFR5cGVFcnJvcihcImdldHRlcnMgcmVxdWlyZSB0cnVlIEVTNSBzdXBwb3J0XCIpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2NvbmZpZ3VyYWJsZTp0cnVlLGVudW1lcmFibGU6ZmFsc2UsZ2V0OnJ9KX0scHJveHk6ZnVuY3Rpb24oZSx0LHIpe2lmKCFzKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiZ2V0dGVycyByZXF1aXJlIHRydWUgRVM1IHN1cHBvcnRcIil9dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLHQse2NvbmZpZ3VyYWJsZTpuLmNvbmZpZ3VyYWJsZSxlbnVtZXJhYmxlOm4uZW51bWVyYWJsZSxnZXQ6ZnVuY3Rpb24gZ2V0S2V5KCl7cmV0dXJuIGVbdF19LHNldDpmdW5jdGlvbiBzZXRLZXkocil7ZVt0XT1yfX0pfSxyZWRlZmluZTpmdW5jdGlvbihlLHQscil7aWYocyl7dmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpO24udmFsdWU9cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LG4pfWVsc2V7ZVt0XT1yfX0sZGVmaW5lQnlEZXNjcmlwdG9yOmZ1bmN0aW9uKGUsdCxyKXtpZihzKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHIpfWVsc2UgaWYoXCJ2YWx1ZVwiaW4gcil7ZVt0XT1yLnZhbHVlfX0scHJlc2VydmVUb1N0cmluZzpmdW5jdGlvbihlLHQpe2lmKHQmJmQodC50b1N0cmluZykpe2goZSxcInRvU3RyaW5nXCIsdC50b1N0cmluZy5iaW5kKHQpLHRydWUpfX19O3ZhciBtPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ZnVuY3Rpb24gUHJvdG90eXBlKCl7fTtyLnByb3RvdHlwZT1lO3ZhciBvPW5ldyByO2lmKHR5cGVvZiB0IT09XCJ1bmRlZmluZWRcIil7bih0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe08uZGVmaW5lQnlEZXNjcmlwdG9yKG8sZSx0W2VdKX0pfXJldHVybiBvfTt2YXIgdz1mdW5jdGlvbihlLHQpe2lmKCFPYmplY3Quc2V0UHJvdG90eXBlT2Ype3JldHVybiBmYWxzZX1yZXR1cm4gYShmdW5jdGlvbigpe3ZhciByPWZ1bmN0aW9uIFN1YmNsYXNzKHQpe3ZhciByPW5ldyBlKHQpO09iamVjdC5zZXRQcm90b3R5cGVPZihyLFN1YmNsYXNzLnByb3RvdHlwZSk7cmV0dXJuIHJ9O09iamVjdC5zZXRQcm90b3R5cGVPZihyLGUpO3IucHJvdG90eXBlPW0oZS5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTpyfX0pO3JldHVybiB0KHIpfSl9O3ZhciBqPWZ1bmN0aW9uKCl7aWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtyZXR1cm4gc2VsZn1pZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIHdpbmRvd31pZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIGdsb2JhbH10aHJvdyBuZXcgRXJyb3IoXCJ1bmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIil9O3ZhciBTPWooKTt2YXIgVD1TLmlzRmluaXRlO3ZhciBJPUZ1bmN0aW9uLmNhbGwuYmluZChTdHJpbmcucHJvdG90eXBlLmluZGV4T2YpO3ZhciBFPUZ1bmN0aW9uLmFwcGx5LmJpbmQoQXJyYXkucHJvdG90eXBlLmluZGV4T2YpO3ZhciBQPUZ1bmN0aW9uLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuY29uY2F0KTt2YXIgQz1GdW5jdGlvbi5jYWxsLmJpbmQoU3RyaW5nLnByb3RvdHlwZS5zbGljZSk7dmFyIE09RnVuY3Rpb24uY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5wdXNoKTt2YXIgeD1GdW5jdGlvbi5hcHBseS5iaW5kKEFycmF5LnByb3RvdHlwZS5wdXNoKTt2YXIgTj1GdW5jdGlvbi5jYWxsLmJpbmQoQXJyYXkucHJvdG90eXBlLnNoaWZ0KTt2YXIgQT1NYXRoLm1heDt2YXIgUj1NYXRoLm1pbjt2YXIgXz1NYXRoLmZsb29yO3ZhciBrPU1hdGguYWJzO3ZhciBGPU1hdGguZXhwO3ZhciBMPU1hdGgubG9nO3ZhciBEPU1hdGguc3FydDt2YXIgej1GdW5jdGlvbi5jYWxsLmJpbmQoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7dmFyIHE7dmFyIFc9ZnVuY3Rpb24oKXt9O3ZhciBHPVMuU3ltYm9sfHx7fTt2YXIgSD1HLnNwZWNpZXN8fFwiQEBzcGVjaWVzXCI7dmFyIFY9TnVtYmVyLmlzTmFOfHxmdW5jdGlvbiBpc05hTihlKXtyZXR1cm4gZSE9PWV9O3ZhciBCPU51bWJlci5pc0Zpbml0ZXx8ZnVuY3Rpb24gaXNGaW5pdGUoZSl7cmV0dXJuIHR5cGVvZiBlPT09XCJudW1iZXJcIiYmVChlKX07dmFyICQ9ZChNYXRoLnNpZ24pP01hdGguc2lnbjpmdW5jdGlvbiBzaWduKGUpe3ZhciB0PU51bWJlcihlKTtpZih0PT09MCl7cmV0dXJuIHR9aWYoVih0KSl7cmV0dXJuIHR9cmV0dXJuIHQ8MD8tMToxfTt2YXIgVT1mdW5jdGlvbiBpc0FyZ3VtZW50cyhlKXtyZXR1cm4gZyhlKT09PVwiW29iamVjdCBBcmd1bWVudHNdXCJ9O3ZhciBKPWZ1bmN0aW9uIGlzQXJndW1lbnRzKGUpe3JldHVybiBlIT09bnVsbCYmdHlwZW9mIGU9PT1cIm9iamVjdFwiJiZ0eXBlb2YgZS5sZW5ndGg9PT1cIm51bWJlclwiJiZlLmxlbmd0aD49MCYmZyhlKSE9PVwiW29iamVjdCBBcnJheV1cIiYmZyhlLmNhbGxlZSk9PT1cIltvYmplY3QgRnVuY3Rpb25dXCJ9O3ZhciBYPVUoYXJndW1lbnRzKT9VOko7dmFyIEs9e3ByaW1pdGl2ZTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PW51bGx8fHR5cGVvZiBlIT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgZSE9PVwib2JqZWN0XCJ9LHN0cmluZzpmdW5jdGlvbihlKXtyZXR1cm4gZyhlKT09PVwiW29iamVjdCBTdHJpbmddXCJ9LHJlZ2V4OmZ1bmN0aW9uKGUpe3JldHVybiBnKGUpPT09XCJbb2JqZWN0IFJlZ0V4cF1cIn0sc3ltYm9sOmZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgUy5TeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBlPT09XCJzeW1ib2xcIn19O3ZhciBaPWZ1bmN0aW9uIG92ZXJyaWRlTmF0aXZlKGUsdCxyKXt2YXIgbj1lW3RdO2goZSx0LHIsdHJ1ZSk7Ty5wcmVzZXJ2ZVRvU3RyaW5nKGVbdF0sbil9O3ZhciBZPXR5cGVvZiBHPT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgR1tcImZvclwiXT09PVwiZnVuY3Rpb25cIiYmSy5zeW1ib2woRygpKTt2YXIgUT1LLnN5bWJvbChHLml0ZXJhdG9yKT9HLml0ZXJhdG9yOlwiX2VzNi1zaGltIGl0ZXJhdG9yX1wiO2lmKFMuU2V0JiZ0eXBlb2YobmV3IFMuU2V0KVtcIkBAaXRlcmF0b3JcIl09PT1cImZ1bmN0aW9uXCIpe1E9XCJAQGl0ZXJhdG9yXCJ9aWYoIVMuUmVmbGVjdCl7aChTLFwiUmVmbGVjdFwiLHt9LHRydWUpfXZhciBlZT1TLlJlZmxlY3Q7dmFyIHRlPVN0cmluZzt2YXIgcmU9e0NhbGw6ZnVuY3Rpb24gQ2FsbCh0LHIpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHNbMl06W107aWYoIXJlLklzQ2FsbGFibGUodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvblwiKX1yZXR1cm4gZSh0LHIsbil9LFJlcXVpcmVPYmplY3RDb2VyY2libGU6ZnVuY3Rpb24oZSx0KXtpZihlPT1udWxsKXt0aHJvdyBuZXcgVHlwZUVycm9yKHR8fFwiQ2Fubm90IGNhbGwgbWV0aG9kIG9uIFwiK2UpfXJldHVybiBlfSxUeXBlSXNPYmplY3Q6ZnVuY3Rpb24oZSl7aWYoZT09PXZvaWQgMHx8ZT09PW51bGx8fGU9PT10cnVlfHxlPT09ZmFsc2Upe3JldHVybiBmYWxzZX1yZXR1cm4gdHlwZW9mIGU9PT1cImZ1bmN0aW9uXCJ8fHR5cGVvZiBlPT09XCJvYmplY3RcIn0sVG9PYmplY3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0KHJlLlJlcXVpcmVPYmplY3RDb2VyY2libGUoZSx0KSl9LElzQ2FsbGFibGU6ZCxJc0NvbnN0cnVjdG9yOmZ1bmN0aW9uKGUpe3JldHVybiByZS5Jc0NhbGxhYmxlKGUpfSxUb0ludDMyOmZ1bmN0aW9uKGUpe3JldHVybiByZS5Ub051bWJlcihlKT4+MH0sVG9VaW50MzI6ZnVuY3Rpb24oZSl7cmV0dXJuIHJlLlRvTnVtYmVyKGUpPj4+MH0sVG9OdW1iZXI6ZnVuY3Rpb24oZSl7aWYoZyhlKT09PVwiW29iamVjdCBTeW1ib2xdXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBhIFN5bWJvbCB2YWx1ZSB0byBhIG51bWJlclwiKX1yZXR1cm4rZX0sVG9JbnRlZ2VyOmZ1bmN0aW9uKGUpe3ZhciB0PXJlLlRvTnVtYmVyKGUpO2lmKFYodCkpe3JldHVybiAwfWlmKHQ9PT0wfHwhQih0KSl7cmV0dXJuIHR9cmV0dXJuKHQ+MD8xOi0xKSpfKGsodCkpfSxUb0xlbmd0aDpmdW5jdGlvbihlKXt2YXIgdD1yZS5Ub0ludGVnZXIoZSk7aWYodDw9MCl7cmV0dXJuIDB9aWYodD5OdW1iZXIuTUFYX1NBRkVfSU5URUdFUil7cmV0dXJuIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSfXJldHVybiB0fSxTYW1lVmFsdWU6ZnVuY3Rpb24oZSx0KXtpZihlPT09dCl7aWYoZT09PTApe3JldHVybiAxL2U9PT0xL3R9cmV0dXJuIHRydWV9cmV0dXJuIFYoZSkmJlYodCl9LFNhbWVWYWx1ZVplcm86ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR8fFYoZSkmJlYodCl9LElzSXRlcmFibGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHJlLlR5cGVJc09iamVjdChlKSYmKHR5cGVvZiBlW1FdIT09XCJ1bmRlZmluZWRcInx8WChlKSl9LEdldEl0ZXJhdG9yOmZ1bmN0aW9uKGUpe2lmKFgoZSkpe3JldHVybiBuZXcgcShlLFwidmFsdWVcIil9dmFyIHQ9cmUuR2V0TWV0aG9kKGUsUSk7aWYoIXJlLklzQ2FsbGFibGUodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJ2YWx1ZSBpcyBub3QgYW4gaXRlcmFibGVcIil9dmFyIHI9cmUuQ2FsbCh0LGUpO2lmKCFyZS5UeXBlSXNPYmplY3Qocikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJiYWQgaXRlcmF0b3JcIil9cmV0dXJuIHJ9LEdldE1ldGhvZDpmdW5jdGlvbihlLHQpe3ZhciByPXJlLlRvT2JqZWN0KGUpW3RdO2lmKHI9PT12b2lkIDB8fHI9PT1udWxsKXtyZXR1cm4gdm9pZCAwfWlmKCFyZS5Jc0NhbGxhYmxlKHIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIG5vdCBjYWxsYWJsZTogXCIrdCl9cmV0dXJuIHJ9LEl0ZXJhdG9yQ29tcGxldGU6ZnVuY3Rpb24oZSl7cmV0dXJuISFlLmRvbmV9LEl0ZXJhdG9yQ2xvc2U6ZnVuY3Rpb24oZSx0KXt2YXIgcj1yZS5HZXRNZXRob2QoZSxcInJldHVyblwiKTtpZihyPT09dm9pZCAwKXtyZXR1cm59dmFyIG4sbzt0cnl7bj1yZS5DYWxsKHIsZSl9Y2F0Y2goaSl7bz1pfWlmKHQpe3JldHVybn1pZihvKXt0aHJvdyBvfWlmKCFyZS5UeXBlSXNPYmplY3Qobikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJdGVyYXRvcidzIHJldHVybiBtZXRob2QgcmV0dXJuZWQgYSBub24tb2JqZWN0LlwiKX19LEl0ZXJhdG9yTmV4dDpmdW5jdGlvbihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjE/ZS5uZXh0KGFyZ3VtZW50c1sxXSk6ZS5uZXh0KCk7aWYoIXJlLlR5cGVJc09iamVjdCh0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcImJhZCBpdGVyYXRvclwiKX1yZXR1cm4gdH0sSXRlcmF0b3JTdGVwOmZ1bmN0aW9uKGUpe3ZhciB0PXJlLkl0ZXJhdG9yTmV4dChlKTt2YXIgcj1yZS5JdGVyYXRvckNvbXBsZXRlKHQpO3JldHVybiByP2ZhbHNlOnR9LENvbnN0cnVjdDpmdW5jdGlvbihlLHQscixuKXt2YXIgbz10eXBlb2Ygcj09PVwidW5kZWZpbmVkXCI/ZTpyO2lmKCFuJiZlZS5jb25zdHJ1Y3Qpe3JldHVybiBlZS5jb25zdHJ1Y3QoZSx0LG8pfXZhciBpPW8ucHJvdG90eXBlO2lmKCFyZS5UeXBlSXNPYmplY3QoaSkpe2k9T2JqZWN0LnByb3RvdHlwZX12YXIgYT1tKGkpO3ZhciB1PXJlLkNhbGwoZSxhLHQpO3JldHVybiByZS5UeXBlSXNPYmplY3QodSk/dTphfSxTcGVjaWVzQ29uc3RydWN0b3I6ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmNvbnN0cnVjdG9yO2lmKHI9PT12b2lkIDApe3JldHVybiB0fWlmKCFyZS5UeXBlSXNPYmplY3Qocikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgY29uc3RydWN0b3JcIil9dmFyIG49cltIXTtpZihuPT09dm9pZCAwfHxuPT09bnVsbCl7cmV0dXJuIHR9aWYoIXJlLklzQ29uc3RydWN0b3Iobikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgQEBzcGVjaWVzXCIpfXJldHVybiBufSxDcmVhdGVIVE1MOmZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPXJlLlRvU3RyaW5nKGUpO3ZhciBpPVwiPFwiK3Q7aWYociE9PVwiXCIpe3ZhciBhPXJlLlRvU3RyaW5nKG4pO3ZhciB1PWEucmVwbGFjZSgvXCIvZyxcIiZxdW90O1wiKTtpKz1cIiBcIityKyc9XCInK3UrJ1wiJ312YXIgZj1pK1wiPlwiO3ZhciBzPWYrbztyZXR1cm4gcytcIjwvXCIrdCtcIj5cIn0sSXNSZWdFeHA6ZnVuY3Rpb24gSXNSZWdFeHAoZSl7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7cmV0dXJuIGZhbHNlfXZhciB0PWVbRy5tYXRjaF07aWYodHlwZW9mIHQhPT1cInVuZGVmaW5lZFwiKXtyZXR1cm4hIXR9cmV0dXJuIEsucmVnZXgoZSl9LFRvU3RyaW5nOmZ1bmN0aW9uIFRvU3RyaW5nKGUpe3JldHVybiB0ZShlKX19O2lmKHMmJlkpe3ZhciBuZT1mdW5jdGlvbiBkZWZpbmVXZWxsS25vd25TeW1ib2woZSl7aWYoSy5zeW1ib2woR1tlXSkpe3JldHVybiBHW2VdfXZhciB0PUdbXCJmb3JcIl0oXCJTeW1ib2wuXCIrZSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KEcsZSx7Y29uZmlndXJhYmxlOmZhbHNlLGVudW1lcmFibGU6ZmFsc2Usd3JpdGFibGU6ZmFsc2UsdmFsdWU6dH0pO3JldHVybiB0fTtpZighSy5zeW1ib2woRy5zZWFyY2gpKXt2YXIgb2U9bmUoXCJzZWFyY2hcIik7dmFyIGllPVN0cmluZy5wcm90b3R5cGUuc2VhcmNoO2goUmVnRXhwLnByb3RvdHlwZSxvZSxmdW5jdGlvbiBzZWFyY2goZSl7cmV0dXJuIHJlLkNhbGwoaWUsZSxbdGhpc10pfSk7dmFyIGFlPWZ1bmN0aW9uIHNlYXJjaChlKXt2YXIgdD1yZS5SZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpO2lmKGUhPT1udWxsJiZ0eXBlb2YgZSE9PVwidW5kZWZpbmVkXCIpe3ZhciByPXJlLkdldE1ldGhvZChlLG9lKTtpZih0eXBlb2YgciE9PVwidW5kZWZpbmVkXCIpe3JldHVybiByZS5DYWxsKHIsZSxbdF0pfX1yZXR1cm4gcmUuQ2FsbChpZSx0LFtyZS5Ub1N0cmluZyhlKV0pfTtaKFN0cmluZy5wcm90b3R5cGUsXCJzZWFyY2hcIixhZSl9aWYoIUsuc3ltYm9sKEcucmVwbGFjZSkpe3ZhciB1ZT1uZShcInJlcGxhY2VcIik7dmFyIGZlPVN0cmluZy5wcm90b3R5cGUucmVwbGFjZTtoKFJlZ0V4cC5wcm90b3R5cGUsdWUsZnVuY3Rpb24gcmVwbGFjZShlLHQpe3JldHVybiByZS5DYWxsKGZlLGUsW3RoaXMsdF0pfSk7dmFyIHNlPWZ1bmN0aW9uIHJlcGxhY2UoZSx0KXt2YXIgcj1yZS5SZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpO2lmKGUhPT1udWxsJiZ0eXBlb2YgZSE9PVwidW5kZWZpbmVkXCIpe3ZhciBuPXJlLkdldE1ldGhvZChlLHVlKTtpZih0eXBlb2YgbiE9PVwidW5kZWZpbmVkXCIpe3JldHVybiByZS5DYWxsKG4sZSxbcix0XSl9fXJldHVybiByZS5DYWxsKGZlLHIsW3JlLlRvU3RyaW5nKGUpLHRdKX07WihTdHJpbmcucHJvdG90eXBlLFwicmVwbGFjZVwiLHNlKX1pZighSy5zeW1ib2woRy5zcGxpdCkpe3ZhciBjZT1uZShcInNwbGl0XCIpO3ZhciBsZT1TdHJpbmcucHJvdG90eXBlLnNwbGl0O2goUmVnRXhwLnByb3RvdHlwZSxjZSxmdW5jdGlvbiBzcGxpdChlLHQpe3JldHVybiByZS5DYWxsKGxlLGUsW3RoaXMsdF0pfSk7dmFyIHBlPWZ1bmN0aW9uIHNwbGl0KGUsdCl7dmFyIHI9cmUuUmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKTtpZihlIT09bnVsbCYmdHlwZW9mIGUhPT1cInVuZGVmaW5lZFwiKXt2YXIgbj1yZS5HZXRNZXRob2QoZSxjZSk7aWYodHlwZW9mIG4hPT1cInVuZGVmaW5lZFwiKXtyZXR1cm4gcmUuQ2FsbChuLGUsW3IsdF0pfX1yZXR1cm4gcmUuQ2FsbChsZSxyLFtyZS5Ub1N0cmluZyhlKSx0XSl9O1ooU3RyaW5nLnByb3RvdHlwZSxcInNwbGl0XCIscGUpfXZhciB2ZT1LLnN5bWJvbChHLm1hdGNoKTt2YXIgeWU9dmUmJmZ1bmN0aW9uKCl7dmFyIGU9e307ZVtHLm1hdGNoXT1mdW5jdGlvbigpe3JldHVybiA0Mn07cmV0dXJuXCJhXCIubWF0Y2goZSkhPT00Mn0oKTtpZighdmV8fHllKXt2YXIgaGU9bmUoXCJtYXRjaFwiKTt2YXIgYmU9U3RyaW5nLnByb3RvdHlwZS5tYXRjaDtoKFJlZ0V4cC5wcm90b3R5cGUsaGUsZnVuY3Rpb24gbWF0Y2goZSl7cmV0dXJuIHJlLkNhbGwoYmUsZSxbdGhpc10pfSk7dmFyIGdlPWZ1bmN0aW9uIG1hdGNoKGUpe3ZhciB0PXJlLlJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcyk7aWYoZSE9PW51bGwmJnR5cGVvZiBlIT09XCJ1bmRlZmluZWRcIil7dmFyIHI9cmUuR2V0TWV0aG9kKGUsaGUpO2lmKHR5cGVvZiByIT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIHJlLkNhbGwocixlLFt0XSl9fXJldHVybiByZS5DYWxsKGJlLHQsW3JlLlRvU3RyaW5nKGUpXSl9O1ooU3RyaW5nLnByb3RvdHlwZSxcIm1hdGNoXCIsZ2UpfX12YXIgZGU9ZnVuY3Rpb24gd3JhcENvbnN0cnVjdG9yKGUsdCxyKXtPLnByZXNlcnZlVG9TdHJpbmcodCxlKTtpZihPYmplY3Quc2V0UHJvdG90eXBlT2Ype09iamVjdC5zZXRQcm90b3R5cGVPZihlLHQpfWlmKHMpe2woT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSksZnVuY3Rpb24obil7aWYobiBpbiBXfHxyW25dKXtyZXR1cm59Ty5wcm94eShlLG4sdCl9KX1lbHNle2woT2JqZWN0LmtleXMoZSksZnVuY3Rpb24obil7aWYobiBpbiBXfHxyW25dKXtyZXR1cm59dFtuXT1lW25dfSl9dC5wcm90b3R5cGU9ZS5wcm90b3R5cGU7Ty5yZWRlZmluZShlLnByb3RvdHlwZSxcImNvbnN0cnVjdG9yXCIsdCl9O3ZhciBPZT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgbWU9ZnVuY3Rpb24oZSl7aWYocyYmIXooZSxIKSl7Ty5nZXR0ZXIoZSxILE9lKX19O3ZhciB3ZT1mdW5jdGlvbihlLHQpe3ZhciByPXR8fGZ1bmN0aW9uIGl0ZXJhdG9yKCl7cmV0dXJuIHRoaXN9O2goZSxRLHIpO2lmKCFlW1FdJiZLLnN5bWJvbChRKSl7ZVtRXT1yfX07dmFyIGplPWZ1bmN0aW9uIGNyZWF0ZURhdGFQcm9wZXJ0eShlLHQscil7aWYocyl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7Y29uZmlndXJhYmxlOnRydWUsZW51bWVyYWJsZTp0cnVlLHdyaXRhYmxlOnRydWUsdmFsdWU6cn0pfWVsc2V7ZVt0XT1yfX07dmFyIFNlPWZ1bmN0aW9uIGNyZWF0ZURhdGFQcm9wZXJ0eU9yVGhyb3coZSx0LHIpe2plKGUsdCxyKTtpZighcmUuU2FtZVZhbHVlKGVbdF0scikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJwcm9wZXJ0eSBpcyBub25jb25maWd1cmFibGVcIil9fTt2YXIgVGU9ZnVuY3Rpb24oZSx0LHIsbil7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkNvbnN0cnVjdG9yIHJlcXVpcmVzIGBuZXdgOiBcIit0Lm5hbWUpfXZhciBvPXQucHJvdG90eXBlO2lmKCFyZS5UeXBlSXNPYmplY3Qobykpe289cn12YXIgaT1tKG8pO2Zvcih2YXIgYSBpbiBuKXtpZih6KG4sYSkpe3ZhciB1PW5bYV07aChpLGEsdSx0cnVlKX19cmV0dXJuIGl9O2lmKFN0cmluZy5mcm9tQ29kZVBvaW50JiZTdHJpbmcuZnJvbUNvZGVQb2ludC5sZW5ndGghPT0xKXt2YXIgSWU9U3RyaW5nLmZyb21Db2RlUG9pbnQ7WihTdHJpbmcsXCJmcm9tQ29kZVBvaW50XCIsZnVuY3Rpb24gZnJvbUNvZGVQb2ludChlKXtyZXR1cm4gcmUuQ2FsbChJZSx0aGlzLGFyZ3VtZW50cyl9KX12YXIgRWU9e2Zyb21Db2RlUG9pbnQ6ZnVuY3Rpb24gZnJvbUNvZGVQb2ludChlKXt2YXIgdD1bXTt2YXIgcjtmb3IodmFyIG49MCxvPWFyZ3VtZW50cy5sZW5ndGg7bjxvO24rKyl7cj1OdW1iZXIoYXJndW1lbnRzW25dKTtpZighcmUuU2FtZVZhbHVlKHIscmUuVG9JbnRlZ2VyKHIpKXx8cjwwfHxyPjExMTQxMTEpe3Rocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50IFwiK3IpfWlmKHI8NjU1MzYpe00odCxTdHJpbmcuZnJvbUNoYXJDb2RlKHIpKX1lbHNle3ItPTY1NTM2O00odCxTdHJpbmcuZnJvbUNoYXJDb2RlKChyPj4xMCkrNTUyOTYpKTtNKHQsU3RyaW5nLmZyb21DaGFyQ29kZShyJTEwMjQrNTYzMjApKX19cmV0dXJuIHQuam9pbihcIlwiKX0scmF3OmZ1bmN0aW9uIHJhdyhlKXt2YXIgdD1yZS5Ub09iamVjdChlLFwiYmFkIGNhbGxTaXRlXCIpO3ZhciByPXJlLlRvT2JqZWN0KHQucmF3LFwiYmFkIHJhdyB2YWx1ZVwiKTt2YXIgbj1yLmxlbmd0aDt2YXIgbz1yZS5Ub0xlbmd0aChuKTtpZihvPD0wKXtyZXR1cm5cIlwifXZhciBpPVtdO3ZhciBhPTA7dmFyIHUsZixzLGM7d2hpbGUoYTxvKXt1PXJlLlRvU3RyaW5nKGEpO3M9cmUuVG9TdHJpbmcoclt1XSk7TShpLHMpO2lmKGErMT49byl7YnJlYWt9Zj1hKzE8YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbYSsxXTpcIlwiO2M9cmUuVG9TdHJpbmcoZik7TShpLGMpO2ErPTF9cmV0dXJuIGkuam9pbihcIlwiKX19O2lmKFN0cmluZy5yYXcmJlN0cmluZy5yYXcoe3Jhdzp7MDpcInhcIiwxOlwieVwiLGxlbmd0aDoyfX0pIT09XCJ4eVwiKXtaKFN0cmluZyxcInJhd1wiLEVlLnJhdyl9YihTdHJpbmcsRWUpO3ZhciBQZT1mdW5jdGlvbiByZXBlYXQoZSx0KXtpZih0PDEpe3JldHVyblwiXCJ9aWYodCUyKXtyZXR1cm4gcmVwZWF0KGUsdC0xKStlfXZhciByPXJlcGVhdChlLHQvMik7cmV0dXJuIHIrcn07dmFyIENlPUluZmluaXR5O3ZhciBNZT17cmVwZWF0OmZ1bmN0aW9uIHJlcGVhdChlKXt2YXIgdD1yZS5Ub1N0cmluZyhyZS5SZXF1aXJlT2JqZWN0Q29lcmNpYmxlKHRoaXMpKTt2YXIgcj1yZS5Ub0ludGVnZXIoZSk7aWYocjwwfHxyPj1DZSl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJyZXBlYXQgY291bnQgbXVzdCBiZSBsZXNzIHRoYW4gaW5maW5pdHkgYW5kIG5vdCBvdmVyZmxvdyBtYXhpbXVtIHN0cmluZyBzaXplXCIpfXJldHVybiBQZSh0LHIpfSxzdGFydHNXaXRoOmZ1bmN0aW9uIHN0YXJ0c1dpdGgoZSl7dmFyIHQ9cmUuVG9TdHJpbmcocmUuUmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKSk7aWYocmUuSXNSZWdFeHAoZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjYWxsIG1ldGhvZCBcInN0YXJ0c1dpdGhcIiB3aXRoIGEgcmVnZXgnKX12YXIgcj1yZS5Ub1N0cmluZyhlKTt2YXIgbjtpZihhcmd1bWVudHMubGVuZ3RoPjEpe249YXJndW1lbnRzWzFdfXZhciBvPUEocmUuVG9JbnRlZ2VyKG4pLDApO3JldHVybiBDKHQsbyxvK3IubGVuZ3RoKT09PXJ9LGVuZHNXaXRoOmZ1bmN0aW9uIGVuZHNXaXRoKGUpe3ZhciB0PXJlLlRvU3RyaW5nKHJlLlJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcykpO2lmKHJlLklzUmVnRXhwKGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBtZXRob2QgXCJlbmRzV2l0aFwiIHdpdGggYSByZWdleCcpfXZhciByPXJlLlRvU3RyaW5nKGUpO3ZhciBuPXQubGVuZ3RoO3ZhciBvO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7bz1hcmd1bWVudHNbMV19dmFyIGk9dHlwZW9mIG89PT1cInVuZGVmaW5lZFwiP246cmUuVG9JbnRlZ2VyKG8pO3ZhciBhPVIoQShpLDApLG4pO3JldHVybiBDKHQsYS1yLmxlbmd0aCxhKT09PXJ9LGluY2x1ZGVzOmZ1bmN0aW9uIGluY2x1ZGVzKGUpe2lmKHJlLklzUmVnRXhwKGUpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdcImluY2x1ZGVzXCIgZG9lcyBub3QgYWNjZXB0IGEgUmVnRXhwJyl9dmFyIHQ9cmUuVG9TdHJpbmcoZSk7dmFyIHI7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtyPWFyZ3VtZW50c1sxXX1yZXR1cm4gSSh0aGlzLHQscikhPT0tMX0sY29kZVBvaW50QXQ6ZnVuY3Rpb24gY29kZVBvaW50QXQoZSl7dmFyIHQ9cmUuVG9TdHJpbmcocmUuUmVxdWlyZU9iamVjdENvZXJjaWJsZSh0aGlzKSk7dmFyIHI9cmUuVG9JbnRlZ2VyKGUpO3ZhciBuPXQubGVuZ3RoO2lmKHI+PTAmJnI8bil7dmFyIG89dC5jaGFyQ29kZUF0KHIpO3ZhciBpPXIrMT09PW47aWYobzw1NTI5Nnx8bz41NjMxOXx8aSl7cmV0dXJuIG99dmFyIGE9dC5jaGFyQ29kZUF0KHIrMSk7aWYoYTw1NjMyMHx8YT41NzM0Myl7cmV0dXJuIG99cmV0dXJuKG8tNTUyOTYpKjEwMjQrKGEtNTYzMjApKzY1NTM2fX19O2lmKFN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMmJlwiYVwiLmluY2x1ZGVzKFwiYVwiLEluZmluaXR5KSE9PWZhbHNlKXtaKFN0cmluZy5wcm90b3R5cGUsXCJpbmNsdWRlc1wiLE1lLmluY2x1ZGVzKX1pZihTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGgmJlN0cmluZy5wcm90b3R5cGUuZW5kc1dpdGgpe3ZhciB4ZT1pKGZ1bmN0aW9uKCl7XCIvYS9cIi5zdGFydHNXaXRoKC9hLyl9KTt2YXIgTmU9YShmdW5jdGlvbigpe3JldHVyblwiYWJjXCIuc3RhcnRzV2l0aChcImFcIixJbmZpbml0eSk9PT1mYWxzZX0pO2lmKCF4ZXx8IU5lKXtaKFN0cmluZy5wcm90b3R5cGUsXCJzdGFydHNXaXRoXCIsTWUuc3RhcnRzV2l0aCk7WihTdHJpbmcucHJvdG90eXBlLFwiZW5kc1dpdGhcIixNZS5lbmRzV2l0aCl9fWlmKFkpe3ZhciBBZT1hKGZ1bmN0aW9uKCl7dmFyIGU9L2EvO2VbRy5tYXRjaF09ZmFsc2U7cmV0dXJuXCIvYS9cIi5zdGFydHNXaXRoKGUpfSk7aWYoIUFlKXtaKFN0cmluZy5wcm90b3R5cGUsXCJzdGFydHNXaXRoXCIsTWUuc3RhcnRzV2l0aCl9dmFyIFJlPWEoZnVuY3Rpb24oKXt2YXIgZT0vYS87ZVtHLm1hdGNoXT1mYWxzZTtyZXR1cm5cIi9hL1wiLmVuZHNXaXRoKGUpfSk7aWYoIVJlKXtaKFN0cmluZy5wcm90b3R5cGUsXCJlbmRzV2l0aFwiLE1lLmVuZHNXaXRoKX12YXIgX2U9YShmdW5jdGlvbigpe3ZhciBlPS9hLztlW0cubWF0Y2hdPWZhbHNlO3JldHVyblwiL2EvXCIuaW5jbHVkZXMoZSl9KTtpZighX2Upe1ooU3RyaW5nLnByb3RvdHlwZSxcImluY2x1ZGVzXCIsTWUuaW5jbHVkZXMpfX1iKFN0cmluZy5wcm90b3R5cGUsTWUpO3ZhciBrZT1bXCJcdFxcblxceDBCXFxmXFxyIFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXCIsXCJcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFwiLFwiXFx1MjAyOVxcdWZlZmZcIl0uam9pbihcIlwiKTt2YXIgRmU9bmV3IFJlZ0V4cChcIiheW1wiK2tlK1wiXSspfChbXCIra2UrXCJdKyQpXCIsXCJnXCIpO3ZhciBMZT1mdW5jdGlvbiB0cmltKCl7cmV0dXJuIHJlLlRvU3RyaW5nKHJlLlJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcykpLnJlcGxhY2UoRmUsXCJcIil9O3ZhciBEZT1bXCJcXHg4NVwiLFwiXFx1MjAwYlwiLFwiXFx1ZmZmZVwiXS5qb2luKFwiXCIpO3ZhciB6ZT1uZXcgUmVnRXhwKFwiW1wiK0RlK1wiXVwiLFwiZ1wiKTt2YXIgcWU9L15bXFwtK10weFswLTlhLWZdKyQvaTt2YXIgV2U9RGUudHJpbSgpLmxlbmd0aCE9PURlLmxlbmd0aDtoKFN0cmluZy5wcm90b3R5cGUsXCJ0cmltXCIsTGUsV2UpO3ZhciBHZT1mdW5jdGlvbihlKXtyZXR1cm57dmFsdWU6ZSxkb25lOmFyZ3VtZW50cy5sZW5ndGg9PT0wfX07dmFyIEhlPWZ1bmN0aW9uKGUpe3JlLlJlcXVpcmVPYmplY3RDb2VyY2libGUoZSk7dGhpcy5fcz1yZS5Ub1N0cmluZyhlKTt0aGlzLl9pPTB9O0hlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fczt2YXIgdD10aGlzLl9pO2lmKHR5cGVvZiBlPT09XCJ1bmRlZmluZWRcInx8dD49ZS5sZW5ndGgpe3RoaXMuX3M9dm9pZCAwO3JldHVybiBHZSgpfXZhciByPWUuY2hhckNvZGVBdCh0KTt2YXIgbixvO2lmKHI8NTUyOTZ8fHI+NTYzMTl8fHQrMT09PWUubGVuZ3RoKXtvPTF9ZWxzZXtuPWUuY2hhckNvZGVBdCh0KzEpO289bjw1NjMyMHx8bj41NzM0Mz8xOjJ9dGhpcy5faT10K287cmV0dXJuIEdlKGUuc3Vic3RyKHQsbykpfTt3ZShIZS5wcm90b3R5cGUpO3dlKFN0cmluZy5wcm90b3R5cGUsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEhlKHRoaXMpfSk7dmFyIFZlPXtmcm9tOmZ1bmN0aW9uIGZyb20oZSl7dmFyIHI9dGhpczt2YXIgbjtpZihhcmd1bWVudHMubGVuZ3RoPjEpe249YXJndW1lbnRzWzFdfXZhciBvLGk7aWYodHlwZW9mIG49PT1cInVuZGVmaW5lZFwiKXtvPWZhbHNlfWVsc2V7aWYoIXJlLklzQ2FsbGFibGUobikpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJBcnJheS5mcm9tOiB3aGVuIHByb3ZpZGVkLCB0aGUgc2Vjb25kIGFyZ3VtZW50IG11c3QgYmUgYSBmdW5jdGlvblwiKX1pZihhcmd1bWVudHMubGVuZ3RoPjIpe2k9YXJndW1lbnRzWzJdfW89dHJ1ZX12YXIgYT10eXBlb2YoWChlKXx8cmUuR2V0TWV0aG9kKGUsUSkpIT09XCJ1bmRlZmluZWRcIjt2YXIgdSxmLHM7aWYoYSl7Zj1yZS5Jc0NvbnN0cnVjdG9yKHIpP09iamVjdChuZXcgcik6W107dmFyIGM9cmUuR2V0SXRlcmF0b3IoZSk7dmFyIGwscDtzPTA7d2hpbGUodHJ1ZSl7bD1yZS5JdGVyYXRvclN0ZXAoYyk7aWYobD09PWZhbHNlKXticmVha31wPWwudmFsdWU7dHJ5e2lmKG8pe3A9dHlwZW9mIGk9PT1cInVuZGVmaW5lZFwiP24ocCxzKTp0KG4saSxwLHMpfWZbc109cH1jYXRjaCh2KXtyZS5JdGVyYXRvckNsb3NlKGMsdHJ1ZSk7dGhyb3cgdn1zKz0xfXU9c31lbHNle3ZhciB5PXJlLlRvT2JqZWN0KGUpO3U9cmUuVG9MZW5ndGgoeS5sZW5ndGgpO2Y9cmUuSXNDb25zdHJ1Y3RvcihyKT9PYmplY3QobmV3IHIodSkpOm5ldyBBcnJheSh1KTt2YXIgaDtmb3Iocz0wO3M8dTsrK3Mpe2g9eVtzXTtpZihvKXtoPXR5cGVvZiBpPT09XCJ1bmRlZmluZWRcIj9uKGgscyk6dChuLGksaCxzKX1TZShmLHMsaCl9fWYubGVuZ3RoPXU7cmV0dXJuIGZ9LG9mOmZ1bmN0aW9uIG9mKCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDt2YXIgdD10aGlzO3ZhciBuPXIodCl8fCFyZS5Jc0NhbGxhYmxlKHQpP25ldyBBcnJheShlKTpyZS5Db25zdHJ1Y3QodCxbZV0pO2Zvcih2YXIgbz0wO288ZTsrK28pe1NlKG4sbyxhcmd1bWVudHNbb10pfW4ubGVuZ3RoPWU7cmV0dXJuIG59fTtiKEFycmF5LFZlKTttZShBcnJheSk7cT1mdW5jdGlvbihlLHQpe3RoaXMuaT0wO3RoaXMuYXJyYXk9ZTt0aGlzLmtpbmQ9dH07YihxLnByb3RvdHlwZSx7bmV4dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuaTt2YXIgdD10aGlzLmFycmF5O2lmKCEodGhpcyBpbnN0YW5jZW9mIHEpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGFuIEFycmF5SXRlcmF0b3JcIil9aWYodHlwZW9mIHQhPT1cInVuZGVmaW5lZFwiKXt2YXIgcj1yZS5Ub0xlbmd0aCh0Lmxlbmd0aCk7Zm9yKDtlPHI7ZSsrKXt2YXIgbj10aGlzLmtpbmQ7dmFyIG87aWYobj09PVwia2V5XCIpe289ZX1lbHNlIGlmKG49PT1cInZhbHVlXCIpe289dFtlXX1lbHNlIGlmKG49PT1cImVudHJ5XCIpe289W2UsdFtlXV19dGhpcy5pPWUrMTtyZXR1cm4gR2Uobyl9fXRoaXMuYXJyYXk9dm9pZCAwO3JldHVybiBHZSgpfX0pO3dlKHEucHJvdG90eXBlKTt2YXIgQmU9QXJyYXkub2Y9PT1WZS5vZnx8ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbiBGb28oZSl7dGhpcy5sZW5ndGg9ZX07ZS5wcm90b3R5cGU9W107dmFyIHQ9QXJyYXkub2YuYXBwbHkoZSxbMSwyXSk7cmV0dXJuIHQgaW5zdGFuY2VvZiBlJiZ0Lmxlbmd0aD09PTJ9KCk7aWYoIUJlKXtaKEFycmF5LFwib2ZcIixWZS5vZil9dmFyICRlPXtjb3B5V2l0aGluOmZ1bmN0aW9uIGNvcHlXaXRoaW4oZSx0KXt2YXIgcj1yZS5Ub09iamVjdCh0aGlzKTt2YXIgbj1yZS5Ub0xlbmd0aChyLmxlbmd0aCk7dmFyIG89cmUuVG9JbnRlZ2VyKGUpO3ZhciBpPXJlLlRvSW50ZWdlcih0KTt2YXIgYT1vPDA/QShuK28sMCk6UihvLG4pO3ZhciB1PWk8MD9BKG4raSwwKTpSKGksbik7dmFyIGY7aWYoYXJndW1lbnRzLmxlbmd0aD4yKXtmPWFyZ3VtZW50c1syXX12YXIgcz10eXBlb2YgZj09PVwidW5kZWZpbmVkXCI/bjpyZS5Ub0ludGVnZXIoZik7dmFyIGM9czwwP0EobitzLDApOlIocyxuKTt2YXIgbD1SKGMtdSxuLWEpO3ZhciBwPTE7aWYodTxhJiZhPHUrbCl7cD0tMTt1Kz1sLTE7YSs9bC0xfXdoaWxlKGw+MCl7aWYodSBpbiByKXtyW2FdPXJbdV19ZWxzZXtkZWxldGUgclthXX11Kz1wO2ErPXA7bC09MX1yZXR1cm4gcn0sZmlsbDpmdW5jdGlvbiBmaWxsKGUpe3ZhciB0O2lmKGFyZ3VtZW50cy5sZW5ndGg+MSl7dD1hcmd1bWVudHNbMV19dmFyIHI7aWYoYXJndW1lbnRzLmxlbmd0aD4yKXtyPWFyZ3VtZW50c1syXX12YXIgbj1yZS5Ub09iamVjdCh0aGlzKTt2YXIgbz1yZS5Ub0xlbmd0aChuLmxlbmd0aCk7dD1yZS5Ub0ludGVnZXIodHlwZW9mIHQ9PT1cInVuZGVmaW5lZFwiPzA6dCk7cj1yZS5Ub0ludGVnZXIodHlwZW9mIHI9PT1cInVuZGVmaW5lZFwiP286cik7dmFyIGk9dDwwP0Eobyt0LDApOlIodCxvKTt2YXIgYT1yPDA/bytyOnI7Zm9yKHZhciB1PWk7dTxvJiZ1PGE7Kyt1KXtuW3VdPWV9cmV0dXJuIG59LGZpbmQ6ZnVuY3Rpb24gZmluZChlKXt2YXIgcj1yZS5Ub09iamVjdCh0aGlzKTt2YXIgbj1yZS5Ub0xlbmd0aChyLmxlbmd0aCk7aWYoIXJlLklzQ2FsbGFibGUoZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJBcnJheSNmaW5kOiBwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpfXZhciBvPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06bnVsbDtmb3IodmFyIGk9MCxhO2k8bjtpKyspe2E9cltpXTtpZihvKXtpZih0KGUsbyxhLGkscikpe3JldHVybiBhfX1lbHNlIGlmKGUoYSxpLHIpKXtyZXR1cm4gYX19fSxmaW5kSW5kZXg6ZnVuY3Rpb24gZmluZEluZGV4KGUpe3ZhciByPXJlLlRvT2JqZWN0KHRoaXMpO3ZhciBuPXJlLlRvTGVuZ3RoKHIubGVuZ3RoKTtpZighcmUuSXNDYWxsYWJsZShlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkFycmF5I2ZpbmRJbmRleDogcHJlZGljYXRlIG11c3QgYmUgYSBmdW5jdGlvblwiKX12YXIgbz1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOm51bGw7Zm9yKHZhciBpPTA7aTxuO2krKyl7aWYobyl7aWYodChlLG8scltpXSxpLHIpKXtyZXR1cm4gaX19ZWxzZSBpZihlKHJbaV0saSxyKSl7cmV0dXJuIGl9fXJldHVybi0xfSxrZXlzOmZ1bmN0aW9uIGtleXMoKXtyZXR1cm4gbmV3IHEodGhpcyxcImtleVwiKX0sdmFsdWVzOmZ1bmN0aW9uIHZhbHVlcygpe3JldHVybiBuZXcgcSh0aGlzLFwidmFsdWVcIil9LGVudHJpZXM6ZnVuY3Rpb24gZW50cmllcygpe3JldHVybiBuZXcgcSh0aGlzLFwiZW50cnlcIil9fTtpZihBcnJheS5wcm90b3R5cGUua2V5cyYmIXJlLklzQ2FsbGFibGUoWzFdLmtleXMoKS5uZXh0KSl7ZGVsZXRlIEFycmF5LnByb3RvdHlwZS5rZXlzfWlmKEFycmF5LnByb3RvdHlwZS5lbnRyaWVzJiYhcmUuSXNDYWxsYWJsZShbMV0uZW50cmllcygpLm5leHQpKXtkZWxldGUgQXJyYXkucHJvdG90eXBlLmVudHJpZXN9aWYoQXJyYXkucHJvdG90eXBlLmtleXMmJkFycmF5LnByb3RvdHlwZS5lbnRyaWVzJiYhQXJyYXkucHJvdG90eXBlLnZhbHVlcyYmQXJyYXkucHJvdG90eXBlW1FdKXtiKEFycmF5LnByb3RvdHlwZSx7dmFsdWVzOkFycmF5LnByb3RvdHlwZVtRXX0pO2lmKEsuc3ltYm9sKEcudW5zY29wYWJsZXMpKXtBcnJheS5wcm90b3R5cGVbRy51bnNjb3BhYmxlc10udmFsdWVzPXRydWV9fWlmKGMmJkFycmF5LnByb3RvdHlwZS52YWx1ZXMmJkFycmF5LnByb3RvdHlwZS52YWx1ZXMubmFtZSE9PVwidmFsdWVzXCIpe3ZhciBVZT1BcnJheS5wcm90b3R5cGUudmFsdWVzO1ooQXJyYXkucHJvdG90eXBlLFwidmFsdWVzXCIsZnVuY3Rpb24gdmFsdWVzKCl7cmV0dXJuIHJlLkNhbGwoVWUsdGhpcyxhcmd1bWVudHMpfSk7aChBcnJheS5wcm90b3R5cGUsUSxBcnJheS5wcm90b3R5cGUudmFsdWVzLHRydWUpfWIoQXJyYXkucHJvdG90eXBlLCRlKTtpZigxL1t0cnVlXS5pbmRleE9mKHRydWUsLTApPDApe2goQXJyYXkucHJvdG90eXBlLFwiaW5kZXhPZlwiLGZ1bmN0aW9uIGluZGV4T2YoZSl7dmFyIHQ9RSh0aGlzLGFyZ3VtZW50cyk7aWYodD09PTAmJjEvdDwwKXtyZXR1cm4gMH1yZXR1cm4gdH0sdHJ1ZSl9d2UoQXJyYXkucHJvdG90eXBlLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzKCl9KTtpZihPYmplY3QuZ2V0UHJvdG90eXBlT2Ype3dlKE9iamVjdC5nZXRQcm90b3R5cGVPZihbXS52YWx1ZXMoKSkpfXZhciBKZT1mdW5jdGlvbigpe3JldHVybiBhKGZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LmZyb20oe2xlbmd0aDotMX0pLmxlbmd0aD09PTB9KX0oKTt2YXIgWGU9ZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5mcm9tKFswXS5lbnRyaWVzKCkpO3JldHVybiBlLmxlbmd0aD09PTEmJnIoZVswXSkmJmVbMF1bMF09PT0wJiZlWzBdWzFdPT09MH0oKTtpZighSmV8fCFYZSl7WihBcnJheSxcImZyb21cIixWZS5mcm9tKX12YXIgS2U9ZnVuY3Rpb24oKXtyZXR1cm4gYShmdW5jdGlvbigpe3JldHVybiBBcnJheS5mcm9tKFswXSx2b2lkIDApfSl9KCk7aWYoIUtlKXt2YXIgWmU9QXJyYXkuZnJvbTtaKEFycmF5LFwiZnJvbVwiLGZ1bmN0aW9uIGZyb20oZSl7aWYoYXJndW1lbnRzLmxlbmd0aD4xJiZ0eXBlb2YgYXJndW1lbnRzWzFdIT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIHJlLkNhbGwoWmUsdGhpcyxhcmd1bWVudHMpfWVsc2V7cmV0dXJuIHQoWmUsdGhpcyxlKX19KX12YXIgWWU9LShNYXRoLnBvdygyLDMyKS0xKTt2YXIgUWU9ZnVuY3Rpb24oZSxyKXt2YXIgbj17bGVuZ3RoOlllfTtuW3I/KG4ubGVuZ3RoPj4+MCktMTowXT10cnVlO3JldHVybiBhKGZ1bmN0aW9uKCl7dChlLG4sZnVuY3Rpb24oKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNob3VsZCBub3QgcmVhY2ggaGVyZVwiKX0sW10pO3JldHVybiB0cnVlfSl9O2lmKCFRZShBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkpe3ZhciBldD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaDtaKEFycmF5LnByb3RvdHlwZSxcImZvckVhY2hcIixmdW5jdGlvbiBmb3JFYWNoKGUpe3JldHVybiByZS5DYWxsKGV0LHRoaXMubGVuZ3RoPj0wP3RoaXM6W10sYXJndW1lbnRzKX0sdHJ1ZSl9aWYoIVFlKEFycmF5LnByb3RvdHlwZS5tYXApKXt2YXIgdHQ9QXJyYXkucHJvdG90eXBlLm1hcDtaKEFycmF5LnByb3RvdHlwZSxcIm1hcFwiLGZ1bmN0aW9uIG1hcChlKXtyZXR1cm4gcmUuQ2FsbCh0dCx0aGlzLmxlbmd0aD49MD90aGlzOltdLGFyZ3VtZW50cyl9LHRydWUpfWlmKCFRZShBcnJheS5wcm90b3R5cGUuZmlsdGVyKSl7dmFyIHJ0PUFycmF5LnByb3RvdHlwZS5maWx0ZXI7WihBcnJheS5wcm90b3R5cGUsXCJmaWx0ZXJcIixmdW5jdGlvbiBmaWx0ZXIoZSl7cmV0dXJuIHJlLkNhbGwocnQsdGhpcy5sZW5ndGg+PTA/dGhpczpbXSxhcmd1bWVudHMpfSx0cnVlKX1pZighUWUoQXJyYXkucHJvdG90eXBlLnNvbWUpKXt2YXIgbnQ9QXJyYXkucHJvdG90eXBlLnNvbWU7WihBcnJheS5wcm90b3R5cGUsXCJzb21lXCIsZnVuY3Rpb24gc29tZShlKXtyZXR1cm4gcmUuQ2FsbChudCx0aGlzLmxlbmd0aD49MD90aGlzOltdLGFyZ3VtZW50cyl9LHRydWUpfWlmKCFRZShBcnJheS5wcm90b3R5cGUuZXZlcnkpKXt2YXIgb3Q9QXJyYXkucHJvdG90eXBlLmV2ZXJ5O1ooQXJyYXkucHJvdG90eXBlLFwiZXZlcnlcIixmdW5jdGlvbiBldmVyeShlKXtyZXR1cm4gcmUuQ2FsbChvdCx0aGlzLmxlbmd0aD49MD90aGlzOltdLGFyZ3VtZW50cyl9LHRydWUpfWlmKCFRZShBcnJheS5wcm90b3R5cGUucmVkdWNlKSl7dmFyIGl0PUFycmF5LnByb3RvdHlwZS5yZWR1Y2U7WihBcnJheS5wcm90b3R5cGUsXCJyZWR1Y2VcIixmdW5jdGlvbiByZWR1Y2UoZSl7cmV0dXJuIHJlLkNhbGwoaXQsdGhpcy5sZW5ndGg+PTA/dGhpczpbXSxhcmd1bWVudHMpfSx0cnVlKX1pZighUWUoQXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0LHRydWUpKXt2YXIgYXQ9QXJyYXkucHJvdG90eXBlLnJlZHVjZVJpZ2h0O1ooQXJyYXkucHJvdG90eXBlLFwicmVkdWNlUmlnaHRcIixmdW5jdGlvbiByZWR1Y2VSaWdodChlKXtyZXR1cm4gcmUuQ2FsbChhdCx0aGlzLmxlbmd0aD49MD90aGlzOltdLGFyZ3VtZW50cyl9LHRydWUpfXZhciB1dD1OdW1iZXIoXCIwbzEwXCIpIT09ODt2YXIgZnQ9TnVtYmVyKFwiMGIxMFwiKSE9PTI7dmFyIHN0PXkoRGUsZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKzArZSk9PT0wfSk7aWYodXR8fGZ0fHxzdCl7dmFyIGN0PU51bWJlcjt2YXIgbHQ9L14wYlswMV0rJC9pO3ZhciBwdD0vXjBvWzAtN10rJC9pO3ZhciB2dD1sdC50ZXN0LmJpbmQobHQpO3ZhciB5dD1wdC50ZXN0LmJpbmQocHQpO3ZhciBodD1mdW5jdGlvbihlKXt2YXIgdDtpZih0eXBlb2YgZS52YWx1ZU9mPT09XCJmdW5jdGlvblwiKXt0PWUudmFsdWVPZigpO2lmKEsucHJpbWl0aXZlKHQpKXtyZXR1cm4gdH19aWYodHlwZW9mIGUudG9TdHJpbmc9PT1cImZ1bmN0aW9uXCIpe3Q9ZS50b1N0cmluZygpO2lmKEsucHJpbWl0aXZlKHQpKXtyZXR1cm4gdH19dGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vIGRlZmF1bHQgdmFsdWVcIil9O3ZhciBidD16ZS50ZXN0LmJpbmQoemUpO3ZhciBndD1xZS50ZXN0LmJpbmQocWUpO3ZhciBkdD1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uIE51bWJlcih0KXt2YXIgcjtpZihhcmd1bWVudHMubGVuZ3RoPjApe3I9Sy5wcmltaXRpdmUodCk/dDpodCh0LFwibnVtYmVyXCIpfWVsc2V7cj0wfWlmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7cj1yZS5DYWxsKExlLHIpO2lmKHZ0KHIpKXtyPXBhcnNlSW50KEMociwyKSwyKX1lbHNlIGlmKHl0KHIpKXtyPXBhcnNlSW50KEMociwyKSw4KX1lbHNlIGlmKGJ0KHIpfHxndChyKSl7cj1OYU59fXZhciBuPXRoaXM7dmFyIG89YShmdW5jdGlvbigpe2N0LnByb3RvdHlwZS52YWx1ZU9mLmNhbGwobik7cmV0dXJuIHRydWV9KTtpZihuIGluc3RhbmNlb2YgZSYmIW8pe3JldHVybiBuZXcgY3Qocil9cmV0dXJuIGN0KHIpfTtyZXR1cm4gZX0oKTtkZShjdCxkdCx7fSk7YihkdCx7TmFOOmN0Lk5hTixNQVhfVkFMVUU6Y3QuTUFYX1ZBTFVFLE1JTl9WQUxVRTpjdC5NSU5fVkFMVUUsTkVHQVRJVkVfSU5GSU5JVFk6Y3QuTkVHQVRJVkVfSU5GSU5JVFksUE9TSVRJVkVfSU5GSU5JVFk6Y3QuUE9TSVRJVkVfSU5GSU5JVFl9KTtOdW1iZXI9ZHQ7Ty5yZWRlZmluZShTLFwiTnVtYmVyXCIsZHQpfXZhciBPdD1NYXRoLnBvdygyLDUzKS0xO2IoTnVtYmVyLHtNQVhfU0FGRV9JTlRFR0VSOk90LE1JTl9TQUZFX0lOVEVHRVI6LU90LEVQU0lMT046Mi4yMjA0NDYwNDkyNTAzMTNlLTE2LHBhcnNlSW50OlMucGFyc2VJbnQscGFyc2VGbG9hdDpTLnBhcnNlRmxvYXQsaXNGaW5pdGU6Qixpc0ludGVnZXI6ZnVuY3Rpb24gaXNJbnRlZ2VyKGUpe3JldHVybiBCKGUpJiZyZS5Ub0ludGVnZXIoZSk9PT1lfSxpc1NhZmVJbnRlZ2VyOmZ1bmN0aW9uIGlzU2FmZUludGVnZXIoZSl7cmV0dXJuIE51bWJlci5pc0ludGVnZXIoZSkmJmsoZSk8PU51bWJlci5NQVhfU0FGRV9JTlRFR0VSfSxpc05hTjpWfSk7aChOdW1iZXIsXCJwYXJzZUludFwiLFMucGFyc2VJbnQsTnVtYmVyLnBhcnNlSW50IT09Uy5wYXJzZUludCk7aWYoIVssMV0uZmluZChmdW5jdGlvbihlLHQpe3JldHVybiB0PT09MH0pKXtaKEFycmF5LnByb3RvdHlwZSxcImZpbmRcIiwkZS5maW5kKX1pZihbLDFdLmZpbmRJbmRleChmdW5jdGlvbihlLHQpe3JldHVybiB0PT09MH0pIT09MCl7WihBcnJheS5wcm90b3R5cGUsXCJmaW5kSW5kZXhcIiwkZS5maW5kSW5kZXgpfXZhciBtdD1GdW5jdGlvbi5iaW5kLmNhbGwoRnVuY3Rpb24uYmluZCxPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlKTt2YXIgd3Q9ZnVuY3Rpb24gZW5zdXJlRW51bWVyYWJsZShlLHQpe2lmKHMmJm10KGUsdCkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ZmFsc2V9KX19O3ZhciBqdD1mdW5jdGlvbiBzbGljZUFyZ3MoKXt2YXIgZT1OdW1iZXIodGhpcyk7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aDt2YXIgcj10LWU7dmFyIG49bmV3IEFycmF5KHI8MD8wOnIpO2Zvcih2YXIgbz1lO288dDsrK28pe25bby1lXT1hcmd1bWVudHNbb119cmV0dXJuIG59O3ZhciBTdD1mdW5jdGlvbiBhc3NpZ25UbyhlKXtyZXR1cm4gZnVuY3Rpb24gYXNzaWduVG9Tb3VyY2UodCxyKXt0W3JdPWVbcl07cmV0dXJuIHR9fTt2YXIgVHQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uKE9iamVjdCh0KSk7dmFyIG87aWYocmUuSXNDYWxsYWJsZShPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSl7bz12KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoT2JqZWN0KHQpKSxtdCh0KSl9cmV0dXJuIHAoUChyLG98fFtdKSxTdCh0KSxlKX07dmFyIEl0PXthc3NpZ246ZnVuY3Rpb24oZSx0KXt2YXIgcj1yZS5Ub09iamVjdChlLFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO3JldHVybiBwKHJlLkNhbGwoanQsMSxhcmd1bWVudHMpLFR0LHIpfSxpczpmdW5jdGlvbiBpcyhlLHQpe3JldHVybiByZS5TYW1lVmFsdWUoZSx0KX19O3ZhciBFdD1PYmplY3QuYXNzaWduJiZPYmplY3QucHJldmVudEV4dGVuc2lvbnMmJmZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHsxOjJ9KTt0cnl7T2JqZWN0LmFzc2lnbihlLFwieHlcIil9Y2F0Y2godCl7cmV0dXJuIGVbMV09PT1cInlcIn19KCk7aWYoRXQpe1ooT2JqZWN0LFwiYXNzaWduXCIsSXQuYXNzaWduKX1iKE9iamVjdCxJdCk7aWYocyl7dmFyIFB0PXtzZXRQcm90b3R5cGVPZjpmdW5jdGlvbihlLHIpe3ZhciBuO3ZhciBvPWZ1bmN0aW9uKGUsdCl7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbm5vdCBzZXQgcHJvdG90eXBlIG9uIGEgbm9uLW9iamVjdFwiKX1pZighKHQ9PT1udWxsfHxyZS5UeXBlSXNPYmplY3QodCkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiY2FuIG9ubHkgc2V0IHByb3RvdHlwZSB0byBhbiBvYmplY3Qgb3IgbnVsbFwiK3QpfX07dmFyIGk9ZnVuY3Rpb24oZSxyKXtvKGUscik7dChuLGUscik7cmV0dXJuIGV9O3RyeXtuPWUuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUucHJvdG90eXBlLHIpLnNldDt0KG4se30sbnVsbCl9Y2F0Y2goYSl7aWYoZS5wcm90b3R5cGUhPT17fVtyXSl7cmV0dXJufW49ZnVuY3Rpb24oZSl7dGhpc1tyXT1lfTtpLnBvbHlmaWxsPWkoaSh7fSxudWxsKSxlLnByb3RvdHlwZSlpbnN0YW5jZW9mIGV9cmV0dXJuIGl9KE9iamVjdCxcIl9fcHJvdG9fX1wiKX07YihPYmplY3QsUHQpfWlmKE9iamVjdC5zZXRQcm90b3R5cGVPZiYmT2JqZWN0LmdldFByb3RvdHlwZU9mJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YoT2JqZWN0LnNldFByb3RvdHlwZU9mKHt9LG51bGwpKSE9PW51bGwmJk9iamVjdC5nZXRQcm90b3R5cGVPZihPYmplY3QuY3JlYXRlKG51bGwpKT09PW51bGwpeyhmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5jcmVhdGUobnVsbCk7dmFyIHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mO3ZhciByPU9iamVjdC5zZXRQcm90b3R5cGVPZjtPYmplY3QuZ2V0UHJvdG90eXBlT2Y9ZnVuY3Rpb24ocil7dmFyIG49dChyKTtyZXR1cm4gbj09PWU/bnVsbDpufTtPYmplY3Quc2V0UHJvdG90eXBlT2Y9ZnVuY3Rpb24odCxuKXt2YXIgbz1uPT09bnVsbD9lOm47cmV0dXJuIHIodCxvKX07T2JqZWN0LnNldFByb3RvdHlwZU9mLnBvbHlmaWxsPWZhbHNlfSkoKX12YXIgQ3Q9IWkoZnVuY3Rpb24oKXtPYmplY3Qua2V5cyhcImZvb1wiKX0pO2lmKCFDdCl7dmFyIE10PU9iamVjdC5rZXlzO1ooT2JqZWN0LFwia2V5c1wiLGZ1bmN0aW9uIGtleXMoZSl7cmV0dXJuIE10KHJlLlRvT2JqZWN0KGUpKX0pO249T2JqZWN0LmtleXN9dmFyIHh0PWkoZnVuY3Rpb24oKXtPYmplY3Qua2V5cygvYS9nKX0pO2lmKHh0KXt2YXIgTnQ9T2JqZWN0LmtleXM7WihPYmplY3QsXCJrZXlzXCIsZnVuY3Rpb24ga2V5cyhlKXtpZihLLnJlZ2V4KGUpKXt2YXIgdD1bXTtmb3IodmFyIHIgaW4gZSl7aWYoeihlLHIpKXtNKHQscil9fXJldHVybiB0fXJldHVybiBOdChlKX0pO249T2JqZWN0LmtleXN9aWYoT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMpe3ZhciBBdD0haShmdW5jdGlvbigpe09iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKFwiZm9vXCIpfSk7aWYoIUF0KXt2YXIgUnQ9dHlwZW9mIHdpbmRvdz09PVwib2JqZWN0XCI/T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMod2luZG93KTpbXTt2YXIgX3Q9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXM7WihPYmplY3QsXCJnZXRPd25Qcm9wZXJ0eU5hbWVzXCIsZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlOYW1lcyhlKXt2YXIgdD1yZS5Ub09iamVjdChlKTtpZihnKHQpPT09XCJbb2JqZWN0IFdpbmRvd11cIil7dHJ5e3JldHVybiBfdCh0KX1jYXRjaChyKXtyZXR1cm4gUChbXSxSdCl9fXJldHVybiBfdCh0KX0pfX1pZihPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKXt2YXIga3Q9IWkoZnVuY3Rpb24oKXtPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFwiZm9vXCIsXCJiYXJcIil9KTtpZigha3Qpe3ZhciBGdD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yO1ooT2JqZWN0LFwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yXCIsZnVuY3Rpb24gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl7cmV0dXJuIEZ0KHJlLlRvT2JqZWN0KGUpLHQpfSl9fWlmKE9iamVjdC5zZWFsKXt2YXIgTHQ9IWkoZnVuY3Rpb24oKXtPYmplY3Quc2VhbChcImZvb1wiKX0pO2lmKCFMdCl7dmFyIER0PU9iamVjdC5zZWFsO1ooT2JqZWN0LFwic2VhbFwiLGZ1bmN0aW9uIHNlYWwoZSl7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7cmV0dXJuIGV9cmV0dXJuIER0KGUpfSl9fWlmKE9iamVjdC5pc1NlYWxlZCl7dmFyIHp0PSFpKGZ1bmN0aW9uKCl7T2JqZWN0LmlzU2VhbGVkKFwiZm9vXCIpfSk7aWYoIXp0KXt2YXIgcXQ9T2JqZWN0LmlzU2VhbGVkO1ooT2JqZWN0LFwiaXNTZWFsZWRcIixmdW5jdGlvbiBpc1NlYWxlZChlKXtpZighcmUuVHlwZUlzT2JqZWN0KGUpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gcXQoZSl9KX19aWYoT2JqZWN0LmZyZWV6ZSl7dmFyIFd0PSFpKGZ1bmN0aW9uKCl7T2JqZWN0LmZyZWV6ZShcImZvb1wiKX0pO2lmKCFXdCl7dmFyIEd0PU9iamVjdC5mcmVlemU7WihPYmplY3QsXCJmcmVlemVcIixmdW5jdGlvbiBmcmVlemUoZSl7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7cmV0dXJuIGV9cmV0dXJuIEd0KGUpfSl9fWlmKE9iamVjdC5pc0Zyb3plbil7dmFyIEh0PSFpKGZ1bmN0aW9uKCl7T2JqZWN0LmlzRnJvemVuKFwiZm9vXCIpfSk7aWYoIUh0KXt2YXIgVnQ9T2JqZWN0LmlzRnJvemVuO1ooT2JqZWN0LFwiaXNGcm96ZW5cIixmdW5jdGlvbiBpc0Zyb3plbihlKXtpZighcmUuVHlwZUlzT2JqZWN0KGUpKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gVnQoZSl9KX19aWYoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKXt2YXIgQnQ9IWkoZnVuY3Rpb24oKXtPYmplY3QucHJldmVudEV4dGVuc2lvbnMoXCJmb29cIil9KTtpZighQnQpe3ZhciAkdD1PYmplY3QucHJldmVudEV4dGVuc2lvbnM7WihPYmplY3QsXCJwcmV2ZW50RXh0ZW5zaW9uc1wiLGZ1bmN0aW9uIHByZXZlbnRFeHRlbnNpb25zKGUpe2lmKCFyZS5UeXBlSXNPYmplY3QoZSkpe3JldHVybiBlfXJldHVybiAkdChlKX0pfX1pZihPYmplY3QuaXNFeHRlbnNpYmxlKXt2YXIgVXQ9IWkoZnVuY3Rpb24oKXtPYmplY3QuaXNFeHRlbnNpYmxlKFwiZm9vXCIpfSk7aWYoIVV0KXt2YXIgSnQ9T2JqZWN0LmlzRXh0ZW5zaWJsZTtaKE9iamVjdCxcImlzRXh0ZW5zaWJsZVwiLGZ1bmN0aW9uIGlzRXh0ZW5zaWJsZShlKXtpZighcmUuVHlwZUlzT2JqZWN0KGUpKXtyZXR1cm4gZmFsc2V9cmV0dXJuIEp0KGUpfSl9fWlmKE9iamVjdC5nZXRQcm90b3R5cGVPZil7dmFyIFh0PSFpKGZ1bmN0aW9uKCl7T2JqZWN0LmdldFByb3RvdHlwZU9mKFwiZm9vXCIpfSk7aWYoIVh0KXt2YXIgS3Q9T2JqZWN0LmdldFByb3RvdHlwZU9mO1ooT2JqZWN0LFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihlKXtyZXR1cm4gS3QocmUuVG9PYmplY3QoZSkpfSl9fXZhciBadD1zJiZmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoUmVnRXhwLnByb3RvdHlwZSxcImZsYWdzXCIpO3JldHVybiBlJiZyZS5Jc0NhbGxhYmxlKGUuZ2V0KX0oKTtpZihzJiYhWnQpe3ZhciBZdD1mdW5jdGlvbiBmbGFncygpe2lmKCFyZS5UeXBlSXNPYmplY3QodGhpcykpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgY2FsbGVkIG9uIGluY29tcGF0aWJsZSB0eXBlOiBtdXN0IGJlIGFuIG9iamVjdC5cIil9dmFyIGU9XCJcIjtpZih0aGlzLmdsb2JhbCl7ZSs9XCJnXCJ9aWYodGhpcy5pZ25vcmVDYXNlKXtlKz1cImlcIn1pZih0aGlzLm11bHRpbGluZSl7ZSs9XCJtXCJ9aWYodGhpcy51bmljb2RlKXtlKz1cInVcIn1pZih0aGlzLnN0aWNreSl7ZSs9XCJ5XCJ9cmV0dXJuIGV9O08uZ2V0dGVyKFJlZ0V4cC5wcm90b3R5cGUsXCJmbGFnc1wiLFl0KX12YXIgUXQ9cyYmYShmdW5jdGlvbigpe3JldHVybiBTdHJpbmcobmV3IFJlZ0V4cCgvYS9nLFwiaVwiKSk9PT1cIi9hL2lcIn0pO3ZhciBlcj1ZJiZzJiZmdW5jdGlvbigpe3ZhciBlPS8uLztlW0cubWF0Y2hdPWZhbHNlO3JldHVybiBSZWdFeHAoZSk9PT1lfSgpO3ZhciB0cj1hKGZ1bmN0aW9uKCl7cmV0dXJuIFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh7c291cmNlOlwiYWJjXCJ9KT09PVwiL2FiYy9cIn0pO3ZhciBycj10ciYmYShmdW5jdGlvbigpe3JldHVybiBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoe3NvdXJjZTpcImFcIixmbGFnczpcImJcIn0pPT09XCIvYS9iXCJ9KTtpZighdHJ8fCFycil7dmFyIG5yPVJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmc7aChSZWdFeHAucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbiB0b1N0cmluZygpe3ZhciBlPXJlLlJlcXVpcmVPYmplY3RDb2VyY2libGUodGhpcyk7aWYoSy5yZWdleChlKSl7cmV0dXJuIHQobnIsZSl9dmFyIHI9dGUoZS5zb3VyY2UpO3ZhciBuPXRlKGUuZmxhZ3MpO3JldHVyblwiL1wiK3IrXCIvXCIrbn0sdHJ1ZSk7Ty5wcmVzZXJ2ZVRvU3RyaW5nKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcsbnIpfWlmKHMmJighUXR8fGVyKSl7dmFyIG9yPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoUmVnRXhwLnByb3RvdHlwZSxcImZsYWdzXCIpLmdldDt2YXIgaXI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihSZWdFeHAucHJvdG90eXBlLFwic291cmNlXCIpfHx7fTt2YXIgYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb3VyY2V9O3ZhciB1cj1yZS5Jc0NhbGxhYmxlKGlyLmdldCk/aXIuZ2V0OmFyO3ZhciBmcj1SZWdFeHA7dmFyIHNyPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIFJlZ0V4cChlLHQpe3ZhciByPXJlLklzUmVnRXhwKGUpO3ZhciBuPXRoaXMgaW5zdGFuY2VvZiBSZWdFeHA7aWYoIW4mJnImJnR5cGVvZiB0PT09XCJ1bmRlZmluZWRcIiYmZS5jb25zdHJ1Y3Rvcj09PVJlZ0V4cCl7cmV0dXJuIGV9dmFyIG89ZTt2YXIgaT10O2lmKEsucmVnZXgoZSkpe289cmUuQ2FsbCh1cixlKTtpPXR5cGVvZiB0PT09XCJ1bmRlZmluZWRcIj9yZS5DYWxsKG9yLGUpOnQ7cmV0dXJuIG5ldyBSZWdFeHAobyxpKX1lbHNlIGlmKHIpe289ZS5zb3VyY2U7aT10eXBlb2YgdD09PVwidW5kZWZpbmVkXCI/ZS5mbGFnczp0fXJldHVybiBuZXcgZnIoZSx0KX19KCk7ZGUoZnIsc3IseyRpbnB1dDp0cnVlfSk7UmVnRXhwPXNyO08ucmVkZWZpbmUoUyxcIlJlZ0V4cFwiLHNyKX1pZihzKXt2YXIgY3I9e2lucHV0OlwiJF9cIixsYXN0TWF0Y2g6XCIkJlwiLGxhc3RQYXJlbjpcIiQrXCIsbGVmdENvbnRleHQ6XCIkYFwiLHJpZ2h0Q29udGV4dDpcIiQnXCJ9O2wobihjciksZnVuY3Rpb24oZSl7aWYoZSBpbiBSZWdFeHAmJiEoY3JbZV1pbiBSZWdFeHApKXtPLmdldHRlcihSZWdFeHAsY3JbZV0sZnVuY3Rpb24gZ2V0KCl7cmV0dXJuIFJlZ0V4cFtlXX0pfX0pfW1lKFJlZ0V4cCk7dmFyIGxyPTEvTnVtYmVyLkVQU0lMT047dmFyIHByPWZ1bmN0aW9uIHJvdW5kVGllc1RvRXZlbihlKXtyZXR1cm4gZStsci1scn07dmFyIHZyPU1hdGgucG93KDIsLTIzKTt2YXIgeXI9TWF0aC5wb3coMiwxMjcpKigyLXZyKTt2YXIgaHI9TWF0aC5wb3coMiwtMTI2KTt2YXIgYnI9TWF0aC5FO3ZhciBncj1NYXRoLkxPRzJFO3ZhciBkcj1NYXRoLkxPRzEwRTt2YXIgT3I9TnVtYmVyLnByb3RvdHlwZS5jbHo7ZGVsZXRlIE51bWJlci5wcm90b3R5cGUuY2x6O3ZhciBtcj17YWNvc2g6ZnVuY3Rpb24gYWNvc2goZSl7dmFyIHQ9TnVtYmVyKGUpO2lmKFYodCl8fGU8MSl7cmV0dXJuIE5hTn1pZih0PT09MSl7cmV0dXJuIDB9aWYodD09PUluZmluaXR5KXtyZXR1cm4gdH1yZXR1cm4gTCh0L2JyK0QodCsxKSpEKHQtMSkvYnIpKzF9LGFzaW5oOmZ1bmN0aW9uIGFzaW5oKGUpe3ZhciB0PU51bWJlcihlKTtpZih0PT09MHx8IVQodCkpe3JldHVybiB0fXJldHVybiB0PDA/LWFzaW5oKC10KTpMKHQrRCh0KnQrMSkpfSxhdGFuaDpmdW5jdGlvbiBhdGFuaChlKXt2YXIgdD1OdW1iZXIoZSk7aWYoVih0KXx8dDwtMXx8dD4xKXtyZXR1cm4gTmFOfWlmKHQ9PT0tMSl7cmV0dXJuLUluZmluaXR5fWlmKHQ9PT0xKXtyZXR1cm4gSW5maW5pdHl9aWYodD09PTApe3JldHVybiB0fXJldHVybi41KkwoKDErdCkvKDEtdCkpfSxjYnJ0OmZ1bmN0aW9uIGNicnQoZSl7dmFyIHQ9TnVtYmVyKGUpO2lmKHQ9PT0wKXtyZXR1cm4gdH12YXIgcj10PDA7dmFyIG47aWYocil7dD0tdH1pZih0PT09SW5maW5pdHkpe249SW5maW5pdHl9ZWxzZXtuPUYoTCh0KS8zKTtuPSh0LyhuKm4pKzIqbikvM31yZXR1cm4gcj8tbjpufSxjbHozMjpmdW5jdGlvbiBjbHozMihlKXt2YXIgdD1OdW1iZXIoZSk7dmFyIHI9cmUuVG9VaW50MzIodCk7aWYocj09PTApe3JldHVybiAzMn1yZXR1cm4gT3I/cmUuQ2FsbChPcixyKTozMS1fKEwocisuNSkqZ3IpfSxjb3NoOmZ1bmN0aW9uIGNvc2goZSl7dmFyIHQ9TnVtYmVyKGUpO2lmKHQ9PT0wKXtyZXR1cm4gMX1pZihWKHQpKXtyZXR1cm4gTmFOfWlmKCFUKHQpKXtyZXR1cm4gSW5maW5pdHl9aWYodDwwKXt0PS10fWlmKHQ+MjEpe3JldHVybiBGKHQpLzJ9cmV0dXJuKEYodCkrRigtdCkpLzJ9LGV4cG0xOmZ1bmN0aW9uIGV4cG0xKGUpe3ZhciB0PU51bWJlcihlKTtpZih0PT09LUluZmluaXR5KXtyZXR1cm4tMX1pZighVCh0KXx8dD09PTApe3JldHVybiB0fWlmKGsodCk+LjUpe3JldHVybiBGKHQpLTF9dmFyIHI9dDt2YXIgbj0wO3ZhciBvPTE7d2hpbGUobityIT09bil7bis9cjtvKz0xO3IqPXQvb31yZXR1cm4gbn0saHlwb3Q6ZnVuY3Rpb24gaHlwb3QoZSx0KXt2YXIgcj0wO3ZhciBuPTA7Zm9yKHZhciBvPTA7bzxhcmd1bWVudHMubGVuZ3RoOysrbyl7dmFyIGk9ayhOdW1iZXIoYXJndW1lbnRzW29dKSk7aWYobjxpKXtyKj1uL2kqKG4vaSk7cis9MTtuPWl9ZWxzZXtyKz1pPjA/aS9uKihpL24pOml9fXJldHVybiBuPT09SW5maW5pdHk/SW5maW5pdHk6bipEKHIpfSxsb2cyOmZ1bmN0aW9uIGxvZzIoZSl7cmV0dXJuIEwoZSkqZ3J9LGxvZzEwOmZ1bmN0aW9uIGxvZzEwKGUpe3JldHVybiBMKGUpKmRyfSxsb2cxcDpmdW5jdGlvbiBsb2cxcChlKXt2YXIgdD1OdW1iZXIoZSk7aWYodDwtMXx8Vih0KSl7cmV0dXJuIE5hTn1pZih0PT09MHx8dD09PUluZmluaXR5KXtyZXR1cm4gdH1pZih0PT09LTEpe3JldHVybi1JbmZpbml0eX1yZXR1cm4gMSt0LTE9PT0wP3Q6dCooTCgxK3QpLygxK3QtMSkpfSxzaWduOiQsc2luaDpmdW5jdGlvbiBzaW5oKGUpe3ZhciB0PU51bWJlcihlKTtpZighVCh0KXx8dD09PTApe3JldHVybiB0fWlmKGsodCk8MSl7cmV0dXJuKE1hdGguZXhwbTEodCktTWF0aC5leHBtMSgtdCkpLzJ9cmV0dXJuKEYodC0xKS1GKC10LTEpKSpici8yfSx0YW5oOmZ1bmN0aW9uIHRhbmgoZSl7dmFyIHQ9TnVtYmVyKGUpO2lmKFYodCl8fHQ9PT0wKXtyZXR1cm4gdH1pZih0Pj0yMCl7cmV0dXJuIDF9aWYodDw9LTIwKXtyZXR1cm4tMX1yZXR1cm4oTWF0aC5leHBtMSh0KS1NYXRoLmV4cG0xKC10KSkvKEYodCkrRigtdCkpfSx0cnVuYzpmdW5jdGlvbiB0cnVuYyhlKXt2YXIgdD1OdW1iZXIoZSk7cmV0dXJuIHQ8MD8tXygtdCk6Xyh0KX0saW11bDpmdW5jdGlvbiBpbXVsKGUsdCl7dmFyIHI9cmUuVG9VaW50MzIoZSk7dmFyIG49cmUuVG9VaW50MzIodCk7dmFyIG89cj4+PjE2JjY1NTM1O3ZhciBpPXImNjU1MzU7dmFyIGE9bj4+PjE2JjY1NTM1O3ZhciB1PW4mNjU1MzU7cmV0dXJuIGkqdSsobyp1K2kqYTw8MTY+Pj4wKXwwfSxmcm91bmQ6ZnVuY3Rpb24gZnJvdW5kKGUpe3ZhciB0PU51bWJlcihlKTtpZih0PT09MHx8dD09PUluZmluaXR5fHx0PT09LUluZmluaXR5fHxWKHQpKXtyZXR1cm4gdH12YXIgcj0kKHQpO3ZhciBuPWsodCk7aWYobjxocil7cmV0dXJuIHIqcHIobi9oci92cikqaHIqdnJ9dmFyIG89KDErdnIvTnVtYmVyLkVQU0lMT04pKm47dmFyIGk9by0oby1uKTtpZihpPnlyfHxWKGkpKXtyZXR1cm4gcipJbmZpbml0eX1yZXR1cm4gcippfX07YihNYXRoLG1yKTtoKE1hdGgsXCJsb2cxcFwiLG1yLmxvZzFwLE1hdGgubG9nMXAoLTFlLTE3KSE9PS0xZS0xNyk7aChNYXRoLFwiYXNpbmhcIixtci5hc2luaCxNYXRoLmFzaW5oKC0xZTcpIT09LU1hdGguYXNpbmgoMWU3KSk7aChNYXRoLFwidGFuaFwiLG1yLnRhbmgsTWF0aC50YW5oKC0yZS0xNykhPT0tMmUtMTcpO2goTWF0aCxcImFjb3NoXCIsbXIuYWNvc2gsTWF0aC5hY29zaChOdW1iZXIuTUFYX1ZBTFVFKT09PUluZmluaXR5KTtoKE1hdGgsXCJjYnJ0XCIsbXIuY2JydCxNYXRoLmFicygxLU1hdGguY2JydCgxZS0zMDApLzFlLTEwMCkvTnVtYmVyLkVQU0lMT04+OCk7aChNYXRoLFwic2luaFwiLG1yLnNpbmgsTWF0aC5zaW5oKC0yZS0xNykhPT0tMmUtMTcpO3ZhciB3cj1NYXRoLmV4cG0xKDEwKTtoKE1hdGgsXCJleHBtMVwiLG1yLmV4cG0xLHdyPjIyMDI1LjQ2NTc5NDgwNjcxOHx8d3I8MjIwMjUuNDY1Nzk0ODA2NzE4KTt2YXIganI9TWF0aC5yb3VuZDt2YXIgU3I9TWF0aC5yb3VuZCguNS1OdW1iZXIuRVBTSUxPTi80KT09PTAmJk1hdGgucm91bmQoLS41K051bWJlci5FUFNJTE9OLzMuOTkpPT09MTt2YXIgVHI9bHIrMTt2YXIgSXI9Mipsci0xO3ZhciBFcj1bVHIsSXJdLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLnJvdW5kKGUpPT09ZX0pO2goTWF0aCxcInJvdW5kXCIsZnVuY3Rpb24gcm91bmQoZSl7dmFyIHQ9XyhlKTt2YXIgcj10PT09LTE/LTA6dCsxO3JldHVybiBlLXQ8LjU/dDpyfSwhU3J8fCFFcik7Ty5wcmVzZXJ2ZVRvU3RyaW5nKE1hdGgucm91bmQsanIpO3ZhciBQcj1NYXRoLmltdWw7aWYoTWF0aC5pbXVsKDQyOTQ5NjcyOTUsNSkhPT0tNSl7TWF0aC5pbXVsPW1yLmltdWw7Ty5wcmVzZXJ2ZVRvU3RyaW5nKE1hdGguaW11bCxQcil9aWYoTWF0aC5pbXVsLmxlbmd0aCE9PTIpe1ooTWF0aCxcImltdWxcIixmdW5jdGlvbiBpbXVsKGUsdCl7cmV0dXJuIHJlLkNhbGwoUHIsTWF0aCxhcmd1bWVudHMpO1xufSl9dmFyIENyPWZ1bmN0aW9uKCl7dmFyIGU9Uy5zZXRUaW1lb3V0O2lmKHR5cGVvZiBlIT09XCJmdW5jdGlvblwiJiZ0eXBlb2YgZSE9PVwib2JqZWN0XCIpe3JldHVybn1yZS5Jc1Byb21pc2U9ZnVuY3Rpb24oZSl7aWYoIXJlLlR5cGVJc09iamVjdChlKSl7cmV0dXJuIGZhbHNlfWlmKHR5cGVvZiBlLl9wcm9taXNlPT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfTt2YXIgcj1mdW5jdGlvbihlKXtpZighcmUuSXNDb25zdHJ1Y3RvcihlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkJhZCBwcm9taXNlIGNvbnN0cnVjdG9yXCIpfXZhciB0PXRoaXM7dmFyIHI9ZnVuY3Rpb24oZSxyKXtpZih0LnJlc29sdmUhPT12b2lkIDB8fHQucmVqZWN0IT09dm9pZCAwKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmFkIFByb21pc2UgaW1wbGVtZW50YXRpb24hXCIpfXQucmVzb2x2ZT1lO3QucmVqZWN0PXJ9O3QucmVzb2x2ZT12b2lkIDA7dC5yZWplY3Q9dm9pZCAwO3QucHJvbWlzZT1uZXcgZShyKTtpZighKHJlLklzQ2FsbGFibGUodC5yZXNvbHZlKSYmcmUuSXNDYWxsYWJsZSh0LnJlamVjdCkpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmFkIHByb21pc2UgY29uc3RydWN0b3JcIil9fTt2YXIgbjtpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIiYmcmUuSXNDYWxsYWJsZSh3aW5kb3cucG9zdE1lc3NhZ2UpKXtuPWZ1bmN0aW9uKCl7dmFyIGU9W107dmFyIHQ9XCJ6ZXJvLXRpbWVvdXQtbWVzc2FnZVwiO3ZhciByPWZ1bmN0aW9uKHIpe00oZSxyKTt3aW5kb3cucG9zdE1lc3NhZ2UodCxcIipcIil9O3ZhciBuPWZ1bmN0aW9uKHIpe2lmKHIuc291cmNlPT09d2luZG93JiZyLmRhdGE9PT10KXtyLnN0b3BQcm9wYWdhdGlvbigpO2lmKGUubGVuZ3RoPT09MCl7cmV0dXJufXZhciBuPU4oZSk7bigpfX07d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsbix0cnVlKTtyZXR1cm4gcn19dmFyIG89ZnVuY3Rpb24oKXt2YXIgZT1TLlByb21pc2U7dmFyIHQ9ZSYmZS5yZXNvbHZlJiZlLnJlc29sdmUoKTtyZXR1cm4gdCYmZnVuY3Rpb24oZSl7cmV0dXJuIHQudGhlbihlKX19O3ZhciBpPXJlLklzQ2FsbGFibGUoUy5zZXRJbW1lZGlhdGUpP1Muc2V0SW1tZWRpYXRlOnR5cGVvZiBwcm9jZXNzPT09XCJvYmplY3RcIiYmcHJvY2Vzcy5uZXh0VGljaz9wcm9jZXNzLm5leHRUaWNrOm8oKXx8KHJlLklzQ2FsbGFibGUobik/bigpOmZ1bmN0aW9uKHQpe2UodCwwKX0pO3ZhciBhPWZ1bmN0aW9uKGUpe3JldHVybiBlfTt2YXIgdT1mdW5jdGlvbihlKXt0aHJvdyBlfTt2YXIgZj0wO3ZhciBzPTE7dmFyIGM9Mjt2YXIgbD0wO3ZhciBwPTE7dmFyIHY9Mjt2YXIgeT17fTt2YXIgaD1mdW5jdGlvbihlLHQscil7aShmdW5jdGlvbigpe2coZSx0LHIpfSl9O3ZhciBnPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvO2lmKHQ9PT15KXtyZXR1cm4gZShyKX10cnl7bj1lKHIpO289dC5yZXNvbHZlfWNhdGNoKGkpe249aTtvPXQucmVqZWN0fW8obil9O3ZhciBkPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5fcHJvbWlzZTt2YXIgbj1yLnJlYWN0aW9uTGVuZ3RoO2lmKG4+MCl7aChyLmZ1bGZpbGxSZWFjdGlvbkhhbmRsZXIwLHIucmVhY3Rpb25DYXBhYmlsaXR5MCx0KTtyLmZ1bGZpbGxSZWFjdGlvbkhhbmRsZXIwPXZvaWQgMDtyLnJlamVjdFJlYWN0aW9uczA9dm9pZCAwO3IucmVhY3Rpb25DYXBhYmlsaXR5MD12b2lkIDA7aWYobj4xKXtmb3IodmFyIG89MSxpPTA7bzxuO28rKyxpKz0zKXtoKHJbaStsXSxyW2krdl0sdCk7ZVtpK2xdPXZvaWQgMDtlW2krcF09dm9pZCAwO2VbaSt2XT12b2lkIDB9fX1yLnJlc3VsdD10O3Iuc3RhdGU9cztyLnJlYWN0aW9uTGVuZ3RoPTB9O3ZhciBPPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5fcHJvbWlzZTt2YXIgbj1yLnJlYWN0aW9uTGVuZ3RoO2lmKG4+MCl7aChyLnJlamVjdFJlYWN0aW9uSGFuZGxlcjAsci5yZWFjdGlvbkNhcGFiaWxpdHkwLHQpO3IuZnVsZmlsbFJlYWN0aW9uSGFuZGxlcjA9dm9pZCAwO3IucmVqZWN0UmVhY3Rpb25zMD12b2lkIDA7ci5yZWFjdGlvbkNhcGFiaWxpdHkwPXZvaWQgMDtpZihuPjEpe2Zvcih2YXIgbz0xLGk9MDtvPG47bysrLGkrPTMpe2gocltpK3BdLHJbaSt2XSx0KTtlW2krbF09dm9pZCAwO2VbaStwXT12b2lkIDA7ZVtpK3ZdPXZvaWQgMH19fXIucmVzdWx0PXQ7ci5zdGF0ZT1jO3IucmVhY3Rpb25MZW5ndGg9MH07dmFyIG09ZnVuY3Rpb24oZSl7dmFyIHQ9ZmFsc2U7dmFyIHI9ZnVuY3Rpb24ocil7dmFyIG47aWYodCl7cmV0dXJufXQ9dHJ1ZTtpZihyPT09ZSl7cmV0dXJuIE8oZSxuZXcgVHlwZUVycm9yKFwiU2VsZiByZXNvbHV0aW9uXCIpKX1pZighcmUuVHlwZUlzT2JqZWN0KHIpKXtyZXR1cm4gZChlLHIpfXRyeXtuPXIudGhlbn1jYXRjaChvKXtyZXR1cm4gTyhlLG8pfWlmKCFyZS5Jc0NhbGxhYmxlKG4pKXtyZXR1cm4gZChlLHIpfWkoZnVuY3Rpb24oKXtqKGUscixuKX0pfTt2YXIgbj1mdW5jdGlvbihyKXtpZih0KXtyZXR1cm59dD10cnVlO3JldHVybiBPKGUscil9O3JldHVybntyZXNvbHZlOnIscmVqZWN0Om59fTt2YXIgdz1mdW5jdGlvbihlLHIsbixvKXtpZihlPT09SSl7dChlLHIsbixvLHkpfWVsc2V7dChlLHIsbixvKX19O3ZhciBqPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1tKGUpO3ZhciBvPW4ucmVzb2x2ZTt2YXIgaT1uLnJlamVjdDt0cnl7dyhyLHQsbyxpKX1jYXRjaChhKXtpKGEpfX07dmFyIFQsSTt2YXIgRT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uIFByb21pc2UodCl7aWYoISh0aGlzIGluc3RhbmNlb2YgZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFByb21pc2UgcmVxdWlyZXMgXCJuZXdcIicpfWlmKHRoaXMmJnRoaXMuX3Byb21pc2Upe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgY29uc3RydWN0aW9uXCIpfWlmKCFyZS5Jc0NhbGxhYmxlKHQpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwibm90IGEgdmFsaWQgcmVzb2x2ZXJcIil9dmFyIHI9VGUodGhpcyxlLFQse19wcm9taXNlOntyZXN1bHQ6dm9pZCAwLHN0YXRlOmYscmVhY3Rpb25MZW5ndGg6MCxmdWxmaWxsUmVhY3Rpb25IYW5kbGVyMDp2b2lkIDAscmVqZWN0UmVhY3Rpb25IYW5kbGVyMDp2b2lkIDAscmVhY3Rpb25DYXBhYmlsaXR5MDp2b2lkIDB9fSk7dmFyIG49bShyKTt2YXIgbz1uLnJlamVjdDt0cnl7dChuLnJlc29sdmUsbyl9Y2F0Y2goaSl7byhpKX1yZXR1cm4gcn07cmV0dXJuIGV9KCk7VD1FLnByb3RvdHlwZTt2YXIgUD1mdW5jdGlvbihlLHQscixuKXt2YXIgbz1mYWxzZTtyZXR1cm4gZnVuY3Rpb24oaSl7aWYobyl7cmV0dXJufW89dHJ1ZTt0W2VdPWk7aWYoLS1uLmNvdW50PT09MCl7dmFyIGE9ci5yZXNvbHZlO2EodCl9fX07dmFyIEM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWUuaXRlcmF0b3I7dmFyIG89W107dmFyIGk9e2NvdW50OjF9O3ZhciBhLHU7dmFyIGY9MDt3aGlsZSh0cnVlKXt0cnl7YT1yZS5JdGVyYXRvclN0ZXAobik7aWYoYT09PWZhbHNlKXtlLmRvbmU9dHJ1ZTticmVha311PWEudmFsdWV9Y2F0Y2gocyl7ZS5kb25lPXRydWU7dGhyb3cgc31vW2ZdPXZvaWQgMDt2YXIgYz10LnJlc29sdmUodSk7dmFyIGw9UChmLG8scixpKTtpLmNvdW50Kz0xO3coYy50aGVuLGMsbCxyLnJlamVjdCk7Zis9MX1pZigtLWkuY291bnQ9PT0wKXt2YXIgcD1yLnJlc29sdmU7cChvKX1yZXR1cm4gci5wcm9taXNlfTt2YXIgeD1mdW5jdGlvbihlLHQscil7dmFyIG49ZS5pdGVyYXRvcjt2YXIgbyxpLGE7d2hpbGUodHJ1ZSl7dHJ5e289cmUuSXRlcmF0b3JTdGVwKG4pO2lmKG89PT1mYWxzZSl7ZS5kb25lPXRydWU7YnJlYWt9aT1vLnZhbHVlfWNhdGNoKHUpe2UuZG9uZT10cnVlO3Rocm93IHV9YT10LnJlc29sdmUoaSk7dyhhLnRoZW4sYSxyLnJlc29sdmUsci5yZWplY3QpfXJldHVybiByLnByb21pc2V9O2IoRSx7YWxsOmZ1bmN0aW9uIGFsbChlKXt2YXIgdD10aGlzO2lmKCFyZS5UeXBlSXNPYmplY3QodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJQcm9taXNlIGlzIG5vdCBvYmplY3RcIil9dmFyIG49bmV3IHIodCk7dmFyIG8saTt0cnl7bz1yZS5HZXRJdGVyYXRvcihlKTtpPXtpdGVyYXRvcjpvLGRvbmU6ZmFsc2V9O3JldHVybiBDKGksdCxuKX1jYXRjaChhKXt2YXIgdT1hO2lmKGkmJiFpLmRvbmUpe3RyeXtyZS5JdGVyYXRvckNsb3NlKG8sdHJ1ZSl9Y2F0Y2goZil7dT1mfX12YXIgcz1uLnJlamVjdDtzKHUpO3JldHVybiBuLnByb21pc2V9fSxyYWNlOmZ1bmN0aW9uIHJhY2UoZSl7dmFyIHQ9dGhpcztpZighcmUuVHlwZUlzT2JqZWN0KHQpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSBpcyBub3Qgb2JqZWN0XCIpfXZhciBuPW5ldyByKHQpO3ZhciBvLGk7dHJ5e289cmUuR2V0SXRlcmF0b3IoZSk7aT17aXRlcmF0b3I6byxkb25lOmZhbHNlfTtyZXR1cm4geChpLHQsbil9Y2F0Y2goYSl7dmFyIHU9YTtpZihpJiYhaS5kb25lKXt0cnl7cmUuSXRlcmF0b3JDbG9zZShvLHRydWUpfWNhdGNoKGYpe3U9Zn19dmFyIHM9bi5yZWplY3Q7cyh1KTtyZXR1cm4gbi5wcm9taXNlfX0scmVqZWN0OmZ1bmN0aW9uIHJlamVjdChlKXt2YXIgdD10aGlzO2lmKCFyZS5UeXBlSXNPYmplY3QodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgcHJvbWlzZSBjb25zdHJ1Y3RvclwiKX12YXIgbj1uZXcgcih0KTt2YXIgbz1uLnJlamVjdDtvKGUpO3JldHVybiBuLnByb21pc2V9LHJlc29sdmU6ZnVuY3Rpb24gcmVzb2x2ZShlKXt2YXIgdD10aGlzO2lmKCFyZS5UeXBlSXNPYmplY3QodCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgcHJvbWlzZSBjb25zdHJ1Y3RvclwiKX1pZihyZS5Jc1Byb21pc2UoZSkpe3ZhciBuPWUuY29uc3RydWN0b3I7aWYobj09PXQpe3JldHVybiBlfX12YXIgbz1uZXcgcih0KTt2YXIgaT1vLnJlc29sdmU7aShlKTtyZXR1cm4gby5wcm9taXNlfX0pO2IoVCx7XCJjYXRjaFwiOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnRoZW4obnVsbCxlKX0sdGhlbjpmdW5jdGlvbiB0aGVuKGUsdCl7dmFyIG49dGhpcztpZighcmUuSXNQcm9taXNlKG4pKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwibm90IGEgcHJvbWlzZVwiKX12YXIgbz1yZS5TcGVjaWVzQ29uc3RydWN0b3IobixFKTt2YXIgaTt2YXIgYj1hcmd1bWVudHMubGVuZ3RoPjImJmFyZ3VtZW50c1syXT09PXk7aWYoYiYmbz09PUUpe2k9eX1lbHNle2k9bmV3IHIobyl9dmFyIGc9cmUuSXNDYWxsYWJsZShlKT9lOmE7dmFyIGQ9cmUuSXNDYWxsYWJsZSh0KT90OnU7dmFyIE89bi5fcHJvbWlzZTt2YXIgbTtpZihPLnN0YXRlPT09Zil7aWYoTy5yZWFjdGlvbkxlbmd0aD09PTApe08uZnVsZmlsbFJlYWN0aW9uSGFuZGxlcjA9ZztPLnJlamVjdFJlYWN0aW9uSGFuZGxlcjA9ZDtPLnJlYWN0aW9uQ2FwYWJpbGl0eTA9aX1lbHNle3ZhciB3PTMqKE8ucmVhY3Rpb25MZW5ndGgtMSk7T1t3K2xdPWc7T1t3K3BdPWQ7T1t3K3ZdPWl9Ty5yZWFjdGlvbkxlbmd0aCs9MX1lbHNlIGlmKE8uc3RhdGU9PT1zKXttPU8ucmVzdWx0O2goZyxpLG0pfWVsc2UgaWYoTy5zdGF0ZT09PWMpe209Ty5yZXN1bHQ7aChkLGksbSl9ZWxzZXt0aHJvdyBuZXcgVHlwZUVycm9yKFwidW5leHBlY3RlZCBQcm9taXNlIHN0YXRlXCIpfXJldHVybiBpLnByb21pc2V9fSk7eT1uZXcgcihFKTtJPVQudGhlbjtyZXR1cm4gRX0oKTtpZihTLlByb21pc2Upe2RlbGV0ZSBTLlByb21pc2UuYWNjZXB0O2RlbGV0ZSBTLlByb21pc2UuZGVmZXI7ZGVsZXRlIFMuUHJvbWlzZS5wcm90b3R5cGUuY2hhaW59aWYodHlwZW9mIENyPT09XCJmdW5jdGlvblwiKXtiKFMse1Byb21pc2U6Q3J9KTt2YXIgTXI9dyhTLlByb21pc2UsZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVzb2x2ZSg0MikudGhlbihmdW5jdGlvbigpe30paW5zdGFuY2VvZiBlfSk7dmFyIHhyPSFpKGZ1bmN0aW9uKCl7Uy5Qcm9taXNlLnJlamVjdCg0MikudGhlbihudWxsLDUpLnRoZW4obnVsbCxXKX0pO3ZhciBOcj1pKGZ1bmN0aW9uKCl7Uy5Qcm9taXNlLmNhbGwoMyxXKX0pO3ZhciBBcj1mdW5jdGlvbihlKXt2YXIgdD1lLnJlc29sdmUoNSk7dC5jb25zdHJ1Y3Rvcj17fTt2YXIgcj1lLnJlc29sdmUodCk7dHJ5e3IudGhlbihudWxsLFcpLnRoZW4obnVsbCxXKX1jYXRjaChuKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gdD09PXJ9KFMuUHJvbWlzZSk7dmFyIFJyPXMmJmZ1bmN0aW9uKCl7dmFyIGU9MDt2YXIgdD1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJ0aGVuXCIse2dldDpmdW5jdGlvbigpe2UrPTF9fSk7UHJvbWlzZS5yZXNvbHZlKHQpO3JldHVybiBlPT09MX0oKTt2YXIgX3I9ZnVuY3Rpb24gQmFkUmVzb2x2ZXJQcm9taXNlKGUpe3ZhciB0PW5ldyBQcm9taXNlKGUpO2UoMyxmdW5jdGlvbigpe30pO3RoaXMudGhlbj10LnRoZW47dGhpcy5jb25zdHJ1Y3Rvcj1CYWRSZXNvbHZlclByb21pc2V9O19yLnByb3RvdHlwZT1Qcm9taXNlLnByb3RvdHlwZTtfci5hbGw9UHJvbWlzZS5hbGw7dmFyIGtyPWEoZnVuY3Rpb24oKXtyZXR1cm4hIV9yLmFsbChbMSwyXSl9KTtpZighTXJ8fCF4cnx8IU5yfHxBcnx8IVJyfHxrcil7UHJvbWlzZT1DcjtaKFMsXCJQcm9taXNlXCIsQ3IpfWlmKFByb21pc2UuYWxsLmxlbmd0aCE9PTEpe3ZhciBGcj1Qcm9taXNlLmFsbDtaKFByb21pc2UsXCJhbGxcIixmdW5jdGlvbiBhbGwoZSl7cmV0dXJuIHJlLkNhbGwoRnIsdGhpcyxhcmd1bWVudHMpfSl9aWYoUHJvbWlzZS5yYWNlLmxlbmd0aCE9PTEpe3ZhciBMcj1Qcm9taXNlLnJhY2U7WihQcm9taXNlLFwicmFjZVwiLGZ1bmN0aW9uIHJhY2UoZSl7cmV0dXJuIHJlLkNhbGwoTHIsdGhpcyxhcmd1bWVudHMpfSl9aWYoUHJvbWlzZS5yZXNvbHZlLmxlbmd0aCE9PTEpe3ZhciBEcj1Qcm9taXNlLnJlc29sdmU7WihQcm9taXNlLFwicmVzb2x2ZVwiLGZ1bmN0aW9uIHJlc29sdmUoZSl7cmV0dXJuIHJlLkNhbGwoRHIsdGhpcyxhcmd1bWVudHMpfSl9aWYoUHJvbWlzZS5yZWplY3QubGVuZ3RoIT09MSl7dmFyIHpyPVByb21pc2UucmVqZWN0O1ooUHJvbWlzZSxcInJlamVjdFwiLGZ1bmN0aW9uIHJlamVjdChlKXtyZXR1cm4gcmUuQ2FsbCh6cix0aGlzLGFyZ3VtZW50cyl9KX13dChQcm9taXNlLFwiYWxsXCIpO3d0KFByb21pc2UsXCJyYWNlXCIpO3d0KFByb21pc2UsXCJyZXNvbHZlXCIpO3d0KFByb21pc2UsXCJyZWplY3RcIik7bWUoUHJvbWlzZSl9dmFyIHFyPWZ1bmN0aW9uKGUpe3ZhciB0PW4ocChlLGZ1bmN0aW9uKGUsdCl7ZVt0XT10cnVlO3JldHVybiBlfSx7fSkpO3JldHVybiBlLmpvaW4oXCI6XCIpPT09dC5qb2luKFwiOlwiKX07dmFyIFdyPXFyKFtcInpcIixcImFcIixcImJiXCJdKTt2YXIgR3I9cXIoW1wielwiLDEsXCJhXCIsXCIzXCIsMl0pO2lmKHMpe3ZhciBIcj1mdW5jdGlvbiBmYXN0a2V5KGUpe2lmKCFXcil7cmV0dXJuIG51bGx9aWYodHlwZW9mIGU9PT1cInVuZGVmaW5lZFwifHxlPT09bnVsbCl7cmV0dXJuXCJeXCIrcmUuVG9TdHJpbmcoZSl9ZWxzZSBpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe3JldHVyblwiJFwiK2V9ZWxzZSBpZih0eXBlb2YgZT09PVwibnVtYmVyXCIpe2lmKCFHcil7cmV0dXJuXCJuXCIrZX1yZXR1cm4gZX1lbHNlIGlmKHR5cGVvZiBlPT09XCJib29sZWFuXCIpe3JldHVyblwiYlwiK2V9cmV0dXJuIG51bGx9O3ZhciBWcj1mdW5jdGlvbiBlbXB0eU9iamVjdCgpe3JldHVybiBPYmplY3QuY3JlYXRlP09iamVjdC5jcmVhdGUobnVsbCk6e319O3ZhciBCcj1mdW5jdGlvbiBhZGRJdGVyYWJsZVRvTWFwKGUsbixvKXtpZihyKG8pfHxLLnN0cmluZyhvKSl7bChvLGZ1bmN0aW9uKGUpe2lmKCFyZS5UeXBlSXNPYmplY3QoZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJJdGVyYXRvciB2YWx1ZSBcIitlK1wiIGlzIG5vdCBhbiBlbnRyeSBvYmplY3RcIil9bi5zZXQoZVswXSxlWzFdKX0pfWVsc2UgaWYobyBpbnN0YW5jZW9mIGUpe3QoZS5wcm90b3R5cGUuZm9yRWFjaCxvLGZ1bmN0aW9uKGUsdCl7bi5zZXQodCxlKX0pfWVsc2V7dmFyIGksYTtpZihvIT09bnVsbCYmdHlwZW9mIG8hPT1cInVuZGVmaW5lZFwiKXthPW4uc2V0O2lmKCFyZS5Jc0NhbGxhYmxlKGEpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiYmFkIG1hcFwiKX1pPXJlLkdldEl0ZXJhdG9yKG8pfWlmKHR5cGVvZiBpIT09XCJ1bmRlZmluZWRcIil7d2hpbGUodHJ1ZSl7dmFyIHU9cmUuSXRlcmF0b3JTdGVwKGkpO2lmKHU9PT1mYWxzZSl7YnJlYWt9dmFyIGY9dS52YWx1ZTt0cnl7aWYoIXJlLlR5cGVJc09iamVjdChmKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkl0ZXJhdG9yIHZhbHVlIFwiK2YrXCIgaXMgbm90IGFuIGVudHJ5IG9iamVjdFwiKX10KGEsbixmWzBdLGZbMV0pfWNhdGNoKHMpe3JlLkl0ZXJhdG9yQ2xvc2UoaSx0cnVlKTt0aHJvdyBzfX19fX07dmFyICRyPWZ1bmN0aW9uIGFkZEl0ZXJhYmxlVG9TZXQoZSxuLG8pe2lmKHIobyl8fEsuc3RyaW5nKG8pKXtsKG8sZnVuY3Rpb24oZSl7bi5hZGQoZSl9KX1lbHNlIGlmKG8gaW5zdGFuY2VvZiBlKXt0KGUucHJvdG90eXBlLmZvckVhY2gsbyxmdW5jdGlvbihlKXtuLmFkZChlKX0pfWVsc2V7dmFyIGksYTtpZihvIT09bnVsbCYmdHlwZW9mIG8hPT1cInVuZGVmaW5lZFwiKXthPW4uYWRkO2lmKCFyZS5Jc0NhbGxhYmxlKGEpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiYmFkIHNldFwiKX1pPXJlLkdldEl0ZXJhdG9yKG8pfWlmKHR5cGVvZiBpIT09XCJ1bmRlZmluZWRcIil7d2hpbGUodHJ1ZSl7dmFyIHU9cmUuSXRlcmF0b3JTdGVwKGkpO2lmKHU9PT1mYWxzZSl7YnJlYWt9dmFyIGY9dS52YWx1ZTt0cnl7dChhLG4sZil9Y2F0Y2gocyl7cmUuSXRlcmF0b3JDbG9zZShpLHRydWUpO3Rocm93IHN9fX19fTt2YXIgVXI9e01hcDpmdW5jdGlvbigpe3ZhciBlPXt9O3ZhciByPWZ1bmN0aW9uIE1hcEVudHJ5KGUsdCl7dGhpcy5rZXk9ZTt0aGlzLnZhbHVlPXQ7dGhpcy5uZXh0PW51bGw7dGhpcy5wcmV2PW51bGx9O3IucHJvdG90eXBlLmlzUmVtb3ZlZD1mdW5jdGlvbiBpc1JlbW92ZWQoKXtyZXR1cm4gdGhpcy5rZXk9PT1lfTt2YXIgbj1mdW5jdGlvbiBpc01hcChlKXtyZXR1cm4hIWUuX2VzNm1hcH07dmFyIG89ZnVuY3Rpb24gcmVxdWlyZU1hcFNsb3QoZSx0KXtpZighcmUuVHlwZUlzT2JqZWN0KGUpfHwhbihlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBNYXAucHJvdG90eXBlLlwiK3QrXCIgY2FsbGVkIG9uIGluY29tcGF0aWJsZSByZWNlaXZlciBcIityZS5Ub1N0cmluZyhlKSl9fTt2YXIgaT1mdW5jdGlvbiBNYXBJdGVyYXRvcihlLHQpe28oZSxcIltbTWFwSXRlcmF0b3JdXVwiKTt0aGlzLmhlYWQ9ZS5faGVhZDt0aGlzLmk9dGhpcy5oZWFkO3RoaXMua2luZD10fTtpLnByb3RvdHlwZT17bmV4dDpmdW5jdGlvbiBuZXh0KCl7dmFyIGU9dGhpcy5pO3ZhciB0PXRoaXMua2luZDt2YXIgcj10aGlzLmhlYWQ7aWYodHlwZW9mIHRoaXMuaT09PVwidW5kZWZpbmVkXCIpe3JldHVybiBHZSgpfXdoaWxlKGUuaXNSZW1vdmVkKCkmJmUhPT1yKXtlPWUucHJldn12YXIgbjt3aGlsZShlLm5leHQhPT1yKXtlPWUubmV4dDtpZighZS5pc1JlbW92ZWQoKSl7aWYodD09PVwia2V5XCIpe249ZS5rZXl9ZWxzZSBpZih0PT09XCJ2YWx1ZVwiKXtuPWUudmFsdWV9ZWxzZXtuPVtlLmtleSxlLnZhbHVlXX10aGlzLmk9ZTtyZXR1cm4gR2Uobil9fXRoaXMuaT12b2lkIDA7cmV0dXJuIEdlKCl9fTt3ZShpLnByb3RvdHlwZSk7dmFyIGE7dmFyIHU9ZnVuY3Rpb24gTWFwKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgTWFwKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignQ29uc3RydWN0b3IgTWFwIHJlcXVpcmVzIFwibmV3XCInKX1pZih0aGlzJiZ0aGlzLl9lczZtYXApe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJCYWQgY29uc3RydWN0aW9uXCIpfXZhciBlPVRlKHRoaXMsTWFwLGEse19lczZtYXA6dHJ1ZSxfaGVhZDpudWxsLF9zdG9yYWdlOlZyKCksX3NpemU6MH0pO3ZhciB0PW5ldyByKG51bGwsbnVsbCk7dC5uZXh0PXQucHJldj10O2UuX2hlYWQ9dDtpZihhcmd1bWVudHMubGVuZ3RoPjApe0JyKE1hcCxlLGFyZ3VtZW50c1swXSl9cmV0dXJuIGV9O2E9dS5wcm90b3R5cGU7Ty5nZXR0ZXIoYSxcInNpemVcIixmdW5jdGlvbigpe2lmKHR5cGVvZiB0aGlzLl9zaXplPT09XCJ1bmRlZmluZWRcIil7dGhyb3cgbmV3IFR5cGVFcnJvcihcInNpemUgbWV0aG9kIGNhbGxlZCBvbiBpbmNvbXBhdGlibGUgTWFwXCIpfXJldHVybiB0aGlzLl9zaXplfSk7YihhLHtnZXQ6ZnVuY3Rpb24gZ2V0KGUpe28odGhpcyxcImdldFwiKTt2YXIgdD1IcihlKTtpZih0IT09bnVsbCl7dmFyIHI9dGhpcy5fc3RvcmFnZVt0XTtpZihyKXtyZXR1cm4gci52YWx1ZX1lbHNle3JldHVybn19dmFyIG49dGhpcy5faGVhZDt2YXIgaT1uO3doaWxlKChpPWkubmV4dCkhPT1uKXtpZihyZS5TYW1lVmFsdWVaZXJvKGkua2V5LGUpKXtyZXR1cm4gaS52YWx1ZX19fSxoYXM6ZnVuY3Rpb24gaGFzKGUpe28odGhpcyxcImhhc1wiKTt2YXIgdD1IcihlKTtpZih0IT09bnVsbCl7cmV0dXJuIHR5cGVvZiB0aGlzLl9zdG9yYWdlW3RdIT09XCJ1bmRlZmluZWRcIn12YXIgcj10aGlzLl9oZWFkO3ZhciBuPXI7d2hpbGUoKG49bi5uZXh0KSE9PXIpe2lmKHJlLlNhbWVWYWx1ZVplcm8obi5rZXksZSkpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LHNldDpmdW5jdGlvbiBzZXQoZSx0KXtvKHRoaXMsXCJzZXRcIik7dmFyIG49dGhpcy5faGVhZDt2YXIgaT1uO3ZhciBhO3ZhciB1PUhyKGUpO2lmKHUhPT1udWxsKXtpZih0eXBlb2YgdGhpcy5fc3RvcmFnZVt1XSE9PVwidW5kZWZpbmVkXCIpe3RoaXMuX3N0b3JhZ2VbdV0udmFsdWU9dDtyZXR1cm4gdGhpc31lbHNle2E9dGhpcy5fc3RvcmFnZVt1XT1uZXcgcihlLHQpO2k9bi5wcmV2fX13aGlsZSgoaT1pLm5leHQpIT09bil7aWYocmUuU2FtZVZhbHVlWmVybyhpLmtleSxlKSl7aS52YWx1ZT10O3JldHVybiB0aGlzfX1hPWF8fG5ldyByKGUsdCk7aWYocmUuU2FtZVZhbHVlKC0wLGUpKXthLmtleT0rMH1hLm5leHQ9dGhpcy5faGVhZDthLnByZXY9dGhpcy5faGVhZC5wcmV2O2EucHJldi5uZXh0PWE7YS5uZXh0LnByZXY9YTt0aGlzLl9zaXplKz0xO3JldHVybiB0aGlzfSxcImRlbGV0ZVwiOmZ1bmN0aW9uKHQpe28odGhpcyxcImRlbGV0ZVwiKTt2YXIgcj10aGlzLl9oZWFkO3ZhciBuPXI7dmFyIGk9SHIodCk7aWYoaSE9PW51bGwpe2lmKHR5cGVvZiB0aGlzLl9zdG9yYWdlW2ldPT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIGZhbHNlfW49dGhpcy5fc3RvcmFnZVtpXS5wcmV2O2RlbGV0ZSB0aGlzLl9zdG9yYWdlW2ldfXdoaWxlKChuPW4ubmV4dCkhPT1yKXtpZihyZS5TYW1lVmFsdWVaZXJvKG4ua2V5LHQpKXtuLmtleT1uLnZhbHVlPWU7bi5wcmV2Lm5leHQ9bi5uZXh0O24ubmV4dC5wcmV2PW4ucHJldjt0aGlzLl9zaXplLT0xO3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LGNsZWFyOmZ1bmN0aW9uIGNsZWFyKCl7byh0aGlzLFwiY2xlYXJcIik7dGhpcy5fc2l6ZT0wO3RoaXMuX3N0b3JhZ2U9VnIoKTt2YXIgdD10aGlzLl9oZWFkO3ZhciByPXQ7dmFyIG49ci5uZXh0O3doaWxlKChyPW4pIT09dCl7ci5rZXk9ci52YWx1ZT1lO249ci5uZXh0O3IubmV4dD1yLnByZXY9dH10Lm5leHQ9dC5wcmV2PXR9LGtleXM6ZnVuY3Rpb24ga2V5cygpe28odGhpcyxcImtleXNcIik7cmV0dXJuIG5ldyBpKHRoaXMsXCJrZXlcIil9LHZhbHVlczpmdW5jdGlvbiB2YWx1ZXMoKXtvKHRoaXMsXCJ2YWx1ZXNcIik7cmV0dXJuIG5ldyBpKHRoaXMsXCJ2YWx1ZVwiKX0sZW50cmllczpmdW5jdGlvbiBlbnRyaWVzKCl7byh0aGlzLFwiZW50cmllc1wiKTtyZXR1cm4gbmV3IGkodGhpcyxcImtleSt2YWx1ZVwiKX0sZm9yRWFjaDpmdW5jdGlvbiBmb3JFYWNoKGUpe28odGhpcyxcImZvckVhY2hcIik7dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4xP2FyZ3VtZW50c1sxXTpudWxsO3ZhciBuPXRoaXMuZW50cmllcygpO2Zvcih2YXIgaT1uLm5leHQoKTshaS5kb25lO2k9bi5uZXh0KCkpe2lmKHIpe3QoZSxyLGkudmFsdWVbMV0saS52YWx1ZVswXSx0aGlzKX1lbHNle2UoaS52YWx1ZVsxXSxpLnZhbHVlWzBdLHRoaXMpfX19fSk7d2UoYSxhLmVudHJpZXMpO3JldHVybiB1fSgpLFNldDpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uIGlzU2V0KGUpe3JldHVybiBlLl9lczZzZXQmJnR5cGVvZiBlLl9zdG9yYWdlIT09XCJ1bmRlZmluZWRcIn07dmFyIHI9ZnVuY3Rpb24gcmVxdWlyZVNldFNsb3QodCxyKXtpZighcmUuVHlwZUlzT2JqZWN0KHQpfHwhZSh0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlNldC5wcm90b3R5cGUuXCIrcitcIiBjYWxsZWQgb24gaW5jb21wYXRpYmxlIHJlY2VpdmVyIFwiK3JlLlRvU3RyaW5nKHQpKX19O3ZhciBvO3ZhciBpPWZ1bmN0aW9uIFNldCgpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFNldCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnN0cnVjdG9yIFNldCByZXF1aXJlcyBcIm5ld1wiJyl9aWYodGhpcyYmdGhpcy5fZXM2c2V0KXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiQmFkIGNvbnN0cnVjdGlvblwiKX12YXIgZT1UZSh0aGlzLFNldCxvLHtfZXM2c2V0OnRydWUsXCJbW1NldERhdGFdXVwiOm51bGwsX3N0b3JhZ2U6VnIoKX0pO2lmKCFlLl9lczZzZXQpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJiYWQgc2V0XCIpfWlmKGFyZ3VtZW50cy5sZW5ndGg+MCl7JHIoU2V0LGUsYXJndW1lbnRzWzBdKX1yZXR1cm4gZX07bz1pLnByb3RvdHlwZTt2YXIgYT1mdW5jdGlvbihlKXt2YXIgdD1lO2lmKHQ9PT1cIl5udWxsXCIpe3JldHVybiBudWxsfWVsc2UgaWYodD09PVwiXnVuZGVmaW5lZFwiKXtyZXR1cm4gdm9pZCAwfWVsc2V7dmFyIHI9dC5jaGFyQXQoMCk7aWYocj09PVwiJFwiKXtyZXR1cm4gQyh0LDEpfWVsc2UgaWYocj09PVwiblwiKXtyZXR1cm4rQyh0LDEpfWVsc2UgaWYocj09PVwiYlwiKXtyZXR1cm4gdD09PVwiYnRydWVcIn19cmV0dXJuK3R9O3ZhciB1PWZ1bmN0aW9uIGVuc3VyZU1hcChlKXtpZighZVtcIltbU2V0RGF0YV1dXCJdKXt2YXIgdD1lW1wiW1tTZXREYXRhXV1cIl09bmV3IFVyLk1hcDtsKG4oZS5fc3RvcmFnZSksZnVuY3Rpb24oZSl7dmFyIHI9YShlKTt0LnNldChyLHIpfSk7ZVtcIltbU2V0RGF0YV1dXCJdPXR9ZS5fc3RvcmFnZT1udWxsfTtPLmdldHRlcihpLnByb3RvdHlwZSxcInNpemVcIixmdW5jdGlvbigpe3IodGhpcyxcInNpemVcIik7aWYodGhpcy5fc3RvcmFnZSl7cmV0dXJuIG4odGhpcy5fc3RvcmFnZSkubGVuZ3RofXUodGhpcyk7cmV0dXJuIHRoaXNbXCJbW1NldERhdGFdXVwiXS5zaXplfSk7YihpLnByb3RvdHlwZSx7aGFzOmZ1bmN0aW9uIGhhcyhlKXtyKHRoaXMsXCJoYXNcIik7dmFyIHQ7aWYodGhpcy5fc3RvcmFnZSYmKHQ9SHIoZSkpIT09bnVsbCl7cmV0dXJuISF0aGlzLl9zdG9yYWdlW3RdfXUodGhpcyk7cmV0dXJuIHRoaXNbXCJbW1NldERhdGFdXVwiXS5oYXMoZSl9LGFkZDpmdW5jdGlvbiBhZGQoZSl7cih0aGlzLFwiYWRkXCIpO3ZhciB0O2lmKHRoaXMuX3N0b3JhZ2UmJih0PUhyKGUpKSE9PW51bGwpe3RoaXMuX3N0b3JhZ2VbdF09dHJ1ZTtyZXR1cm4gdGhpc311KHRoaXMpO3RoaXNbXCJbW1NldERhdGFdXVwiXS5zZXQoZSxlKTtyZXR1cm4gdGhpc30sXCJkZWxldGVcIjpmdW5jdGlvbihlKXtyKHRoaXMsXCJkZWxldGVcIik7dmFyIHQ7aWYodGhpcy5fc3RvcmFnZSYmKHQ9SHIoZSkpIT09bnVsbCl7dmFyIG49eih0aGlzLl9zdG9yYWdlLHQpO3JldHVybiBkZWxldGUgdGhpcy5fc3RvcmFnZVt0XSYmbn11KHRoaXMpO3JldHVybiB0aGlzW1wiW1tTZXREYXRhXV1cIl1bXCJkZWxldGVcIl0oZSl9LGNsZWFyOmZ1bmN0aW9uIGNsZWFyKCl7cih0aGlzLFwiY2xlYXJcIik7aWYodGhpcy5fc3RvcmFnZSl7dGhpcy5fc3RvcmFnZT1WcigpfWlmKHRoaXNbXCJbW1NldERhdGFdXVwiXSl7dGhpc1tcIltbU2V0RGF0YV1dXCJdLmNsZWFyKCl9fSx2YWx1ZXM6ZnVuY3Rpb24gdmFsdWVzKCl7cih0aGlzLFwidmFsdWVzXCIpO3UodGhpcyk7cmV0dXJuIHRoaXNbXCJbW1NldERhdGFdXVwiXS52YWx1ZXMoKX0sZW50cmllczpmdW5jdGlvbiBlbnRyaWVzKCl7cih0aGlzLFwiZW50cmllc1wiKTt1KHRoaXMpO3JldHVybiB0aGlzW1wiW1tTZXREYXRhXV1cIl0uZW50cmllcygpfSxmb3JFYWNoOmZ1bmN0aW9uIGZvckVhY2goZSl7cih0aGlzLFwiZm9yRWFjaFwiKTt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOm51bGw7dmFyIG89dGhpczt1KG8pO3RoaXNbXCJbW1NldERhdGFdXVwiXS5mb3JFYWNoKGZ1bmN0aW9uKHIsaSl7aWYobil7dChlLG4saSxpLG8pfWVsc2V7ZShpLGksbyl9fSl9fSk7aChpLnByb3RvdHlwZSxcImtleXNcIixpLnByb3RvdHlwZS52YWx1ZXMsdHJ1ZSk7d2UoaS5wcm90b3R5cGUsaS5wcm90b3R5cGUudmFsdWVzKTtyZXR1cm4gaX0oKX07aWYoUy5NYXB8fFMuU2V0KXt2YXIgSnI9YShmdW5jdGlvbigpe3JldHVybiBuZXcgTWFwKFtbMSwyXV0pLmdldCgxKT09PTJ9KTtpZighSnIpe3ZhciBYcj1TLk1hcDtTLk1hcD1mdW5jdGlvbiBNYXAoKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNYXApKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDb25zdHJ1Y3RvciBNYXAgcmVxdWlyZXMgXCJuZXdcIicpfXZhciBlPW5ldyBYcjtpZihhcmd1bWVudHMubGVuZ3RoPjApe0JyKE1hcCxlLGFyZ3VtZW50c1swXSl9ZGVsZXRlIGUuY29uc3RydWN0b3I7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsUy5NYXAucHJvdG90eXBlKTtyZXR1cm4gZX07Uy5NYXAucHJvdG90eXBlPW0oWHIucHJvdG90eXBlKTtoKFMuTWFwLnByb3RvdHlwZSxcImNvbnN0cnVjdG9yXCIsUy5NYXAsdHJ1ZSk7Ty5wcmVzZXJ2ZVRvU3RyaW5nKFMuTWFwLFhyKX12YXIgS3I9bmV3IE1hcDt2YXIgWnI9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgTWFwKFtbMSwwXSxbMiwwXSxbMywwXSxbNCwwXV0pO2Uuc2V0KC0wLGUpO3JldHVybiBlLmdldCgwKT09PWUmJmUuZ2V0KC0wKT09PWUmJmUuaGFzKDApJiZlLmhhcygtMCl9KCk7dmFyIFlyPUtyLnNldCgxLDIpPT09S3I7aWYoIVpyfHwhWXIpe3ZhciBRcj1NYXAucHJvdG90eXBlLnNldDtaKE1hcC5wcm90b3R5cGUsXCJzZXRcIixmdW5jdGlvbiBzZXQoZSxyKXt0KFFyLHRoaXMsZT09PTA/MDplLHIpO3JldHVybiB0aGlzfSl9aWYoIVpyKXt2YXIgZW49TWFwLnByb3RvdHlwZS5nZXQ7dmFyIHRuPU1hcC5wcm90b3R5cGUuaGFzO2IoTWFwLnByb3RvdHlwZSx7Z2V0OmZ1bmN0aW9uIGdldChlKXtyZXR1cm4gdChlbix0aGlzLGU9PT0wPzA6ZSl9LGhhczpmdW5jdGlvbiBoYXMoZSl7cmV0dXJuIHQodG4sdGhpcyxlPT09MD8wOmUpfX0sdHJ1ZSk7Ty5wcmVzZXJ2ZVRvU3RyaW5nKE1hcC5wcm90b3R5cGUuZ2V0LGVuKTtPLnByZXNlcnZlVG9TdHJpbmcoTWFwLnByb3RvdHlwZS5oYXMsdG4pfXZhciBybj1uZXcgU2V0O3ZhciBubj1mdW5jdGlvbihlKXtlW1wiZGVsZXRlXCJdKDApO2UuYWRkKC0wKTtyZXR1cm4hZS5oYXMoMCl9KHJuKTt2YXIgb249cm4uYWRkKDEpPT09cm47aWYoIW5ufHwhb24pe3ZhciBhbj1TZXQucHJvdG90eXBlLmFkZDtTZXQucHJvdG90eXBlLmFkZD1mdW5jdGlvbiBhZGQoZSl7dChhbix0aGlzLGU9PT0wPzA6ZSk7cmV0dXJuIHRoaXN9O08ucHJlc2VydmVUb1N0cmluZyhTZXQucHJvdG90eXBlLmFkZCxhbil9aWYoIW5uKXt2YXIgdW49U2V0LnByb3RvdHlwZS5oYXM7U2V0LnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24gaGFzKGUpe3JldHVybiB0KHVuLHRoaXMsZT09PTA/MDplKX07Ty5wcmVzZXJ2ZVRvU3RyaW5nKFNldC5wcm90b3R5cGUuaGFzLHVuKTt2YXIgZm49U2V0LnByb3RvdHlwZVtcImRlbGV0ZVwiXTtTZXQucHJvdG90eXBlW1wiZGVsZXRlXCJdPWZ1bmN0aW9uIFNldERlbGV0ZShlKXtyZXR1cm4gdChmbix0aGlzLGU9PT0wPzA6ZSl9O08ucHJlc2VydmVUb1N0cmluZyhTZXQucHJvdG90eXBlW1wiZGVsZXRlXCJdLGZuKX12YXIgc249dyhTLk1hcCxmdW5jdGlvbihlKXt2YXIgdD1uZXcgZShbXSk7dC5zZXQoNDIsNDIpO3JldHVybiB0IGluc3RhbmNlb2YgZX0pO3ZhciBjbj1PYmplY3Quc2V0UHJvdG90eXBlT2YmJiFzbjt2YXIgbG49ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIShTLk1hcCgpaW5zdGFuY2VvZiBTLk1hcCl9Y2F0Y2goZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBUeXBlRXJyb3J9fSgpO2lmKFMuTWFwLmxlbmd0aCE9PTB8fGNufHwhbG4pe3ZhciBwbj1TLk1hcDtTLk1hcD1mdW5jdGlvbiBNYXAoKXtpZighKHRoaXMgaW5zdGFuY2VvZiBNYXApKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDb25zdHJ1Y3RvciBNYXAgcmVxdWlyZXMgXCJuZXdcIicpfXZhciBlPW5ldyBwbjtpZihhcmd1bWVudHMubGVuZ3RoPjApe0JyKE1hcCxlLGFyZ3VtZW50c1swXSl9ZGVsZXRlIGUuY29uc3RydWN0b3I7T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsTWFwLnByb3RvdHlwZSk7cmV0dXJuIGV9O1MuTWFwLnByb3RvdHlwZT1wbi5wcm90b3R5cGU7aChTLk1hcC5wcm90b3R5cGUsXCJjb25zdHJ1Y3RvclwiLFMuTWFwLHRydWUpO08ucHJlc2VydmVUb1N0cmluZyhTLk1hcCxwbil9dmFyIHZuPXcoUy5TZXQsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGUoW10pO3QuYWRkKDQyLDQyKTtyZXR1cm4gdCBpbnN0YW5jZW9mIGV9KTt2YXIgeW49T2JqZWN0LnNldFByb3RvdHlwZU9mJiYhdm47dmFyIGhuPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiEoUy5TZXQoKWluc3RhbmNlb2YgUy5TZXQpfWNhdGNoKGUpe3JldHVybiBlIGluc3RhbmNlb2YgVHlwZUVycm9yfX0oKTtpZihTLlNldC5sZW5ndGghPT0wfHx5bnx8IWhuKXt2YXIgYm49Uy5TZXQ7Uy5TZXQ9ZnVuY3Rpb24gU2V0KCl7aWYoISh0aGlzIGluc3RhbmNlb2YgU2V0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcignQ29uc3RydWN0b3IgU2V0IHJlcXVpcmVzIFwibmV3XCInKX12YXIgZT1uZXcgYm47aWYoYXJndW1lbnRzLmxlbmd0aD4wKXskcihTZXQsZSxhcmd1bWVudHNbMF0pfWRlbGV0ZSBlLmNvbnN0cnVjdG9yO09iamVjdC5zZXRQcm90b3R5cGVPZihlLFNldC5wcm90b3R5cGUpO3JldHVybiBlfTtTLlNldC5wcm90b3R5cGU9Ym4ucHJvdG90eXBlO2goUy5TZXQucHJvdG90eXBlLFwiY29uc3RydWN0b3JcIixTLlNldCx0cnVlKTtPLnByZXNlcnZlVG9TdHJpbmcoUy5TZXQsYm4pfXZhciBnbj1uZXcgUy5NYXA7dmFyIGRuPSFhKGZ1bmN0aW9uKCl7cmV0dXJuIGduLmtleXMoKS5uZXh0KCkuZG9uZX0pO2lmKHR5cGVvZiBTLk1hcC5wcm90b3R5cGUuY2xlYXIhPT1cImZ1bmN0aW9uXCJ8fChuZXcgUy5TZXQpLnNpemUhPT0wfHxnbi5zaXplIT09MHx8dHlwZW9mIFMuTWFwLnByb3RvdHlwZS5rZXlzIT09XCJmdW5jdGlvblwifHx0eXBlb2YgUy5TZXQucHJvdG90eXBlLmtleXMhPT1cImZ1bmN0aW9uXCJ8fHR5cGVvZiBTLk1hcC5wcm90b3R5cGUuZm9yRWFjaCE9PVwiZnVuY3Rpb25cInx8dHlwZW9mIFMuU2V0LnByb3RvdHlwZS5mb3JFYWNoIT09XCJmdW5jdGlvblwifHx1KFMuTWFwKXx8dShTLlNldCl8fHR5cGVvZiBnbi5rZXlzKCkubmV4dCE9PVwiZnVuY3Rpb25cInx8ZG58fCFzbil7YihTLHtNYXA6VXIuTWFwLFNldDpVci5TZXR9LHRydWUpfWlmKFMuU2V0LnByb3RvdHlwZS5rZXlzIT09Uy5TZXQucHJvdG90eXBlLnZhbHVlcyl7aChTLlNldC5wcm90b3R5cGUsXCJrZXlzXCIsUy5TZXQucHJvdG90eXBlLnZhbHVlcyx0cnVlKX13ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoKG5ldyBTLk1hcCkua2V5cygpKSk7d2UoT2JqZWN0LmdldFByb3RvdHlwZU9mKChuZXcgUy5TZXQpLmtleXMoKSkpO2lmKGMmJlMuU2V0LnByb3RvdHlwZS5oYXMubmFtZSE9PVwiaGFzXCIpe3ZhciBPbj1TLlNldC5wcm90b3R5cGUuaGFzO1ooUy5TZXQucHJvdG90eXBlLFwiaGFzXCIsZnVuY3Rpb24gaGFzKGUpe3JldHVybiB0KE9uLHRoaXMsZSl9KX19YihTLFVyKTttZShTLk1hcCk7bWUoUy5TZXQpfXZhciBtbj1mdW5jdGlvbiB0aHJvd1VubGVzc1RhcmdldElzT2JqZWN0KGUpe2lmKCFyZS5UeXBlSXNPYmplY3QoZSkpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJ0YXJnZXQgbXVzdCBiZSBhbiBvYmplY3RcIil9fTt2YXIgd249e2FwcGx5OmZ1bmN0aW9uIGFwcGx5KCl7cmV0dXJuIHJlLkNhbGwocmUuQ2FsbCxudWxsLGFyZ3VtZW50cyl9LGNvbnN0cnVjdDpmdW5jdGlvbiBjb25zdHJ1Y3QoZSx0KXtpZighcmUuSXNDb25zdHJ1Y3RvcihlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBjb25zdHJ1Y3Rvci5cIil9dmFyIHI9YXJndW1lbnRzLmxlbmd0aD4yP2FyZ3VtZW50c1syXTplO2lmKCFyZS5Jc0NvbnN0cnVjdG9yKHIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwibmV3LnRhcmdldCBtdXN0IGJlIGEgY29uc3RydWN0b3IuXCIpfXJldHVybiByZS5Db25zdHJ1Y3QoZSx0LHIsXCJpbnRlcm5hbFwiKX0sZGVsZXRlUHJvcGVydHk6ZnVuY3Rpb24gZGVsZXRlUHJvcGVydHkoZSx0KXttbihlKTtpZihzKXt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk7aWYociYmIXIuY29uZmlndXJhYmxlKXtyZXR1cm4gZmFsc2V9fXJldHVybiBkZWxldGUgZVt0XX0saGFzOmZ1bmN0aW9uIGhhcyhlLHQpe21uKGUpO3JldHVybiB0IGluIGV9fTtpZihPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyl7T2JqZWN0LmFzc2lnbih3bix7b3duS2V5czpmdW5jdGlvbiBvd25LZXlzKGUpe21uKGUpO3ZhciB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpO2lmKHJlLklzQ2FsbGFibGUoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykpe3godCxPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpKX1yZXR1cm4gdH19KX12YXIgam49ZnVuY3Rpb24gQ29udmVydEV4Y2VwdGlvblRvQm9vbGVhbihlKXtyZXR1cm4haShlKX07aWYoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKXtPYmplY3QuYXNzaWduKHduLHtpc0V4dGVuc2libGU6ZnVuY3Rpb24gaXNFeHRlbnNpYmxlKGUpe21uKGUpO3JldHVybiBPYmplY3QuaXNFeHRlbnNpYmxlKGUpfSxwcmV2ZW50RXh0ZW5zaW9uczpmdW5jdGlvbiBwcmV2ZW50RXh0ZW5zaW9ucyhlKXttbihlKTtyZXR1cm4gam4oZnVuY3Rpb24oKXtPYmplY3QucHJldmVudEV4dGVuc2lvbnMoZSl9KX19KX1pZihzKXt2YXIgU249ZnVuY3Rpb24gZ2V0KGUsdCxyKXt2YXIgbj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCk7aWYoIW4pe3ZhciBvPU9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtpZihvPT09bnVsbCl7cmV0dXJuIHZvaWQgMH1yZXR1cm4gU24obyx0LHIpfWlmKFwidmFsdWVcImluIG4pe3JldHVybiBuLnZhbHVlfWlmKG4uZ2V0KXtyZXR1cm4gcmUuQ2FsbChuLmdldCxyKX1yZXR1cm4gdm9pZCAwfTt2YXIgVG49ZnVuY3Rpb24gc2V0KGUscixuLG8pe3ZhciBpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxyKTtpZighaSl7dmFyIGE9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKGEhPT1udWxsKXtyZXR1cm4gVG4oYSxyLG4sbyl9aT17dmFsdWU6dm9pZCAwLHdyaXRhYmxlOnRydWUsZW51bWVyYWJsZTp0cnVlLGNvbmZpZ3VyYWJsZTp0cnVlfX1pZihcInZhbHVlXCJpbiBpKXtpZighaS53cml0YWJsZSl7cmV0dXJuIGZhbHNlfWlmKCFyZS5UeXBlSXNPYmplY3Qobykpe3JldHVybiBmYWxzZX12YXIgdT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8scik7aWYodSl7cmV0dXJuIGVlLmRlZmluZVByb3BlcnR5KG8scix7dmFsdWU6bn0pfWVsc2V7cmV0dXJuIGVlLmRlZmluZVByb3BlcnR5KG8scix7dmFsdWU6bix3cml0YWJsZTp0cnVlLGVudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZX0pfX1pZihpLnNldCl7dChpLnNldCxvLG4pO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX07T2JqZWN0LmFzc2lnbih3bix7ZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24gZGVmaW5lUHJvcGVydHkoZSx0LHIpe21uKGUpO3JldHVybiBqbihmdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQscil9KX0sZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOmZ1bmN0aW9uIGdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpe21uKGUpO3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9LGdldDpmdW5jdGlvbiBnZXQoZSx0KXttbihlKTt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzWzJdOmU7cmV0dXJuIFNuKGUsdCxyKX0sc2V0OmZ1bmN0aW9uIHNldChlLHQscil7bW4oZSk7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4zP2FyZ3VtZW50c1szXTplO3JldHVybiBUbihlLHQscixuKX19KX1pZihPYmplY3QuZ2V0UHJvdG90eXBlT2Ype3ZhciBJbj1PYmplY3QuZ2V0UHJvdG90eXBlT2Y7d24uZ2V0UHJvdG90eXBlT2Y9ZnVuY3Rpb24gZ2V0UHJvdG90eXBlT2YoZSl7bW4oZSk7cmV0dXJuIEluKGUpfX1pZihPYmplY3Quc2V0UHJvdG90eXBlT2YmJnduLmdldFByb3RvdHlwZU9mKXt2YXIgRW49ZnVuY3Rpb24oZSx0KXt2YXIgcj10O3doaWxlKHIpe2lmKGU9PT1yKXtyZXR1cm4gdHJ1ZX1yPXduLmdldFByb3RvdHlwZU9mKHIpfXJldHVybiBmYWxzZX07T2JqZWN0LmFzc2lnbih3bix7c2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24gc2V0UHJvdG90eXBlT2YoZSx0KXttbihlKTtpZih0IT09bnVsbCYmIXJlLlR5cGVJc09iamVjdCh0KSl7dGhyb3cgbmV3IFR5cGVFcnJvcihcInByb3RvIG11c3QgYmUgYW4gb2JqZWN0IG9yIG51bGxcIil9aWYodD09PWVlLmdldFByb3RvdHlwZU9mKGUpKXtyZXR1cm4gdHJ1ZX1pZihlZS5pc0V4dGVuc2libGUmJiFlZS5pc0V4dGVuc2libGUoZSkpe3JldHVybiBmYWxzZX1pZihFbihlLHQpKXtyZXR1cm4gZmFsc2V9T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsdCk7cmV0dXJuIHRydWV9fSl9dmFyIFBuPWZ1bmN0aW9uKGUsdCl7aWYoIXJlLklzQ2FsbGFibGUoUy5SZWZsZWN0W2VdKSl7aChTLlJlZmxlY3QsZSx0KX1lbHNle3ZhciByPWEoZnVuY3Rpb24oKXtTLlJlZmxlY3RbZV0oMSk7Uy5SZWZsZWN0W2VdKE5hTik7Uy5SZWZsZWN0W2VdKHRydWUpO3JldHVybiB0cnVlfSk7aWYocil7WihTLlJlZmxlY3QsZSx0KX19fTtPYmplY3Qua2V5cyh3bikuZm9yRWFjaChmdW5jdGlvbihlKXtQbihlLHduW2VdKX0pO3ZhciBDbj1TLlJlZmxlY3QuZ2V0UHJvdG90eXBlT2Y7aWYoYyYmQ24mJkNuLm5hbWUhPT1cImdldFByb3RvdHlwZU9mXCIpe1ooUy5SZWZsZWN0LFwiZ2V0UHJvdG90eXBlT2ZcIixmdW5jdGlvbiBnZXRQcm90b3R5cGVPZihlKXtyZXR1cm4gdChDbixTLlJlZmxlY3QsZSl9KX1pZihTLlJlZmxlY3Quc2V0UHJvdG90eXBlT2Ype2lmKGEoZnVuY3Rpb24oKXtTLlJlZmxlY3Quc2V0UHJvdG90eXBlT2YoMSx7fSk7cmV0dXJuIHRydWV9KSl7WihTLlJlZmxlY3QsXCJzZXRQcm90b3R5cGVPZlwiLHduLnNldFByb3RvdHlwZU9mKX19aWYoUy5SZWZsZWN0LmRlZmluZVByb3BlcnR5KXtpZighYShmdW5jdGlvbigpe3ZhciBlPSFTLlJlZmxlY3QuZGVmaW5lUHJvcGVydHkoMSxcInRlc3RcIix7dmFsdWU6MX0pO3ZhciB0PXR5cGVvZiBPYmplY3QucHJldmVudEV4dGVuc2lvbnMhPT1cImZ1bmN0aW9uXCJ8fCFTLlJlZmxlY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSxcInRlc3RcIix7fSk7cmV0dXJuIGUmJnR9KSl7WihTLlJlZmxlY3QsXCJkZWZpbmVQcm9wZXJ0eVwiLHduLmRlZmluZVByb3BlcnR5KX19aWYoUy5SZWZsZWN0LmNvbnN0cnVjdCl7aWYoIWEoZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbiBGKCl7fTtyZXR1cm4gUy5SZWZsZWN0LmNvbnN0cnVjdChmdW5jdGlvbigpe30sW10sZSlpbnN0YW5jZW9mIGV9KSl7WihTLlJlZmxlY3QsXCJjb25zdHJ1Y3RcIix3bi5jb25zdHJ1Y3QpfX1pZihTdHJpbmcobmV3IERhdGUoTmFOKSkhPT1cIkludmFsaWQgRGF0ZVwiKXt2YXIgTW49RGF0ZS5wcm90b3R5cGUudG9TdHJpbmc7dmFyIHhuPWZ1bmN0aW9uIHRvU3RyaW5nKCl7dmFyIGU9K3RoaXM7aWYoZSE9PWUpe3JldHVyblwiSW52YWxpZCBEYXRlXCJ9cmV0dXJuIHJlLkNhbGwoTW4sdGhpcyl9O1ooRGF0ZS5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLHhuKX12YXIgTm49e2FuY2hvcjpmdW5jdGlvbiBhbmNob3IoZSl7cmV0dXJuIHJlLkNyZWF0ZUhUTUwodGhpcyxcImFcIixcIm5hbWVcIixlKX0sYmlnOmZ1bmN0aW9uIGJpZygpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJiaWdcIixcIlwiLFwiXCIpfSxibGluazpmdW5jdGlvbiBibGluaygpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJibGlua1wiLFwiXCIsXCJcIil9LGJvbGQ6ZnVuY3Rpb24gYm9sZCgpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJiXCIsXCJcIixcIlwiKX0sZml4ZWQ6ZnVuY3Rpb24gZml4ZWQoKXtyZXR1cm4gcmUuQ3JlYXRlSFRNTCh0aGlzLFwidHRcIixcIlwiLFwiXCIpfSxmb250Y29sb3I6ZnVuY3Rpb24gZm9udGNvbG9yKGUpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJmb250XCIsXCJjb2xvclwiLGUpfSxmb250c2l6ZTpmdW5jdGlvbiBmb250c2l6ZShlKXtyZXR1cm4gcmUuQ3JlYXRlSFRNTCh0aGlzLFwiZm9udFwiLFwic2l6ZVwiLGUpfSxpdGFsaWNzOmZ1bmN0aW9uIGl0YWxpY3MoKXtyZXR1cm4gcmUuQ3JlYXRlSFRNTCh0aGlzLFwiaVwiLFwiXCIsXCJcIil9LGxpbms6ZnVuY3Rpb24gbGluayhlKXtyZXR1cm4gcmUuQ3JlYXRlSFRNTCh0aGlzLFwiYVwiLFwiaHJlZlwiLGUpfSxzbWFsbDpmdW5jdGlvbiBzbWFsbCgpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJzbWFsbFwiLFwiXCIsXCJcIil9LHN0cmlrZTpmdW5jdGlvbiBzdHJpa2UoKXtyZXR1cm4gcmUuQ3JlYXRlSFRNTCh0aGlzLFwic3RyaWtlXCIsXCJcIixcIlwiKX0sc3ViOmZ1bmN0aW9uIHN1Yigpe3JldHVybiByZS5DcmVhdGVIVE1MKHRoaXMsXCJzdWJcIixcIlwiLFwiXCIpfSxzdXA6ZnVuY3Rpb24gc3ViKCl7cmV0dXJuIHJlLkNyZWF0ZUhUTUwodGhpcyxcInN1cFwiLFwiXCIsXCJcIil9fTtsKE9iamVjdC5rZXlzKE5uKSxmdW5jdGlvbihlKXt2YXIgcj1TdHJpbmcucHJvdG90eXBlW2VdO3ZhciBuPWZhbHNlO2lmKHJlLklzQ2FsbGFibGUocikpe3ZhciBvPXQocixcIlwiLCcgXCIgJyk7dmFyIGk9UChbXSxvLm1hdGNoKC9cIi9nKSkubGVuZ3RoO249byE9PW8udG9Mb3dlckNhc2UoKXx8aT4yfWVsc2V7bj10cnVlfWlmKG4pe1ooU3RyaW5nLnByb3RvdHlwZSxlLE5uW2VdKX19KTt2YXIgQW49ZnVuY3Rpb24oKXtpZighWSl7cmV0dXJuIGZhbHNlfXZhciBlPXR5cGVvZiBKU09OPT09XCJvYmplY3RcIiYmdHlwZW9mIEpTT04uc3RyaW5naWZ5PT09XCJmdW5jdGlvblwiP0pTT04uc3RyaW5naWZ5Om51bGw7aWYoIWUpe3JldHVybiBmYWxzZX1pZih0eXBlb2YgZShHKCkpIT09XCJ1bmRlZmluZWRcIil7cmV0dXJuIHRydWV9aWYoZShbRygpXSkhPT1cIltudWxsXVwiKXtyZXR1cm4gdHJ1ZX12YXIgdD17YTpHKCl9O3RbRygpXT10cnVlO2lmKGUodCkhPT1cInt9XCIpe3JldHVybiB0cnVlfXJldHVybiBmYWxzZX0oKTt2YXIgUm49YShmdW5jdGlvbigpe2lmKCFZKXtyZXR1cm4gdHJ1ZX1yZXR1cm4gSlNPTi5zdHJpbmdpZnkoT2JqZWN0KEcoKSkpPT09XCJ7fVwiJiZKU09OLnN0cmluZ2lmeShbT2JqZWN0KEcoKSldKT09PVwiW3t9XVwifSk7aWYoQW58fCFSbil7dmFyIF9uPUpTT04uc3RyaW5naWZ5O1ooSlNPTixcInN0cmluZ2lmeVwiLGZ1bmN0aW9uIHN0cmluZ2lmeShlKXtpZih0eXBlb2YgZT09PVwic3ltYm9sXCIpe3JldHVybn12YXIgbjtpZihhcmd1bWVudHMubGVuZ3RoPjEpe249YXJndW1lbnRzWzFdfXZhciBvPVtlXTtpZighcihuKSl7dmFyIGk9cmUuSXNDYWxsYWJsZShuKT9uOm51bGw7dmFyIGE9ZnVuY3Rpb24oZSxyKXt2YXIgbj1pP3QoaSx0aGlzLGUscik6cjtpZih0eXBlb2YgbiE9PVwic3ltYm9sXCIpe2lmKEsuc3ltYm9sKG4pKXtyZXR1cm4gU3Qoe30pKG4pfWVsc2V7cmV0dXJuIG59fX07by5wdXNoKGEpfWVsc2V7by5wdXNoKG4pfWlmKGFyZ3VtZW50cy5sZW5ndGg+Mil7by5wdXNoKGFyZ3VtZW50c1syXSl9cmV0dXJuIF9uLmFwcGx5KHRoaXMsbyl9KX1yZXR1cm4gU30pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXNoaW0ubWFwXG4iLCIvKlxuICogU3lzdGVtSlMgUHJvbWlzZSBQb2x5ZmlsbFxuICovXG4hZnVuY3Rpb24odCl7IWZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmFtZD90KGUpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LlByb21pc2U9ZSgpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsLlByb21pc2U9ZSgpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoc2VsZi5Qcm9taXNlPWUoKSl9KGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uIGUodCxuLG8pe2Z1bmN0aW9uIHIodSxjKXtpZighblt1XSl7aWYoIXRbdV0pe3ZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWMmJmYpcmV0dXJuIGYodSwhMCk7aWYoaSlyZXR1cm4gaSh1LCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK3UrXCInXCIpfXZhciBzPW5bdV09e2V4cG9ydHM6e319O3RbdV1bMF0uY2FsbChzLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFt1XVsxXVtlXTtyZXR1cm4gcihuP246ZSl9LHMscy5leHBvcnRzLGUsdCxuLG8pfXJldHVybiBuW3VdLmV4cG9ydHN9Zm9yKHZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsdT0wO3U8by5sZW5ndGg7dSsrKXIob1t1XSk7cmV0dXJuIHJ9KHsxOltmdW5jdGlvbih0LGUsbil7dmFyIG89dChcIi4uL2xpYi9kZWNvcmF0b3JzL3VuaGFuZGxlZFJlamVjdGlvblwiKSxyPW8odChcIi4uL2xpYi9Qcm9taXNlXCIpKTtlLmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWwuUHJvbWlzZT1yOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGYuUHJvbWlzZT1yOnJ9LHtcIi4uL2xpYi9Qcm9taXNlXCI6MixcIi4uL2xpYi9kZWNvcmF0b3JzL3VuaGFuZGxlZFJlamVjdGlvblwiOjR9XSwyOltmdW5jdGlvbihlLG4sbyl7IWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3QoZnVuY3Rpb24odCl7dmFyIGU9dChcIi4vbWFrZVByb21pc2VcIiksbj10KFwiLi9TY2hlZHVsZXJcIiksbz10KFwiLi9lbnZcIikuYXNhcDtyZXR1cm4gZSh7c2NoZWR1bGVyOm5ldyBuKG8pfSl9KX0oXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5hbWQ/dDpmdW5jdGlvbih0KXtuLmV4cG9ydHM9dChlKX0pfSx7XCIuL1NjaGVkdWxlclwiOjMsXCIuL2VudlwiOjUsXCIuL21ha2VQcm9taXNlXCI6N31dLDM6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dChmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5fYXN5bmM9dCx0aGlzLl9ydW5uaW5nPSExLHRoaXMuX3F1ZXVlPXRoaXMsdGhpcy5fcXVldWVMZW49MCx0aGlzLl9hZnRlclF1ZXVlPXt9LHRoaXMuX2FmdGVyUXVldWVMZW49MDt2YXIgZT10aGlzO3RoaXMuZHJhaW49ZnVuY3Rpb24oKXtlLl9kcmFpbigpfX1yZXR1cm4gdC5wcm90b3R5cGUuZW5xdWV1ZT1mdW5jdGlvbih0KXt0aGlzLl9xdWV1ZVt0aGlzLl9xdWV1ZUxlbisrXT10LHRoaXMucnVuKCl9LHQucHJvdG90eXBlLmFmdGVyUXVldWU9ZnVuY3Rpb24odCl7dGhpcy5fYWZ0ZXJRdWV1ZVt0aGlzLl9hZnRlclF1ZXVlTGVuKytdPXQsdGhpcy5ydW4oKX0sdC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5fcnVubmluZ3x8KHRoaXMuX3J1bm5pbmc9ITAsdGhpcy5fYXN5bmModGhpcy5kcmFpbikpfSx0LnByb3RvdHlwZS5fZHJhaW49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PHRoaXMuX3F1ZXVlTGVuOysrdCl0aGlzLl9xdWV1ZVt0XS5ydW4oKSx0aGlzLl9xdWV1ZVt0XT12b2lkIDA7Zm9yKHRoaXMuX3F1ZXVlTGVuPTAsdGhpcy5fcnVubmluZz0hMSx0PTA7dDx0aGlzLl9hZnRlclF1ZXVlTGVuOysrdCl0aGlzLl9hZnRlclF1ZXVlW3RdLnJ1bigpLHRoaXMuX2FmdGVyUXVldWVbdF09dm9pZCAwO3RoaXMuX2FmdGVyUXVldWVMZW49MH0sdH0pfShcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmFtZD90OmZ1bmN0aW9uKHQpe24uZXhwb3J0cz10KCl9KX0se31dLDQ6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3Rocm93IHR9ZnVuY3Rpb24gbigpe312YXIgbz10KFwiLi4vZW52XCIpLnNldFRpbWVyLHI9dChcIi4uL2Zvcm1hdFwiKTtyZXR1cm4gZnVuY3Rpb24odCl7ZnVuY3Rpb24gaSh0KXt0LmhhbmRsZWR8fChsLnB1c2godCksYShcIlBvdGVudGlhbGx5IHVuaGFuZGxlZCByZWplY3Rpb24gW1wiK3QuaWQrXCJdIFwiK3IuZm9ybWF0RXJyb3IodC52YWx1ZSkpKX1mdW5jdGlvbiB1KHQpe3ZhciBlPWwuaW5kZXhPZih0KTtlPj0wJiYobC5zcGxpY2UoZSwxKSxoKFwiSGFuZGxlZCBwcmV2aW91cyByZWplY3Rpb24gW1wiK3QuaWQrXCJdIFwiK3IuZm9ybWF0T2JqZWN0KHQudmFsdWUpKSl9ZnVuY3Rpb24gYyh0LGUpe3AucHVzaCh0LGUpLG51bGw9PT1kJiYoZD1vKGYsMCkpfWZ1bmN0aW9uIGYoKXtmb3IoZD1udWxsO3AubGVuZ3RoPjA7KXAuc2hpZnQoKShwLnNoaWZ0KCkpfXZhciBzLGE9bixoPW47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJihzPWNvbnNvbGUsYT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygcy5lcnJvcj9mdW5jdGlvbih0KXtzLmVycm9yKHQpfTpmdW5jdGlvbih0KXtzLmxvZyh0KX0saD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygcy5pbmZvP2Z1bmN0aW9uKHQpe3MuaW5mbyh0KX06ZnVuY3Rpb24odCl7cy5sb2codCl9KSx0Lm9uUG90ZW50aWFsbHlVbmhhbmRsZWRSZWplY3Rpb249ZnVuY3Rpb24odCl7YyhpLHQpfSx0Lm9uUG90ZW50aWFsbHlVbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkPWZ1bmN0aW9uKHQpe2ModSx0KX0sdC5vbkZhdGFsUmVqZWN0aW9uPWZ1bmN0aW9uKHQpe2MoZSx0LnZhbHVlKX07dmFyIHA9W10sbD1bXSxkPW51bGw7cmV0dXJuIHR9fSl9KFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuYW1kP3Q6ZnVuY3Rpb24odCl7bi5leHBvcnRzPXQoZSl9KX0se1wiLi4vZW52XCI6NSxcIi4uL2Zvcm1hdFwiOjZ9XSw1OltmdW5jdGlvbihlLG4sbyl7IWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3QoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBwcm9jZXNzJiZcIltvYmplY3QgcHJvY2Vzc11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKX1mdW5jdGlvbiBuKCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgTXV0YXRpb25PYnNlcnZlciYmTXV0YXRpb25PYnNlcnZlcnx8XCJmdW5jdGlvblwiPT10eXBlb2YgV2ViS2l0TXV0YXRpb25PYnNlcnZlciYmV2ViS2l0TXV0YXRpb25PYnNlcnZlcn1mdW5jdGlvbiBvKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1uO249dm9pZCAwLHQoKX12YXIgbixvPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpLHI9bmV3IHQoZSk7ci5vYnNlcnZlKG8se2NoYXJhY3RlckRhdGE6ITB9KTt2YXIgaT0wO3JldHVybiBmdW5jdGlvbih0KXtuPXQsby5kYXRhPWlePTF9fXZhciByLGk9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNldFRpbWVvdXQmJnNldFRpbWVvdXQsdT1mdW5jdGlvbih0LGUpe3JldHVybiBzZXRUaW1lb3V0KHQsZSl9LGM9ZnVuY3Rpb24odCl7cmV0dXJuIGNsZWFyVGltZW91dCh0KX0sZj1mdW5jdGlvbih0KXtyZXR1cm4gaSh0LDApfTtpZihlKCkpZj1mdW5jdGlvbih0KXtyZXR1cm4gcHJvY2Vzcy5uZXh0VGljayh0KX07ZWxzZSBpZihyPW4oKSlmPW8ocik7ZWxzZSBpZighaSl7dmFyIHM9dCxhPXMoXCJ2ZXJ0eFwiKTt1PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGEuc2V0VGltZXIoZSx0KX0sYz1hLmNhbmNlbFRpbWVyLGY9YS5ydW5Pbkxvb3B8fGEucnVuT25Db250ZXh0fXJldHVybntzZXRUaW1lcjp1LGNsZWFyVGltZXI6Yyxhc2FwOmZ9fSl9KFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJnQuYW1kP3Q6ZnVuY3Rpb24odCl7bi5leHBvcnRzPXQoZSl9KX0se31dLDY6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dChmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dmFyIG49XCJvYmplY3RcIj09dHlwZW9mIHQmJm51bGwhPT10JiYodC5zdGFja3x8dC5tZXNzYWdlKT90LnN0YWNrfHx0Lm1lc3NhZ2U6ZSh0KTtyZXR1cm4gdCBpbnN0YW5jZW9mIEVycm9yP246bitcIiAoV0FSTklORzogbm9uLUVycm9yIHVzZWQpXCJ9ZnVuY3Rpb24gZSh0KXt2YXIgZT1TdHJpbmcodCk7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PWUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBKU09OJiYoZT1uKHQsZSkpLGV9ZnVuY3Rpb24gbih0LGUpe3RyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkodCl9Y2F0Y2gobil7cmV0dXJuIGV9fXJldHVybntmb3JtYXRFcnJvcjp0LGZvcm1hdE9iamVjdDplLHRyeVN0cmluZ2lmeTpufX0pfShcImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0LmFtZD90OmZ1bmN0aW9uKHQpe24uZXhwb3J0cz10KCl9KX0se31dLDc6W2Z1bmN0aW9uKGUsbixvKXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dChmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQsZSl7dGhpcy5faGFuZGxlcj10PT09Xz9lOm4odCl9ZnVuY3Rpb24gbih0KXtmdW5jdGlvbiBlKHQpe3IucmVzb2x2ZSh0KX1mdW5jdGlvbiBuKHQpe3IucmVqZWN0KHQpfWZ1bmN0aW9uIG8odCl7ci5ub3RpZnkodCl9dmFyIHI9bmV3IGI7dHJ5e3QoZSxuLG8pfWNhdGNoKGkpe24oaSl9cmV0dXJuIHJ9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gayh0KT90Om5ldyBlKF8sbmV3IHgodih0KSkpfWZ1bmN0aW9uIHIodCl7cmV0dXJuIG5ldyBlKF8sbmV3IHgobmV3IFAodCkpKX1mdW5jdGlvbiBpKCl7cmV0dXJuICR9ZnVuY3Rpb24gdSgpe3JldHVybiBuZXcgZShfLG5ldyBiKX1mdW5jdGlvbiBjKHQsZSl7dmFyIG49bmV3IGIodC5yZWNlaXZlcix0LmpvaW4oKS5jb250ZXh0KTtyZXR1cm4gbmV3IGUoXyxuKX1mdW5jdGlvbiBmKHQpe3JldHVybiBhKEIsbnVsbCx0KX1mdW5jdGlvbiBzKHQsZSl7cmV0dXJuIGEoTSx0LGUpfWZ1bmN0aW9uIGEodCxuLG8pe2Z1bmN0aW9uIHIoZSxyLHUpe3UucmVzb2x2ZWR8fGgobyxpLGUsdChuLHIsZSksdSl9ZnVuY3Rpb24gaSh0LGUsbil7YVt0XT1lLDA9PT0tLXMmJm4uYmVjb21lKG5ldyBxKGEpKX1mb3IodmFyIHUsYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBuP3I6aSxmPW5ldyBiLHM9by5sZW5ndGg+Pj4wLGE9bmV3IEFycmF5KHMpLHA9MDtwPG8ubGVuZ3RoJiYhZi5yZXNvbHZlZDsrK3ApdT1vW3BdLHZvaWQgMCE9PXV8fHAgaW4gbz9oKG8sYyxwLHUsZik6LS1zO3JldHVybiAwPT09cyYmZi5iZWNvbWUobmV3IHEoYSkpLG5ldyBlKF8sZil9ZnVuY3Rpb24gaCh0LGUsbixvLHIpe2lmKFUobykpe3ZhciBpPW0obyksdT1pLnN0YXRlKCk7MD09PXU/aS5mb2xkKGUsbix2b2lkIDAscik6dT4wP2UobixpLnZhbHVlLHIpOihyLmJlY29tZShpKSxwKHQsbisxLGkpKX1lbHNlIGUobixvLHIpfWZ1bmN0aW9uIHAodCxlLG4pe2Zvcih2YXIgbz1lO288dC5sZW5ndGg7KytvKWwodih0W29dKSxuKX1mdW5jdGlvbiBsKHQsZSl7aWYodCE9PWUpe3ZhciBuPXQuc3RhdGUoKTswPT09bj90LnZpc2l0KHQsdm9pZCAwLHQuX3VucmVwb3J0KTowPm4mJnQuX3VucmVwb3J0KCl9fWZ1bmN0aW9uIGQodCl7cmV0dXJuXCJvYmplY3RcIiE9dHlwZW9mIHR8fG51bGw9PT10P3IobmV3IFR5cGVFcnJvcihcIm5vbi1pdGVyYWJsZSBwYXNzZWQgdG8gcmFjZSgpXCIpKTowPT09dC5sZW5ndGg/aSgpOjE9PT10Lmxlbmd0aD9vKHRbMF0pOnkodCl9ZnVuY3Rpb24geSh0KXt2YXIgbixvLHIsaT1uZXcgYjtmb3Iobj0wO248dC5sZW5ndGg7KytuKWlmKG89dFtuXSx2b2lkIDAhPT1vfHxuIGluIHQpe2lmKHI9dihvKSwwIT09ci5zdGF0ZSgpKXtpLmJlY29tZShyKSxwKHQsbisxLHIpO2JyZWFrfXIudmlzaXQoaSxpLnJlc29sdmUsaS5yZWplY3QpfXJldHVybiBuZXcgZShfLGkpfWZ1bmN0aW9uIHYodCl7cmV0dXJuIGsodCk/dC5faGFuZGxlci5qb2luKCk6VSh0KT9qKHQpOm5ldyBxKHQpfWZ1bmN0aW9uIG0odCl7cmV0dXJuIGsodCk/dC5faGFuZGxlci5qb2luKCk6aih0KX1mdW5jdGlvbiBqKHQpe3RyeXt2YXIgZT10LnRoZW47cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZT9uZXcgZyhlLHQpOm5ldyBxKHQpfWNhdGNoKG4pe3JldHVybiBuZXcgUChuKX19ZnVuY3Rpb24gXygpe31mdW5jdGlvbiB3KCl7fWZ1bmN0aW9uIGIodCxuKXtlLmNyZWF0ZUNvbnRleHQodGhpcyxuKSx0aGlzLmNvbnN1bWVycz12b2lkIDAsdGhpcy5yZWNlaXZlcj10LHRoaXMuaGFuZGxlcj12b2lkIDAsdGhpcy5yZXNvbHZlZD0hMX1mdW5jdGlvbiB4KHQpe3RoaXMuaGFuZGxlcj10fWZ1bmN0aW9uIGcodCxlKXtiLmNhbGwodGhpcyksRy5lbnF1ZXVlKG5ldyBFKHQsZSx0aGlzKSl9ZnVuY3Rpb24gcSh0KXtlLmNyZWF0ZUNvbnRleHQodGhpcyksdGhpcy52YWx1ZT10fWZ1bmN0aW9uIFAodCl7ZS5jcmVhdGVDb250ZXh0KHRoaXMpLHRoaXMuaWQ9KytZLHRoaXMudmFsdWU9dCx0aGlzLmhhbmRsZWQ9ITEsdGhpcy5yZXBvcnRlZD0hMSx0aGlzLl9yZXBvcnQoKX1mdW5jdGlvbiBSKHQsZSl7dGhpcy5yZWplY3Rpb249dCx0aGlzLmNvbnRleHQ9ZX1mdW5jdGlvbiBDKHQpe3RoaXMucmVqZWN0aW9uPXR9ZnVuY3Rpb24gTygpe3JldHVybiBuZXcgUChuZXcgVHlwZUVycm9yKFwiUHJvbWlzZSBjeWNsZVwiKSl9ZnVuY3Rpb24gVCh0LGUpe3RoaXMuY29udGludWF0aW9uPXQsdGhpcy5oYW5kbGVyPWV9ZnVuY3Rpb24gUSh0LGUpe3RoaXMuaGFuZGxlcj1lLHRoaXMudmFsdWU9dH1mdW5jdGlvbiBFKHQsZSxuKXt0aGlzLl90aGVuPXQsdGhpcy50aGVuYWJsZT1lLHRoaXMucmVzb2x2ZXI9bn1mdW5jdGlvbiBMKHQsZSxuLG8scil7dHJ5e3QuY2FsbChlLG4sbyxyKX1jYXRjaChpKXtvKGkpfX1mdW5jdGlvbiBTKHQsZSxuLG8pe3RoaXMuZj10LHRoaXMuej1lLHRoaXMuYz1uLHRoaXMudG89byx0aGlzLnJlc29sdmVyPVgsdGhpcy5yZWNlaXZlcj10aGlzfWZ1bmN0aW9uIGsodCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBlfWZ1bmN0aW9uIFUodCl7cmV0dXJuKFwib2JqZWN0XCI9PXR5cGVvZiB0fHxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0KSYmbnVsbCE9PXR9ZnVuY3Rpb24gSCh0LG4sbyxyKXtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiB0P3IuYmVjb21lKG4pOihlLmVudGVyQ29udGV4dChuKSxGKHQsbi52YWx1ZSxvLHIpLHZvaWQgZS5leGl0Q29udGV4dCgpKX1mdW5jdGlvbiBOKHQsbixvLHIsaSl7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgdD9pLmJlY29tZShvKTooZS5lbnRlckNvbnRleHQobyksVyh0LG4sby52YWx1ZSxyLGkpLHZvaWQgZS5leGl0Q29udGV4dCgpKX1mdW5jdGlvbiBKKHQsbixvLHIsaSl7cmV0dXJuXCJmdW5jdGlvblwiIT10eXBlb2YgdD9pLm5vdGlmeShuKTooZS5lbnRlckNvbnRleHQobykseih0LG4scixpKSx2b2lkIGUuZXhpdENvbnRleHQoKSl9ZnVuY3Rpb24gTSh0LGUsbil7dHJ5e3JldHVybiB0KGUsbil9Y2F0Y2gobyl7cmV0dXJuIHIobyl9fWZ1bmN0aW9uIEYodCxlLG4sbyl7dHJ5e28uYmVjb21lKHYodC5jYWxsKG4sZSkpKX1jYXRjaChyKXtvLmJlY29tZShuZXcgUChyKSl9fWZ1bmN0aW9uIFcodCxlLG4sbyxyKXt0cnl7dC5jYWxsKG8sZSxuLHIpfWNhdGNoKGkpe3IuYmVjb21lKG5ldyBQKGkpKX19ZnVuY3Rpb24geih0LGUsbixvKXt0cnl7by5ub3RpZnkodC5jYWxsKG4sZSkpfWNhdGNoKHIpe28ubm90aWZ5KHIpfX1mdW5jdGlvbiBBKHQsZSl7ZS5wcm90b3R5cGU9Vih0LnByb3RvdHlwZSksZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZX1mdW5jdGlvbiBCKHQsZSl7cmV0dXJuIGV9ZnVuY3Rpb24gSygpe31mdW5jdGlvbiBEKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHByb2Nlc3MmJm51bGwhPT1wcm9jZXNzJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBwcm9jZXNzLmVtaXQ/ZnVuY3Rpb24odCxlKXtyZXR1cm5cInVuaGFuZGxlZFJlamVjdGlvblwiPT09dD9wcm9jZXNzLmVtaXQodCxlLnZhbHVlLGUpOnByb2Nlc3MuZW1pdCh0LGUpfTpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmXCJmdW5jdGlvblwiPT10eXBlb2YgQ3VzdG9tRXZlbnQ/ZnVuY3Rpb24odCxlLG4pe3ZhciBvPSExO3RyeXt2YXIgcj1uZXcgbihcInVuaGFuZGxlZFJlamVjdGlvblwiKTtvPXIgaW5zdGFuY2VvZiBufWNhdGNoKGkpe31yZXR1cm4gbz9mdW5jdGlvbih0LG8pe3ZhciByPW5ldyBuKHQse2RldGFpbDp7cmVhc29uOm8udmFsdWUsa2V5Om99LGJ1YmJsZXM6ITEsY2FuY2VsYWJsZTohMH0pO3JldHVybiFlLmRpc3BhdGNoRXZlbnQocil9OnR9KEssc2VsZixDdXN0b21FdmVudCk6S312YXIgRz10LnNjaGVkdWxlcixJPUQoKSxWPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlPXQsbmV3IGV9O2UucmVzb2x2ZT1vLGUucmVqZWN0PXIsZS5uZXZlcj1pLGUuX2RlZmVyPXUsZS5faGFuZGxlcj12LGUucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlLG4pe3ZhciBvPXRoaXMuX2hhbmRsZXIscj1vLmpvaW4oKS5zdGF0ZSgpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJnI+MHx8XCJmdW5jdGlvblwiIT10eXBlb2YgZSYmMD5yKXJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihfLG8pO3ZhciBpPXRoaXMuX2JlZ2V0KCksdT1pLl9oYW5kbGVyO3JldHVybiBvLmNoYWluKHUsby5yZWNlaXZlcix0LGUsbiksaX0sZS5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50aGVuKHZvaWQgMCx0KX0sZS5wcm90b3R5cGUuX2JlZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGModGhpcy5faGFuZGxlcix0aGlzLmNvbnN0cnVjdG9yKX0sZS5hbGw9ZixlLnJhY2U9ZCxlLl90cmF2ZXJzZT1zLGUuX3Zpc2l0UmVtYWluaW5nPXAsXy5wcm90b3R5cGUud2hlbj1fLnByb3RvdHlwZS5iZWNvbWU9Xy5wcm90b3R5cGUubm90aWZ5PV8ucHJvdG90eXBlLmZhaWw9Xy5wcm90b3R5cGUuX3VucmVwb3J0PV8ucHJvdG90eXBlLl9yZXBvcnQ9SyxfLnByb3RvdHlwZS5fc3RhdGU9MCxfLnByb3RvdHlwZS5zdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0sXy5wcm90b3R5cGUuam9pbj1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzO3ZvaWQgMCE9PXQuaGFuZGxlcjspdD10LmhhbmRsZXI7cmV0dXJuIHR9LF8ucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKHQsZSxuLG8scil7dGhpcy53aGVuKHtyZXNvbHZlcjp0LHJlY2VpdmVyOmUsZnVsZmlsbGVkOm4scmVqZWN0ZWQ6byxwcm9ncmVzczpyfSl9LF8ucHJvdG90eXBlLnZpc2l0PWZ1bmN0aW9uKHQsZSxuLG8pe3RoaXMuY2hhaW4oWCx0LGUsbixvKX0sXy5wcm90b3R5cGUuZm9sZD1mdW5jdGlvbih0LGUsbixvKXt0aGlzLndoZW4obmV3IFModCxlLG4sbykpfSxBKF8sdyksdy5wcm90b3R5cGUuYmVjb21lPWZ1bmN0aW9uKHQpe3QuZmFpbCgpfTt2YXIgWD1uZXcgdztBKF8sYiksYi5wcm90b3R5cGUuX3N0YXRlPTAsYi5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt0aGlzLmJlY29tZSh2KHQpKX0sYi5wcm90b3R5cGUucmVqZWN0PWZ1bmN0aW9uKHQpe3RoaXMucmVzb2x2ZWR8fHRoaXMuYmVjb21lKG5ldyBQKHQpKX0sYi5wcm90b3R5cGUuam9pbj1mdW5jdGlvbigpe2lmKCF0aGlzLnJlc29sdmVkKXJldHVybiB0aGlzO2Zvcih2YXIgdD10aGlzO3ZvaWQgMCE9PXQuaGFuZGxlcjspaWYodD10LmhhbmRsZXIsdD09PXRoaXMpcmV0dXJuIHRoaXMuaGFuZGxlcj1PKCk7cmV0dXJuIHR9LGIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29uc3VtZXJzLGU9dGhpcy5oYW5kbGVyO3RoaXMuaGFuZGxlcj10aGlzLmhhbmRsZXIuam9pbigpLHRoaXMuY29uc3VtZXJzPXZvaWQgMDtmb3IodmFyIG49MDtuPHQubGVuZ3RoOysrbillLndoZW4odFtuXSl9LGIucHJvdG90eXBlLmJlY29tZT1mdW5jdGlvbih0KXt0aGlzLnJlc29sdmVkfHwodGhpcy5yZXNvbHZlZD0hMCx0aGlzLmhhbmRsZXI9dCx2b2lkIDAhPT10aGlzLmNvbnN1bWVycyYmRy5lbnF1ZXVlKHRoaXMpLHZvaWQgMCE9PXRoaXMuY29udGV4dCYmdC5fcmVwb3J0KHRoaXMuY29udGV4dCkpfSxiLnByb3RvdHlwZS53aGVuPWZ1bmN0aW9uKHQpe3RoaXMucmVzb2x2ZWQ/Ry5lbnF1ZXVlKG5ldyBUKHQsdGhpcy5oYW5kbGVyKSk6dm9pZCAwPT09dGhpcy5jb25zdW1lcnM/dGhpcy5jb25zdW1lcnM9W3RdOnRoaXMuY29uc3VtZXJzLnB1c2godCl9LGIucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbih0KXt0aGlzLnJlc29sdmVkfHxHLmVucXVldWUobmV3IFEodCx0aGlzKSl9LGIucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24odCl7dmFyIGU9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHQ/dGhpcy5jb250ZXh0OnQ7dGhpcy5yZXNvbHZlZCYmdGhpcy5oYW5kbGVyLmpvaW4oKS5mYWlsKGUpfSxiLnByb3RvdHlwZS5fcmVwb3J0PWZ1bmN0aW9uKHQpe3RoaXMucmVzb2x2ZWQmJnRoaXMuaGFuZGxlci5qb2luKCkuX3JlcG9ydCh0KX0sYi5wcm90b3R5cGUuX3VucmVwb3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNvbHZlZCYmdGhpcy5oYW5kbGVyLmpvaW4oKS5fdW5yZXBvcnQoKX0sQShfLHgpLHgucHJvdG90eXBlLndoZW49ZnVuY3Rpb24odCl7Ry5lbnF1ZXVlKG5ldyBUKHQsdGhpcykpfSx4LnByb3RvdHlwZS5fcmVwb3J0PWZ1bmN0aW9uKHQpe3RoaXMuam9pbigpLl9yZXBvcnQodCl9LHgucHJvdG90eXBlLl91bnJlcG9ydD1mdW5jdGlvbigpe3RoaXMuam9pbigpLl91bnJlcG9ydCgpfSxBKGIsZyksQShfLHEpLHEucHJvdG90eXBlLl9zdGF0ZT0xLHEucHJvdG90eXBlLmZvbGQ9ZnVuY3Rpb24odCxlLG4sbyl7Tih0LGUsdGhpcyxuLG8pfSxxLnByb3RvdHlwZS53aGVuPWZ1bmN0aW9uKHQpe0godC5mdWxmaWxsZWQsdGhpcyx0LnJlY2VpdmVyLHQucmVzb2x2ZXIpfTt2YXIgWT0wO0EoXyxQKSxQLnByb3RvdHlwZS5fc3RhdGU9LTEsUC5wcm90b3R5cGUuZm9sZD1mdW5jdGlvbih0LGUsbixvKXtvLmJlY29tZSh0aGlzKX0sUC5wcm90b3R5cGUud2hlbj1mdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnJlamVjdGVkJiZ0aGlzLl91bnJlcG9ydCgpLEgodC5yZWplY3RlZCx0aGlzLHQucmVjZWl2ZXIsdC5yZXNvbHZlcil9LFAucHJvdG90eXBlLl9yZXBvcnQ9ZnVuY3Rpb24odCl7Ry5hZnRlclF1ZXVlKG5ldyBSKHRoaXMsdCkpfSxQLnByb3RvdHlwZS5fdW5yZXBvcnQ9ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZWR8fCh0aGlzLmhhbmRsZWQ9ITAsRy5hZnRlclF1ZXVlKG5ldyBDKHRoaXMpKSl9LFAucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24odCl7dGhpcy5yZXBvcnRlZD0hMCxJKFwidW5oYW5kbGVkUmVqZWN0aW9uXCIsdGhpcyksZS5vbkZhdGFsUmVqZWN0aW9uKHRoaXMsdm9pZCAwPT09dD90aGlzLmNvbnRleHQ6dCl9LFIucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMucmVqZWN0aW9uLmhhbmRsZWR8fHRoaXMucmVqZWN0aW9uLnJlcG9ydGVkfHwodGhpcy5yZWplY3Rpb24ucmVwb3J0ZWQ9ITAsSShcInVuaGFuZGxlZFJlamVjdGlvblwiLHRoaXMucmVqZWN0aW9uKXx8ZS5vblBvdGVudGlhbGx5VW5oYW5kbGVkUmVqZWN0aW9uKHRoaXMucmVqZWN0aW9uLHRoaXMuY29udGV4dCkpfSxDLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLnJlamVjdGlvbi5yZXBvcnRlZCYmKEkoXCJyZWplY3Rpb25IYW5kbGVkXCIsdGhpcy5yZWplY3Rpb24pfHxlLm9uUG90ZW50aWFsbHlVbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkKHRoaXMucmVqZWN0aW9uKSl9LGUuY3JlYXRlQ29udGV4dD1lLmVudGVyQ29udGV4dD1lLmV4aXRDb250ZXh0PWUub25Qb3RlbnRpYWxseVVuaGFuZGxlZFJlamVjdGlvbj1lLm9uUG90ZW50aWFsbHlVbmhhbmRsZWRSZWplY3Rpb25IYW5kbGVkPWUub25GYXRhbFJlamVjdGlvbj1LO3ZhciBaPW5ldyBfLCQ9bmV3IGUoXyxaKTtyZXR1cm4gVC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyLmpvaW4oKS53aGVuKHRoaXMuY29udGludWF0aW9uKX0sUS5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oYW5kbGVyLmNvbnN1bWVycztpZih2b2lkIDAhPT10KWZvcih2YXIgZSxuPTA7bjx0Lmxlbmd0aDsrK24pZT10W25dLEooZS5wcm9ncmVzcyx0aGlzLnZhbHVlLHRoaXMuaGFuZGxlcixlLnJlY2VpdmVyLGUucmVzb2x2ZXIpfSxFLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe28ucmVzb2x2ZSh0KX1mdW5jdGlvbiBlKHQpe28ucmVqZWN0KHQpfWZ1bmN0aW9uIG4odCl7by5ub3RpZnkodCl9dmFyIG89dGhpcy5yZXNvbHZlcjtMKHRoaXMuX3RoZW4sdGhpcy50aGVuYWJsZSx0LGUsbil9LFMucHJvdG90eXBlLmZ1bGZpbGxlZD1mdW5jdGlvbih0KXt0aGlzLmYuY2FsbCh0aGlzLmMsdGhpcy56LHQsdGhpcy50byl9LFMucHJvdG90eXBlLnJlamVjdGVkPWZ1bmN0aW9uKHQpe3RoaXMudG8ucmVqZWN0KHQpfSxTLnByb3RvdHlwZS5wcm9ncmVzcz1mdW5jdGlvbih0KXt0aGlzLnRvLm5vdGlmeSh0KX0sZX19KX0oXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdC5hbWQ/dDpmdW5jdGlvbih0KXtuLmV4cG9ydHM9dCgpfSl9LHt9XX0se30sWzFdKSgxKX0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzeXN0ZW1KU0Jvb3RzdHJhcCYmc3lzdGVtSlNCb290c3RyYXAoKX0oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN5c3RlbS1wb2x5ZmlsbHMuanMubWFwXG4iLCIvKlxuICogU3lzdGVtSlMgdjAuMTkuMzFcbiAqL1xuKGZ1bmN0aW9uKCkge1xuZnVuY3Rpb24gYm9vdHN0cmFwKCkgey8vIGZyb20gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vWWFmZmxlLzEwODg4NTBcbihmdW5jdGlvbihnbG9iYWwpIHtcbmZ1bmN0aW9uIFVSTFBvbHlmaWxsKHVybCwgYmFzZVVSTCkge1xuICBpZiAodHlwZW9mIHVybCAhPSAnc3RyaW5nJylcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVUkwgbXVzdCBiZSBhIHN0cmluZycpO1xuICB2YXIgbSA9IFN0cmluZyh1cmwpLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpLm1hdGNoKC9eKFteOlxcLz8jXSs6KT8oPzpcXC9cXC8oPzooW146QFxcLz8jXSopKD86OihbXjpAXFwvPyNdKikpP0ApPygoW146XFwvPyNdKikoPzo6KFxcZCopKT8pKT8oW14/I10qKShcXD9bXiNdKik/KCNbXFxzXFxTXSopPy8pO1xuICBpZiAoIW0pXG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgVVJMIGZvcm1hdCcpO1xuICB2YXIgcHJvdG9jb2wgPSBtWzFdIHx8IFwiXCI7XG4gIHZhciB1c2VybmFtZSA9IG1bMl0gfHwgXCJcIjtcbiAgdmFyIHBhc3N3b3JkID0gbVszXSB8fCBcIlwiO1xuICB2YXIgaG9zdCA9IG1bNF0gfHwgXCJcIjtcbiAgdmFyIGhvc3RuYW1lID0gbVs1XSB8fCBcIlwiO1xuICB2YXIgcG9ydCA9IG1bNl0gfHwgXCJcIjtcbiAgdmFyIHBhdGhuYW1lID0gbVs3XSB8fCBcIlwiO1xuICB2YXIgc2VhcmNoID0gbVs4XSB8fCBcIlwiO1xuICB2YXIgaGFzaCA9IG1bOV0gfHwgXCJcIjtcbiAgaWYgKGJhc2VVUkwgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBiYXNlID0gYmFzZVVSTCBpbnN0YW5jZW9mIFVSTFBvbHlmaWxsID8gYmFzZVVSTCA6IG5ldyBVUkxQb2x5ZmlsbChiYXNlVVJMKTtcbiAgICB2YXIgZmxhZyA9ICFwcm90b2NvbCAmJiAhaG9zdCAmJiAhdXNlcm5hbWU7XG4gICAgaWYgKGZsYWcgJiYgIXBhdGhuYW1lICYmICFzZWFyY2gpXG4gICAgICBzZWFyY2ggPSBiYXNlLnNlYXJjaDtcbiAgICBpZiAoZmxhZyAmJiBwYXRobmFtZVswXSAhPT0gXCIvXCIpXG4gICAgICBwYXRobmFtZSA9IChwYXRobmFtZSA/ICgoKGJhc2UuaG9zdCB8fCBiYXNlLnVzZXJuYW1lKSAmJiAhYmFzZS5wYXRobmFtZSA/IFwiL1wiIDogXCJcIikgKyBiYXNlLnBhdGhuYW1lLnNsaWNlKDAsIGJhc2UucGF0aG5hbWUubGFzdEluZGV4T2YoXCIvXCIpICsgMSkgKyBwYXRobmFtZSkgOiBiYXNlLnBhdGhuYW1lKTtcbiAgICAvLyBkb3Qgc2VnbWVudHMgcmVtb3ZhbFxuICAgIHZhciBvdXRwdXQgPSBbXTtcbiAgICBwYXRobmFtZS5yZXBsYWNlKC9eKFxcLlxcLj8oXFwvfCQpKSsvLCBcIlwiKVxuICAgICAgLnJlcGxhY2UoL1xcLyhcXC4oXFwvfCQpKSsvZywgXCIvXCIpXG4gICAgICAucmVwbGFjZSgvXFwvXFwuXFwuJC8sIFwiLy4uL1wiKVxuICAgICAgLnJlcGxhY2UoL1xcLz9bXlxcL10qL2csIGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIGlmIChwID09PSBcIi8uLlwiKVxuICAgICAgICAgIG91dHB1dC5wb3AoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIG91dHB1dC5wdXNoKHApO1xuICAgICAgfSk7XG4gICAgcGF0aG5hbWUgPSBvdXRwdXQuam9pbihcIlwiKS5yZXBsYWNlKC9eXFwvLywgcGF0aG5hbWVbMF0gPT09IFwiL1wiID8gXCIvXCIgOiBcIlwiKTtcbiAgICBpZiAoZmxhZykge1xuICAgICAgcG9ydCA9IGJhc2UucG9ydDtcbiAgICAgIGhvc3RuYW1lID0gYmFzZS5ob3N0bmFtZTtcbiAgICAgIGhvc3QgPSBiYXNlLmhvc3Q7XG4gICAgICBwYXNzd29yZCA9IGJhc2UucGFzc3dvcmQ7XG4gICAgICB1c2VybmFtZSA9IGJhc2UudXNlcm5hbWU7XG4gICAgfVxuICAgIGlmICghcHJvdG9jb2wpXG4gICAgICBwcm90b2NvbCA9IGJhc2UucHJvdG9jb2w7XG4gIH1cblxuICAvLyBjb252ZXJ0IHdpbmRvd3MgZmlsZSBVUkxzIHRvIHVzZSAvXG4gIGlmIChwcm90b2NvbCA9PSAnZmlsZTonKVxuICAgIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gIHRoaXMub3JpZ2luID0gaG9zdCA/IHByb3RvY29sICsgKHByb3RvY29sICE9PSBcIlwiIHx8IGhvc3QgIT09IFwiXCIgPyBcIi8vXCIgOiBcIlwiKSArIGhvc3QgOiBcIlwiO1xuICB0aGlzLmhyZWYgPSBwcm90b2NvbCArIChwcm90b2NvbCAmJiBob3N0IHx8IHByb3RvY29sID09IFwiZmlsZTpcIiA/IFwiLy9cIiA6IFwiXCIpICsgKHVzZXJuYW1lICE9PSBcIlwiID8gdXNlcm5hbWUgKyAocGFzc3dvcmQgIT09IFwiXCIgPyBcIjpcIiArIHBhc3N3b3JkIDogXCJcIikgKyBcIkBcIiA6IFwiXCIpICsgaG9zdCArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcbiAgdGhpcy5wcm90b2NvbCA9IHByb3RvY29sO1xuICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gIHRoaXMucGFzc3dvcmQgPSBwYXNzd29yZDtcbiAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgdGhpcy5ob3N0bmFtZSA9IGhvc3RuYW1lO1xuICB0aGlzLnBvcnQgPSBwb3J0O1xuICB0aGlzLnBhdGhuYW1lID0gcGF0aG5hbWU7XG4gIHRoaXMuc2VhcmNoID0gc2VhcmNoO1xuICB0aGlzLmhhc2ggPSBoYXNoO1xufVxuZ2xvYmFsLlVSTFBvbHlmaWxsID0gVVJMUG9seWZpbGw7XG59KSh0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyA/IHNlbGYgOiBnbG9iYWwpOyhmdW5jdGlvbihfX2dsb2JhbCkge1xuXG4gIHZhciBpc1dvcmtlciA9IHR5cGVvZiB3aW5kb3cgPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT0gJ3VuZGVmaW5lZCc7XG4gIHZhciBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJztcbiAgdmFyIGlzV2luZG93cyA9IHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLnBsYXRmb3JtICE9ICd1bmRlZmluZWQnICYmICEhcHJvY2Vzcy5wbGF0Zm9ybS5tYXRjaCgvXndpbi8pO1xuXG4gIGlmICghX19nbG9iYWwuY29uc29sZSlcbiAgICBfX2dsb2JhbC5jb25zb2xlID0geyBhc3NlcnQ6IGZ1bmN0aW9uKCkge30gfTtcblxuICAvLyBJRTggc3VwcG9ydFxuICB2YXIgaW5kZXhPZiA9IEFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICBmb3IgKHZhciBpID0gMCwgdGhpc0xlbiA9IHRoaXMubGVuZ3RoOyBpIDwgdGhpc0xlbjsgaSsrKSB7XG4gICAgICBpZiAodGhpc1tpXSA9PT0gaXRlbSkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xuICB9O1xuICBcbiAgdmFyIGRlZmluZVByb3BlcnR5O1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISFPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdhJywge30pKVxuICAgICAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgIGRlZmluZVByb3BlcnR5ID0gZnVuY3Rpb24ob2JqLCBwcm9wLCBvcHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvYmpbcHJvcF0gPSBvcHQudmFsdWUgfHwgb3B0LmdldC5jYWxsKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH0pKCk7XG5cbiAgdmFyIGVyckFyZ3MgPSBuZXcgRXJyb3IoMCwgJ18nKS5maWxlTmFtZSA9PSAnXyc7XG5cbiAgZnVuY3Rpb24gYWRkVG9FcnJvcihlcnIsIG1zZykge1xuICAgIC8vIHBhcnNlIHRoZSBzdGFjayByZW1vdmluZyBsb2FkZXIgY29kZSBsaW5lcyBmb3Igc2ltcGxpZmljYXRpb25cbiAgICBpZiAoIWVyci5vcmlnaW5hbEVycikge1xuICAgICAgdmFyIHN0YWNrID0gKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSB8fCBlcnIpLnRvU3RyaW5nKCkuc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIG5ld1N0YWNrID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0YWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgJF9fY3VyU2NyaXB0ID09ICd1bmRlZmluZWQnIHx8IHN0YWNrW2ldLmluZGV4T2YoJF9fY3VyU2NyaXB0LnNyYykgPT0gLTEpXG4gICAgICAgICAgbmV3U3RhY2sucHVzaChzdGFja1tpXSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIG5ld01zZyA9ICcoU3lzdGVtSlMpICcgKyAobmV3U3RhY2sgPyBuZXdTdGFjay5qb2luKCdcXG5cXHQnKSA6IGVyci5tZXNzYWdlLnN1YnN0cigxMSkpICsgJ1xcblxcdCcgKyBtc2c7XG5cbiAgICAvLyBDb252ZXJ0IGZpbGU6Ly8vIFVSTHMgdG8gcGF0aHMgaW4gTm9kZVxuICAgIGlmICghaXNCcm93c2VyKVxuICAgICAgbmV3TXNnID0gbmV3TXNnLnJlcGxhY2UoaXNXaW5kb3dzID8gL2ZpbGU6XFwvXFwvXFwvL2cgOiAvZmlsZTpcXC9cXC8vZywgJycpO1xuXG4gICAgdmFyIG5ld0VyciA9IGVyckFyZ3MgPyBuZXcgRXJyb3IobmV3TXNnLCBlcnIuZmlsZU5hbWUsIGVyci5saW5lTnVtYmVyKSA6IG5ldyBFcnJvcihuZXdNc2cpO1xuICAgIFxuICAgIC8vIE5vZGUgbmVlZHMgc3RhY2sgYWRqdXN0bWVudCBmb3IgdGhyb3cgdG8gc2hvdyBtZXNzYWdlXG4gICAgaWYgKCFpc0Jyb3dzZXIpXG4gICAgICBuZXdFcnIuc3RhY2sgPSBuZXdNc2c7XG4gICAgLy8gQ2xlYXJpbmcgdGhlIHN0YWNrIHN0b3BzIHVubmVjZXNzYXJ5IGxvYWRlciBsaW5lcyBzaG93aW5nXG4gICAgZWxzZVxuICAgICAgbmV3RXJyLnN0YWNrID0gbnVsbDtcbiAgICBcbiAgICAvLyB0cmFjayB0aGUgb3JpZ2luYWwgZXJyb3JcbiAgICBuZXdFcnIub3JpZ2luYWxFcnIgPSBlcnIub3JpZ2luYWxFcnIgfHwgZXJyO1xuXG4gICAgcmV0dXJuIG5ld0VycjtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9fZXZhbChzb3VyY2UsIGRlYnVnTmFtZSwgY29udGV4dCkge1xuICAgIHRyeSB7XG4gICAgICBuZXcgRnVuY3Rpb24oc291cmNlKS5jYWxsKGNvbnRleHQpO1xuICAgIH1cbiAgICBjYXRjaChlKSB7XG4gICAgICB0aHJvdyBhZGRUb0Vycm9yKGUsICdFdmFsdWF0aW5nICcgKyBkZWJ1Z05hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBiYXNlVVJJO1xuXG4gIC8vIGVudmlyb25lbnQgYmFzZVVSSSBkZXRlY3Rpb25cbiAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSkge1xuICAgIGJhc2VVUkkgPSBkb2N1bWVudC5iYXNlVVJJO1xuXG4gICAgaWYgKCFiYXNlVVJJKSB7XG4gICAgICB2YXIgYmFzZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYmFzZScpO1xuICAgICAgYmFzZVVSSSA9IGJhc2VzWzBdICYmIGJhc2VzWzBdLmhyZWYgfHwgd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBsb2NhdGlvbiAhPSAndW5kZWZpbmVkJykge1xuICAgIGJhc2VVUkkgPSBfX2dsb2JhbC5sb2NhdGlvbi5ocmVmO1xuICB9XG5cbiAgLy8gc2FuaXRpemUgb3V0IHRoZSBoYXNoIGFuZCBxdWVyeXN0cmluZ1xuICBpZiAoYmFzZVVSSSkge1xuICAgIGJhc2VVUkkgPSBiYXNlVVJJLnNwbGl0KCcjJylbMF0uc3BsaXQoJz8nKVswXTtcbiAgICBiYXNlVVJJID0gYmFzZVVSSS5zdWJzdHIoMCwgYmFzZVVSSS5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy5jd2QpIHtcbiAgICBiYXNlVVJJID0gJ2ZpbGU6Ly8nICsgKGlzV2luZG93cyA/ICcvJyA6ICcnKSArIHByb2Nlc3MuY3dkKCkgKyAnLyc7XG4gICAgaWYgKGlzV2luZG93cylcbiAgICAgIGJhc2VVUkkgPSBiYXNlVVJJLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBlbnZpcm9ubWVudCBiYXNlVVJJJyk7XG4gIH1cblxuICB0cnkge1xuICAgIHZhciBuYXRpdmVVUkwgPSBuZXcgX19nbG9iYWwuVVJMKCd0ZXN0Oi8vLycpLnByb3RvY29sID09ICd0ZXN0Oic7XG4gIH1cbiAgY2F0Y2goZSkge31cblxuICB2YXIgVVJMID0gbmF0aXZlVVJMID8gX19nbG9iYWwuVVJMIDogX19nbG9iYWwuVVJMUG9seWZpbGw7XG5cbi8qXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuICBEeW5hbWljIE1vZHVsZSBMb2FkZXIgUG9seWZpbGxcblxuICAgIC0gSW1wbGVtZW50ZWQgZXhhY3RseSB0byB0aGUgZm9ybWVyIDIwMTQtMDgtMjQgRVM2IFNwZWNpZmljYXRpb24gRHJhZnQgUmV2IDI3LCBTZWN0aW9uIDE1XG4gICAgICBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1oYXJtb255OnNwZWNpZmljYXRpb25fZHJhZnRzI2F1Z3VzdF8yNF8yMDE0X2RyYWZ0X3Jldl8yN1xuXG4gICAgLSBGdW5jdGlvbnMgYXJlIGNvbW1lbnRlZCB3aXRoIHRoZWlyIHNwZWMgbnVtYmVycywgd2l0aCBzcGVjIGRpZmZlcmVuY2VzIGNvbW1lbnRlZC5cblxuICAgIC0gU3BlYyBidWdzIGFyZSBjb21tZW50ZWQgaW4gdGhpcyBjb2RlIHdpdGggbGlua3MuXG5cbiAgICAtIEFic3RyYWN0IGZ1bmN0aW9ucyBoYXZlIGJlZW4gY29tYmluZWQgd2hlcmUgcG9zc2libGUsIGFuZCB0aGVpciBhc3NvY2lhdGVkIGZ1bmN0aW9uc1xuICAgICAgY29tbWVudGVkLlxuXG4gICAgLSBSZWFsbSBpbXBsZW1lbnRhdGlvbiBpcyBlbnRpcmVseSBvbWl0dGVkLlxuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiovXG5cbmZ1bmN0aW9uIE1vZHVsZSgpIHt9XG4vLyBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtQEB0b3N0cmluZ3RhZ1xuZGVmaW5lUHJvcGVydHkoTW9kdWxlLnByb3RvdHlwZSwgJ3RvU3RyaW5nJywge1xuICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICdNb2R1bGUnO1xuICB9XG59KTtcbmZ1bmN0aW9uIExvYWRlcihvcHRpb25zKSB7XG4gIHRoaXMuX2xvYWRlciA9IHtcbiAgICBsb2FkZXJPYmo6IHRoaXMsXG4gICAgbG9hZHM6IFtdLFxuICAgIG1vZHVsZXM6IHt9LFxuICAgIGltcG9ydFByb21pc2VzOiB7fSxcbiAgICBtb2R1bGVSZWNvcmRzOiB7fVxuICB9O1xuXG4gIC8vIDI2LjMuMy42XG4gIGRlZmluZVByb3BlcnR5KHRoaXMsICdnbG9iYWwnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfX2dsb2JhbDtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIDI2LjMuMy4xMyByZWFsbSBub3QgaW1wbGVtZW50ZWRcbn1cblxuKGZ1bmN0aW9uKCkge1xuXG4vLyBTb21lIEhlbHBlcnNcblxuLy8gbG9ncyBhIGxpbmtzZXQgc25hcHNob3QgZm9yIGRlYnVnZ2luZ1xuLyogZnVuY3Rpb24gc25hcHNob3QobG9hZGVyKSB7XG4gIGNvbnNvbGUubG9nKCctLS1TbmFwc2hvdC0tLScpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxvYWRlci5sb2Fkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBsb2FkID0gbG9hZGVyLmxvYWRzW2ldO1xuICAgIHZhciBsaW5rU2V0TG9nID0gJyAgJyArIGxvYWQubmFtZSArICcgKCcgKyBsb2FkLnN0YXR1cyArICcpOiAnO1xuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsb2FkLmxpbmtTZXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICBsaW5rU2V0TG9nICs9ICd7JyArIGxvZ2xvYWRzKGxvYWQubGlua1NldHNbal0ubG9hZHMpICsgJ30gJztcbiAgICB9XG4gICAgY29uc29sZS5sb2cobGlua1NldExvZyk7XG4gIH1cbiAgY29uc29sZS5sb2coJycpO1xufVxuZnVuY3Rpb24gbG9nbG9hZHMobG9hZHMpIHtcbiAgdmFyIGxvZyA9ICcnO1xuICBmb3IgKHZhciBrID0gMDsgayA8IGxvYWRzLmxlbmd0aDsgaysrKVxuICAgIGxvZyArPSBsb2Fkc1trXS5uYW1lICsgKGsgIT0gbG9hZHMubGVuZ3RoIC0gMSA/ICcgJyA6ICcnKTtcbiAgcmV0dXJuIGxvZztcbn0gKi9cblxuXG4vKiBmdW5jdGlvbiBjaGVja0ludmFyaWFudHMoKSB7XG4gIC8vIHNlZSBodHRwczovL2J1Z3MuZWNtYXNjcmlwdC5vcmcvc2hvd19idWcuY2dpP2lkPTI2MDMjYzFcblxuICB2YXIgbG9hZHMgPSBTeXN0ZW0uX2xvYWRlci5sb2FkcztcbiAgdmFyIGxpbmtTZXRzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2Fkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBsb2FkID0gbG9hZHNbaV07XG4gICAgY29uc29sZS5hc3NlcnQobG9hZC5zdGF0dXMgPT0gJ2xvYWRpbmcnIHx8IGxvYWQuc3RhdHVzID09ICdsb2FkZWQnLCAnRWFjaCBsb2FkIGlzIGxvYWRpbmcgb3IgbG9hZGVkJyk7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxvYWQubGlua1NldHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBsaW5rU2V0ID0gbG9hZC5saW5rU2V0c1tqXTtcblxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsaW5rU2V0LmxvYWRzLmxlbmd0aDsgaysrKVxuICAgICAgICBjb25zb2xlLmFzc2VydChsb2Fkcy5pbmRleE9mKGxpbmtTZXQubG9hZHNba10pICE9IC0xLCAnbGlua1NldCBsb2FkcyBhcmUgYSBzdWJzZXQgb2YgbG9hZGVyIGxvYWRzJyk7XG5cbiAgICAgIGlmIChsaW5rU2V0cy5pbmRleE9mKGxpbmtTZXQpID09IC0xKVxuICAgICAgICBsaW5rU2V0cy5wdXNoKGxpbmtTZXQpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbG9hZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbG9hZCA9IGxvYWRzW2ldO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlua1NldHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBsaW5rU2V0ID0gbGlua1NldHNbal07XG5cbiAgICAgIGlmIChsaW5rU2V0LmxvYWRzLmluZGV4T2YobG9hZCkgIT0gLTEpXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KGxvYWQubGlua1NldHMuaW5kZXhPZihsaW5rU2V0KSAhPSAtMSwgJ2xpbmtTZXQgY29udGFpbnMgbG9hZCAtPiBsb2FkIGNvbnRhaW5zIGxpbmtTZXQnKTtcblxuICAgICAgaWYgKGxvYWQubGlua1NldHMuaW5kZXhPZihsaW5rU2V0KSAhPSAtMSlcbiAgICAgICAgY29uc29sZS5hc3NlcnQobGlua1NldC5sb2Fkcy5pbmRleE9mKGxvYWQpICE9IC0xLCAnbG9hZCBjb250YWlucyBsaW5rU2V0IC0+IGxpbmtTZXQgY29udGFpbnMgbG9hZCcpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlua1NldHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbGlua1NldCA9IGxpbmtTZXRzW2ldO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGlua1NldC5sb2Fkcy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIGxvYWQgPSBsaW5rU2V0LmxvYWRzW2pdO1xuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxvYWQuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIHZhciBkZXBOYW1lID0gbG9hZC5kZXBlbmRlbmNpZXNba10udmFsdWU7XG4gICAgICAgIHZhciBkZXBMb2FkO1xuICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGxvYWRzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgaWYgKGxvYWRzW2xdLm5hbWUgIT0gZGVwTmFtZSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIGRlcExvYWQgPSBsb2Fkc1tsXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxvYWRpbmcgcmVjb3JkcyBhcmUgYWxsb3dlZCBub3QgdG8gaGF2ZSB0aGVpciBkZXBlbmRlbmNpZXMgeWV0XG4gICAgICAgIC8vIGlmIChsb2FkLnN0YXR1cyAhPSAnbG9hZGluZycpXG4gICAgICAgIC8vICBjb25zb2xlLmFzc2VydChkZXBMb2FkLCAnZGVwTG9hZCBmb3VuZCcpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUuYXNzZXJ0KGxpbmtTZXQubG9hZHMuaW5kZXhPZihkZXBMb2FkKSAhPSAtMSwgJ2xpbmtzZXQgY29udGFpbnMgYWxsIGRlcGVuZGVuY2llcycpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSAqL1xuXG4gIC8vIDE1LjIuMyAtIFJ1bnRpbWUgU2VtYW50aWNzOiBMb2FkZXIgU3RhdGVcblxuICAvLyAxNS4yLjMuMTFcbiAgZnVuY3Rpb24gY3JlYXRlTG9hZGVyTG9hZChvYmplY3QpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy8gbW9kdWxlcyBpcyBhbiBvYmplY3QgZm9yIEVTNSBpbXBsZW1lbnRhdGlvblxuICAgICAgbW9kdWxlczoge30sXG4gICAgICBsb2FkczogW10sXG4gICAgICBsb2FkZXJPYmo6IG9iamVjdFxuICAgIH07XG4gIH1cblxuICAvLyAxNS4yLjMuMiBMb2FkIFJlY29yZHMgYW5kIExvYWRSZXF1ZXN0IE9iamVjdHNcblxuICB2YXIgYW5vbkNudCA9IDA7XG5cbiAgLy8gMTUuMi4zLjIuMVxuICBmdW5jdGlvbiBjcmVhdGVMb2FkKG5hbWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiAnbG9hZGluZycsXG4gICAgICBuYW1lOiBuYW1lIHx8ICc8QW5vbnltb3VzJyArICsrYW5vbkNudCArICc+JyxcbiAgICAgIGxpbmtTZXRzOiBbXSxcbiAgICAgIGRlcGVuZGVuY2llczogW10sXG4gICAgICBtZXRhZGF0YToge31cbiAgICB9O1xuICB9XG5cbiAgLy8gMTUuMi4zLjIuMiBjcmVhdGVMb2FkUmVxdWVzdE9iamVjdCwgYWJzb3JiZWQgaW50byBjYWxsaW5nIGZ1bmN0aW9uc1xuXG4gIC8vIDE1LjIuNFxuXG4gIC8vIDE1LjIuNC4xXG4gIGZ1bmN0aW9uIGxvYWRNb2R1bGUobG9hZGVyLCBuYW1lLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2goe1xuICAgICAgc3RlcDogb3B0aW9ucy5hZGRyZXNzID8gJ2ZldGNoJyA6ICdsb2NhdGUnLFxuICAgICAgbG9hZGVyOiBsb2FkZXIsXG4gICAgICBtb2R1bGVOYW1lOiBuYW1lLFxuICAgICAgLy8gYWxsb3cgbWV0YWRhdGEgZm9yIGltcG9ydCBodHRwczovL2J1Z3MuZWNtYXNjcmlwdC5vcmcvc2hvd19idWcuY2dpP2lkPTMwOTFcbiAgICAgIG1vZHVsZU1ldGFkYXRhOiBvcHRpb25zICYmIG9wdGlvbnMubWV0YWRhdGEgfHwge30sXG4gICAgICBtb2R1bGVTb3VyY2U6IG9wdGlvbnMuc291cmNlLFxuICAgICAgbW9kdWxlQWRkcmVzczogb3B0aW9ucy5hZGRyZXNzXG4gICAgfSkpO1xuICB9XG5cbiAgLy8gMTUuMi40LjJcbiAgZnVuY3Rpb24gcmVxdWVzdExvYWQobG9hZGVyLCByZXF1ZXN0LCByZWZlcmVyTmFtZSwgcmVmZXJlckFkZHJlc3MpIHtcbiAgICAvLyAxNS4yLjQuMi4xIENhbGxOb3JtYWxpemVcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZXNvbHZlKGxvYWRlci5sb2FkZXJPYmoubm9ybWFsaXplKHJlcXVlc3QsIHJlZmVyZXJOYW1lLCByZWZlcmVyQWRkcmVzcykpO1xuICAgIH0pXG4gICAgLy8gMTUuMi40LjIuMiBHZXRPckNyZWF0ZUxvYWRcbiAgICAudGhlbihmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgbG9hZDtcbiAgICAgIGlmIChsb2FkZXIubW9kdWxlc1tuYW1lXSkge1xuICAgICAgICBsb2FkID0gY3JlYXRlTG9hZChuYW1lKTtcbiAgICAgICAgbG9hZC5zdGF0dXMgPSAnbGlua2VkJztcbiAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmVjbWFzY3JpcHQub3JnL3Nob3dfYnVnLmNnaT9pZD0yNzk1XG4gICAgICAgIGxvYWQubW9kdWxlID0gbG9hZGVyLm1vZHVsZXNbbmFtZV07XG4gICAgICAgIHJldHVybiBsb2FkO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxvYWRlci5sb2Fkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbG9hZCA9IGxvYWRlci5sb2Fkc1tpXTtcbiAgICAgICAgaWYgKGxvYWQubmFtZSAhPSBuYW1lKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICByZXR1cm4gbG9hZDtcbiAgICAgIH1cblxuICAgICAgbG9hZCA9IGNyZWF0ZUxvYWQobmFtZSk7XG4gICAgICBsb2FkZXIubG9hZHMucHVzaChsb2FkKTtcblxuICAgICAgcHJvY2VlZFRvTG9jYXRlKGxvYWRlciwgbG9hZCk7XG5cbiAgICAgIHJldHVybiBsb2FkO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gMTUuMi40LjNcbiAgZnVuY3Rpb24gcHJvY2VlZFRvTG9jYXRlKGxvYWRlciwgbG9hZCkge1xuICAgIHByb2NlZWRUb0ZldGNoKGxvYWRlciwgbG9hZCxcbiAgICAgIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAvLyAxNS4yLjQuMy4xIENhbGxMb2NhdGVcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbG9hZGVyLmxvYWRlck9iai5sb2NhdGUoeyBuYW1lOiBsb2FkLm5hbWUsIG1ldGFkYXRhOiBsb2FkLm1ldGFkYXRhIH0pO1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgLy8gMTUuMi40LjRcbiAgZnVuY3Rpb24gcHJvY2VlZFRvRmV0Y2gobG9hZGVyLCBsb2FkLCBwKSB7XG4gICAgcHJvY2VlZFRvVHJhbnNsYXRlKGxvYWRlciwgbG9hZCxcbiAgICAgIHBcbiAgICAgIC8vIDE1LjIuNC40LjEgQ2FsbEZldGNoXG4gICAgICAudGhlbihmdW5jdGlvbihhZGRyZXNzKSB7XG4gICAgICAgIC8vIGFkanVzdGVkLCBzZWUgaHR0cHM6Ly9idWdzLmVjbWFzY3JpcHQub3JnL3Nob3dfYnVnLmNnaT9pZD0yNjAyXG4gICAgICAgIGlmIChsb2FkLnN0YXR1cyAhPSAnbG9hZGluZycpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsb2FkLmFkZHJlc3MgPSBhZGRyZXNzO1xuXG4gICAgICAgIHJldHVybiBsb2FkZXIubG9hZGVyT2JqLmZldGNoKHsgbmFtZTogbG9hZC5uYW1lLCBtZXRhZGF0YTogbG9hZC5tZXRhZGF0YSwgYWRkcmVzczogYWRkcmVzcyB9KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIC8vIDE1LjIuNC41XG4gIGZ1bmN0aW9uIHByb2NlZWRUb1RyYW5zbGF0ZShsb2FkZXIsIGxvYWQsIHApIHtcbiAgICBwXG4gICAgLy8gMTUuMi40LjUuMSBDYWxsVHJhbnNsYXRlXG4gICAgLnRoZW4oZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICBpZiAobG9hZC5zdGF0dXMgIT0gJ2xvYWRpbmcnKVxuICAgICAgICByZXR1cm47XG5cbiAgICAgIGxvYWQuYWRkcmVzcyA9IGxvYWQuYWRkcmVzcyB8fCBsb2FkLm5hbWU7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9hZGVyLmxvYWRlck9iai50cmFuc2xhdGUoeyBuYW1lOiBsb2FkLm5hbWUsIG1ldGFkYXRhOiBsb2FkLm1ldGFkYXRhLCBhZGRyZXNzOiBsb2FkLmFkZHJlc3MsIHNvdXJjZTogc291cmNlIH0pKVxuXG4gICAgICAvLyAxNS4yLjQuNS4yIENhbGxJbnN0YW50aWF0ZVxuICAgICAgLnRoZW4oZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICAgIGxvYWQuc291cmNlID0gc291cmNlO1xuICAgICAgICByZXR1cm4gbG9hZGVyLmxvYWRlck9iai5pbnN0YW50aWF0ZSh7IG5hbWU6IGxvYWQubmFtZSwgbWV0YWRhdGE6IGxvYWQubWV0YWRhdGEsIGFkZHJlc3M6IGxvYWQuYWRkcmVzcywgc291cmNlOiBzb3VyY2UgfSk7XG4gICAgICB9KVxuXG4gICAgICAvLyAxNS4yLjQuNS4zIEluc3RhbnRpYXRlU3VjY2VlZGVkXG4gICAgICAudGhlbihmdW5jdGlvbihpbnN0YW50aWF0ZVJlc3VsdCkge1xuICAgICAgICBpZiAoaW5zdGFudGlhdGVSZXN1bHQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdEZWNsYXJhdGl2ZSBtb2R1bGVzIHVuc3VwcG9ydGVkIGluIHRoZSBwb2x5ZmlsbC4nKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgaW5zdGFudGlhdGVSZXN1bHQgIT0gJ29iamVjdCcpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBpbnN0YW50aWF0ZSByZXR1cm4gdmFsdWUnKTtcblxuICAgICAgICBsb2FkLmRlcHNMaXN0ID0gaW5zdGFudGlhdGVSZXN1bHQuZGVwcyB8fCBbXTtcbiAgICAgICAgbG9hZC5leGVjdXRlID0gaW5zdGFudGlhdGVSZXN1bHQuZXhlY3V0ZTtcbiAgICAgIH0pXG4gICAgICAvLyAxNS4yLjQuNiBQcm9jZXNzTG9hZERlcGVuZGVuY2llc1xuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGxvYWQuZGVwZW5kZW5jaWVzID0gW107XG4gICAgICAgIHZhciBkZXBzTGlzdCA9IGxvYWQuZGVwc0xpc3Q7XG5cbiAgICAgICAgdmFyIGxvYWRQcm9taXNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGRlcHNMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykgKGZ1bmN0aW9uKHJlcXVlc3QsIGluZGV4KSB7XG4gICAgICAgICAgbG9hZFByb21pc2VzLnB1c2goXG4gICAgICAgICAgICByZXF1ZXN0TG9hZChsb2FkZXIsIHJlcXVlc3QsIGxvYWQubmFtZSwgbG9hZC5hZGRyZXNzKVxuXG4gICAgICAgICAgICAvLyAxNS4yLjQuNi4xIEFkZERlcGVuZGVuY3lMb2FkIChsb2FkIGlzIHBhcmVudExvYWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkZXBMb2FkKSB7XG5cbiAgICAgICAgICAgICAgLy8gYWRqdXN0ZWQgZnJvbSBzcGVjIHRvIG1haW50YWluIGRlcGVuZGVuY3kgb3JkZXJcbiAgICAgICAgICAgICAgLy8gdGhpcyBpcyBkdWUgdG8gdGhlIFN5c3RlbS5yZWdpc3RlciBpbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBuZWVkc1xuICAgICAgICAgICAgICBsb2FkLmRlcGVuZGVuY2llc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAga2V5OiByZXF1ZXN0LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBkZXBMb2FkLm5hbWVcbiAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICBpZiAoZGVwTG9hZC5zdGF0dXMgIT0gJ2xpbmtlZCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGlua1NldHMgPSBsb2FkLmxpbmtTZXRzLmNvbmNhdChbXSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaW5rU2V0cy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgICAgICAgICAgICBhZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXRzW2ldLCBkZXBMb2FkKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBZGREZXBlbmRlbmN5TG9hZCAnICsgZGVwTG9hZC5uYW1lICsgJyBmb3IgJyArIGxvYWQubmFtZSk7XG4gICAgICAgICAgICAgIC8vIHNuYXBzaG90KGxvYWRlcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICk7XG4gICAgICAgIH0pKGRlcHNMaXN0W2ldLCBpKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwobG9hZFByb21pc2VzKTtcbiAgICAgIH0pXG5cbiAgICAgIC8vIDE1LjIuNC42LjIgTG9hZFN1Y2NlZWRlZFxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdMb2FkU3VjY2VlZGVkICcgKyBsb2FkLm5hbWUpO1xuICAgICAgICAvLyBzbmFwc2hvdChsb2FkZXIpO1xuXG4gICAgICAgIGNvbnNvbGUuYXNzZXJ0KGxvYWQuc3RhdHVzID09ICdsb2FkaW5nJywgJ2lzIGxvYWRpbmcnKTtcblxuICAgICAgICBsb2FkLnN0YXR1cyA9ICdsb2FkZWQnO1xuXG4gICAgICAgIHZhciBsaW5rU2V0cyA9IGxvYWQubGlua1NldHMuY29uY2F0KFtdKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaW5rU2V0cy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICAgICAgdXBkYXRlTGlua1NldE9uTG9hZChsaW5rU2V0c1tpXSwgbG9hZCk7XG4gICAgICB9KTtcbiAgICB9KVxuICAgIC8vIDE1LjIuNC41LjQgTG9hZEZhaWxlZFxuICAgIFsnY2F0Y2gnXShmdW5jdGlvbihleGMpIHtcbiAgICAgIGxvYWQuc3RhdHVzID0gJ2ZhaWxlZCc7XG4gICAgICBsb2FkLmV4Y2VwdGlvbiA9IGV4YztcblxuICAgICAgdmFyIGxpbmtTZXRzID0gbG9hZC5saW5rU2V0cy5jb25jYXQoW10pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaW5rU2V0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGlua1NldEZhaWxlZChsaW5rU2V0c1tpXSwgbG9hZCwgZXhjKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5hc3NlcnQobG9hZC5saW5rU2V0cy5sZW5ndGggPT0gMCwgJ2xpbmtTZXRzIG5vdCByZW1vdmVkJyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyAxNS4yLjQuNyBQcm9taXNlT2ZTdGFydExvYWRQYXJ0d2F5VGhyb3VnaCBhYnNvcmJlZCBpbnRvIGNhbGxpbmcgZnVuY3Rpb25zXG5cbiAgLy8gMTUuMi40LjcuMVxuICBmdW5jdGlvbiBhc3luY1N0YXJ0TG9hZFBhcnR3YXlUaHJvdWdoKHN0ZXBTdGF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsb2FkZXIgPSBzdGVwU3RhdGUubG9hZGVyO1xuICAgICAgdmFyIG5hbWUgPSBzdGVwU3RhdGUubW9kdWxlTmFtZTtcbiAgICAgIHZhciBzdGVwID0gc3RlcFN0YXRlLnN0ZXA7XG5cbiAgICAgIGlmIChsb2FkZXIubW9kdWxlc1tuYW1lXSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCInICsgbmFtZSArICdcIiBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbW9kdWxlIHRhYmxlJyk7XG5cbiAgICAgIC8vIGFkanVzdGVkIHRvIHBpY2sgdXAgZXhpc3RpbmcgbG9hZHNcbiAgICAgIHZhciBleGlzdGluZ0xvYWQ7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxvYWRlci5sb2Fkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGxvYWRlci5sb2Fkc1tpXS5uYW1lID09IG5hbWUpIHtcbiAgICAgICAgICBleGlzdGluZ0xvYWQgPSBsb2FkZXIubG9hZHNbaV07XG5cbiAgICAgICAgICBpZiAoc3RlcCA9PSAndHJhbnNsYXRlJyAmJiAhZXhpc3RpbmdMb2FkLnNvdXJjZSkge1xuICAgICAgICAgICAgZXhpc3RpbmdMb2FkLmFkZHJlc3MgPSBzdGVwU3RhdGUubW9kdWxlQWRkcmVzcztcbiAgICAgICAgICAgIHByb2NlZWRUb1RyYW5zbGF0ZShsb2FkZXIsIGV4aXN0aW5nTG9hZCwgUHJvbWlzZS5yZXNvbHZlKHN0ZXBTdGF0ZS5tb2R1bGVTb3VyY2UpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBhIHByaW1hcnkgbG9hZCAtPiB1c2UgdGhhdCBleGlzdGluZyBsaW5rc2V0IGlmIGl0IGlzIGZvciB0aGUgZGlyZWN0IGxvYWQgaGVyZVxuICAgICAgICAgIC8vIG90aGVyd2lzZSBjcmVhdGUgYSBuZXcgbGlua3NldCB1bml0XG4gICAgICAgICAgaWYgKGV4aXN0aW5nTG9hZC5saW5rU2V0cy5sZW5ndGggJiYgZXhpc3RpbmdMb2FkLmxpbmtTZXRzWzBdLmxvYWRzWzBdLm5hbWUgPT0gZXhpc3RpbmdMb2FkLm5hbWUpXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdMb2FkLmxpbmtTZXRzWzBdLmRvbmUudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShleGlzdGluZ0xvYWQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGxvYWQgPSBleGlzdGluZ0xvYWQgfHwgY3JlYXRlTG9hZChuYW1lKTtcblxuICAgICAgbG9hZC5tZXRhZGF0YSA9IHN0ZXBTdGF0ZS5tb2R1bGVNZXRhZGF0YTtcblxuICAgICAgdmFyIGxpbmtTZXQgPSBjcmVhdGVMaW5rU2V0KGxvYWRlciwgbG9hZCk7XG5cbiAgICAgIGxvYWRlci5sb2Fkcy5wdXNoKGxvYWQpO1xuXG4gICAgICByZXNvbHZlKGxpbmtTZXQuZG9uZSk7XG5cbiAgICAgIGlmIChzdGVwID09ICdsb2NhdGUnKVxuICAgICAgICBwcm9jZWVkVG9Mb2NhdGUobG9hZGVyLCBsb2FkKTtcblxuICAgICAgZWxzZSBpZiAoc3RlcCA9PSAnZmV0Y2gnKVxuICAgICAgICBwcm9jZWVkVG9GZXRjaChsb2FkZXIsIGxvYWQsIFByb21pc2UucmVzb2x2ZShzdGVwU3RhdGUubW9kdWxlQWRkcmVzcykpO1xuXG4gICAgICBlbHNlIHtcbiAgICAgICAgY29uc29sZS5hc3NlcnQoc3RlcCA9PSAndHJhbnNsYXRlJywgJ3RyYW5zbGF0ZSBzdGVwJyk7XG4gICAgICAgIGxvYWQuYWRkcmVzcyA9IHN0ZXBTdGF0ZS5tb2R1bGVBZGRyZXNzO1xuICAgICAgICBwcm9jZWVkVG9UcmFuc2xhdGUobG9hZGVyLCBsb2FkLCBQcm9taXNlLnJlc29sdmUoc3RlcFN0YXRlLm1vZHVsZVNvdXJjZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIERlY2xhcmF0aXZlIGxpbmtpbmcgZnVuY3Rpb25zIHJ1biB0aHJvdWdoIGFsdGVybmF0aXZlIGltcGxlbWVudGF0aW9uOlxuICAvLyAxNS4yLjUuMS4xIENyZWF0ZU1vZHVsZUxpbmthZ2VSZWNvcmQgbm90IGltcGxlbWVudGVkXG4gIC8vIDE1LjIuNS4xLjIgTG9va3VwRXhwb3J0IG5vdCBpbXBsZW1lbnRlZFxuICAvLyAxNS4yLjUuMS4zIExvb2t1cE1vZHVsZURlcGVuZGVuY3kgbm90IGltcGxlbWVudGVkXG5cbiAgLy8gMTUuMi41LjIuMVxuICBmdW5jdGlvbiBjcmVhdGVMaW5rU2V0KGxvYWRlciwgc3RhcnRpbmdMb2FkKSB7XG4gICAgdmFyIGxpbmtTZXQgPSB7XG4gICAgICBsb2FkZXI6IGxvYWRlcixcbiAgICAgIGxvYWRzOiBbXSxcbiAgICAgIHN0YXJ0aW5nTG9hZDogc3RhcnRpbmdMb2FkLCAvLyBhZGRlZCBzZWUgc3BlYyBidWcgaHR0cHM6Ly9idWdzLmVjbWFzY3JpcHQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTk1XG4gICAgICBsb2FkaW5nQ291bnQ6IDBcbiAgICB9O1xuICAgIGxpbmtTZXQuZG9uZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgbGlua1NldC5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICAgIGxpbmtTZXQucmVqZWN0ID0gcmVqZWN0O1xuICAgIH0pO1xuICAgIGFkZExvYWRUb0xpbmtTZXQobGlua1NldCwgc3RhcnRpbmdMb2FkKTtcbiAgICByZXR1cm4gbGlua1NldDtcbiAgfVxuICAvLyAxNS4yLjUuMi4yXG4gIGZ1bmN0aW9uIGFkZExvYWRUb0xpbmtTZXQobGlua1NldCwgbG9hZCkge1xuICAgIGlmIChsb2FkLnN0YXR1cyA9PSAnZmFpbGVkJylcbiAgICAgIHJldHVybjtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlua1NldC5sb2Fkcy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgICBpZiAobGlua1NldC5sb2Fkc1tpXSA9PSBsb2FkKVxuICAgICAgICByZXR1cm47XG5cbiAgICBsaW5rU2V0LmxvYWRzLnB1c2gobG9hZCk7XG4gICAgbG9hZC5saW5rU2V0cy5wdXNoKGxpbmtTZXQpO1xuXG4gICAgLy8gYWRqdXN0bWVudCwgc2VlIGh0dHBzOi8vYnVncy5lY21hc2NyaXB0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjYwM1xuICAgIGlmIChsb2FkLnN0YXR1cyAhPSAnbG9hZGVkJykge1xuICAgICAgbGlua1NldC5sb2FkaW5nQ291bnQrKztcbiAgICB9XG5cbiAgICB2YXIgbG9hZGVyID0gbGlua1NldC5sb2FkZXI7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxvYWQuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKCFsb2FkLmRlcGVuZGVuY2llc1tpXSlcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIHZhciBuYW1lID0gbG9hZC5kZXBlbmRlbmNpZXNbaV0udmFsdWU7XG5cbiAgICAgIGlmIChsb2FkZXIubW9kdWxlc1tuYW1lXSlcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIGZvciAodmFyIGogPSAwLCBkID0gbG9hZGVyLmxvYWRzLmxlbmd0aDsgaiA8IGQ7IGorKykge1xuICAgICAgICBpZiAobG9hZGVyLmxvYWRzW2pdLm5hbWUgIT0gbmFtZSlcbiAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBhZGRMb2FkVG9MaW5rU2V0KGxpbmtTZXQsIGxvYWRlci5sb2Fkc1tqXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnYWRkIHRvIGxpbmtzZXQgJyArIGxvYWQubmFtZSk7XG4gICAgLy8gc25hcHNob3QobGlua1NldC5sb2FkZXIpO1xuICB9XG5cbiAgLy8gbGlua2luZyBlcnJvcnMgY2FuIGJlIGdlbmVyaWMgb3IgbG9hZC1zcGVjaWZpY1xuICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBmb3IgZGVidWdnaW5nIGluZm9cbiAgZnVuY3Rpb24gZG9MaW5rKGxpbmtTZXQpIHtcbiAgICB2YXIgZXJyb3IgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgbGluayhsaW5rU2V0LCBmdW5jdGlvbihsb2FkLCBleGMpIHtcbiAgICAgICAgbGlua1NldEZhaWxlZChsaW5rU2V0LCBsb2FkLCBleGMpO1xuICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICB9KTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgbGlua1NldEZhaWxlZChsaW5rU2V0LCBudWxsLCBlKTtcbiAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgLy8gMTUuMi41LjIuM1xuICBmdW5jdGlvbiB1cGRhdGVMaW5rU2V0T25Mb2FkKGxpbmtTZXQsIGxvYWQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygndXBkYXRlIGxpbmtzZXQgb24gbG9hZCAnICsgbG9hZC5uYW1lKTtcbiAgICAvLyBzbmFwc2hvdChsaW5rU2V0LmxvYWRlcik7XG5cbiAgICBjb25zb2xlLmFzc2VydChsb2FkLnN0YXR1cyA9PSAnbG9hZGVkJyB8fCBsb2FkLnN0YXR1cyA9PSAnbGlua2VkJywgJ2xvYWRlZCBvciBsaW5rZWQnKTtcblxuICAgIGxpbmtTZXQubG9hZGluZ0NvdW50LS07XG5cbiAgICBpZiAobGlua1NldC5sb2FkaW5nQ291bnQgPiAwKVxuICAgICAgcmV0dXJuO1xuXG4gICAgLy8gYWRqdXN0ZWQgZm9yIHNwZWMgYnVnIGh0dHBzOi8vYnVncy5lY21hc2NyaXB0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Mjk5NVxuICAgIHZhciBzdGFydGluZ0xvYWQgPSBsaW5rU2V0LnN0YXJ0aW5nTG9hZDtcblxuICAgIC8vIG5vbi1leGVjdXRpbmcgbGluayB2YXJpYXRpb24gZm9yIGxvYWRlciB0cmFjaW5nXG4gICAgLy8gb24gdGhlIHNlcnZlci4gTm90IGluIHNwZWMuXG4gICAgLyoqKi9cbiAgICBpZiAobGlua1NldC5sb2FkZXIubG9hZGVyT2JqLmV4ZWN1dGUgPT09IGZhbHNlKSB7XG4gICAgICB2YXIgbG9hZHMgPSBbXS5jb25jYXQobGlua1NldC5sb2Fkcyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxvYWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgbG9hZCA9IGxvYWRzW2ldO1xuICAgICAgICBsb2FkLm1vZHVsZSA9IHtcbiAgICAgICAgICBuYW1lOiBsb2FkLm5hbWUsXG4gICAgICAgICAgbW9kdWxlOiBfbmV3TW9kdWxlKHt9KSxcbiAgICAgICAgICBldmFsdWF0ZWQ6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgbG9hZC5zdGF0dXMgPSAnbGlua2VkJztcbiAgICAgICAgZmluaXNoTG9hZChsaW5rU2V0LmxvYWRlciwgbG9hZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbGlua1NldC5yZXNvbHZlKHN0YXJ0aW5nTG9hZCk7XG4gICAgfVxuICAgIC8qKiovXG5cbiAgICB2YXIgYWJydXB0ID0gZG9MaW5rKGxpbmtTZXQpO1xuXG4gICAgaWYgKGFicnVwdClcbiAgICAgIHJldHVybjtcblxuICAgIGNvbnNvbGUuYXNzZXJ0KGxpbmtTZXQubG9hZHMubGVuZ3RoID09IDAsICdsb2FkcyBjbGVhcmVkJyk7XG5cbiAgICBsaW5rU2V0LnJlc29sdmUoc3RhcnRpbmdMb2FkKTtcbiAgfVxuXG4gIC8vIDE1LjIuNS4yLjRcbiAgZnVuY3Rpb24gbGlua1NldEZhaWxlZChsaW5rU2V0LCBsb2FkLCBleGMpIHtcbiAgICB2YXIgbG9hZGVyID0gbGlua1NldC5sb2FkZXI7XG4gICAgdmFyIHJlcXVlc3RzO1xuXG4gICAgY2hlY2tFcnJvcjogXG4gICAgaWYgKGxvYWQpIHtcbiAgICAgIGlmIChsaW5rU2V0LmxvYWRzWzBdLm5hbWUgPT0gbG9hZC5uYW1lKSB7XG4gICAgICAgIGV4YyA9IGFkZFRvRXJyb3IoZXhjLCAnRXJyb3IgbG9hZGluZyAnICsgbG9hZC5uYW1lKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmtTZXQubG9hZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcExvYWQgPSBsaW5rU2V0LmxvYWRzW2ldO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcExvYWQuZGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgZGVwID0gcExvYWQuZGVwZW5kZW5jaWVzW2pdO1xuICAgICAgICAgICAgaWYgKGRlcC52YWx1ZSA9PSBsb2FkLm5hbWUpIHtcbiAgICAgICAgICAgICAgZXhjID0gYWRkVG9FcnJvcihleGMsICdFcnJvciBsb2FkaW5nICcgKyBsb2FkLm5hbWUgKyAnIGFzIFwiJyArIGRlcC5rZXkgKyAnXCIgZnJvbSAnICsgcExvYWQubmFtZSk7XG4gICAgICAgICAgICAgIGJyZWFrIGNoZWNrRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGV4YyA9IGFkZFRvRXJyb3IoZXhjLCAnRXJyb3IgbG9hZGluZyAnICsgbG9hZC5uYW1lICsgJyBmcm9tICcgKyBsaW5rU2V0LmxvYWRzWzBdLm5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGV4YyA9IGFkZFRvRXJyb3IoZXhjLCAnRXJyb3IgbGlua2luZyAnICsgbGlua1NldC5sb2Fkc1swXS5uYW1lKTtcbiAgICB9XG5cblxuICAgIHZhciBsb2FkcyA9IGxpbmtTZXQubG9hZHMuY29uY2F0KFtdKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxvYWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGxvYWQgPSBsb2Fkc1tpXTtcblxuICAgICAgLy8gc3RvcmUgYWxsIGZhaWxlZCBsb2FkIHJlY29yZHNcbiAgICAgIGxvYWRlci5sb2FkZXJPYmouZmFpbGVkID0gbG9hZGVyLmxvYWRlck9iai5mYWlsZWQgfHwgW107XG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKGxvYWRlci5sb2FkZXJPYmouZmFpbGVkLCBsb2FkKSA9PSAtMSlcbiAgICAgICAgbG9hZGVyLmxvYWRlck9iai5mYWlsZWQucHVzaChsb2FkKTtcblxuICAgICAgdmFyIGxpbmtJbmRleCA9IGluZGV4T2YuY2FsbChsb2FkLmxpbmtTZXRzLCBsaW5rU2V0KTtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KGxpbmtJbmRleCAhPSAtMSwgJ2xpbmsgbm90IHByZXNlbnQnKTtcbiAgICAgIGxvYWQubGlua1NldHMuc3BsaWNlKGxpbmtJbmRleCwgMSk7XG4gICAgICBpZiAobG9hZC5saW5rU2V0cy5sZW5ndGggPT0gMCkge1xuICAgICAgICB2YXIgZ2xvYmFsTG9hZHNJbmRleCA9IGluZGV4T2YuY2FsbChsaW5rU2V0LmxvYWRlci5sb2FkcywgbG9hZCk7XG4gICAgICAgIGlmIChnbG9iYWxMb2Fkc0luZGV4ICE9IC0xKVxuICAgICAgICAgIGxpbmtTZXQubG9hZGVyLmxvYWRzLnNwbGljZShnbG9iYWxMb2Fkc0luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbGlua1NldC5yZWplY3QoZXhjKTtcbiAgfVxuXG4gIC8vIDE1LjIuNS4yLjVcbiAgZnVuY3Rpb24gZmluaXNoTG9hZChsb2FkZXIsIGxvYWQpIHtcbiAgICAvLyBhZGQgdG8gZ2xvYmFsIHRyYWNlIGlmIHRyYWNpbmdcbiAgICBpZiAobG9hZGVyLmxvYWRlck9iai50cmFjZSkge1xuICAgICAgaWYgKCFsb2FkZXIubG9hZGVyT2JqLmxvYWRzKVxuICAgICAgICBsb2FkZXIubG9hZGVyT2JqLmxvYWRzID0ge307XG4gICAgICB2YXIgZGVwTWFwID0ge307XG4gICAgICBsb2FkLmRlcGVuZGVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uKGRlcCkge1xuICAgICAgICBkZXBNYXBbZGVwLmtleV0gPSBkZXAudmFsdWU7XG4gICAgICB9KTtcbiAgICAgIGxvYWRlci5sb2FkZXJPYmoubG9hZHNbbG9hZC5uYW1lXSA9IHtcbiAgICAgICAgbmFtZTogbG9hZC5uYW1lLFxuICAgICAgICBkZXBzOiBsb2FkLmRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24oZGVwKXsgcmV0dXJuIGRlcC5rZXkgfSksXG4gICAgICAgIGRlcE1hcDogZGVwTWFwLFxuICAgICAgICBhZGRyZXNzOiBsb2FkLmFkZHJlc3MsXG4gICAgICAgIG1ldGFkYXRhOiBsb2FkLm1ldGFkYXRhLFxuICAgICAgICBzb3VyY2U6IGxvYWQuc291cmNlXG4gICAgICB9O1xuICAgIH1cbiAgICAvLyBpZiBub3QgYW5vbnltb3VzLCBhZGQgdG8gdGhlIG1vZHVsZSB0YWJsZVxuICAgIGlmIChsb2FkLm5hbWUpIHtcbiAgICAgIGNvbnNvbGUuYXNzZXJ0KCFsb2FkZXIubW9kdWxlc1tsb2FkLm5hbWVdIHx8IGxvYWRlci5tb2R1bGVzW2xvYWQubmFtZV0ubW9kdWxlID09PSBsb2FkLm1vZHVsZS5tb2R1bGUsICdsb2FkIG5vdCBpbiBtb2R1bGUgdGFibGUnKTtcbiAgICAgIGxvYWRlci5tb2R1bGVzW2xvYWQubmFtZV0gPSBsb2FkLm1vZHVsZTtcbiAgICB9XG4gICAgdmFyIGxvYWRJbmRleCA9IGluZGV4T2YuY2FsbChsb2FkZXIubG9hZHMsIGxvYWQpO1xuICAgIGlmIChsb2FkSW5kZXggIT0gLTEpXG4gICAgICBsb2FkZXIubG9hZHMuc3BsaWNlKGxvYWRJbmRleCwgMSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsb2FkLmxpbmtTZXRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbG9hZEluZGV4ID0gaW5kZXhPZi5jYWxsKGxvYWQubGlua1NldHNbaV0ubG9hZHMsIGxvYWQpO1xuICAgICAgaWYgKGxvYWRJbmRleCAhPSAtMSlcbiAgICAgICAgbG9hZC5saW5rU2V0c1tpXS5sb2Fkcy5zcGxpY2UobG9hZEluZGV4LCAxKTtcbiAgICB9XG4gICAgbG9hZC5saW5rU2V0cy5zcGxpY2UoMCwgbG9hZC5saW5rU2V0cy5sZW5ndGgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZG9EeW5hbWljRXhlY3V0ZShsaW5rU2V0LCBsb2FkLCBsaW5rRXJyb3IpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIG1vZHVsZSA9IGxvYWQuZXhlY3V0ZSgpO1xuICAgIH1cbiAgICBjYXRjaChlKSB7XG4gICAgICBsaW5rRXJyb3IobG9hZCwgZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghbW9kdWxlIHx8ICEobW9kdWxlIGluc3RhbmNlb2YgTW9kdWxlKSlcbiAgICAgIGxpbmtFcnJvcihsb2FkLCBuZXcgVHlwZUVycm9yKCdFeGVjdXRpb24gbXVzdCBkZWZpbmUgYSBNb2R1bGUgaW5zdGFuY2UnKSk7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgfVxuXG4gIC8vIDI2LjMgTG9hZGVyXG5cbiAgLy8gMjYuMy4xLjFcbiAgLy8gZGVmaW5lZCBhdCB0b3BcblxuICAvLyBpbXBvcnRQcm9taXNlcyBhZGRzIGFiaWxpdHkgdG8gaW1wb3J0IGEgbW9kdWxlIHR3aWNlIHdpdGhvdXQgZXJyb3IgLSBodHRwczovL2J1Z3MuZWNtYXNjcmlwdC5vcmcvc2hvd19idWcuY2dpP2lkPTI2MDFcbiAgZnVuY3Rpb24gY3JlYXRlSW1wb3J0UHJvbWlzZShsb2FkZXIsIG5hbWUsIHByb21pc2UpIHtcbiAgICB2YXIgaW1wb3J0UHJvbWlzZXMgPSBsb2FkZXIuX2xvYWRlci5pbXBvcnRQcm9taXNlcztcbiAgICByZXR1cm4gaW1wb3J0UHJvbWlzZXNbbmFtZV0gPSBwcm9taXNlLnRoZW4oZnVuY3Rpb24obSkge1xuICAgICAgaW1wb3J0UHJvbWlzZXNbbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICByZXR1cm4gbTtcbiAgICB9LCBmdW5jdGlvbihlKSB7XG4gICAgICBpbXBvcnRQcm9taXNlc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cblxuICBMb2FkZXIucHJvdG90eXBlID0ge1xuICAgIC8vIDI2LjMuMy4xXG4gICAgY29uc3RydWN0b3I6IExvYWRlcixcbiAgICAvLyAyNi4zLjMuMlxuICAgIGRlZmluZTogZnVuY3Rpb24obmFtZSwgc291cmNlLCBvcHRpb25zKSB7XG4gICAgICAvLyBjaGVjayBpZiBhbHJlYWR5IGRlZmluZWRcbiAgICAgIGlmICh0aGlzLl9sb2FkZXIuaW1wb3J0UHJvbWlzZXNbbmFtZV0pXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ01vZHVsZSBpcyBhbHJlYWR5IGxvYWRpbmcuJyk7XG4gICAgICByZXR1cm4gY3JlYXRlSW1wb3J0UHJvbWlzZSh0aGlzLCBuYW1lLCBuZXcgUHJvbWlzZShhc3luY1N0YXJ0TG9hZFBhcnR3YXlUaHJvdWdoKHtcbiAgICAgICAgc3RlcDogJ3RyYW5zbGF0ZScsXG4gICAgICAgIGxvYWRlcjogdGhpcy5fbG9hZGVyLFxuICAgICAgICBtb2R1bGVOYW1lOiBuYW1lLFxuICAgICAgICBtb2R1bGVNZXRhZGF0YTogb3B0aW9ucyAmJiBvcHRpb25zLm1ldGFkYXRhIHx8IHt9LFxuICAgICAgICBtb2R1bGVTb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgbW9kdWxlQWRkcmVzczogb3B0aW9ucyAmJiBvcHRpb25zLmFkZHJlc3NcbiAgICAgIH0pKSk7XG4gICAgfSxcbiAgICAvLyAyNi4zLjMuM1xuICAgICdkZWxldGUnOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcy5fbG9hZGVyO1xuICAgICAgZGVsZXRlIGxvYWRlci5pbXBvcnRQcm9taXNlc1tuYW1lXTtcbiAgICAgIGRlbGV0ZSBsb2FkZXIubW9kdWxlUmVjb3Jkc1tuYW1lXTtcbiAgICAgIHJldHVybiBsb2FkZXIubW9kdWxlc1tuYW1lXSA/IGRlbGV0ZSBsb2FkZXIubW9kdWxlc1tuYW1lXSA6IGZhbHNlO1xuICAgIH0sXG4gICAgLy8gMjYuMy4zLjQgZW50cmllcyBub3QgaW1wbGVtZW50ZWRcbiAgICAvLyAyNi4zLjMuNVxuICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICBpZiAoIXRoaXMuX2xvYWRlci5tb2R1bGVzW2tleV0pXG4gICAgICAgIHJldHVybjtcbiAgICAgIHJldHVybiB0aGlzLl9sb2FkZXIubW9kdWxlc1trZXldLm1vZHVsZTtcbiAgICB9LFxuICAgIC8vIDI2LjMuMy43XG4gICAgaGFzOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICByZXR1cm4gISF0aGlzLl9sb2FkZXIubW9kdWxlc1tuYW1lXTtcbiAgICB9LFxuICAgIC8vIDI2LjMuMy44XG4gICAgJ2ltcG9ydCc6IGZ1bmN0aW9uKG5hbWUsIHBhcmVudE5hbWUsIHBhcmVudEFkZHJlc3MpIHtcbiAgICAgIGlmICh0eXBlb2YgcGFyZW50TmFtZSA9PSAnb2JqZWN0JylcbiAgICAgICAgcGFyZW50TmFtZSA9IHBhcmVudE5hbWUubmFtZTtcblxuICAgICAgLy8gcnVuIG5vcm1hbGl6ZSBmaXJzdFxuICAgICAgdmFyIGxvYWRlck9iaiA9IHRoaXM7XG5cbiAgICAgIC8vIGFkZGVkLCBzZWUgaHR0cHM6Ly9idWdzLmVjbWFzY3JpcHQub3JnL3Nob3dfYnVnLmNnaT9pZD0yNjU5XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGxvYWRlck9iai5ub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSkpXG4gICAgICAudGhlbihmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHZhciBsb2FkZXIgPSBsb2FkZXJPYmouX2xvYWRlcjtcblxuICAgICAgICBpZiAobG9hZGVyLm1vZHVsZXNbbmFtZV0pXG4gICAgICAgICAgcmV0dXJuIGxvYWRlci5tb2R1bGVzW25hbWVdLm1vZHVsZTtcblxuICAgICAgICByZXR1cm4gbG9hZGVyLmltcG9ydFByb21pc2VzW25hbWVdIHx8IGNyZWF0ZUltcG9ydFByb21pc2UobG9hZGVyT2JqLCBuYW1lLFxuICAgICAgICAgIGxvYWRNb2R1bGUobG9hZGVyLCBuYW1lLCB7fSlcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihsb2FkKSB7XG4gICAgICAgICAgICBkZWxldGUgbG9hZGVyLmltcG9ydFByb21pc2VzW25hbWVdO1xuICAgICAgICAgICAgcmV0dXJuIGxvYWQubW9kdWxlLm1vZHVsZTtcbiAgICAgICAgICB9KSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIDI2LjMuMy45IGtleXMgbm90IGltcGxlbWVudGVkXG4gICAgLy8gMjYuMy4zLjEwXG4gICAgbG9hZDogZnVuY3Rpb24obmFtZSkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXMuX2xvYWRlcjtcbiAgICAgIGlmIChsb2FkZXIubW9kdWxlc1tuYW1lXSlcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuIGxvYWRlci5pbXBvcnRQcm9taXNlc1tuYW1lXSB8fCBjcmVhdGVJbXBvcnRQcm9taXNlKHRoaXMsIG5hbWUsIG5ldyBQcm9taXNlKGFzeW5jU3RhcnRMb2FkUGFydHdheVRocm91Z2goe1xuICAgICAgICBzdGVwOiAnbG9jYXRlJyxcbiAgICAgICAgbG9hZGVyOiBsb2FkZXIsXG4gICAgICAgIG1vZHVsZU5hbWU6IG5hbWUsXG4gICAgICAgIG1vZHVsZU1ldGFkYXRhOiB7fSxcbiAgICAgICAgbW9kdWxlU291cmNlOiB1bmRlZmluZWQsXG4gICAgICAgIG1vZHVsZUFkZHJlc3M6IHVuZGVmaW5lZFxuICAgICAgfSkpXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgZGVsZXRlIGxvYWRlci5pbXBvcnRQcm9taXNlc1tuYW1lXTtcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIC8vIDI2LjMuMy4xMVxuICAgIG1vZHVsZTogZnVuY3Rpb24oc291cmNlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgbG9hZCA9IGNyZWF0ZUxvYWQoKTtcbiAgICAgIGxvYWQuYWRkcmVzcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hZGRyZXNzO1xuICAgICAgdmFyIGxpbmtTZXQgPSBjcmVhdGVMaW5rU2V0KHRoaXMuX2xvYWRlciwgbG9hZCk7XG4gICAgICB2YXIgc291cmNlUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShzb3VyY2UpO1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXMuX2xvYWRlcjtcbiAgICAgIHZhciBwID0gbGlua1NldC5kb25lLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBsb2FkLm1vZHVsZS5tb2R1bGU7XG4gICAgICB9KTtcbiAgICAgIHByb2NlZWRUb1RyYW5zbGF0ZShsb2FkZXIsIGxvYWQsIHNvdXJjZVByb21pc2UpO1xuICAgICAgcmV0dXJuIHA7XG4gICAgfSxcbiAgICAvLyAyNi4zLjMuMTJcbiAgICBuZXdNb2R1bGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqICE9ICdvYmplY3QnKVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBvYmplY3QnKTtcblxuICAgICAgdmFyIG0gPSBuZXcgTW9kdWxlKCk7XG5cbiAgICAgIHZhciBwTmFtZXMgPSBbXTtcbiAgICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyAmJiBvYmogIT0gbnVsbClcbiAgICAgICAgcE5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMob2JqKTtcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iailcbiAgICAgICAgICBwTmFtZXMucHVzaChrZXkpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBOYW1lcy5sZW5ndGg7IGkrKykgKGZ1bmN0aW9uKGtleSkge1xuICAgICAgICBkZWZpbmVQcm9wZXJ0eShtLCBrZXksIHtcbiAgICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2R1bGUgZXhwb3J0cyBjYW5ub3QgYmUgY2hhbmdlZCBleHRlcm5hbGx5LicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KShwTmFtZXNbaV0pO1xuXG4gICAgICBpZiAoT2JqZWN0LmZyZWV6ZSlcbiAgICAgICAgT2JqZWN0LmZyZWV6ZShtKTtcblxuICAgICAgcmV0dXJuIG07XG4gICAgfSxcbiAgICAvLyAyNi4zLjMuMTRcbiAgICBzZXQ6IGZ1bmN0aW9uKG5hbWUsIG1vZHVsZSkge1xuICAgICAgaWYgKCEobW9kdWxlIGluc3RhbmNlb2YgTW9kdWxlKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTG9hZGVyLnNldCgnICsgbmFtZSArICcsIG1vZHVsZSkgbXVzdCBiZSBhIG1vZHVsZScpO1xuICAgICAgdGhpcy5fbG9hZGVyLm1vZHVsZXNbbmFtZV0gPSB7XG4gICAgICAgIG1vZHVsZTogbW9kdWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgLy8gMjYuMy4zLjE1IHZhbHVlcyBub3QgaW1wbGVtZW50ZWRcbiAgICAvLyAyNi4zLjMuMTYgQEBpdGVyYXRvciBub3QgaW1wbGVtZW50ZWRcbiAgICAvLyAyNi4zLjMuMTcgQEB0b1N0cmluZ1RhZyBub3QgaW1wbGVtZW50ZWRcblxuICAgIC8vIDI2LjMuMy4xOC4xXG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbihuYW1lLCByZWZlcnJlck5hbWUsIHJlZmVycmVyQWRkcmVzcykge30sXG4gICAgLy8gMjYuMy4zLjE4LjJcbiAgICBsb2NhdGU6IGZ1bmN0aW9uKGxvYWQpIHtcbiAgICAgIHJldHVybiBsb2FkLm5hbWU7XG4gICAgfSxcbiAgICAvLyAyNi4zLjMuMTguM1xuICAgIGZldGNoOiBmdW5jdGlvbihsb2FkKSB7XG4gICAgfSxcbiAgICAvLyAyNi4zLjMuMTguNFxuICAgIHRyYW5zbGF0ZTogZnVuY3Rpb24obG9hZCkge1xuICAgICAgcmV0dXJuIGxvYWQuc291cmNlO1xuICAgIH0sXG4gICAgLy8gMjYuMy4zLjE4LjVcbiAgICBpbnN0YW50aWF0ZTogZnVuY3Rpb24obG9hZCkge1xuICAgIH1cbiAgfTtcblxuICB2YXIgX25ld01vZHVsZSA9IExvYWRlci5wcm90b3R5cGUubmV3TW9kdWxlO1xuXG4vKlxuICogRVM2IE1vZHVsZSBEZWNsYXJhdGl2ZSBMaW5raW5nIENvZGVcbiAqL1xuICBmdW5jdGlvbiBsaW5rKGxpbmtTZXQsIGxpbmtFcnJvcikge1xuXG4gICAgdmFyIGxvYWRlciA9IGxpbmtTZXQubG9hZGVyO1xuXG4gICAgaWYgKCFsaW5rU2V0LmxvYWRzLmxlbmd0aClcbiAgICAgIHJldHVybjtcblxuICAgIHZhciBsb2FkcyA9IGxpbmtTZXQubG9hZHMuY29uY2F0KFtdKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbG9hZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsb2FkID0gbG9hZHNbaV07XG5cbiAgICAgIHZhciBtb2R1bGUgPSBkb0R5bmFtaWNFeGVjdXRlKGxpbmtTZXQsIGxvYWQsIGxpbmtFcnJvcik7XG4gICAgICBpZiAoIW1vZHVsZSlcbiAgICAgICAgcmV0dXJuO1xuICAgICAgbG9hZC5tb2R1bGUgPSB7XG4gICAgICAgIG5hbWU6IGxvYWQubmFtZSxcbiAgICAgICAgbW9kdWxlOiBtb2R1bGVcbiAgICAgIH07XG4gICAgICBsb2FkLnN0YXR1cyA9ICdsaW5rZWQnO1xuXG4gICAgICBmaW5pc2hMb2FkKGxvYWRlciwgbG9hZCk7XG4gICAgfVxuICB9XG5cbn0pKCk7XG5cbnZhciBTeXN0ZW07XG5cbiAgdmFyIGZldGNoVGV4dEZyb21VUkw7XG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBmZXRjaFRleHRGcm9tVVJMID0gZnVuY3Rpb24odXJsLCBhdXRob3JpemF0aW9uLCBmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgIHZhciBzYW1lRG9tYWluID0gdHJ1ZTtcbiAgICAgIHZhciBkb1RpbWVvdXQgPSBmYWxzZTtcbiAgICAgIGlmICghKCd3aXRoQ3JlZGVudGlhbHMnIGluIHhocikpIHtcbiAgICAgICAgLy8gY2hlY2sgaWYgc2FtZSBkb21haW5cbiAgICAgICAgdmFyIGRvbWFpbkNoZWNrID0gL14oXFx3KzopP1xcL1xcLyhbXlxcL10rKS8uZXhlYyh1cmwpO1xuICAgICAgICBpZiAoZG9tYWluQ2hlY2spIHtcbiAgICAgICAgICBzYW1lRG9tYWluID0gZG9tYWluQ2hlY2tbMl0gPT09IHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xuICAgICAgICAgIGlmIChkb21haW5DaGVja1sxXSlcbiAgICAgICAgICAgIHNhbWVEb21haW4gJj0gZG9tYWluQ2hlY2tbMV0gPT09IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFzYW1lRG9tYWluICYmIHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICB4aHIgPSBuZXcgWERvbWFpblJlcXVlc3QoKTtcbiAgICAgICAgeGhyLm9ubG9hZCA9IGxvYWQ7XG4gICAgICAgIHhoci5vbmVycm9yID0gZXJyb3I7XG4gICAgICAgIHhoci5vbnRpbWVvdXQgPSBlcnJvcjtcbiAgICAgICAgeGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbigpIHt9O1xuICAgICAgICB4aHIudGltZW91dCA9IDA7XG4gICAgICAgIGRvVGltZW91dCA9IHRydWU7XG4gICAgICB9XG4gICAgICBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgICBmdWxmaWxsKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1hIUiBlcnJvcicgKyAoeGhyLnN0YXR1cyA/ICcgKCcgKyB4aHIuc3RhdHVzICsgKHhoci5zdGF0dXNUZXh0ID8gJyAnICsgeGhyLnN0YXR1c1RleHQgIDogJycpICsgJyknIDogJycpICsgJyBsb2FkaW5nICcgKyB1cmwpKTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgLy8gaW4gQ2hyb21lIG9uIGZpbGU6Ly8vIFVSTHMsIHN0YXR1cyBpcyAwXG4gICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT0gMCkge1xuICAgICAgICAgICAgaWYgKHhoci5yZXNwb25zZVRleHQpIHtcbiAgICAgICAgICAgICAgbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHdoZW4gcmVzcG9uc2VUZXh0IGlzIGVtcHR5LCB3YWl0IGZvciBsb2FkIG9yIGVycm9yIGV2ZW50XG4gICAgICAgICAgICAgIC8vIHRvIGluZm9ybSBpZiBpdCBpcyBhIDQwNCBvciBlbXB0eSBmaWxlXG4gICAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBsb2FkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICBsb2FkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyb3IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB4aHIub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xuXG4gICAgICBpZiAoeGhyLnNldFJlcXVlc3RIZWFkZXIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi94LWVzLW1vZHVsZSwgKi8qJyk7XG4gICAgICAgIC8vIGNhbiBzZXQgXCJhdXRob3JpemF0aW9uOiB0cnVlXCIgdG8gZW5hYmxlIHdpdGhDcmVkZW50aWFscyBvbmx5XG4gICAgICAgIGlmIChhdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhdXRob3JpemF0aW9uID09ICdzdHJpbmcnKVxuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCBhdXRob3JpemF0aW9uKTtcbiAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZG9UaW1lb3V0KSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiByZXF1aXJlICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGZzO1xuICAgIGZldGNoVGV4dEZyb21VUkwgPSBmdW5jdGlvbih1cmwsIGF1dGhvcml6YXRpb24sIGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgaWYgKHVybC5zdWJzdHIoMCwgOCkgIT0gJ2ZpbGU6Ly8vJylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmV0Y2ggXCInICsgdXJsICsgJ1wiLiBPbmx5IGZpbGUgVVJMcyBvZiB0aGUgZm9ybSBmaWxlOi8vLyBhbGxvd2VkIHJ1bm5pbmcgaW4gTm9kZS4nKTtcbiAgICAgIGZzID0gZnMgfHwgcmVxdWlyZSgnZnMnKTtcbiAgICAgIGlmIChpc1dpbmRvd3MpXG4gICAgICAgIHVybCA9IHVybC5yZXBsYWNlKC9cXC8vZywgJ1xcXFwnKS5zdWJzdHIoOCk7XG4gICAgICBlbHNlXG4gICAgICAgIHVybCA9IHVybC5zdWJzdHIoNyk7XG4gICAgICByZXR1cm4gZnMucmVhZEZpbGUodXJsLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAvLyBTdHJpcCBCeXRlIE9yZGVyIE1hcmsgb3V0IGlmIGl0J3MgdGhlIGxlYWRpbmcgY2hhclxuICAgICAgICAgIHZhciBkYXRhU3RyaW5nID0gZGF0YSArICcnO1xuICAgICAgICAgIGlmIChkYXRhU3RyaW5nWzBdID09PSAnXFx1ZmVmZicpXG4gICAgICAgICAgICBkYXRhU3RyaW5nID0gZGF0YVN0cmluZy5zdWJzdHIoMSk7XG5cbiAgICAgICAgICBmdWxmaWxsKGRhdGFTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBzZWxmLmZldGNoICE9ICd1bmRlZmluZWQnKSB7XG4gICAgZmV0Y2hUZXh0RnJvbVVSTCA9IGZ1bmN0aW9uKHVybCwgYXV0aG9yaXphdGlvbiwgZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICB2YXIgb3B0cyA9IHtcbiAgICAgICAgaGVhZGVyczogeydBY2NlcHQnOiAnYXBwbGljYXRpb24veC1lcy1tb2R1bGUsICovKid9XG4gICAgICB9O1xuXG4gICAgICBpZiAoYXV0aG9yaXphdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGF1dGhvcml6YXRpb24gPT0gJ3N0cmluZycpXG4gICAgICAgICAgb3B0cy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBhdXRob3JpemF0aW9uO1xuICAgICAgICBvcHRzLmNyZWRlbnRpYWxzID0gJ2luY2x1ZGUnO1xuICAgICAgfVxuXG4gICAgICBmZXRjaCh1cmwsIG9wdHMpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgaWYgKHIub2spIHtcbiAgICAgICAgICAgIHJldHVybiByLnRleHQoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGZXRjaCBlcnJvcjogJyArIHIuc3RhdHVzICsgJyAnICsgci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGZ1bGZpbGwsIHJlamVjdCk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vIGVudmlyb25tZW50IGZldGNoIEFQSSBhdmFpbGFibGUuJyk7XG4gIH1cbi8qXG4gKiBUcmFjZXVyLCBCYWJlbCBhbmQgVHlwZVNjcmlwdCB0cmFuc3BpbGUgaG9vayBmb3IgTG9hZGVyXG4gKi9cbnZhciB0cmFuc3BpbGUgPSAoZnVuY3Rpb24oKSB7XG5cbiAgLy8gdXNlIFRyYWNldXIgYnkgZGVmYXVsdFxuICBMb2FkZXIucHJvdG90eXBlLnRyYW5zcGlsZXIgPSAndHJhY2V1cic7XG5cbiAgZnVuY3Rpb24gdHJhbnNwaWxlKGxvYWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF9fZ2xvYmFsW3NlbGYudHJhbnNwaWxlciA9PSAndHlwZXNjcmlwdCcgPyAndHMnIDogc2VsZi50cmFuc3BpbGVyXVxuICAgICAgICB8fCAoc2VsZi5wbHVnaW5Mb2FkZXIgfHwgc2VsZilbJ2ltcG9ydCddKHNlbGYudHJhbnNwaWxlcikpXG4gICAgLnRoZW4oZnVuY3Rpb24odHJhbnNwaWxlcikge1xuICAgICAgaWYgKHRyYW5zcGlsZXIuX191c2VEZWZhdWx0KVxuICAgICAgICB0cmFuc3BpbGVyID0gdHJhbnNwaWxlclsnZGVmYXVsdCddO1xuXG4gICAgICB2YXIgdHJhbnNwaWxlRnVuY3Rpb247XG4gICAgICBpZiAodHJhbnNwaWxlci5Db21waWxlcilcbiAgICAgICAgdHJhbnNwaWxlRnVuY3Rpb24gPSB0cmFjZXVyVHJhbnNwaWxlO1xuICAgICAgZWxzZSBpZiAodHJhbnNwaWxlci5jcmVhdGVMYW5ndWFnZVNlcnZpY2UpXG4gICAgICAgIHRyYW5zcGlsZUZ1bmN0aW9uID0gdHlwZXNjcmlwdFRyYW5zcGlsZTtcbiAgICAgIGVsc2VcbiAgICAgICAgdHJhbnNwaWxlRnVuY3Rpb24gPSBiYWJlbFRyYW5zcGlsZTtcblxuICAgICAgLy8gbm90ZSBfX21vZHVsZU5hbWUgd2lsbCBiZSBwYXJ0IG9mIHRoZSB0cmFuc2Zvcm1lciBtZXRhIGluIGZ1dHVyZSB3aGVuIHdlIGhhdmUgdGhlIHNwZWMgZm9yIHRoaXNcbiAgICAgIHJldHVybiAnKGZ1bmN0aW9uKF9fbW9kdWxlTmFtZSl7JyArIHRyYW5zcGlsZUZ1bmN0aW9uLmNhbGwoc2VsZiwgbG9hZCwgdHJhbnNwaWxlcikgKyAnXFxufSkoXCInICsgbG9hZC5uYW1lICsgJ1wiKTtcXG4vLyMgc291cmNlVVJMPScgKyBsb2FkLmFkZHJlc3MgKyAnIXRyYW5zcGlsZWQnO1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRyYWNldXJUcmFuc3BpbGUobG9hZCwgdHJhY2V1cikge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy50cmFjZXVyT3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLm1vZHVsZXMgPSAnaW5zdGFudGlhdGUnO1xuICAgIG9wdGlvbnMuc2NyaXB0ID0gZmFsc2U7XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwcyA9PT0gdW5kZWZpbmVkKVxuICAgICAgb3B0aW9ucy5zb3VyY2VNYXBzID0gJ2lubGluZSc7XG4gICAgb3B0aW9ucy5maWxlbmFtZSA9IGxvYWQuYWRkcmVzcztcbiAgICBvcHRpb25zLmlucHV0U291cmNlTWFwID0gbG9hZC5tZXRhZGF0YS5zb3VyY2VNYXA7XG4gICAgb3B0aW9ucy5tb2R1bGVOYW1lID0gZmFsc2U7XG5cbiAgICB2YXIgY29tcGlsZXIgPSBuZXcgdHJhY2V1ci5Db21waWxlcihvcHRpb25zKTtcblxuICAgIHJldHVybiBkb1RyYWNldXJDb21waWxlKGxvYWQuc291cmNlLCBjb21waWxlciwgb3B0aW9ucy5maWxlbmFtZSk7XG4gIH1cbiAgZnVuY3Rpb24gZG9UcmFjZXVyQ29tcGlsZShzb3VyY2UsIGNvbXBpbGVyLCBmaWxlbmFtZSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY29tcGlsZXIuY29tcGlsZShzb3VyY2UsIGZpbGVuYW1lKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgLy8gb24gb2xkZXIgdmVyc2lvbnMgb2YgdHJhY2V1ciAoPDAuOS4zKSwgYW4gYXJyYXkgb2YgZXJyb3JzIGlzIHRocm93blxuICAgICAgLy8gcmF0aGVyIHRoYW4gYSBzaW5nbGUgZXJyb3IuXG4gICAgICBpZiAoZS5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgZVswXTtcbiAgICAgIH1cbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gYmFiZWxUcmFuc3BpbGUobG9hZCwgYmFiZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuYmFiZWxPcHRpb25zIHx8IHt9O1xuICAgIG9wdGlvbnMubW9kdWxlcyA9ICdzeXN0ZW0nO1xuICAgIGlmIChvcHRpb25zLnNvdXJjZU1hcCA9PT0gdW5kZWZpbmVkKVxuICAgICAgb3B0aW9ucy5zb3VyY2VNYXAgPSAnaW5saW5lJztcbiAgICBvcHRpb25zLmlucHV0U291cmNlTWFwID0gbG9hZC5tZXRhZGF0YS5zb3VyY2VNYXA7XG4gICAgb3B0aW9ucy5maWxlbmFtZSA9IGxvYWQuYWRkcmVzcztcbiAgICBvcHRpb25zLmNvZGUgPSB0cnVlO1xuICAgIG9wdGlvbnMuYXN0ID0gZmFsc2U7XG5cbiAgICByZXR1cm4gYmFiZWwudHJhbnNmb3JtKGxvYWQuc291cmNlLCBvcHRpb25zKS5jb2RlO1xuICB9XG5cbiAgZnVuY3Rpb24gdHlwZXNjcmlwdFRyYW5zcGlsZShsb2FkLCB0cykge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy50eXBlc2NyaXB0T3B0aW9ucyB8fCB7fTtcbiAgICBvcHRpb25zLnRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8IHRzLlNjcmlwdFRhcmdldC5FUzU7XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwID09PSB1bmRlZmluZWQpXG4gICAgICBvcHRpb25zLnNvdXJjZU1hcCA9IHRydWU7XG4gICAgaWYgKG9wdGlvbnMuc291cmNlTWFwICYmIG9wdGlvbnMuaW5saW5lU291cmNlTWFwICE9PSBmYWxzZSlcbiAgICAgIG9wdGlvbnMuaW5saW5lU291cmNlTWFwID0gdHJ1ZTtcblxuICAgIG9wdGlvbnMubW9kdWxlID0gdHMuTW9kdWxlS2luZC5TeXN0ZW07XG5cbiAgICByZXR1cm4gdHMudHJhbnNwaWxlKGxvYWQuc291cmNlLCBvcHRpb25zLCBsb2FkLmFkZHJlc3MpO1xuICB9XG5cbiAgcmV0dXJuIHRyYW5zcGlsZTtcbn0pKCk7XG4vLyBTeXN0ZW1KUyBMb2FkZXIgQ2xhc3MgYW5kIEV4dGVuc2lvbiBoZWxwZXJzXG5mdW5jdGlvbiBTeXN0ZW1KU0xvYWRlcigpIHtcbiAgTG9hZGVyLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5wYXRocyA9IHt9O1xuICB0aGlzLl9sb2FkZXIucGF0aHMgPSB7fTtcblxuICBzeXN0ZW1KU0NvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG59XG5cbi8vIGlubGluZSBPYmplY3QuY3JlYXRlLXN0eWxlIGNsYXNzIGV4dGVuc2lvblxuZnVuY3Rpb24gU3lzdGVtUHJvdG8oKSB7fTtcblN5c3RlbVByb3RvLnByb3RvdHlwZSA9IExvYWRlci5wcm90b3R5cGU7XG5TeXN0ZW1KU0xvYWRlci5wcm90b3R5cGUgPSBuZXcgU3lzdGVtUHJvdG8oKTtcblN5c3RlbUpTTG9hZGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN5c3RlbUpTTG9hZGVyO1xuXG52YXIgc3lzdGVtSlNDb25zdHJ1Y3RvcjtcblxuZnVuY3Rpb24gaG9vayhuYW1lLCBob29rKSB7XG4gIFN5c3RlbUpTTG9hZGVyLnByb3RvdHlwZVtuYW1lXSA9IGhvb2soU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlW25hbWVdIHx8IGZ1bmN0aW9uKCkge30pO1xufVxuZnVuY3Rpb24gaG9va0NvbnN0cnVjdG9yKGhvb2spIHtcbiAgc3lzdGVtSlNDb25zdHJ1Y3RvciA9IGhvb2soc3lzdGVtSlNDb25zdHJ1Y3RvciB8fCBmdW5jdGlvbigpIHt9KTtcbn1cblxuXG52YXIgYWJzVVJMUmVnRXggPSAvXlteXFwvXSs6XFwvXFwvLztcbmZ1bmN0aW9uIGlzQWJzb2x1dGUobmFtZSkge1xuICByZXR1cm4gbmFtZS5tYXRjaChhYnNVUkxSZWdFeCk7XG59XG5mdW5jdGlvbiBpc1JlbChuYW1lKSB7XG4gIHJldHVybiAobmFtZVswXSA9PSAnLicgJiYgKCFuYW1lWzFdIHx8IG5hbWVbMV0gPT0gJy8nIHx8IG5hbWVbMV0gPT0gJy4nKSkgfHwgbmFtZVswXSA9PSAnLyc7XG59XG5mdW5jdGlvbiBpc1BsYWluKG5hbWUpIHtcbiAgcmV0dXJuICFpc1JlbChuYW1lKSAmJiAhaXNBYnNvbHV0ZShuYW1lKTtcbn1cblxudmFyIGJhc2VVUklPYmogPSBuZXcgVVJMKGJhc2VVUkkpO1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlKG5hbWUsIHBhcmVudCkge1xuICAvLyB1cmwgcmVzb2x1dGlvbiBzaG9ydHBhdGhzXG4gIGlmIChuYW1lWzBdID09ICcuJykge1xuICAgIC8vIGRvdC1yZWxhdGl2ZSB1cmwgbm9ybWFsaXphdGlvblxuICAgIGlmIChuYW1lWzFdID09ICcvJyAmJiBuYW1lWzJdICE9ICcuJylcbiAgICAgIHJldHVybiAocGFyZW50ICYmIHBhcmVudC5zdWJzdHIoMCwgcGFyZW50Lmxhc3RJbmRleE9mKCcvJykgKyAxKSB8fCBiYXNlVVJJKSArIG5hbWUuc3Vic3RyKDIpO1xuICB9XG4gIGVsc2UgaWYgKG5hbWVbMF0gIT0gJy8nICYmIG5hbWUuaW5kZXhPZignOicpID09IC0xKSB7XG4gICAgLy8gcGxhaW4gcGFyZW50IG5vcm1hbGl6YXRpb25cbiAgICByZXR1cm4gKHBhcmVudCAmJiBwYXJlbnQuc3Vic3RyKDAsIHBhcmVudC5sYXN0SW5kZXhPZignLycpICsgMSkgfHwgYmFzZVVSSSkgKyBuYW1lO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBVUkwobmFtZSwgcGFyZW50ICYmIHBhcmVudC5yZXBsYWNlKC8jL2csICclMDUnKSB8fCBiYXNlVVJJT2JqKS5ocmVmLnJlcGxhY2UoLyUwNS9nLCAnIycpO1xufVxuXG4vLyBOQiBubyBzcGVjaWZpY2F0aW9uIHByb3ZpZGVkIGZvciBTeXN0ZW0ucGF0aHMsIHVzZWQgaWRlYXMgZGlzY3Vzc2VkIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9qb3JlbmRvcmZmL2pzLWxvYWRlcnMvaXNzdWVzLzI1XG5mdW5jdGlvbiBhcHBseVBhdGhzKGxvYWRlciwgbmFtZSkge1xuICAvLyBtb3N0IHNwZWNpZmljIChtb3N0IG51bWJlciBvZiBzbGFzaGVzIGluIHBhdGgpIG1hdGNoIHdpbnNcbiAgdmFyIHBhdGhNYXRjaCA9ICcnLCB3aWxkY2FyZCwgbWF4V2lsZGNhcmRQcmVmaXhMZW4gPSAwO1xuXG4gIHZhciBwYXRocyA9IGxvYWRlci5wYXRocztcbiAgdmFyIHBhdGhzQ2FjaGUgPSBsb2FkZXIuX2xvYWRlci5wYXRocztcblxuICAvLyBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBhdGhzIGVudHJ5XG4gIGZvciAodmFyIHAgaW4gcGF0aHMpIHtcbiAgICBpZiAocGF0aHMuaGFzT3duUHJvcGVydHkgJiYgIXBhdGhzLmhhc093blByb3BlcnR5KHApKVxuICAgICAgY29udGludWU7XG5cbiAgICAvLyBwYXRocyBzYW5pdGl6YXRpb25cbiAgICB2YXIgcGF0aCA9IHBhdGhzW3BdO1xuICAgIGlmIChwYXRoICE9PSBwYXRoc0NhY2hlW3BdKVxuICAgICAgcGF0aCA9IHBhdGhzW3BdID0gcGF0aHNDYWNoZVtwXSA9IHVybFJlc29sdmUocGF0aHNbcF0sIGlzUmVsKHBhdGhzW3BdKSA/IGJhc2VVUkkgOiBsb2FkZXIuYmFzZVVSTCk7XG5cbiAgICAvLyBleGFjdCBwYXRoIG1hdGNoXG4gICAgaWYgKHAuaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgaWYgKG5hbWUgPT0gcClcbiAgICAgICAgcmV0dXJuIHBhdGhzW3BdO1xuICAgICAgXG4gICAgICAvLyBzdXBwb3J0IHRyYWlsaW5nIC8gaW4gcGF0aHMgcnVsZXNcbiAgICAgIGVsc2UgaWYgKG5hbWUuc3Vic3RyKDAsIHAubGVuZ3RoIC0gMSkgPT0gcC5zdWJzdHIoMCwgcC5sZW5ndGggLSAxKSAmJiAobmFtZS5sZW5ndGggPCBwLmxlbmd0aCB8fCBuYW1lW3AubGVuZ3RoIC0gMV0gPT0gcFtwLmxlbmd0aCAtIDFdKSAmJiAocGF0aHNbcF1bcGF0aHNbcF0ubGVuZ3RoIC0gMV0gPT0gJy8nIHx8IHBhdGhzW3BdID09ICcnKSkge1xuICAgICAgICByZXR1cm4gcGF0aHNbcF0uc3Vic3RyKDAsIHBhdGhzW3BdLmxlbmd0aCAtIDEpICsgKG5hbWUubGVuZ3RoID4gcC5sZW5ndGggPyAocGF0aHNbcF0gJiYgJy8nIHx8ICcnKSArIG5hbWUuc3Vic3RyKHAubGVuZ3RoKSA6ICcnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gd2lsZGNhcmQgcGF0aCBtYXRjaFxuICAgIGVsc2Uge1xuICAgICAgdmFyIHBhdGhQYXJ0cyA9IHAuc3BsaXQoJyonKTtcbiAgICAgIGlmIChwYXRoUGFydHMubGVuZ3RoID4gMilcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT25seSBvbmUgd2lsZGNhcmQgaW4gYSBwYXRoIGlzIHBlcm1pdHRlZCcpO1xuXG4gICAgICB2YXIgd2lsZGNhcmRQcmVmaXhMZW4gPSBwYXRoUGFydHNbMF0ubGVuZ3RoO1xuICAgICAgaWYgKHdpbGRjYXJkUHJlZml4TGVuID49IG1heFdpbGRjYXJkUHJlZml4TGVuICYmXG4gICAgICAgICAgbmFtZS5zdWJzdHIoMCwgcGF0aFBhcnRzWzBdLmxlbmd0aCkgPT0gcGF0aFBhcnRzWzBdICYmXG4gICAgICAgICAgbmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSBwYXRoUGFydHNbMV0ubGVuZ3RoKSA9PSBwYXRoUGFydHNbMV0pIHtcbiAgICAgICAgICAgIG1heFdpbGRjYXJkUHJlZml4TGVuID0gd2lsZGNhcmRQcmVmaXhMZW47XG4gICAgICAgICAgICBwYXRoTWF0Y2ggPSBwO1xuICAgICAgICAgICAgd2lsZGNhcmQgPSBuYW1lLnN1YnN0cihwYXRoUGFydHNbMF0ubGVuZ3RoLCBuYW1lLmxlbmd0aCAtIHBhdGhQYXJ0c1sxXS5sZW5ndGggLSBwYXRoUGFydHNbMF0ubGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIG91dFBhdGggPSBwYXRoc1twYXRoTWF0Y2hdO1xuICBpZiAodHlwZW9mIHdpbGRjYXJkID09ICdzdHJpbmcnKVxuICAgIG91dFBhdGggPSBvdXRQYXRoLnJlcGxhY2UoJyonLCB3aWxkY2FyZCk7XG5cbiAgcmV0dXJuIG91dFBhdGg7XG59XG5cbmZ1bmN0aW9uIGRlZHVwZShkZXBzKSB7XG4gIHZhciBuZXdEZXBzID0gW107XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGVwcy5sZW5ndGg7IGkgPCBsOyBpKyspXG4gICAgaWYgKGluZGV4T2YuY2FsbChuZXdEZXBzLCBkZXBzW2ldKSA9PSAtMSlcbiAgICAgIG5ld0RlcHMucHVzaChkZXBzW2ldKVxuICByZXR1cm4gbmV3RGVwcztcbn1cblxuZnVuY3Rpb24gZ3JvdXAoZGVwcykge1xuICB2YXIgbmFtZXMgPSBbXTtcbiAgdmFyIGluZGljZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBkZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBpbmRleCA9IGluZGV4T2YuY2FsbChuYW1lcywgZGVwc1tpXSk7XG4gICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgbmFtZXMucHVzaChkZXBzW2ldKTtcbiAgICAgIGluZGljZXMucHVzaChbaV0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGluZGljZXNbaW5kZXhdLnB1c2goaSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IG5hbWVzOiBuYW1lcywgaW5kaWNlczogaW5kaWNlcyB9O1xufVxuXG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gdHJ1ZTtcbnRyeSB7XG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoeyBhOiAwIH0sICdhJyk7XG59XG5jYXRjaChlKSB7XG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZhbHNlO1xufVxuXG4vLyBjb252ZXJ0cyBhbnkgbW9kdWxlLmV4cG9ydHMgb2JqZWN0IGludG8gYW4gb2JqZWN0IHJlYWR5IGZvciBTeXN0ZW1KUy5uZXdNb2R1bGVcbmZ1bmN0aW9uIGdldEVTTW9kdWxlKGV4cG9ydHMpIHtcbiAgdmFyIGVzTW9kdWxlID0ge307XG4gIC8vIGRvbid0IHRyaWdnZXIgZ2V0dGVycy9zZXR0ZXJzIGluIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgdGhlbVxuICBpZiAoKHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnIHx8IHR5cGVvZiBleHBvcnRzID09ICdmdW5jdGlvbicpICYmIGV4cG9ydHMgIT09IF9fZ2xvYmFsKSB7XG4gICAgICBpZiAoZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gZXhwb3J0cykge1xuICAgICAgICAgIC8vIFRoZSBkZWZhdWx0IHByb3BlcnR5IGlzIGNvcGllZCB0byBlc01vZHVsZSBsYXRlciBvblxuICAgICAgICAgIGlmIChwID09PSAnZGVmYXVsdCcpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBkZWZpbmVPckNvcHlQcm9wZXJ0eShlc01vZHVsZSwgZXhwb3J0cywgcCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBleHRlbmQoZXNNb2R1bGUsIGV4cG9ydHMpO1xuICAgICAgfVxuICB9XG4gIGVzTW9kdWxlWydkZWZhdWx0J10gPSBleHBvcnRzO1xuICBkZWZpbmVQcm9wZXJ0eShlc01vZHVsZSwgJ19fdXNlRGVmYXVsdCcsIHtcbiAgICB2YWx1ZTogdHJ1ZVxuICB9KTtcbiAgcmV0dXJuIGVzTW9kdWxlO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVPckNvcHlQcm9wZXJ0eSh0YXJnZXRPYmosIHNvdXJjZU9iaiwgcHJvcE5hbWUpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZDtcbiAgICBpZiAoZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlT2JqLCBwcm9wTmFtZSkpXG4gICAgICBkZWZpbmVQcm9wZXJ0eSh0YXJnZXRPYmosIHByb3BOYW1lLCBkKTtcbiAgfVxuICBjYXRjaCAoZXgpIHtcbiAgICAvLyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIHRocmV3IGFuIGV4Y2VwdGlvbiwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXQgcHJvcGVydHlcbiAgICAvLyB3ZSBkb250IG5lZWQgaGFzT3duUHJvcGVydHkgaGVyZSBiZWNhdXNlIGdldE93blByb3BlcnR5RGVzY3JpcHRvciB3b3VsZCBoYXZlIHJldHVybmVkIHVuZGVmaW5lZCBhYm92ZVxuICAgIHRhcmdldE9ialtwcm9wTmFtZV0gPSBzb3VyY2VPYmpbcHJvcE5hbWVdO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRlbmQoYSwgYiwgcHJlcGVuZCkge1xuICB2YXIgaGFzT3duUHJvcGVydHkgPSBiICYmIGIuaGFzT3duUHJvcGVydHk7XG4gIGZvciAodmFyIHAgaW4gYikge1xuICAgIGlmIChoYXNPd25Qcm9wZXJ0eSAmJiAhYi5oYXNPd25Qcm9wZXJ0eShwKSlcbiAgICAgIGNvbnRpbnVlO1xuICAgIGlmICghcHJlcGVuZCB8fCAhKHAgaW4gYSkpXG4gICAgICBhW3BdID0gYltwXTtcbiAgfVxuICByZXR1cm4gYTtcbn1cblxuLy8gbWV0YSBmaXJzdC1sZXZlbCBleHRlbmRzIHdoZXJlOlxuLy8gYXJyYXkgKyBhcnJheSBhcHBlbmRzXG4vLyBvYmplY3QgKyBvYmplY3QgZXh0ZW5kc1xuLy8gb3RoZXIgcHJvcGVydGllcyByZXBsYWNlXG5mdW5jdGlvbiBleHRlbmRNZXRhKGEsIGIsIHByZXBlbmQpIHtcbiAgdmFyIGhhc093blByb3BlcnR5ID0gYiAmJiBiLmhhc093blByb3BlcnR5O1xuICBmb3IgKHZhciBwIGluIGIpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkgJiYgIWIuaGFzT3duUHJvcGVydHkocCkpXG4gICAgICBjb250aW51ZTtcbiAgICB2YXIgdmFsID0gYltwXTtcbiAgICBpZiAoIShwIGluIGEpKVxuICAgICAgYVtwXSA9IHZhbDtcbiAgICBlbHNlIGlmICh2YWwgaW5zdGFuY2VvZiBBcnJheSAmJiBhW3BdIGluc3RhbmNlb2YgQXJyYXkpXG4gICAgICBhW3BdID0gW10uY29uY2F0KHByZXBlbmQgPyB2YWwgOiBhW3BdKS5jb25jYXQocHJlcGVuZCA/IGFbcF0gOiB2YWwpO1xuICAgIGVsc2UgaWYgKHR5cGVvZiB2YWwgPT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsICYmIHR5cGVvZiBhW3BdID09ICdvYmplY3QnKVxuICAgICAgYVtwXSA9IGV4dGVuZChleHRlbmQoe30sIGFbcF0pLCB2YWwsIHByZXBlbmQpO1xuICAgIGVsc2UgaWYgKCFwcmVwZW5kKVxuICAgICAgYVtwXSA9IHZhbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRlbmRQa2dDb25maWcocGtnQ2ZnQSwgcGtnQ2ZnQiwgcGtnTmFtZSwgbG9hZGVyLCB3YXJuSW52YWxpZFByb3BlcnRpZXMpIHtcbiAgZm9yICh2YXIgcHJvcCBpbiBwa2dDZmdCKSB7XG4gICAgaWYgKGluZGV4T2YuY2FsbChbJ21haW4nLCAnZm9ybWF0JywgJ2RlZmF1bHRFeHRlbnNpb24nLCAnYmFzZVBhdGgnXSwgcHJvcCkgIT0gLTEpIHtcbiAgICAgIHBrZ0NmZ0FbcHJvcF0gPSBwa2dDZmdCW3Byb3BdO1xuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wID09ICdtYXAnKSB7XG4gICAgICBleHRlbmQocGtnQ2ZnQS5tYXAgPSBwa2dDZmdBLm1hcCB8fCB7fSwgcGtnQ2ZnQi5tYXApO1xuICAgIH1cbiAgICBlbHNlIGlmIChwcm9wID09ICdtZXRhJykge1xuICAgICAgZXh0ZW5kKHBrZ0NmZ0EubWV0YSA9IHBrZ0NmZ0EubWV0YSB8fCB7fSwgcGtnQ2ZnQi5tZXRhKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocHJvcCA9PSAnZGVwQ2FjaGUnKSB7XG4gICAgICBmb3IgKHZhciBkIGluIHBrZ0NmZ0IuZGVwQ2FjaGUpIHtcbiAgICAgICAgdmFyIGROb3JtYWxpemVkO1xuXG4gICAgICAgIGlmIChkLnN1YnN0cigwLCAyKSA9PSAnLi8nKVxuICAgICAgICAgIGROb3JtYWxpemVkID0gcGtnTmFtZSArICcvJyArIGQuc3Vic3RyKDIpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgZE5vcm1hbGl6ZWQgPSBjb3JlUmVzb2x2ZS5jYWxsKGxvYWRlciwgZCk7XG4gICAgICAgIGxvYWRlci5kZXBDYWNoZVtkTm9ybWFsaXplZF0gPSAobG9hZGVyLmRlcENhY2hlW2ROb3JtYWxpemVkXSB8fCBbXSkuY29uY2F0KHBrZ0NmZ0IuZGVwQ2FjaGVbZF0pO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh3YXJuSW52YWxpZFByb3BlcnRpZXMgJiYgaW5kZXhPZi5jYWxsKFsnYnJvd3NlckNvbmZpZycsICdub2RlQ29uZmlnJywgJ2RldkNvbmZpZycsICdwcm9kdWN0aW9uQ29uZmlnJ10sIHByb3ApID09IC0xICYmIFxuICAgICAgICAoIXBrZ0NmZ0IuaGFzT3duUHJvcGVydHkgfHwgcGtnQ2ZnQi5oYXNPd25Qcm9wZXJ0eShwcm9wKSkpIHtcbiAgICAgIHdhcm4uY2FsbChsb2FkZXIsICdcIicgKyBwcm9wICsgJ1wiIGlzIG5vdCBhIHZhbGlkIHBhY2thZ2UgY29uZmlndXJhdGlvbiBvcHRpb24gaW4gcGFja2FnZSAnICsgcGtnTmFtZSk7XG4gICAgfVxuICB9XG59XG5cbi8vIGRlZXBseS1tZXJnZSAodG8gZmlyc3QgbGV2ZWwpIGNvbmZpZyB3aXRoIGFueSBleGlzdGluZyBwYWNrYWdlIGNvbmZpZ1xuZnVuY3Rpb24gc2V0UGtnQ29uZmlnKGxvYWRlciwgcGtnTmFtZSwgY2ZnLCBwcmVwZW5kQ29uZmlnKSB7XG4gIHZhciBwa2c7XG5cbiAgLy8gZmlyc3QgcGFja2FnZSBpcyBjb25maWcgYnkgcmVmZXJlbmNlIGZvciBmYXN0IHBhdGgsIGNsb25lZCBhZnRlciB0aGF0XG4gIGlmICghbG9hZGVyLnBhY2thZ2VzW3BrZ05hbWVdKSB7XG4gICAgcGtnID0gbG9hZGVyLnBhY2thZ2VzW3BrZ05hbWVdID0gY2ZnO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciBiYXNlUGtnID0gbG9hZGVyLnBhY2thZ2VzW3BrZ05hbWVdO1xuICAgIHBrZyA9IGxvYWRlci5wYWNrYWdlc1twa2dOYW1lXSA9IHt9O1xuXG4gICAgZXh0ZW5kUGtnQ29uZmlnKHBrZywgcHJlcGVuZENvbmZpZyA/IGNmZyA6IGJhc2VQa2csIHBrZ05hbWUsIGxvYWRlciwgcHJlcGVuZENvbmZpZyk7XG4gICAgZXh0ZW5kUGtnQ29uZmlnKHBrZywgcHJlcGVuZENvbmZpZyA/IGJhc2VQa2cgOiBjZmcsIHBrZ05hbWUsIGxvYWRlciwgIXByZXBlbmRDb25maWcpO1xuICB9XG4gIFxuICAvLyBtYWluIG9iamVjdCBiZWNvbWVzIG1haW4gbWFwXG4gIGlmICh0eXBlb2YgcGtnLm1haW4gPT0gJ29iamVjdCcpIHtcbiAgICBwa2cubWFwID0gcGtnLm1hcCB8fCB7fTtcbiAgICBwa2cubWFwWycuL0BtYWluJ10gPSBwa2cubWFpbjtcbiAgICBwa2cubWFpblsnZGVmYXVsdCddID0gcGtnLm1haW5bJ2RlZmF1bHQnXSB8fCAnLi8nO1xuICAgIHBrZy5tYWluID0gJ0BtYWluJztcbiAgfVxuXG4gIHJldHVybiBwa2c7XG59XG5cbmZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gIGlmICh0aGlzLndhcm5pbmdzICYmIHR5cGVvZiBjb25zb2xlICE9ICd1bmRlZmluZWQnICYmIGNvbnNvbGUud2FybilcbiAgICBjb25zb2xlLndhcm4obXNnKTtcbn1cbi8vIHdlIGRlZmluZSBhIF9fZXhlYyBmb3IgZ2xvYmFsbHktc2NvcGVkIGV4ZWN1dGlvblxuLy8gdXNlZCBieSBtb2R1bGUgZm9ybWF0IGltcGxlbWVudGF0aW9uc1xudmFyIF9fZXhlYztcblxuKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBoYXNCdG9hID0gdHlwZW9mIGJ0b2EgIT0gJ3VuZGVmaW5lZCc7XG5cbiAgZnVuY3Rpb24gZ2V0U291cmNlKGxvYWQsIHdyYXApIHtcbiAgICB2YXIgbGFzdExpbmVJbmRleCA9IGxvYWQuc291cmNlLmxhc3RJbmRleE9mKCdcXG4nKTtcblxuICAgIC8vIHdyYXAgRVMgZm9ybWF0cyB3aXRoIGEgU3lzdGVtIGNsb3N1cmUgZm9yIFN5c3RlbSBnbG9iYWwgZW5jYXBzdWxhdGlvblxuICAgIGlmIChsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnZ2xvYmFsJylcbiAgICAgIHdyYXAgPSBmYWxzZTtcblxuICAgIHZhciBzb3VyY2VNYXAgPSBsb2FkLm1ldGFkYXRhLnNvdXJjZU1hcDtcbiAgICBpZiAoc291cmNlTWFwKSB7XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZU1hcCAhPSAnb2JqZWN0JylcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbG9hZC5tZXRhZGF0YS5zb3VyY2VNYXAgbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0LicpO1xuXG4gICAgICBzb3VyY2VNYXAgPSBKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApO1xuICAgIH1cblxuICAgIHJldHVybiAod3JhcCA/ICcoZnVuY3Rpb24oU3lzdGVtLCBTeXN0ZW1KUykgeycgOiAnJykgKyBsb2FkLnNvdXJjZSArICh3cmFwID8gJ1xcbn0pKFN5c3RlbSwgU3lzdGVtKTsnIDogJycpXG4gICAgICAgIC8vIGFkZHMgdGhlIHNvdXJjZVVSTCBjb21tZW50IGlmIG5vdCBhbHJlYWR5IHByZXNlbnRcbiAgICAgICAgKyAobG9hZC5zb3VyY2Uuc3Vic3RyKGxhc3RMaW5lSW5kZXgsIDE1KSAhPSAnXFxuLy8jIHNvdXJjZVVSTD0nIFxuICAgICAgICAgID8gJ1xcbi8vIyBzb3VyY2VVUkw9JyArIGxvYWQuYWRkcmVzcyArIChzb3VyY2VNYXAgPyAnIXRyYW5zcGlsZWQnIDogJycpIDogJycpXG4gICAgICAgIC8vIGFkZCBzb3VyY2VNYXBwaW5nVVJMIGlmIGxvYWQubWV0YWRhdGEuc291cmNlTWFwIGlzIHNldFxuICAgICAgICArIChzb3VyY2VNYXAgJiYgaGFzQnRvYSAmJiAnXFxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCwnICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc291cmNlTWFwKSkpIHx8ICcnKTtcbiAgfVxuXG4gIHZhciBjdXJMb2FkO1xuXG4gIC8vIFN5c3RlbS5yZWdpc3RlciwgU3lzdGVtLnJlZ2lzdGVyRHluYW1pYywgQU1EIGRlZmluZSBwaXBlbGluZVxuICAvLyBpZiBjdXJyZW50bHkgZXZhbGxpbmcgY29kZSBoZXJlLCBpbW1lZGlhdGVseSByZWR1Y2UgdGhlIHJlZ2lzdGVyZWQgZW50cnkgYWdhaW5zdCB0aGUgbG9hZCByZWNvcmRcbiAgaG9vaygncHVzaFJlZ2lzdGVyXycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihyZWdpc3Rlcikge1xuICAgICAgaWYgKCFjdXJMb2FkKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICAgIHRoaXMucmVkdWNlUmVnaXN0ZXJfKGN1ckxvYWQsIHJlZ2lzdGVyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIFN5c3RlbSBjbG9iYmVyaW5nIHByb3RlY3Rpb24gKG1vc3RseSBmb3IgVHJhY2V1cilcbiAgdmFyIGN1clN5c3RlbTtcbiAgdmFyIGNhbGxDb3VudGVyID0gMDtcbiAgZnVuY3Rpb24gcHJlRXhlYyhsb2FkZXIsIGxvYWQpIHtcbiAgICBjdXJMb2FkID0gbG9hZDtcbiAgICBpZiAoY2FsbENvdW50ZXIrKyA9PSAwKVxuICAgICAgY3VyU3lzdGVtID0gX19nbG9iYWwuU3lzdGVtO1xuICAgIF9fZ2xvYmFsLlN5c3RlbSA9IF9fZ2xvYmFsLlN5c3RlbUpTID0gbG9hZGVyOyBcbiAgfVxuICBmdW5jdGlvbiBwb3N0RXhlYygpIHtcbiAgICBpZiAoLS1jYWxsQ291bnRlciA9PSAwKVxuICAgICAgX19nbG9iYWwuU3lzdGVtID0gX19nbG9iYWwuU3lzdGVtSlMgPSBjdXJTeXN0ZW07XG4gICAgY3VyTG9hZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHZhciBud2pzID0gdHlwZW9mIHByb2Nlc3MgIT0gJ3VuZGVmaW5lZCcgJiYgcHJvY2Vzcy52ZXJzaW9ucyAmJiBwcm9jZXNzLnZlcnNpb25zWydub2RlLXdlYmtpdCddO1xuICB2YXIgdm07XG4gIF9fZXhlYyA9IGZ1bmN0aW9uKGxvYWQpIHtcbiAgICBpZiAoIWxvYWQuc291cmNlKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICgobG9hZC5tZXRhZGF0YS5pbnRlZ3JpdHkgfHwgbG9hZC5tZXRhZGF0YS5ub25jZSkgJiYgc3VwcG9ydHNTY3JpcHRFeGVjKVxuICAgICAgcmV0dXJuIHNjcmlwdEV4ZWMuY2FsbCh0aGlzLCBsb2FkKTtcbiAgICB0cnkge1xuICAgICAgcHJlRXhlYyh0aGlzLCBsb2FkKTtcbiAgICAgIGN1ckxvYWQgPSBsb2FkO1xuICAgICAgLy8gZ2xvYmFsIHNjb3BlZCBldmFsIGZvciBub2RlIChhdm9pZHMgcmVxdWlyZSBzY29wZSBsZWFrKVxuICAgICAgaWYgKHRoaXMuX25vZGVSZXF1aXJlICYmICFud2pzKSB7XG4gICAgICAgIHZtID0gdm0gfHwgdGhpcy5fbm9kZVJlcXVpcmUoJ3ZtJyk7XG4gICAgICAgIHZtLnJ1bkluVGhpc0NvbnRleHQoZ2V0U291cmNlKGxvYWQsIHRydWUpLCB7IGZpbGVuYW1lOiBsb2FkLmFkZHJlc3MgKyAobG9hZC5tZXRhZGF0YS5zb3VyY2VNYXAgPyAnIXRyYW5zcGlsZWQnIDogJycpIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgICgwLCBldmFsKShnZXRTb3VyY2UobG9hZCwgdHJ1ZSkpO1xuICAgICAgfVxuICAgICAgcG9zdEV4ZWMoKTtcbiAgICB9XG4gICAgY2F0Y2goZSkge1xuICAgICAgcG9zdEV4ZWMoKTsgXG4gICAgICB0aHJvdyBhZGRUb0Vycm9yKGUsICdFdmFsdWF0aW5nICcgKyBsb2FkLmFkZHJlc3MpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgc3VwcG9ydHNTY3JpcHRFeGVjID0gZmFsc2U7XG4gIGlmIChpc0Jyb3dzZXIgJiYgdHlwZW9mIGRvY3VtZW50ICE9ICd1bmRlZmluZWQnICYmIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKSB7XG4gICAgdmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XG4gICAgJF9fY3VyU2NyaXB0ID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdO1xuXG4gICAgaWYgKCEod2luZG93LmNocm9tZSAmJiB3aW5kb3cuY2hyb21lLmV4dGVuc2lvbiB8fCBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9eTm9kZVxcLmpzLykpKVxuICAgICAgc3VwcG9ydHNTY3JpcHRFeGVjID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIHNjcmlwdCBleGVjdXRpb24gdmlhIGluamVjdGluZyBhIHNjcmlwdCB0YWcgaW50byB0aGUgcGFnZVxuICAvLyB0aGlzIGFsbG93cyBDU1AgaW50ZWdyaXR5IGFuZCBub25jZSB0byBiZSBzZXQgZm9yIENTUCBlbnZpcm9ubWVudHNcbiAgdmFyIGhlYWQ7XG4gIGZ1bmN0aW9uIHNjcmlwdEV4ZWMobG9hZCkge1xuICAgIGlmICghaGVhZClcbiAgICAgIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdC50ZXh0ID0gZ2V0U291cmNlKGxvYWQsIGZhbHNlKTtcbiAgICB2YXIgb25lcnJvciA9IHdpbmRvdy5vbmVycm9yO1xuICAgIHZhciBlO1xuICAgIHdpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24oX2UpIHtcbiAgICAgIGUgPSBhZGRUb0Vycm9yKF9lLCAnRXZhbHVhdGluZyAnICsgbG9hZC5hZGRyZXNzKTtcbiAgICAgIGlmIChvbmVycm9yKVxuICAgICAgICBvbmVycm9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHByZUV4ZWModGhpcywgbG9hZCk7XG5cbiAgICBpZiAobG9hZC5tZXRhZGF0YS5pbnRlZ3JpdHkpXG4gICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdpbnRlZ3JpdHknLCBsb2FkLm1ldGFkYXRhLmludGVncml0eSk7XG4gICAgaWYgKGxvYWQubWV0YWRhdGEubm9uY2UpXG4gICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCdub25jZScsIGxvYWQubWV0YWRhdGEubm9uY2UpO1xuXG4gICAgaGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgIGhlYWQucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICBwb3N0RXhlYygpO1xuICAgIHdpbmRvdy5vbmVycm9yID0gb25lcnJvcjtcbiAgICBpZiAoZSlcbiAgICAgIHRocm93IGU7XG4gIH1cblxufSkoKTtcbmZ1bmN0aW9uIHJlYWRNZW1iZXJFeHByZXNzaW9uKHAsIHZhbHVlKSB7XG4gIHZhciBwUGFydHMgPSBwLnNwbGl0KCcuJyk7XG4gIHdoaWxlIChwUGFydHMubGVuZ3RoKVxuICAgIHZhbHVlID0gdmFsdWVbcFBhcnRzLnNoaWZ0KCldO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldE1hcE1hdGNoKG1hcCwgbmFtZSkge1xuICB2YXIgYmVzdE1hdGNoLCBiZXN0TWF0Y2hMZW5ndGggPSAwO1xuXG4gIGZvciAodmFyIHAgaW4gbWFwKSB7XG4gICAgaWYgKG5hbWUuc3Vic3RyKDAsIHAubGVuZ3RoKSA9PSBwICYmIChuYW1lLmxlbmd0aCA9PSBwLmxlbmd0aCB8fCBuYW1lW3AubGVuZ3RoXSA9PSAnLycpKSB7XG4gICAgICB2YXIgY3VyTWF0Y2hMZW5ndGggPSBwLnNwbGl0KCcvJykubGVuZ3RoO1xuICAgICAgaWYgKGN1ck1hdGNoTGVuZ3RoIDw9IGJlc3RNYXRjaExlbmd0aClcbiAgICAgICAgY29udGludWU7XG4gICAgICBiZXN0TWF0Y2ggPSBwO1xuICAgICAgYmVzdE1hdGNoTGVuZ3RoID0gY3VyTWF0Y2hMZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJlc3RNYXRjaDtcbn1cblxuZnVuY3Rpb24gcHJlcGFyZUJhc2VVUkwobG9hZGVyKSB7XG4gIC8vIGVuc3VyZSBiYXNlVVJsIGlzIGZ1bGx5IG5vcm1hbGl6ZWRcbiAgaWYgKHRoaXMuX2xvYWRlci5iYXNlVVJMICE9PSB0aGlzLmJhc2VVUkwpIHtcbiAgICBpZiAodGhpcy5iYXNlVVJMW3RoaXMuYmFzZVVSTC5sZW5ndGggLSAxXSAhPSAnLycpXG4gICAgICB0aGlzLmJhc2VVUkwgKz0gJy8nO1xuICAgIFxuICAgIHRoaXMuX2xvYWRlci5iYXNlVVJMID0gdGhpcy5iYXNlVVJMID0gbmV3IFVSTCh0aGlzLmJhc2VVUkwsIGJhc2VVUklPYmopLmhyZWY7XG4gIH1cbn1cblxudmFyIGVudk1vZHVsZTtcbmZ1bmN0aW9uIHNldFByb2R1Y3Rpb24oaXNQcm9kdWN0aW9uLCBpc0J1aWxkZXIpIHtcbiAgdGhpcy5zZXQoJ0BzeXN0ZW0tZW52JywgZW52TW9kdWxlID0gdGhpcy5uZXdNb2R1bGUoe1xuICAgIGJyb3dzZXI6IGlzQnJvd3NlcixcbiAgICBub2RlOiAhIXRoaXMuX25vZGVSZXF1aXJlLFxuICAgIHByb2R1Y3Rpb246ICFpc0J1aWxkZXIgJiYgaXNQcm9kdWN0aW9uLFxuICAgIGRldjogaXNCdWlsZGVyIHx8ICFpc1Byb2R1Y3Rpb24sXG4gICAgYnVpbGQ6IGlzQnVpbGRlcixcbiAgICAnZGVmYXVsdCc6IHRydWVcbiAgfSkpO1xufVxuXG5ob29rQ29uc3RydWN0b3IoZnVuY3Rpb24oY29uc3RydWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG5cbiAgICAvLyBzdXBwb3J0IGJhc2VVUkxcbiAgICB0aGlzLmJhc2VVUkwgPSBiYXNlVVJJO1xuXG4gICAgLy8gc3VwcG9ydCBtYXAgYW5kIHBhdGhzXG4gICAgdGhpcy5tYXAgPSB7fTtcblxuICAgIC8vIGdsb2JhbCBiZWhhdmlvdXIgZmxhZ3NcbiAgICB0aGlzLndhcm5pbmdzID0gZmFsc2U7XG4gICAgdGhpcy5kZWZhdWx0SlNFeHRlbnNpb25zID0gZmFsc2U7XG4gICAgdGhpcy5wbHVnaW5GaXJzdCA9IGZhbHNlO1xuICAgIHRoaXMubG9hZGVyRXJyb3JTdGFjayA9IGZhbHNlO1xuXG4gICAgLy8gYnkgZGVmYXVsdCBsb2FkIFwiLmpzb25cIiBmaWxlcyBhcyBqc29uXG4gICAgLy8gbGVhZGluZyAqIG1ldGEgZG9lc24ndCBuZWVkIG5vcm1hbGl6YXRpb25cbiAgICAvLyBOQiBhZGQgdGhpcyBpbiBuZXh0IGJyZWFraW5nIHJlbGVhc2VcbiAgICAvLyB0aGlzLm1ldGFbJyouanNvbiddID0geyBmb3JtYXQ6ICdqc29uJyB9O1xuXG4gICAgLy8gc3VwcG9ydCB0aGUgZW1wdHkgbW9kdWxlLCBhcyBhIGNvbmNlcHRcbiAgICB0aGlzLnNldCgnQGVtcHR5JywgdGhpcy5uZXdNb2R1bGUoe30pKTtcblxuICAgIHNldFByb2R1Y3Rpb24uY2FsbCh0aGlzLCBmYWxzZSwgZmFsc2UpO1xuICB9O1xufSk7XG5cbi8vIGluY2x1ZGUgdGhlIG5vZGUgcmVxdWlyZSBzaW5jZSB3ZSdyZSBvdmVycmlkaW5nIGl0XG5pZiAodHlwZW9mIHJlcXVpcmUgIT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT0gJ3VuZGVmaW5lZCcgJiYgIXByb2Nlc3MuYnJvd3NlcilcbiAgU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLl9ub2RlUmVxdWlyZSA9IHJlcXVpcmU7XG5cbi8qXG4gIENvcmUgU3lzdGVtSlMgTm9ybWFsaXphdGlvblxuXG4gIElmIGEgbmFtZSBpcyByZWxhdGl2ZSwgd2UgYXBwbHkgVVJMIG5vcm1hbGl6YXRpb24gdG8gdGhlIHBhZ2VcbiAgSWYgYSBuYW1lIGlzIGFuIGFic29sdXRlIFVSTCwgd2UgbGVhdmUgaXQgYXMtaXNcblxuICBQbGFpbiBuYW1lcyAobmVpdGhlciBvZiB0aGUgYWJvdmUpIHJ1biB0aHJvdWdoIHRoZSBtYXAgYW5kIHBhdGhzXG4gIG5vcm1hbGl6YXRpb24gcGhhc2VzLlxuXG4gIFRoZSBwYXRocyBub3JtYWxpemF0aW9uIHBoYXNlIGFwcGxpZXMgbGFzdCAocGF0aHMgZXh0ZW5zaW9uKSwgd2hpY2hcbiAgZGVmaW5lcyB0aGUgYGRlY2Fub25pY2FsaXplYCBmdW5jdGlvbiBhbmQgbm9ybWFsaXplcyBldmVyeXRoaW5nIGludG9cbiAgYSBVUkwuXG4gKi9cblxuZnVuY3Rpb24gZ2V0Tm9kZU1vZHVsZShuYW1lKSB7XG4gIGlmICghaXNQbGFpbihuYW1lKSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vZGUgbW9kdWxlICcgKyBuYW1lICsgJyBjYW5cXCd0IGJlIGxvYWRlZCBhcyBpdCBpcyBub3QgYSBwYWNrYWdlIHJlcXVpcmUuJyk7XG5cbiAgdmFyIG5vZGVQYXRoID0gdGhpcy5fbm9kZVJlcXVpcmUoJ3BhdGgnKTtcbiAgLy8gdHJ5IHRvIGxvYWQgZnJvbSBub2RlX21vZHVsZXNcbiAgdmFyIG1vZHVsZTtcbiAgdHJ5IHtcbiAgICBtb2R1bGUgPSB0aGlzLl9ub2RlUmVxdWlyZShub2RlUGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICdub2RlX21vZHVsZXMnLCBuYW1lKSk7XG4gIH1cbiAgY2F0Y2goZSkge1xuICAgIC8vIGZhbGwgYmFjayB0byBkaXJlY3QgcmVxdWlyZSAoaW4gdGhlb3J5IHRoaXMgaXMgY29yZSBtb2R1bGVzIG9ubHksIHdoaWNoIHNob3VsZCByZWFsbHkgYmUgZmlsdGVyZWQpXG4gICAgaWYgKGUuY29kZSA9PSAnTU9EVUxFX05PVF9GT1VORCcpXG4gICAgICBtb2R1bGUgPSB0aGlzLl9ub2RlUmVxdWlyZShuYW1lKTtcbiAgfVxuICByZXR1cm4gbW9kdWxlO1xufVxuXG5mdW5jdGlvbiBjb3JlUmVzb2x2ZShuYW1lLCBwYXJlbnROYW1lKSB7XG4gIC8vIHN0YW5kYXJkIFVSTCByZXNvbHV0aW9uXG4gIGlmIChpc1JlbChuYW1lKSlcbiAgICByZXR1cm4gdXJsUmVzb2x2ZShuYW1lLCBwYXJlbnROYW1lKTtcbiAgZWxzZSBpZiAoaXNBYnNvbHV0ZShuYW1lKSlcbiAgICByZXR1cm4gbmFtZTtcblxuICAvLyBwbGFpbiBuYW1lcyBub3Qgc3RhcnRpbmcgd2l0aCAnLi8nLCAnOi8vJyBhbmQgJy8nIGdvIHRocm91Z2ggY3VzdG9tIHJlc29sdXRpb25cbiAgdmFyIG1hcE1hdGNoID0gZ2V0TWFwTWF0Y2godGhpcy5tYXAsIG5hbWUpO1xuXG4gIGlmIChtYXBNYXRjaCkge1xuICAgIG5hbWUgPSB0aGlzLm1hcFttYXBNYXRjaF0gKyBuYW1lLnN1YnN0cihtYXBNYXRjaC5sZW5ndGgpO1xuXG4gICAgaWYgKGlzUmVsKG5hbWUpKVxuICAgICAgcmV0dXJuIHVybFJlc29sdmUobmFtZSk7XG4gICAgZWxzZSBpZiAoaXNBYnNvbHV0ZShuYW1lKSlcbiAgICAgIHJldHVybiBuYW1lO1xuICB9XG5cbiAgaWYgKHRoaXMuaGFzKG5hbWUpKVxuICAgIHJldHVybiBuYW1lO1xuICAvLyBkeW5hbWljYWxseSBsb2FkIG5vZGUtY29yZSBtb2R1bGVzIHdoZW4gcmVxdWlyaW5nIGBAbm9kZS9mc2AgZm9yIGV4YW1wbGVcbiAgaWYgKG5hbWUuc3Vic3RyKDAsIDYpID09ICdAbm9kZS8nKSB7XG4gICAgaWYgKCF0aGlzLl9ub2RlUmVxdWlyZSlcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Vycm9yIGxvYWRpbmcgJyArIG5hbWUgKyAnLiBDYW4gb25seSBsb2FkIG5vZGUgY29yZSBtb2R1bGVzIGluIE5vZGUuJyk7XG4gICAgdGhpcy5zZXQobmFtZSwgdGhpcy5uZXdNb2R1bGUoZ2V0RVNNb2R1bGUoZ2V0Tm9kZU1vZHVsZS5jYWxsKHRoaXMsIG5hbWUuc3Vic3RyKDYpKSkpKTtcbiAgICByZXR1cm4gbmFtZTtcbiAgfVxuXG4gIC8vIHByZXBhcmUgdGhlIGJhc2VVUkwgdG8gZW5zdXJlIGl0IGlzIG5vcm1hbGl6ZWRcbiAgcHJlcGFyZUJhc2VVUkwuY2FsbCh0aGlzKTtcblxuICByZXR1cm4gYXBwbHlQYXRocyh0aGlzLCBuYW1lKSB8fCB0aGlzLmJhc2VVUkwgKyBuYW1lO1xufVxuXG5ob29rKCdub3JtYWxpemUnLCBmdW5jdGlvbihub3JtYWxpemUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIHBhcmVudE5hbWUsIHNraXBFeHQpIHtcbiAgICB2YXIgcmVzb2x2ZWQgPSBjb3JlUmVzb2x2ZS5jYWxsKHRoaXMsIG5hbWUsIHBhcmVudE5hbWUpO1xuICAgIGlmICh0aGlzLmRlZmF1bHRKU0V4dGVuc2lvbnMgJiYgIXNraXBFeHQgJiYgcmVzb2x2ZWQuc3Vic3RyKHJlc29sdmVkLmxlbmd0aCAtIDMsIDMpICE9ICcuanMnICYmICFpc1BsYWluKHJlc29sdmVkKSlcbiAgICAgIHJlc29sdmVkICs9ICcuanMnO1xuICAgIHJldHVybiByZXNvbHZlZDtcbiAgfTtcbn0pO1xuXG4vLyBwZXJjZW50IGVuY29kZSBqdXN0ICcjJyBpbiB1cmxzIGlmIHVzaW5nIEhUVFAgcmVxdWVzdHNcbnZhciBodHRwUmVxdWVzdCA9IHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPSAndW5kZWZpbmVkJztcbmhvb2soJ2xvY2F0ZScsIGZ1bmN0aW9uKGxvY2F0ZSkge1xuICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9jYXRlLmNhbGwodGhpcywgbG9hZCkpXG4gICAgLnRoZW4oZnVuY3Rpb24oYWRkcmVzcykge1xuICAgICAgaWYgKGh0dHBSZXF1ZXN0KVxuICAgICAgICByZXR1cm4gYWRkcmVzcy5yZXBsYWNlKC8jL2csICclMjMnKTtcbiAgICAgIHJldHVybiBhZGRyZXNzO1xuICAgIH0pO1xuICB9O1xufSk7XG5cbi8qXG4gKiBGZXRjaCB3aXRoIGF1dGhvcml6YXRpb25cbiAqL1xuaG9vaygnZmV0Y2gnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBmZXRjaFRleHRGcm9tVVJMKGxvYWQuYWRkcmVzcywgbG9hZC5tZXRhZGF0YS5hdXRob3JpemF0aW9uLCByZXNvbHZlLCByZWplY3QpO1xuICAgIH0pO1xuICB9O1xufSk7XG5cbi8qXG4gIF9fdXNlRGVmYXVsdFxuICBcbiAgV2hlbiBhIG1vZHVsZSBvYmplY3QgbG9va3MgbGlrZTpcbiAgbmV3TW9kdWxlKFxuICAgIF9fdXNlRGVmYXVsdDogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnc29tZS1tb2R1bGUnXG4gIH0pXG5cbiAgVGhlbiBpbXBvcnRpbmcgdGhhdCBtb2R1bGUgcHJvdmlkZXMgdGhlICdzb21lLW1vZHVsZSdcbiAgcmVzdWx0IGRpcmVjdGx5IGluc3RlYWQgb2YgdGhlIGZ1bGwgbW9kdWxlLlxuXG4gIFVzZWZ1bCBmb3IgZWcgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHt9XG4qL1xuaG9vaygnaW1wb3J0JywgZnVuY3Rpb24oc3lzdGVtSW1wb3J0KSB7XG4gIHJldHVybiBmdW5jdGlvbihuYW1lLCBwYXJlbnROYW1lLCBwYXJlbnRBZGRyZXNzKSB7XG4gICAgaWYgKHBhcmVudE5hbWUgJiYgcGFyZW50TmFtZS5uYW1lKVxuICAgICAgd2Fybi5jYWxsKHRoaXMsICdTeXN0ZW1KUy5pbXBvcnQobmFtZSwgeyBuYW1lOiBwYXJlbnROYW1lIH0pIGlzIGRlcHJlY2F0ZWQgZm9yIFN5c3RlbUpTLmltcG9ydChuYW1lLCBwYXJlbnROYW1lKSwgd2hpbGUgaW1wb3J0aW5nICcgKyBuYW1lICsgJyBmcm9tICcgKyBwYXJlbnROYW1lLm5hbWUpO1xuICAgIHJldHVybiBzeXN0ZW1JbXBvcnQuY2FsbCh0aGlzLCBuYW1lLCBwYXJlbnROYW1lLCBwYXJlbnRBZGRyZXNzKS50aGVuKGZ1bmN0aW9uKG1vZHVsZSkge1xuICAgICAgcmV0dXJuIG1vZHVsZS5fX3VzZURlZmF1bHQgPyBtb2R1bGVbJ2RlZmF1bHQnXSA6IG1vZHVsZTtcbiAgICB9KTtcbiAgfTtcbn0pO1xuXG4vKlxuICogQWxsb3cgZm9ybWF0OiAnZGV0ZWN0JyBtZXRhIHRvIGVuYWJsZSBmb3JtYXQgZGV0ZWN0aW9uXG4gKi9cbmhvb2soJ3RyYW5zbGF0ZScsIGZ1bmN0aW9uKHN5c3RlbVRyYW5zbGF0ZSkge1xuICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgIGlmIChsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnZGV0ZWN0JylcbiAgICAgIGxvYWQubWV0YWRhdGEuZm9ybWF0ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzeXN0ZW1UcmFuc2xhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn0pO1xuXG5cbi8qXG4gKiBKU09OIGZvcm1hdCBzdXBwb3J0XG4gKlxuICogU3VwcG9ydHMgbG9hZGluZyBKU09OIGZpbGVzIGFzIGEgbW9kdWxlIGZvcm1hdCBpdHNlbGZcbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBTeXN0ZW1KUy5jb25maWcoe1xuICogICBtZXRhOiB7XG4gKiAgICAgJyouanNvbic6IHsgZm9ybWF0OiAnanNvbicgfVxuICogICB9XG4gKiB9KTtcbiAqXG4gKiBNb2R1bGUgaXMgcmV0dXJuZWQgYXMgaWYgd3JpdHRlbjpcbiAqXG4gKiBleHBvcnQgZGVmYXVsdCB7SlNPTn1cbiAqXG4gKiBObyBuYW1lZCBleHBvcnRzIGFyZSBwcm92aWRlZFxuICpcbiAqIEZpbGVzIGVuZGluZyBpbiBcIi5qc29uXCIgYXJlIHRyZWF0ZWQgYXMganNvbiBhdXRvbWF0aWNhbGx5IGJ5IFN5c3RlbUpTXG4gKi9cbmhvb2soJ2luc3RhbnRpYXRlJywgZnVuY3Rpb24oaW5zdGFudGlhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2pzb24nICYmICF0aGlzLmJ1aWxkZXIpIHtcbiAgICAgIHZhciBlbnRyeSA9IGxvYWQubWV0YWRhdGEuZW50cnkgPSBjcmVhdGVFbnRyeSgpO1xuICAgICAgZW50cnkuZGVwcyA9IFtdO1xuICAgICAgZW50cnkuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvYWQuc291cmNlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBKU09OIGZpbGUgXCIgKyBsb2FkLm5hbWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn0pXG5cbi8qXG4gRXh0ZW5kIGNvbmZpZyBtZXJnaW5nIG9uZSBkZWVwIG9ubHlcblxuICBsb2FkZXIuY29uZmlnKHtcbiAgICBzb21lOiAncmFuZG9tJyxcbiAgICBjb25maWc6ICdoZXJlJyxcbiAgICBkZWVwOiB7XG4gICAgICBjb25maWc6IHsgdG9vOiAndG9vJyB9XG4gICAgfVxuICB9KTtcblxuICA8PT5cblxuICBsb2FkZXIuc29tZSA9ICdyYW5kb20nO1xuICBsb2FkZXIuY29uZmlnID0gJ2hlcmUnXG4gIGxvYWRlci5kZWVwID0gbG9hZGVyLmRlZXAgfHwge307XG4gIGxvYWRlci5kZWVwLmNvbmZpZyA9IHsgdG9vOiAndG9vJyB9O1xuXG5cbiAgTm9ybWFsaXplcyBtZXRhIGFuZCBwYWNrYWdlIGNvbmZpZ3MgYWxsb3dpbmcgZm9yOlxuXG4gIFN5c3RlbUpTLmNvbmZpZyh7XG4gICAgbWV0YToge1xuICAgICAgJy4vaW5kZXguanMnOiB7fVxuICAgIH1cbiAgfSk7XG5cbiAgVG8gYmVjb21lXG5cbiAgU3lzdGVtSlMubWV0YVsnaHR0cHM6Ly90aGlzc2l0ZS5jb20vaW5kZXguanMnXSA9IHt9O1xuXG4gIEZvciBlYXN5IG5vcm1hbGl6YXRpb24gY2Fub25pY2FsaXphdGlvbiB3aXRoIGxhdGVzdCBVUkwgc3VwcG9ydC5cblxuKi9cbmZ1bmN0aW9uIGVudlNldChsb2FkZXIsIGNmZywgZW52Q2FsbGJhY2spIHtcbiAgaWYgKGVudk1vZHVsZS5icm93c2VyICYmIGNmZy5icm93c2VyQ29uZmlnKVxuICAgIGVudkNhbGxiYWNrKGNmZy5icm93c2VyQ29uZmlnKTtcbiAgaWYgKGVudk1vZHVsZS5ub2RlICYmIGNmZy5ub2RlQ29uZmlnKVxuICAgIGVudkNhbGxiYWNrKGNmZy5ub2RlQ29uZmlnKTtcbiAgaWYgKGVudk1vZHVsZS5kZXYgJiYgY2ZnLmRldkNvbmZpZylcbiAgICBlbnZDYWxsYmFjayhjZmcuZGV2Q29uZmlnKTtcbiAgaWYgKGVudk1vZHVsZS5idWlsZCAmJiBjZmcuYnVpbGRDb25maWcpXG4gICAgZW52Q2FsbGJhY2soY2ZnLmJ1aWxkQ29uZmlnKTtcbiAgaWYgKGVudk1vZHVsZS5wcm9kdWN0aW9uICYmIGNmZy5wcm9kdWN0aW9uQ29uZmlnKVxuICAgIGVudkNhbGxiYWNrKGNmZy5wcm9kdWN0aW9uQ29uZmlnKTtcbn1cblxuU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLmdldENvbmZpZyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgdmFyIGNmZyA9IHt9O1xuICB2YXIgbG9hZGVyID0gdGhpcztcbiAgZm9yICh2YXIgcCBpbiBsb2FkZXIpIHtcbiAgICBpZiAobG9hZGVyLmhhc093blByb3BlcnR5ICYmICFsb2FkZXIuaGFzT3duUHJvcGVydHkocCkgfHwgcCBpbiBTeXN0ZW1KU0xvYWRlci5wcm90b3R5cGUpXG4gICAgICBjb250aW51ZTtcbiAgICBpZiAoaW5kZXhPZi5jYWxsKFsnX2xvYWRlcicsICdhbWREZWZpbmUnLCAnYW1kUmVxdWlyZScsICdkZWZpbmVkJywgJ2ZhaWxlZCcsICd2ZXJzaW9uJ10sIHApID09IC0xKVxuICAgICAgY2ZnW3BdID0gbG9hZGVyW3BdO1xuICB9XG4gIGNmZy5wcm9kdWN0aW9uID0gZW52TW9kdWxlLnByb2R1Y3Rpb247XG4gIHJldHVybiBjZmc7XG59O1xuXG52YXIgY3VyQ3VyU2NyaXB0O1xuU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uKGNmZywgaXNFbnZDb25maWcpIHtcbiAgdmFyIGxvYWRlciA9IHRoaXM7XG5cbiAgaWYgKCdsb2FkZXJFcnJvclN0YWNrJyBpbiBjZmcpIHtcbiAgICBjdXJDdXJTY3JpcHQgPSAkX19jdXJTY3JpcHQ7XG4gICAgaWYgKGNmZy5sb2FkZXJFcnJvclN0YWNrKVxuICAgICAgJF9fY3VyU2NyaXB0ID0gdW5kZWZpbmVkO1xuICAgIGVsc2VcbiAgICAgICRfX2N1clNjcmlwdCA9IGN1ckN1clNjcmlwdDtcbiAgfVxuXG4gIGlmICgnd2FybmluZ3MnIGluIGNmZylcbiAgICBsb2FkZXIud2FybmluZ3MgPSBjZmcud2FybmluZ3M7XG5cbiAgLy8gdHJhbnNwaWxlciBkZXByZWNhdGlvbiBwYXRoXG4gIGlmIChjZmcudHJhbnNwaWxlclJ1bnRpbWUgPT09IGZhbHNlKVxuICAgIGxvYWRlci5fbG9hZGVyLmxvYWRlZFRyYW5zcGlsZXJSdW50aW1lID0gdHJ1ZTtcblxuICBpZiAoJ3Byb2R1Y3Rpb24nIGluIGNmZyB8fCAnYnVpbGQnIGluIGNmZylcbiAgICBzZXRQcm9kdWN0aW9uLmNhbGwobG9hZGVyLCAhIWNmZy5wcm9kdWN0aW9uLCAhIShjZmcuYnVpbGQgfHwgZW52TW9kdWxlICYmIGVudk1vZHVsZS5idWlsZCkpO1xuXG4gIGlmICghaXNFbnZDb25maWcpIHtcbiAgICAvLyBpZiB1c2luZyBub2RlQ29uZmlnIC8gYnJvd3NlckNvbmZpZyAvIHByb2R1Y3Rpb25Db25maWcsIHRha2UgYmFzZVVSTCBmcm9tIHRoZXJlXG4gICAgLy8gdGhlc2UgZXhjZXB0aW9ucyB3aWxsIGJlIHVubmVjZXNzYXJ5IHdoZW4gd2UgY2FuIHByb3Blcmx5IGltcGxlbWVudCBjb25maWcgcXVldWluZ3NcbiAgICB2YXIgYmFzZVVSTDtcbiAgICBlbnZTZXQobG9hZGVyLCBjZmcsIGZ1bmN0aW9uKGNmZykge1xuICAgICAgYmFzZVVSTCA9IGJhc2VVUkwgfHwgY2ZnLmJhc2VVUkw7XG4gICAgfSk7XG4gICAgYmFzZVVSTCA9IGJhc2VVUkwgfHwgY2ZnLmJhc2VVUkw7XG5cbiAgICAvLyBhbHdheXMgY29uZmlndXJlIGJhc2VVUkwgZmlyc3RcbiAgICBpZiAoYmFzZVVSTCkge1xuICAgICAgdmFyIGhhc0NvbmZpZyA9IGZhbHNlO1xuICAgICAgZnVuY3Rpb24gY2hlY2tIYXNDb25maWcob2JqKSB7XG4gICAgICAgIGZvciAodmFyIHAgaW4gb2JqKVxuICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkocCkpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGVja0hhc0NvbmZpZyhsb2FkZXIucGFja2FnZXMpIHx8IGNoZWNrSGFzQ29uZmlnKGxvYWRlci5tZXRhKSB8fCBjaGVja0hhc0NvbmZpZyhsb2FkZXIuZGVwQ2FjaGUpIHx8IGNoZWNrSGFzQ29uZmlnKGxvYWRlci5idW5kbGVzKSB8fCBjaGVja0hhc0NvbmZpZyhsb2FkZXIucGFja2FnZUNvbmZpZ1BhdGhzKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW5jb3JyZWN0IGNvbmZpZ3VyYXRpb24gb3JkZXIuIFRoZSBiYXNlVVJMIG11c3QgYmUgY29uZmlndXJlZCB3aXRoIHRoZSBmaXJzdCBTeXN0ZW1KUy5jb25maWcgY2FsbC4nKTtcblxuICAgICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICAgIHByZXBhcmVCYXNlVVJMLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaWYgKGNmZy5wYXRocylcbiAgICAgIGV4dGVuZChsb2FkZXIucGF0aHMsIGNmZy5wYXRocyk7XG5cbiAgICBlbnZTZXQobG9hZGVyLCBjZmcsIGZ1bmN0aW9uKGNmZykge1xuICAgICAgaWYgKGNmZy5wYXRocylcbiAgICAgICAgZXh0ZW5kKGxvYWRlci5wYXRocywgY2ZnLnBhdGhzKTtcbiAgICB9KTtcblxuICAgIC8vIHdhcm4gb24gd2lsZGNhcmQgcGF0aCBkZXByZWNhdGlvbnNcbiAgICBpZiAodGhpcy53YXJuaW5ncykge1xuICAgICAgZm9yICh2YXIgcCBpbiBsb2FkZXIucGF0aHMpXG4gICAgICAgIGlmIChwLmluZGV4T2YoJyonKSAhPSAtMSlcbiAgICAgICAgICB3YXJuLmNhbGwobG9hZGVyLCAnUGF0aHMgY29uZmlndXJhdGlvbiBcIicgKyBwICsgJ1wiIC0+IFwiJyArIGxvYWRlci5wYXRoc1twXSArICdcIiB1c2VzIHdpbGRjYXJkcyB3aGljaCBhcmUgYmVpbmcgZGVwcmVjYXRlZCBmb3Igc2ltcGxlciB0cmFpbGluZyBcIi9cIiBmb2xkZXIgcGF0aHMuJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNmZy5kZWZhdWx0SlNFeHRlbnNpb25zKSB7XG4gICAgbG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgPSBjZmcuZGVmYXVsdEpTRXh0ZW5zaW9ucztcbiAgICB3YXJuLmNhbGwobG9hZGVyLCAnVGhlIGRlZmF1bHRKU0V4dGVuc2lvbnMgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgZGVwcmVjYXRlZCwgdXNlIHBhY2thZ2VzIGNvbmZpZ3VyYXRpb24gaW5zdGVhZC4nKTtcbiAgfVxuXG4gIGlmIChjZmcucGx1Z2luRmlyc3QpXG4gICAgbG9hZGVyLnBsdWdpbkZpcnN0ID0gY2ZnLnBsdWdpbkZpcnN0O1xuXG4gIGlmIChjZmcubWFwKSB7XG4gICAgdmFyIG9iak1hcHMgPSAnJztcbiAgICBmb3IgKHZhciBwIGluIGNmZy5tYXApIHtcbiAgICAgIHZhciB2ID0gY2ZnLm1hcFtwXTtcblxuICAgICAgLy8gb2JqZWN0IG1hcCBiYWNrd2FyZHMtY29tcGF0IGludG8gcGFja2FnZXMgY29uZmlndXJhdGlvblxuICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBvYmpNYXBzICs9IChvYmpNYXBzLmxlbmd0aCA/ICcsICcgOiAnJykgKyAnXCInICsgcCArICdcIic7XG5cbiAgICAgICAgdmFyIGRlZmF1bHRKU0V4dGVuc2lvbiA9IGxvYWRlci5kZWZhdWx0SlNFeHRlbnNpb25zICYmIHAuc3Vic3RyKHAubGVuZ3RoIC0gMywgMykgIT0gJy5qcyc7XG4gICAgICAgIHZhciBwcm9wID0gbG9hZGVyLmRlY2Fub25pY2FsaXplKHApO1xuICAgICAgICBpZiAoZGVmYXVsdEpTRXh0ZW5zaW9uICYmIHByb3Auc3Vic3RyKHByb3AubGVuZ3RoIC0gMywgMykgPT0gJy5qcycpXG4gICAgICAgICAgcHJvcCA9IHByb3Auc3Vic3RyKDAsIHByb3AubGVuZ3RoIC0gMyk7XG5cbiAgICAgICAgLy8gaWYgYSBwYWNrYWdlIG1haW4sIHJldmVydCBpdFxuICAgICAgICB2YXIgcGtnTWF0Y2ggPSAnJztcbiAgICAgICAgZm9yICh2YXIgcGtnIGluIGxvYWRlci5wYWNrYWdlcykge1xuICAgICAgICAgIGlmIChwcm9wLnN1YnN0cigwLCBwa2cubGVuZ3RoKSA9PSBwa2cgXG4gICAgICAgICAgICAgICYmICghcHJvcFtwa2cubGVuZ3RoXSB8fCBwcm9wW3BrZy5sZW5ndGhdID09ICcvJykgXG4gICAgICAgICAgICAgICYmIHBrZ01hdGNoLnNwbGl0KCcvJykubGVuZ3RoIDwgcGtnLnNwbGl0KCcvJykubGVuZ3RoKVxuICAgICAgICAgICAgcGtnTWF0Y2ggPSBwa2c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBrZ01hdGNoICYmIGxvYWRlci5wYWNrYWdlc1twa2dNYXRjaF0ubWFpbilcbiAgICAgICAgICBwcm9wID0gcHJvcC5zdWJzdHIoMCwgcHJvcC5sZW5ndGggLSBsb2FkZXIucGFja2FnZXNbcGtnTWF0Y2hdLm1haW4ubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgdmFyIHBrZyA9IGxvYWRlci5wYWNrYWdlc1twcm9wXSA9IGxvYWRlci5wYWNrYWdlc1twcm9wXSB8fCB7fTtcbiAgICAgICAgcGtnLm1hcCA9IHY7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbG9hZGVyLm1hcFtwXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvYmpNYXBzKVxuICAgICAgd2Fybi5jYWxsKGxvYWRlciwgJ1RoZSBtYXAgY29uZmlndXJhdGlvbiBmb3IgJyArIG9iak1hcHMgKyAnIHVzZXMgb2JqZWN0IHN1Ym1hcHMsIHdoaWNoIGlzIGRlcHJlY2F0ZWQgaW4gZ2xvYmFsIG1hcC5cXG5VcGRhdGUgdGhpcyB0byB1c2UgcGFja2FnZSBjb250ZXh0dWFsIG1hcCB3aXRoIGNvbmZpZ3MgbGlrZSBTeXN0ZW1KUy5jb25maWcoeyBwYWNrYWdlczogeyBcIicgKyBwICsgJ1wiOiB7IG1hcDogey4uLn0gfSB9IH0pLicpO1xuICB9XG5cbiAgaWYgKGNmZy5wYWNrYWdlQ29uZmlnUGF0aHMpIHtcbiAgICB2YXIgcGFja2FnZUNvbmZpZ1BhdGhzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjZmcucGFja2FnZUNvbmZpZ1BhdGhzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGF0aCA9IGNmZy5wYWNrYWdlQ29uZmlnUGF0aHNbaV07XG4gICAgICB2YXIgcGFja2FnZUxlbmd0aCA9IE1hdGgubWF4KHBhdGgubGFzdEluZGV4T2YoJyonKSArIDEsIHBhdGgubGFzdEluZGV4T2YoJy8nKSk7XG4gICAgICB2YXIgbm9ybWFsaXplZCA9IGNvcmVSZXNvbHZlLmNhbGwobG9hZGVyLCBwYXRoLnN1YnN0cigwLCBwYWNrYWdlTGVuZ3RoKSk7XG4gICAgICBwYWNrYWdlQ29uZmlnUGF0aHNbaV0gPSBub3JtYWxpemVkICsgcGF0aC5zdWJzdHIocGFja2FnZUxlbmd0aCk7XG4gICAgfVxuICAgIGxvYWRlci5wYWNrYWdlQ29uZmlnUGF0aHMgPSBwYWNrYWdlQ29uZmlnUGF0aHM7XG4gIH1cblxuICBpZiAoY2ZnLmJ1bmRsZXMpIHtcbiAgICBmb3IgKHZhciBwIGluIGNmZy5idW5kbGVzKSB7XG4gICAgICB2YXIgYnVuZGxlID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNmZy5idW5kbGVzW3BdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBkZWZhdWx0SlNFeHRlbnNpb24gPSBsb2FkZXIuZGVmYXVsdEpTRXh0ZW5zaW9ucyAmJiBjZmcuYnVuZGxlc1twXVtpXS5zdWJzdHIoY2ZnLmJ1bmRsZXNbcF1baV0ubGVuZ3RoIC0gMywgMykgIT0gJy5qcyc7XG4gICAgICAgIHZhciBub3JtYWxpemVkQnVuZGxlRGVwID0gbG9hZGVyLmRlY2Fub25pY2FsaXplKGNmZy5idW5kbGVzW3BdW2ldKTtcbiAgICAgICAgaWYgKGRlZmF1bHRKU0V4dGVuc2lvbiAmJiBub3JtYWxpemVkQnVuZGxlRGVwLnN1YnN0cihub3JtYWxpemVkQnVuZGxlRGVwLmxlbmd0aCAtIDMsIDMpID09ICcuanMnKVxuICAgICAgICAgIG5vcm1hbGl6ZWRCdW5kbGVEZXAgPSBub3JtYWxpemVkQnVuZGxlRGVwLnN1YnN0cigwLCBub3JtYWxpemVkQnVuZGxlRGVwLmxlbmd0aCAtIDMpO1xuICAgICAgICBidW5kbGUucHVzaChub3JtYWxpemVkQnVuZGxlRGVwKTtcbiAgICAgIH1cbiAgICAgIGxvYWRlci5idW5kbGVzW3BdID0gYnVuZGxlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjZmcucGFja2FnZXMpIHtcbiAgICBmb3IgKHZhciBwIGluIGNmZy5wYWNrYWdlcykge1xuICAgICAgaWYgKHAubWF0Y2goL14oW15cXC9dKzopP1xcL1xcLyQvKSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCInICsgcCArICdcIiBpcyBub3QgYSB2YWxpZCBwYWNrYWdlIG5hbWUuJyk7XG5cbiAgICAgIHZhciBwcm9wID0gY29yZVJlc29sdmUuY2FsbChsb2FkZXIsIHApO1xuXG4gICAgICAvLyBhbGxvdyB0cmFpbGluZyBzbGFzaCBpbiBwYWNrYWdlc1xuICAgICAgaWYgKHByb3BbcHJvcC5sZW5ndGggLSAxXSA9PSAnLycpXG4gICAgICAgIHByb3AgPSBwcm9wLnN1YnN0cigwLCBwcm9wLmxlbmd0aCAtIDEpO1xuXG4gICAgICBzZXRQa2dDb25maWcobG9hZGVyLCBwcm9wLCBjZmcucGFja2FnZXNbcF0sIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBjIGluIGNmZykge1xuICAgIHZhciB2ID0gY2ZnW2NdO1xuXG4gICAgaWYgKGluZGV4T2YuY2FsbChbJ2Jhc2VVUkwnLCAnbWFwJywgJ3BhY2thZ2VzJywgJ2J1bmRsZXMnLCAncGF0aHMnLCAnd2FybmluZ3MnLCAncGFja2FnZUNvbmZpZ1BhdGhzJywgXG4gICAgICAgICAgJ2xvYWRlckVycm9yU3RhY2snLCAnYnJvd3NlckNvbmZpZycsICdub2RlQ29uZmlnJywgJ2RldkNvbmZpZycsICdidWlsZENvbmZpZycsICdwcm9kdWN0aW9uQ29uZmlnJ10sIGMpICE9IC0xKVxuICAgICAgY29udGludWU7XG5cbiAgICBpZiAodHlwZW9mIHYgIT0gJ29iamVjdCcgfHwgdiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBsb2FkZXJbY10gPSB2O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxvYWRlcltjXSA9IGxvYWRlcltjXSB8fCB7fTtcblxuICAgICAgZm9yICh2YXIgcCBpbiB2KSB7XG4gICAgICAgIC8vIGJhc2UtbGV2ZWwgd2lsZGNhcmQgbWV0YSBkb2VzIG5vdCBub3JtYWxpemUgdG8gcmV0YWluIGNhdGNoLWFsbCBxdWFsaXR5XG4gICAgICAgIGlmIChjID09ICdtZXRhJyAmJiBwWzBdID09ICcqJykge1xuICAgICAgICAgIGV4dGVuZChsb2FkZXJbY11bcF0gPSBsb2FkZXJbY11bcF0gfHwge30sIHZbcF0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGMgPT0gJ21ldGEnKSB7XG4gICAgICAgICAgLy8gbWV0YSBjYW4gZ28gdGhyb3VnaCBnbG9iYWwgbWFwLCB3aXRoIGRlZmF1bHRKU0V4dGVuc2lvbnMgYWRkaW5nXG4gICAgICAgICAgdmFyIHJlc29sdmVkID0gY29yZVJlc29sdmUuY2FsbChsb2FkZXIsIHApO1xuICAgICAgICAgIGlmIChsb2FkZXIuZGVmYXVsdEpTRXh0ZW5zaW9ucyAmJiByZXNvbHZlZC5zdWJzdHIocmVzb2x2ZWQubGVuZ3RoIC0gMywgMykgIT0gJy5qcycgJiYgIWlzUGxhaW4ocmVzb2x2ZWQpKVxuICAgICAgICAgICAgcmVzb2x2ZWQgKz0gJy5qcyc7XG4gICAgICAgICAgZXh0ZW5kKGxvYWRlcltjXVtyZXNvbHZlZF0gPSBsb2FkZXJbY11bcmVzb2x2ZWRdIHx8IHt9LCB2W3BdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjID09ICdkZXBDYWNoZScpIHtcbiAgICAgICAgICB2YXIgZGVmYXVsdEpTRXh0ZW5zaW9uID0gbG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgJiYgcC5zdWJzdHIocC5sZW5ndGggLSAzLCAzKSAhPSAnLmpzJztcbiAgICAgICAgICB2YXIgcHJvcCA9IGxvYWRlci5kZWNhbm9uaWNhbGl6ZShwKTtcbiAgICAgICAgICBpZiAoZGVmYXVsdEpTRXh0ZW5zaW9uICYmIHByb3Auc3Vic3RyKHByb3AubGVuZ3RoIC0gMywgMykgPT0gJy5qcycpXG4gICAgICAgICAgICBwcm9wID0gcHJvcC5zdWJzdHIoMCwgcHJvcC5sZW5ndGggLSAzKTtcbiAgICAgICAgICBsb2FkZXJbY11bcHJvcF0gPSBbXS5jb25jYXQodltwXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbG9hZGVyW2NdW3BdID0gdltwXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGVudlNldChsb2FkZXIsIGNmZywgZnVuY3Rpb24oY2ZnKSB7XG4gICAgbG9hZGVyLmNvbmZpZyhjZmcsIHRydWUpO1xuICB9KTtcbn07LypcbiAqIFBhY2thZ2UgQ29uZmlndXJhdGlvbiBFeHRlbnNpb25cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIFN5c3RlbUpTLnBhY2thZ2VzID0ge1xuICogICBqcXVlcnk6IHtcbiAqICAgICBtYWluOiAnaW5kZXguanMnLCAvLyB3aGVuIG5vdCBzZXQsIHBhY2thZ2UgbmFtZSBpcyByZXF1ZXN0ZWQgZGlyZWN0bHlcbiAqICAgICBmb3JtYXQ6ICdhbWQnLFxuICogICAgIGRlZmF1bHRFeHRlbnNpb246ICd0cycsIC8vIGRlZmF1bHRzIHRvICdqcycsIGNhbiBiZSBzZXQgdG8gZmFsc2VcbiAqICAgICBtb2R1bGVzOiB7XG4gKiAgICAgICAnKi50cyc6IHtcbiAqICAgICAgICAgbG9hZGVyOiAndHlwZXNjcmlwdCdcbiAqICAgICAgIH0sXG4gKiAgICAgICAndmVuZG9yL3NpenpsZS5qcyc6IHtcbiAqICAgICAgICAgZm9ybWF0OiAnZ2xvYmFsJ1xuICogICAgICAgfVxuICogICAgIH0sXG4gKiAgICAgbWFwOiB7XG4gKiAgICAgICAgLy8gbWFwIGludGVybmFsIHJlcXVpcmUoJ3NpenpsZScpIHRvIGxvY2FsIHJlcXVpcmUoJy4vdmVuZG9yL3NpenpsZScpXG4gKiAgICAgICAgc2l6emxlOiAnLi92ZW5kb3Ivc2l6emxlLmpzJyxcbiAqICAgICAgICAvLyBtYXAgYW55IGludGVybmFsIG9yIGV4dGVybmFsIHJlcXVpcmUgb2YgJ2pxdWVyeS92ZW5kb3IvYW5vdGhlcicgdG8gJ2Fub3RoZXIvaW5kZXguanMnXG4gKiAgICAgICAgJy4vdmVuZG9yL2Fub3RoZXIuanMnOiAnLi9hbm90aGVyL2luZGV4LmpzJyxcbiAqICAgICAgICAvLyB0ZXN0LmpzIC8gdGVzdCAtPiBsaWIvdGVzdC5qc1xuICogICAgICAgICcuL3Rlc3QuanMnOiAnLi9saWIvdGVzdC5qcycsXG4gKlxuICogICAgICAgIC8vIGVudmlyb25tZW50LXNwZWNpZmljIG1hcCBjb25maWd1cmF0aW9uc1xuICogICAgICAgICcuL2luZGV4LmpzJzoge1xuICogICAgICAgICAgJ35icm93c2VyJzogJy4vaW5kZXgtbm9kZS5qcycsXG4gKiAgICAgICAgICAnLi9jdXN0b20tY29uZGl0aW9uLmpzfH5leHBvcnQnOiAnLi9pbmRleC1jdXN0b20uanMnXG4gKiAgICAgICAgfVxuICogICAgIH0sXG4gKiAgICAgLy8gYWxsb3dzIGZvciBzZXR0aW5nIHBhY2thZ2UtcHJlZml4ZWQgZGVwQ2FjaGVcbiAqICAgICAvLyBrZXlzIGFyZSBub3JtYWxpemVkIG1vZHVsZSBuYW1lcyByZWxhdGl2ZSB0byB0aGUgcGFja2FnZSBpdHNlbGZcbiAqICAgICBkZXBDYWNoZToge1xuICogICAgICAgLy8gaW1wb3J0ICdwYWNrYWdlL2luZGV4LmpzJyBsb2FkcyBpbiBwYXJhbGxlbCBwYWNrYWdlL2xpYi90ZXN0LmpzLHBhY2thZ2UvdmVuZG9yL3NpenpsZS5qc1xuICogICAgICAgJy4vaW5kZXguanMnOiBbJy4vdGVzdCddLFxuICogICAgICAgJy4vdGVzdC5qcyc6IFsnZXh0ZXJuYWwtZGVwJ10sXG4gKiAgICAgICAnZXh0ZXJuYWwtZGVwL3BhdGguanMnOiBbJy4vYW5vdGhlci5qcyddXG4gKiAgICAgfVxuICogICB9XG4gKiB9O1xuICpcbiAqIFRoZW46XG4gKiAgIGltcG9ydCAnanF1ZXJ5JyAgICAgICAgICAgICAgICAgICAgICAgLT4ganF1ZXJ5L2luZGV4LmpzXG4gKiAgIGltcG9ydCAnanF1ZXJ5L3N1Ym1vZHVsZScgICAgICAgICAgICAgLT4ganF1ZXJ5L3N1Ym1vZHVsZS5qc1xuICogICBpbXBvcnQgJ2pxdWVyeS9zdWJtb2R1bGUudHMnICAgICAgICAgIC0+IGpxdWVyeS9zdWJtb2R1bGUudHMgbG9hZGVkIGFzIHR5cGVzY3JpcHRcbiAqICAgaW1wb3J0ICdqcXVlcnkvdmVuZG9yL2Fub3RoZXInICAgICAgICAtPiBhbm90aGVyL2luZGV4LmpzXG4gKlxuICogRGV0YWlsZWQgQmVoYXZpb3Vyc1xuICogLSBtYWluIGNhbiBoYXZlIGEgbGVhZGluZyBcIi4vXCIgY2FuIGJlIGFkZGVkIG9wdGlvbmFsbHlcbiAqIC0gbWFwIGFuZCBkZWZhdWx0RXh0ZW5zaW9uIGFyZSBhcHBsaWVkIHRvIHRoZSBtYWluXG4gKiAtIGRlZmF1bHRFeHRlbnNpb24gYWRkcyB0aGUgZXh0ZW5zaW9uIG9ubHkgaWYgdGhlIGV4YWN0IGV4dGVuc2lvbiBpcyBub3QgcHJlc2VudFxuICogLSBkZWZhdWx0SlNFeHRlbnNpb25zIGFwcGxpZXMgYWZ0ZXIgbWFwIHdoZW4gZGVmYXVsdEV4dGVuc2lvbiBpcyBub3Qgc2V0XG4gKiAtIGlmIGEgbWV0YSB2YWx1ZSBpcyBhdmFpbGFibGUgZm9yIGEgbW9kdWxlLCBtYXAgYW5kIGRlZmF1bHRFeHRlbnNpb24gYXJlIHNraXBwZWRcbiAqIC0gbGlrZSBnbG9iYWwgbWFwLCBwYWNrYWdlIG1hcCBhbHNvIGFwcGxpZXMgdG8gc3VicGF0aHMgKHNpenpsZS94LCAuL3ZlbmRvci9hbm90aGVyL3N1YilcbiAqIC0gY29uZGl0aW9uIG1vZHVsZSBtYXAgaXMgJ0BlbnYnIG1vZHVsZSBpbiBwYWNrYWdlIG9yICdAc3lzdGVtLWVudicgZ2xvYmFsbHlcbiAqIC0gbWFwIHRhcmdldHMgc3VwcG9ydCBjb25kaXRpb25hbCBpbnRlcnBvbGF0aW9uICgnLi94JzogJy4veC4je3xlbnZ9LmpzJylcbiAqIC0gaW50ZXJuYWwgcGFja2FnZSBtYXAgdGFyZ2V0cyBjYW5ub3QgdXNlIGJvb2xlYW4gY29uZGl0aW9uYWxzXG4gKlxuICogUGFja2FnZSBDb25maWd1cmF0aW9uIExvYWRpbmdcbiAqXG4gKiBOb3QgYWxsIHBhY2thZ2VzIG1heSBhbHJlYWR5IGhhdmUgdGhlaXIgY29uZmlndXJhdGlvbiBwcmVzZW50IGluIHRoZSBTeXN0ZW0gY29uZmlnXG4gKiBGb3IgdGhlc2UgY2FzZXMsIGEgbGlzdCBvZiBwYWNrYWdlQ29uZmlnUGF0aHMgY2FuIGJlIHByb3ZpZGVkLCB3aGljaCB3aGVuIG1hdGNoZWQgYWdhaW5zdFxuICogYSByZXF1ZXN0LCB3aWxsIGZpcnN0IHJlcXVlc3QgYSBcIi5qc29uXCIgZmlsZSBieSB0aGUgcGFja2FnZSBuYW1lIHRvIGRlcml2ZSB0aGUgcGFja2FnZVxuICogY29uZmlndXJhdGlvbiBmcm9tLiBUaGlzIGFsbG93cyBkeW5hbWljIGxvYWRpbmcgb2Ygbm9uLXByZWRldGVybWluZWQgY29kZSwgYSBrZXkgdXNlXG4gKiBjYXNlIGluIFN5c3RlbUpTLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICBTeXN0ZW1KUy5wYWNrYWdlQ29uZmlnUGF0aHMgPSBbJ3BhY2thZ2VzL3Rlc3QvcGFja2FnZS5qc29uJywgJ3BhY2thZ2VzLyouanNvbiddO1xuICpcbiAqICAgLy8gd2lsbCBmaXJzdCByZXF1ZXN0ICdwYWNrYWdlcy9uZXctcGFja2FnZS9wYWNrYWdlLmpzb24nIGZvciB0aGUgcGFja2FnZSBjb25maWdcbiAqICAgLy8gYmVmb3JlIGNvbXBsZXRpbmcgdGhlIHBhY2thZ2UgcmVxdWVzdCB0byAncGFja2FnZXMvbmV3LXBhY2thZ2UvcGF0aCdcbiAqICAgU3lzdGVtSlMuaW1wb3J0KCdwYWNrYWdlcy9uZXctcGFja2FnZS9wYXRoJyk7XG4gKlxuICogICAvLyB3aWxsIGZpcnN0IHJlcXVlc3QgJ3BhY2thZ2VzL3Rlc3QvcGFja2FnZS5qc29uJyBiZWZvcmUgdGhlIG1haW5cbiAqICAgU3lzdGVtSlMuaW1wb3J0KCdwYWNrYWdlcy90ZXN0Jyk7XG4gKlxuICogV2hlbiBhIHBhY2thZ2UgbWF0Y2hlcyBwYWNrYWdlQ29uZmlnUGF0aHMsIGl0IHdpbGwgYWx3YXlzIHNlbmQgYSBjb25maWcgcmVxdWVzdCBmb3JcbiAqIHRoZSBwYWNrYWdlIGNvbmZpZ3VyYXRpb24uXG4gKiBUaGUgcGFja2FnZSBuYW1lIGl0c2VsZiBpcyB0YWtlbiB0byBiZSB0aGUgbWF0Y2ggdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgbGFzdCB3aWxkY2FyZFxuICogb3IgdHJhaWxpbmcgc2xhc2guXG4gKiBUaGUgbW9zdCBzcGVjaWZpYyBwYWNrYWdlIGNvbmZpZyBwYXRoIHdpbGwgYmUgdXNlZC5cbiAqIEFueSBleGlzdGluZyBwYWNrYWdlIGNvbmZpZ3VyYXRpb25zIGZvciB0aGUgcGFja2FnZSB3aWxsIGRlZXBseSBtZXJnZSB3aXRoIHRoZVxuICogcGFja2FnZSBjb25maWcsIHdpdGggdGhlIGV4aXN0aW5nIHBhY2thZ2UgY29uZmlndXJhdGlvbnMgdGFraW5nIHByZWZlcmVuY2UuXG4gKiBUbyBvcHQtb3V0IG9mIHRoZSBwYWNrYWdlIGNvbmZpZ3VyYXRpb24gcmVxdWVzdCBmb3IgYSBwYWNrYWdlIHRoYXQgbWF0Y2hlc1xuICogcGFja2FnZUNvbmZpZ1BhdGhzLCB1c2UgdGhlIHsgY29uZmlndXJlZDogdHJ1ZSB9IHBhY2thZ2UgY29uZmlnIG9wdGlvbi5cbiAqXG4gKi9cbihmdW5jdGlvbigpIHtcblxuICBob29rQ29uc3RydWN0b3IoZnVuY3Rpb24oY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5wYWNrYWdlcyA9IHt9O1xuICAgICAgdGhpcy5wYWNrYWdlQ29uZmlnUGF0aHMgPSBbXTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBnZXRQYWNrYWdlKGxvYWRlciwgbm9ybWFsaXplZCkge1xuICAgIC8vIHVzZSBtb3N0IHNwZWNpZmljIHBhY2thZ2VcbiAgICB2YXIgY3VyUGtnLCBjdXJQa2dMZW4gPSAwLCBwa2dMZW47XG4gICAgZm9yICh2YXIgcCBpbiBsb2FkZXIucGFja2FnZXMpIHtcbiAgICAgIGlmIChub3JtYWxpemVkLnN1YnN0cigwLCBwLmxlbmd0aCkgPT09IHAgJiYgKG5vcm1hbGl6ZWQubGVuZ3RoID09PSBwLmxlbmd0aCB8fCBub3JtYWxpemVkW3AubGVuZ3RoXSA9PT0gJy8nKSkge1xuICAgICAgICBwa2dMZW4gPSBwLnNwbGl0KCcvJykubGVuZ3RoO1xuICAgICAgICBpZiAocGtnTGVuID4gY3VyUGtnTGVuKSB7XG4gICAgICAgICAgY3VyUGtnID0gcDtcbiAgICAgICAgICBjdXJQa2dMZW4gPSBwa2dMZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGN1clBrZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZERlZmF1bHRFeHRlbnNpb24obG9hZGVyLCBwa2csIHBrZ05hbWUsIHN1YlBhdGgsIHNraXBFeHRlbnNpb25zKSB7XG4gICAgLy8gZG9uJ3QgYXBwbHkgZXh0ZW5zaW9ucyB0byBmb2xkZXJzIG9yIGlmIGRlZmF1bHRFeHRlbnNpb24gPSBmYWxzZVxuICAgIGlmICghc3ViUGF0aCB8fCBzdWJQYXRoW3N1YlBhdGgubGVuZ3RoIC0gMV0gPT0gJy8nIHx8IHNraXBFeHRlbnNpb25zIHx8IHBrZy5kZWZhdWx0RXh0ZW5zaW9uID09PSBmYWxzZSlcbiAgICAgIHJldHVybiBzdWJQYXRoO1xuXG4gICAgdmFyIG1ldGFNYXRjaCA9IGZhbHNlO1xuXG4gICAgLy8gZXhhY3QgbWV0YSBvciBtZXRhIHdpdGggYW55IGNvbnRlbnQgYWZ0ZXIgdGhlIGxhc3Qgd2lsZGNhcmQgc2tpcHMgZXh0ZW5zaW9uXG4gICAgaWYgKHBrZy5tZXRhKVxuICAgICAgZ2V0TWV0YU1hdGNoZXMocGtnLm1ldGEsIHN1YlBhdGgsIGZ1bmN0aW9uKG1ldGFQYXR0ZXJuLCBtYXRjaE1ldGEsIG1hdGNoRGVwdGgpIHtcbiAgICAgICAgaWYgKG1hdGNoRGVwdGggPT0gMCB8fCBtZXRhUGF0dGVybi5sYXN0SW5kZXhPZignKicpICE9IG1ldGFQYXR0ZXJuLmxlbmd0aCAtIDEpXG4gICAgICAgICAgcmV0dXJuIG1ldGFNYXRjaCA9IHRydWU7XG4gICAgICB9KTtcblxuICAgIC8vIGV4YWN0IGdsb2JhbCBtZXRhIG9yIG1ldGEgd2l0aCBhbnkgY29udGVudCBhZnRlciB0aGUgbGFzdCB3aWxkY2FyZCBza2lwcyBleHRlbnNpb25cbiAgICBpZiAoIW1ldGFNYXRjaCAmJiBsb2FkZXIubWV0YSlcbiAgICAgIGdldE1ldGFNYXRjaGVzKGxvYWRlci5tZXRhLCBwa2dOYW1lICsgJy8nICsgc3ViUGF0aCwgZnVuY3Rpb24obWV0YVBhdHRlcm4sIG1hdGNoTWV0YSwgbWF0Y2hEZXB0aCkge1xuICAgICAgICBpZiAobWF0Y2hEZXB0aCA9PSAwIHx8IG1ldGFQYXR0ZXJuLmxhc3RJbmRleE9mKCcqJykgIT0gbWV0YVBhdHRlcm4ubGVuZ3RoIC0gMSlcbiAgICAgICAgICByZXR1cm4gbWV0YU1hdGNoID0gdHJ1ZTtcbiAgICAgIH0pO1xuXG4gICAgaWYgKG1ldGFNYXRjaClcbiAgICAgIHJldHVybiBzdWJQYXRoO1xuXG4gICAgLy8gd29yayBvdXQgd2hhdCB0aGUgZGVmYXVsdEV4dGVuc2lvbiBpcyBhbmQgYWRkIGlmIG5vdCB0aGVyZSBhbHJlYWR5XG4gICAgLy8gTkIgcmVjb25zaWRlciBpZiBkZWZhdWx0IHNob3VsZCByZWFsbHkgYmUgXCIuanNcIj9cbiAgICB2YXIgZGVmYXVsdEV4dGVuc2lvbiA9ICcuJyArIChwa2cuZGVmYXVsdEV4dGVuc2lvbiB8fCAnanMnKTtcbiAgICBpZiAoc3ViUGF0aC5zdWJzdHIoc3ViUGF0aC5sZW5ndGggLSBkZWZhdWx0RXh0ZW5zaW9uLmxlbmd0aCkgIT0gZGVmYXVsdEV4dGVuc2lvbilcbiAgICAgIHJldHVybiBzdWJQYXRoICsgZGVmYXVsdEV4dGVuc2lvbjtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gc3ViUGF0aDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFwcGx5UGFja2FnZUNvbmZpZ1N5bmMobG9hZGVyLCBwa2csIHBrZ05hbWUsIHN1YlBhdGgsIHNraXBFeHRlbnNpb25zKSB7XG4gICAgLy8gbWFpblxuICAgIGlmICghc3ViUGF0aCkge1xuICAgICAgaWYgKHBrZy5tYWluKVxuICAgICAgICBzdWJQYXRoID0gcGtnLm1haW4uc3Vic3RyKDAsIDIpID09ICcuLycgPyBwa2cubWFpbi5zdWJzdHIoMikgOiBwa2cubWFpbjtcbiAgICAgIC8vIGFsc28gbm8gc3VibWFwIGlmIG5hbWUgaXMgcGFja2FnZSBpdHNlbGYgKGltcG9ydCAncGtnJyAtPiAncGF0aC90by9wa2cuanMnKVxuICAgICAgZWxzZVxuICAgICAgICAvLyBOQiBjYW4gYWRkIGEgZGVmYXVsdCBwYWNrYWdlIG1haW4gY29udmVudGlvbiBoZXJlIHdoZW4gZGVmYXVsdEpTRXh0ZW5zaW9ucyBpcyBkZXByZWNhdGVkXG4gICAgICAgIC8vIGlmIGl0IGJlY29tZXMgaW50ZXJuYWwgdG8gdGhlIHBhY2thZ2UgdGhlbiBpdCB3b3VsZCBubyBsb25nZXIgYmUgYW4gZXhpdCBwYXRoXG4gICAgICAgIHJldHVybiBwa2dOYW1lICsgKGxvYWRlci5kZWZhdWx0SlNFeHRlbnNpb25zID8gJy5qcycgOiAnJyk7XG4gICAgfVxuXG4gICAgLy8gbWFwIGNvbmZpZyBjaGVja2luZyB3aXRob3V0IHRoZW4gd2l0aCBleHRlbnNpb25zXG4gICAgaWYgKHBrZy5tYXApIHtcbiAgICAgIHZhciBtYXBQYXRoID0gJy4vJyArIHN1YlBhdGg7XG5cbiAgICAgIHZhciBtYXBNYXRjaCA9IGdldE1hcE1hdGNoKHBrZy5tYXAsIG1hcFBhdGgpO1xuXG4gICAgICAvLyB3ZSB0aGVuIGNoZWNrIG1hcCB3aXRoIHRoZSBkZWZhdWx0IGV4dGVuc2lvbiBhZGRpbmdcbiAgICAgIGlmICghbWFwTWF0Y2gpIHtcbiAgICAgICAgbWFwUGF0aCA9ICcuLycgKyBhZGREZWZhdWx0RXh0ZW5zaW9uKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBzdWJQYXRoLCBza2lwRXh0ZW5zaW9ucyk7XG4gICAgICAgIGlmIChtYXBQYXRoICE9ICcuLycgKyBzdWJQYXRoKVxuICAgICAgICAgIG1hcE1hdGNoID0gZ2V0TWFwTWF0Y2gocGtnLm1hcCwgbWFwUGF0aCk7XG4gICAgICB9XG4gICAgICBpZiAobWFwTWF0Y2gpIHtcbiAgICAgICAgdmFyIG1hcHBlZCA9IGRvTWFwU3luYyhsb2FkZXIsIHBrZywgcGtnTmFtZSwgbWFwTWF0Y2gsIG1hcFBhdGgsIHNraXBFeHRlbnNpb25zKTtcbiAgICAgICAgaWYgKG1hcHBlZClcbiAgICAgICAgICByZXR1cm4gbWFwcGVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIG5vcm1hbCBwYWNrYWdlIHJlc29sdXRpb25cbiAgICByZXR1cm4gcGtnTmFtZSArICcvJyArIGFkZERlZmF1bHRFeHRlbnNpb24obG9hZGVyLCBwa2csIHBrZ05hbWUsIHN1YlBhdGgsIHNraXBFeHRlbnNpb25zKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkTWFwcGluZyhtYXBNYXRjaCwgbWFwcGVkLCBwa2dOYW1lLCBwYXRoKSB7XG4gICAgLy8gZGlzYWxsb3cgaW50ZXJuYWwgdG8gc3VicGF0aCBtYXBzXG4gICAgaWYgKG1hcE1hdGNoID09ICcuJylcbiAgICAgIHRocm93IG5ldyBFcnJvcignUGFja2FnZSAnICsgcGtnTmFtZSArICcgaGFzIGEgbWFwIGVudHJ5IGZvciBcIi5cIiB3aGljaCBpcyBub3QgcGVybWl0dGVkLicpO1xuICAgIFxuICAgIC8vIGFsbG93IGludGVybmFsIC4veCAtPiAuL3gveSBvciAuL3gvIC0+IC4veC95IHJlY3Vyc2l2ZSBtYXBzXG4gICAgLy8gYnV0IG9ubHkgaWYgdGhlIHBhdGggaXMgZXhhY3RseSAuL3ggYW5kIG5vdCAuL3gvelxuICAgIGlmIChtYXBwZWQuc3Vic3RyKDAsIG1hcE1hdGNoLmxlbmd0aCkgPT0gbWFwTWF0Y2ggJiYgcGF0aC5sZW5ndGggPiBtYXBNYXRjaC5sZW5ndGgpXG4gICAgICByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvTWFwU3luYyhsb2FkZXIsIHBrZywgcGtnTmFtZSwgbWFwTWF0Y2gsIHBhdGgsIHNraXBFeHRlbnNpb25zKSB7XG4gICAgaWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PSAnLycpXG4gICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKTtcbiAgICB2YXIgbWFwcGVkID0gcGtnLm1hcFttYXBNYXRjaF07XG5cbiAgICBpZiAodHlwZW9mIG1hcHBlZCA9PSAnb2JqZWN0JylcbiAgICAgIHRocm93IG5ldyBFcnJvcignU3luY2hyb25vdXMgY29uZGl0aW9uYWwgbm9ybWFsaXphdGlvbiBub3Qgc3VwcG9ydGVkIHN5bmMgbm9ybWFsaXppbmcgJyArIG1hcE1hdGNoICsgJyBpbiAnICsgcGtnTmFtZSk7XG5cbiAgICBpZiAoIXZhbGlkTWFwcGluZyhtYXBNYXRjaCwgbWFwcGVkLCBwa2dOYW1lLCBwYXRoKSB8fCB0eXBlb2YgbWFwcGVkICE9ICdzdHJpbmcnKVxuICAgICAgcmV0dXJuO1xuXG4gICAgLy8gcGFja2FnZSBtYXAgdG8gbWFpbiAvIGJhc2UtbGV2ZWxcbiAgICBpZiAobWFwcGVkID09ICcuJylcbiAgICAgIG1hcHBlZCA9IHBrZ05hbWU7XG5cbiAgICAvLyBpbnRlcm5hbCBwYWNrYWdlIG1hcFxuICAgIGVsc2UgaWYgKG1hcHBlZC5zdWJzdHIoMCwgMikgPT0gJy4vJylcbiAgICAgIHJldHVybiBwa2dOYW1lICsgJy8nICsgYWRkRGVmYXVsdEV4dGVuc2lvbihsb2FkZXIsIHBrZywgcGtnTmFtZSwgbWFwcGVkLnN1YnN0cigyKSArIHBhdGguc3Vic3RyKG1hcE1hdGNoLmxlbmd0aCksIHNraXBFeHRlbnNpb25zKTtcbiAgICBcbiAgICAvLyBleHRlcm5hbCBtYXAgcmVmZXJlbmNlXG4gICAgcmV0dXJuIGxvYWRlci5ub3JtYWxpemVTeW5jKG1hcHBlZCArIHBhdGguc3Vic3RyKG1hcE1hdGNoLmxlbmd0aCksIHBrZ05hbWUgKyAnLycpO1xuICB9XG5cbiAgZnVuY3Rpb24gYXBwbHlQYWNrYWdlQ29uZmlnKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBzdWJQYXRoLCBza2lwRXh0ZW5zaW9ucykge1xuICAgIC8vIG1haW5cbiAgICBpZiAoIXN1YlBhdGgpIHtcbiAgICAgIGlmIChwa2cubWFpbilcbiAgICAgICAgc3ViUGF0aCA9IHBrZy5tYWluLnN1YnN0cigwLCAyKSA9PSAnLi8nID8gcGtnLm1haW4uc3Vic3RyKDIpIDogcGtnLm1haW47XG4gICAgICAvLyBhbHNvIG5vIHN1Ym1hcCBpZiBuYW1lIGlzIHBhY2thZ2UgaXRzZWxmIChpbXBvcnQgJ3BrZycgLT4gJ3BhdGgvdG8vcGtnLmpzJylcbiAgICAgIGVsc2VcbiAgICAgICAgLy8gTkIgY2FuIGFkZCBhIGRlZmF1bHQgcGFja2FnZSBtYWluIGNvbnZlbnRpb24gaGVyZSB3aGVuIGRlZmF1bHRKU0V4dGVuc2lvbnMgaXMgZGVwcmVjYXRlZFxuICAgICAgICAvLyBpZiBpdCBiZWNvbWVzIGludGVybmFsIHRvIHRoZSBwYWNrYWdlIHRoZW4gaXQgd291bGQgbm8gbG9uZ2VyIGJlIGFuIGV4aXQgcGF0aFxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBrZ05hbWUgKyAobG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgPyAnLmpzJyA6ICcnKSk7XG4gICAgfVxuXG4gICAgLy8gbWFwIGNvbmZpZyBjaGVja2luZyB3aXRob3V0IHRoZW4gd2l0aCBleHRlbnNpb25zXG4gICAgdmFyIG1hcFBhdGgsIG1hcE1hdGNoO1xuXG4gICAgaWYgKHBrZy5tYXApIHtcbiAgICAgIG1hcFBhdGggPSAnLi8nICsgc3ViUGF0aDtcbiAgICAgIG1hcE1hdGNoID0gZ2V0TWFwTWF0Y2gocGtnLm1hcCwgbWFwUGF0aCk7XG5cbiAgICAgIC8vIHdlIHRoZW4gY2hlY2sgbWFwIHdpdGggdGhlIGRlZmF1bHQgZXh0ZW5zaW9uIGFkZGluZ1xuICAgICAgaWYgKCFtYXBNYXRjaCkge1xuICAgICAgICBtYXBQYXRoID0gJy4vJyArIGFkZERlZmF1bHRFeHRlbnNpb24obG9hZGVyLCBwa2csIHBrZ05hbWUsIHN1YlBhdGgsIHNraXBFeHRlbnNpb25zKTtcbiAgICAgICAgaWYgKG1hcFBhdGggIT0gJy4vJyArIHN1YlBhdGgpXG4gICAgICAgICAgbWFwTWF0Y2ggPSBnZXRNYXBNYXRjaChwa2cubWFwLCBtYXBQYXRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gKG1hcE1hdGNoID8gZG9NYXAobG9hZGVyLCBwa2csIHBrZ05hbWUsIG1hcE1hdGNoLCBtYXBQYXRoLCBza2lwRXh0ZW5zaW9ucykgOiBQcm9taXNlLnJlc29sdmUoKSlcbiAgICAudGhlbihmdW5jdGlvbihtYXBwZWQpIHtcbiAgICAgIGlmIChtYXBwZWQpXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFwcGVkKTtcblxuICAgICAgLy8gbm9ybWFsIHBhY2thZ2UgcmVzb2x1dGlvbiAvIGZhbGxiYWNrIHJlc29sdXRpb24gZm9yIG5vIGNvbmRpdGlvbmFsIG1hdGNoXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBrZ05hbWUgKyAnLycgKyBhZGREZWZhdWx0RXh0ZW5zaW9uKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBzdWJQYXRoLCBza2lwRXh0ZW5zaW9ucykpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZG9TdHJpbmdNYXAobG9hZGVyLCBwa2csIHBrZ05hbWUsIG1hcE1hdGNoLCBtYXBwZWQsIHBhdGgsIHNraXBFeHRlbnNpb25zKSB7XG4gICAgLy8gTkIgdGhlIGludGVycG9sYXRpb24gY2FzZXMgc2hvdWxkIHN0cmljdGx5IHNraXAgc3Vic2VxdWVudCBpbnRlcnBvbGF0aW9uXG4gICAgLy8gcGFja2FnZSBtYXAgdG8gbWFpbiAvIGJhc2UtbGV2ZWxcbiAgICBpZiAobWFwcGVkID09ICcuJylcbiAgICAgIG1hcHBlZCA9IHBrZ05hbWU7XG4gICAgXG4gICAgLy8gaW50ZXJuYWwgcGFja2FnZSBtYXBcbiAgICBlbHNlIGlmIChtYXBwZWQuc3Vic3RyKDAsIDIpID09ICcuLycpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHBrZ05hbWUgKyAnLycgKyBhZGREZWZhdWx0RXh0ZW5zaW9uKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBtYXBwZWQuc3Vic3RyKDIpICsgcGF0aC5zdWJzdHIobWFwTWF0Y2gubGVuZ3RoKSwgc2tpcEV4dGVuc2lvbnMpKVxuICAgICAgLnRoZW4oZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gaW50ZXJwb2xhdGVDb25kaXRpb25hbC5jYWxsKGxvYWRlciwgbmFtZSwgcGtnTmFtZSArICcvJyk7XG4gICAgICB9KTtcbiAgICBcbiAgICAvLyBleHRlcm5hbCBtYXAgcmVmZXJlbmNlXG4gICAgcmV0dXJuIGxvYWRlci5ub3JtYWxpemUobWFwcGVkICsgcGF0aC5zdWJzdHIobWFwTWF0Y2gubGVuZ3RoKSwgcGtnTmFtZSArICcvJyk7XG4gIH1cblxuICBmdW5jdGlvbiBkb01hcChsb2FkZXIsIHBrZywgcGtnTmFtZSwgbWFwTWF0Y2gsIHBhdGgsIHNraXBFeHRlbnNpb25zKSB7XG4gICAgaWYgKHBhdGhbcGF0aC5sZW5ndGggLSAxXSA9PSAnLycpXG4gICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aC5sZW5ndGggLSAxKTtcblxuICAgIHZhciBtYXBwZWQgPSBwa2cubWFwW21hcE1hdGNoXTtcblxuICAgIGlmICh0eXBlb2YgbWFwcGVkID09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoIXZhbGlkTWFwcGluZyhtYXBNYXRjaCwgbWFwcGVkLCBwa2dOYW1lLCBwYXRoKSlcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuIGRvU3RyaW5nTWFwKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBtYXBNYXRjaCwgbWFwcGVkLCBwYXRoLCBza2lwRXh0ZW5zaW9ucyk7XG4gICAgfVxuXG4gICAgLy8gd2UgdXNlIGEgc3BlY2lhbCBjb25kaXRpb25hbCBzeW50YXggdG8gYWxsb3cgdGhlIGJ1aWxkZXIgdG8gaGFuZGxlIGNvbmRpdGlvbmFsIGJyYW5jaCBwb2ludHMgZnVydGhlclxuICAgIGlmIChsb2FkZXIuYnVpbGRlcilcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGtnTmFtZSArICcvIzonICsgcGF0aCk7XG5cbiAgICAvLyB3ZSBsb2FkIGFsbCBjb25kaXRpb25zIHVwZnJvbnRcbiAgICB2YXIgY29uZGl0aW9uUHJvbWlzZXMgPSBbXTtcbiAgICB2YXIgY29uZGl0aW9ucyA9IFtdO1xuICAgIGZvciAodmFyIGUgaW4gbWFwcGVkKSB7XG4gICAgICB2YXIgYyA9IHBhcnNlQ29uZGl0aW9uKGUpO1xuICAgICAgY29uZGl0aW9ucy5wdXNoKHtcbiAgICAgICAgY29uZGl0aW9uOiBjLFxuICAgICAgICBtYXA6IG1hcHBlZFtlXVxuICAgICAgfSk7XG4gICAgICBjb25kaXRpb25Qcm9taXNlcy5wdXNoKGxvYWRlclsnaW1wb3J0J10oYy5tb2R1bGUsIHBrZ05hbWUpKTtcbiAgICB9XG5cbiAgICAvLyBtYXAgb2JqZWN0IC0+IGNvbmRpdGlvbmFsIG1hcFxuICAgIHJldHVybiBQcm9taXNlLmFsbChjb25kaXRpb25Qcm9taXNlcylcbiAgICAudGhlbihmdW5jdGlvbihjb25kaXRpb25WYWx1ZXMpIHtcbiAgICAgIC8vIGZpcnN0IG1hcCBjb25kaXRpb24gdG8gbWF0Y2ggaXMgdXNlZFxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25kaXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gY29uZGl0aW9uc1tpXS5jb25kaXRpb247XG4gICAgICAgIHZhciB2YWx1ZSA9IHJlYWRNZW1iZXJFeHByZXNzaW9uKGMucHJvcCwgY29uZGl0aW9uVmFsdWVzW2ldKTtcbiAgICAgICAgaWYgKCFjLm5lZ2F0ZSAmJiB2YWx1ZSB8fCBjLm5lZ2F0ZSAmJiAhdmFsdWUpXG4gICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbnNbaV0ubWFwO1xuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oZnVuY3Rpb24obWFwcGVkKSB7XG4gICAgICBpZiAobWFwcGVkKSB7XG4gICAgICAgIGlmICghdmFsaWRNYXBwaW5nKG1hcE1hdGNoLCBtYXBwZWQsIHBrZ05hbWUsIHBhdGgpKVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGRvU3RyaW5nTWFwKGxvYWRlciwgcGtnLCBwa2dOYW1lLCBtYXBNYXRjaCwgbWFwcGVkLCBwYXRoLCBza2lwRXh0ZW5zaW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIG5vIGVudmlyb25tZW50IG1hdGNoIC0+IGZhbGxiYWNrIHRvIG9yaWdpbmFsIHN1YlBhdGggYnkgcmV0dXJuaW5nIHVuZGVmaW5lZFxuICAgIH0pO1xuICB9XG5cbiAgLy8gbm9ybWFsaXplU3luYyA9IGRlY2Fub25pY2FsaXplICsgcGFja2FnZSByZXNvbHV0aW9uXG4gIFN5c3RlbUpTTG9hZGVyLnByb3RvdHlwZS5ub3JtYWxpemVTeW5jID0gU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLmRlY2Fub25pY2FsaXplID0gU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLm5vcm1hbGl6ZTtcblxuICAvLyBkZWNhbm9uaWNhbGl6ZSBtdXN0IEpVU1QgaGFuZGxlIHBhY2thZ2UgZGVmYXVsdEV4dGVuc2lvbjogZmFsc2UgY2FzZSB3aGVuIGRlZmF1bHRKU0V4dGVuc2lvbnMgaXMgc2V0XG4gIC8vIHRvIGJlIGRlcHJlY2F0ZWQhXG4gIGhvb2soJ2RlY2Fub25pY2FsaXplJywgZnVuY3Rpb24oZGVjYW5vbmljYWxpemUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgcGFyZW50TmFtZSkge1xuICAgICAgaWYgKHRoaXMuYnVpbGRlcilcbiAgICAgICAgcmV0dXJuIGRlY2Fub25pY2FsaXplLmNhbGwodGhpcywgbmFtZSwgcGFyZW50TmFtZSwgdHJ1ZSk7XG5cbiAgICAgIHZhciBkZWNhbm9uaWNhbGl6ZWQgPSBkZWNhbm9uaWNhbGl6ZS5jYWxsKHRoaXMsIG5hbWUsIHBhcmVudE5hbWUsIGZhbHNlKTtcblxuICAgICAgaWYgKCF0aGlzLmRlZmF1bHRKU0V4dGVuc2lvbnMpXG4gICAgICAgIHJldHVybiBkZWNhbm9uaWNhbGl6ZWQ7XG4gICAgXG4gICAgICB2YXIgcGtnTmFtZSA9IGdldFBhY2thZ2UodGhpcywgZGVjYW5vbmljYWxpemVkKTtcblxuICAgICAgdmFyIHBrZyA9IHRoaXMucGFja2FnZXNbcGtnTmFtZV07XG4gICAgICB2YXIgZGVmYXVsdEV4dGVuc2lvbiA9IHBrZyAmJiBwa2cuZGVmYXVsdEV4dGVuc2lvbjtcblxuICAgICAgaWYgKGRlZmF1bHRFeHRlbnNpb24gPT0gdW5kZWZpbmVkICYmIHBrZyAmJiBwa2cubWV0YSlcbiAgICAgICAgZ2V0TWV0YU1hdGNoZXMocGtnLm1ldGEsIGRlY2Fub25pY2FsaXplZC5zdWJzdHIocGtnTmFtZSksIGZ1bmN0aW9uKG1ldGFQYXR0ZXJuLCBtYXRjaE1ldGEsIG1hdGNoRGVwdGgpIHtcbiAgICAgICAgICBpZiAobWF0Y2hEZXB0aCA9PSAwIHx8IG1ldGFQYXR0ZXJuLmxhc3RJbmRleE9mKCcqJykgIT0gbWV0YVBhdHRlcm4ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgZGVmYXVsdEV4dGVuc2lvbiA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKChkZWZhdWx0RXh0ZW5zaW9uID09PSBmYWxzZSB8fCBkZWZhdWx0RXh0ZW5zaW9uICYmIGRlZmF1bHRFeHRlbnNpb24gIT0gJy5qcycpICYmIG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gMywgMykgIT0gJy5qcycgJiYgZGVjYW5vbmljYWxpemVkLnN1YnN0cihkZWNhbm9uaWNhbGl6ZWQubGVuZ3RoIC0gMywgMykgPT0gJy5qcycpXG4gICAgICAgIGRlY2Fub25pY2FsaXplZCA9IGRlY2Fub25pY2FsaXplZC5zdWJzdHIoMCwgZGVjYW5vbmljYWxpemVkLmxlbmd0aCAtIDMpO1xuXG4gICAgICByZXR1cm4gZGVjYW5vbmljYWxpemVkO1xuICAgIH07XG4gIH0pO1xuXG4gIGhvb2soJ25vcm1hbGl6ZVN5bmMnLCBmdW5jdGlvbihub3JtYWxpemVTeW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIHBhcmVudE5hbWUsIGlzUGx1Z2luKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIGlzUGx1Z2luID0gaXNQbHVnaW4gPT09IHRydWU7XG5cbiAgICAgIC8vIGFwcGx5IGNvbnRleHR1YWwgcGFja2FnZSBtYXAgZmlyc3RcbiAgICAgIC8vICh3ZSBhc3N1bWUgdGhlIHBhcmVudCBwYWNrYWdlIGNvbmZpZyBoYXMgYWxyZWFkeSBiZWVuIGxvYWRlZClcbiAgICAgIGlmIChwYXJlbnROYW1lKVxuICAgICAgICB2YXIgcGFyZW50UGFja2FnZU5hbWUgPSBnZXRQYWNrYWdlKGxvYWRlciwgcGFyZW50TmFtZSkgfHxcbiAgICAgICAgICAgIGxvYWRlci5kZWZhdWx0SlNFeHRlbnNpb25zICYmIHBhcmVudE5hbWUuc3Vic3RyKHBhcmVudE5hbWUubGVuZ3RoIC0gMywgMykgPT0gJy5qcycgJiZcbiAgICAgICAgICAgIGdldFBhY2thZ2UobG9hZGVyLCBwYXJlbnROYW1lLnN1YnN0cigwLCBwYXJlbnROYW1lLmxlbmd0aCAtIDMpKTtcblxuICAgICAgdmFyIHBhcmVudFBhY2thZ2UgPSBwYXJlbnRQYWNrYWdlTmFtZSAmJiBsb2FkZXIucGFja2FnZXNbcGFyZW50UGFja2FnZU5hbWVdO1xuXG4gICAgICAvLyBpZ25vcmUgLiBzaW5jZSBpbnRlcm5hbCBtYXBzIGhhbmRsZWQgYnkgc3RhbmRhcmQgcGFja2FnZSByZXNvbHV0aW9uXG4gICAgICBpZiAocGFyZW50UGFja2FnZSAmJiBuYW1lWzBdICE9ICcuJykge1xuICAgICAgICB2YXIgcGFyZW50TWFwID0gcGFyZW50UGFja2FnZS5tYXA7XG4gICAgICAgIHZhciBwYXJlbnRNYXBNYXRjaCA9IHBhcmVudE1hcCAmJiBnZXRNYXBNYXRjaChwYXJlbnRNYXAsIG5hbWUpO1xuXG4gICAgICAgIGlmIChwYXJlbnRNYXBNYXRjaCAmJiB0eXBlb2YgcGFyZW50TWFwW3BhcmVudE1hcE1hdGNoXSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHZhciBtYXBwZWQgPSBkb01hcFN5bmMobG9hZGVyLCBwYXJlbnRQYWNrYWdlLCBwYXJlbnRQYWNrYWdlTmFtZSwgcGFyZW50TWFwTWF0Y2gsIG5hbWUsIGlzUGx1Z2luKTsgICAgICBcbiAgICAgICAgICBpZiAobWFwcGVkKVxuICAgICAgICAgICAgcmV0dXJuIG1hcHBlZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZGVmYXVsdEpTRXh0ZW5zaW9uID0gbG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgJiYgbmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSAzLCAzKSAhPSAnLmpzJztcblxuICAgICAgLy8gYXBwbHkgbWFwLCBjb3JlLCBwYXRocywgY29udGV4dHVhbCBwYWNrYWdlIG1hcFxuICAgICAgdmFyIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVTeW5jLmNhbGwobG9hZGVyLCBuYW1lLCBwYXJlbnROYW1lLCBmYWxzZSk7XG5cbiAgICAgIC8vIHVuZG8gZGVmYXVsdEpTRXh0ZW5zaW9uXG4gICAgICBpZiAoZGVmYXVsdEpTRXh0ZW5zaW9uICYmIG5vcm1hbGl6ZWQuc3Vic3RyKG5vcm1hbGl6ZWQubGVuZ3RoIC0gMywgMykgIT0gJy5qcycpXG4gICAgICAgIGRlZmF1bHRKU0V4dGVuc2lvbiA9IGZhbHNlO1xuICAgICAgaWYgKGRlZmF1bHRKU0V4dGVuc2lvbilcbiAgICAgICAgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZWQuc3Vic3RyKDAsIG5vcm1hbGl6ZWQubGVuZ3RoIC0gMyk7XG5cbiAgICAgIHZhciBwa2dDb25maWdNYXRjaCA9IGdldFBhY2thZ2VDb25maWdNYXRjaChsb2FkZXIsIG5vcm1hbGl6ZWQpO1xuICAgICAgdmFyIHBrZ05hbWUgPSBwa2dDb25maWdNYXRjaCAmJiBwa2dDb25maWdNYXRjaC5wYWNrYWdlTmFtZSB8fCBnZXRQYWNrYWdlKGxvYWRlciwgbm9ybWFsaXplZCk7XG5cbiAgICAgIGlmICghcGtnTmFtZSlcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQgKyAoZGVmYXVsdEpTRXh0ZW5zaW9uID8gJy5qcycgOiAnJyk7XG5cbiAgICAgIHZhciBzdWJQYXRoID0gbm9ybWFsaXplZC5zdWJzdHIocGtnTmFtZS5sZW5ndGggKyAxKTtcblxuICAgICAgcmV0dXJuIGFwcGx5UGFja2FnZUNvbmZpZ1N5bmMobG9hZGVyLCBsb2FkZXIucGFja2FnZXNbcGtnTmFtZV0gfHwge30sIHBrZ05hbWUsIHN1YlBhdGgsIGlzUGx1Z2luKTtcbiAgICB9O1xuICB9KTtcblxuICBob29rKCdub3JtYWxpemUnLCBmdW5jdGlvbihub3JtYWxpemUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgcGFyZW50TmFtZSwgaXNQbHVnaW4pIHtcbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgICAgaXNQbHVnaW4gPSBpc1BsdWdpbiA9PT0gdHJ1ZTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gYXBwbHkgY29udGV4dHVhbCBwYWNrYWdlIG1hcCBmaXJzdFxuICAgICAgICAvLyAod2UgYXNzdW1lIHRoZSBwYXJlbnQgcGFja2FnZSBjb25maWcgaGFzIGFscmVhZHkgYmVlbiBsb2FkZWQpXG4gICAgICAgIGlmIChwYXJlbnROYW1lKVxuICAgICAgICAgIHZhciBwYXJlbnRQYWNrYWdlTmFtZSA9IGdldFBhY2thZ2UobG9hZGVyLCBwYXJlbnROYW1lKSB8fFxuICAgICAgICAgICAgICBsb2FkZXIuZGVmYXVsdEpTRXh0ZW5zaW9ucyAmJiBwYXJlbnROYW1lLnN1YnN0cihwYXJlbnROYW1lLmxlbmd0aCAtIDMsIDMpID09ICcuanMnICYmXG4gICAgICAgICAgICAgIGdldFBhY2thZ2UobG9hZGVyLCBwYXJlbnROYW1lLnN1YnN0cigwLCBwYXJlbnROYW1lLmxlbmd0aCAtIDMpKTtcblxuICAgICAgICB2YXIgcGFyZW50UGFja2FnZSA9IHBhcmVudFBhY2thZ2VOYW1lICYmIGxvYWRlci5wYWNrYWdlc1twYXJlbnRQYWNrYWdlTmFtZV07XG5cbiAgICAgICAgLy8gaWdub3JlIC4gc2luY2UgaW50ZXJuYWwgbWFwcyBoYW5kbGVkIGJ5IHN0YW5kYXJkIHBhY2thZ2UgcmVzb2x1dGlvblxuICAgICAgICBpZiAocGFyZW50UGFja2FnZSAmJiBuYW1lLnN1YnN0cigwLCAyKSAhPSAnLi8nKSB7XG4gICAgICAgICAgdmFyIHBhcmVudE1hcCA9IHBhcmVudFBhY2thZ2UubWFwO1xuICAgICAgICAgIHZhciBwYXJlbnRNYXBNYXRjaCA9IHBhcmVudE1hcCAmJiBnZXRNYXBNYXRjaChwYXJlbnRNYXAsIG5hbWUpO1xuXG4gICAgICAgICAgaWYgKHBhcmVudE1hcE1hdGNoKVxuICAgICAgICAgICAgcmV0dXJuIGRvTWFwKGxvYWRlciwgcGFyZW50UGFja2FnZSwgcGFyZW50UGFja2FnZU5hbWUsIHBhcmVudE1hcE1hdGNoLCBuYW1lLCBpc1BsdWdpbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oZnVuY3Rpb24obWFwcGVkKSB7XG4gICAgICAgIGlmIChtYXBwZWQpXG4gICAgICAgICAgcmV0dXJuIG1hcHBlZDtcblxuICAgICAgICB2YXIgZGVmYXVsdEpTRXh0ZW5zaW9uID0gbG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgJiYgbmFtZS5zdWJzdHIobmFtZS5sZW5ndGggLSAzLCAzKSAhPSAnLmpzJztcblxuICAgICAgICAvLyBhcHBseSBtYXAsIGNvcmUsIHBhdGhzLCBjb250ZXh0dWFsIHBhY2thZ2UgbWFwXG4gICAgICAgIHZhciBub3JtYWxpemVkID0gbm9ybWFsaXplLmNhbGwobG9hZGVyLCBuYW1lLCBwYXJlbnROYW1lLCBmYWxzZSk7XG5cbiAgICAgICAgLy8gdW5kbyBkZWZhdWx0SlNFeHRlbnNpb25cbiAgICAgICAgaWYgKGRlZmF1bHRKU0V4dGVuc2lvbiAmJiBub3JtYWxpemVkLnN1YnN0cihub3JtYWxpemVkLmxlbmd0aCAtIDMsIDMpICE9ICcuanMnKVxuICAgICAgICAgIGRlZmF1bHRKU0V4dGVuc2lvbiA9IGZhbHNlO1xuICAgICAgICBpZiAoZGVmYXVsdEpTRXh0ZW5zaW9uKVxuICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnN1YnN0cigwLCBub3JtYWxpemVkLmxlbmd0aCAtIDMpO1xuXG4gICAgICAgIHZhciBwa2dDb25maWdNYXRjaCA9IGdldFBhY2thZ2VDb25maWdNYXRjaChsb2FkZXIsIG5vcm1hbGl6ZWQpO1xuICAgICAgICB2YXIgcGtnTmFtZSA9IHBrZ0NvbmZpZ01hdGNoICYmIHBrZ0NvbmZpZ01hdGNoLnBhY2thZ2VOYW1lIHx8IGdldFBhY2thZ2UobG9hZGVyLCBub3JtYWxpemVkKTtcblxuICAgICAgICBpZiAoIXBrZ05hbWUpXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShub3JtYWxpemVkICsgKGRlZmF1bHRKU0V4dGVuc2lvbiA/ICcuanMnIDogJycpKTtcblxuICAgICAgICB2YXIgcGtnID0gbG9hZGVyLnBhY2thZ2VzW3BrZ05hbWVdO1xuXG4gICAgICAgIC8vIGlmIHBhY2thZ2UgaXMgYWxyZWFkeSBjb25maWd1cmVkIG9yIG5vdCBhIGR5bmFtaWMgY29uZmlnIHBhY2thZ2UsIHVzZSBleGlzdGluZyBwYWNrYWdlIGNvbmZpZ1xuICAgICAgICB2YXIgaXNDb25maWd1cmVkID0gcGtnICYmIChwa2cuY29uZmlndXJlZCB8fCAhcGtnQ29uZmlnTWF0Y2gpO1xuICAgICAgICByZXR1cm4gKGlzQ29uZmlndXJlZCA/IFByb21pc2UucmVzb2x2ZShwa2cpIDogbG9hZFBhY2thZ2VDb25maWdQYXRoKGxvYWRlciwgcGtnTmFtZSwgcGtnQ29uZmlnTWF0Y2guY29uZmlnUGF0aCkpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHBrZykge1xuICAgICAgICAgIHZhciBzdWJQYXRoID0gbm9ybWFsaXplZC5zdWJzdHIocGtnTmFtZS5sZW5ndGggKyAxKTtcblxuICAgICAgICAgIHJldHVybiBhcHBseVBhY2thZ2VDb25maWcobG9hZGVyLCBwa2csIHBrZ05hbWUsIHN1YlBhdGgsIGlzUGx1Z2luKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBjaGVjayBpZiB0aGUgZ2l2ZW4gbm9ybWFsaXplZCBuYW1lIG1hdGNoZXMgYSBwYWNrYWdlQ29uZmlnUGF0aFxuICAvLyBpZiBzbywgbG9hZHMgdGhlIGNvbmZpZ1xuICB2YXIgcGFja2FnZUNvbmZpZ1BhdGhzID0ge307XG5cbiAgLy8gZGF0YSBvYmplY3QgZm9yIHF1aWNrIGNoZWNrcyBhZ2FpbnN0IHBhY2thZ2UgcGF0aHNcbiAgZnVuY3Rpb24gY3JlYXRlUGtnQ29uZmlnUGF0aE9iaihwYXRoKSB7XG4gICAgdmFyIGxhc3RXaWxkY2FyZCA9IHBhdGgubGFzdEluZGV4T2YoJyonKTtcbiAgICB2YXIgbGVuZ3RoID0gTWF0aC5tYXgobGFzdFdpbGRjYXJkICsgMSwgcGF0aC5sYXN0SW5kZXhPZignLycpKTtcbiAgICByZXR1cm4ge1xuICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICByZWdFeDogbmV3IFJlZ0V4cCgnXignICsgcGF0aC5zdWJzdHIoMCwgbGVuZ3RoKS5yZXBsYWNlKC9bLis/XiR7fSgpfFtcXF1cXFxcXS9nLCAnXFxcXCQmJykucmVwbGFjZSgvXFwqL2csICdbXlxcXFwvXSsnKSArICcpKFxcXFwvfCQpJyksXG4gICAgICB3aWxkY2FyZDogbGFzdFdpbGRjYXJkICE9IC0xXG4gICAgfTtcbiAgfVxuXG4gIC8vIG1vc3Qgc3BlY2lmaWMgbWF0Y2ggd2luc1xuICBmdW5jdGlvbiBnZXRQYWNrYWdlQ29uZmlnTWF0Y2gobG9hZGVyLCBub3JtYWxpemVkKSB7XG4gICAgdmFyIHBrZ05hbWUsIGV4YWN0TWF0Y2ggPSBmYWxzZSwgY29uZmlnUGF0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvYWRlci5wYWNrYWdlQ29uZmlnUGF0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYWNrYWdlQ29uZmlnUGF0aCA9IGxvYWRlci5wYWNrYWdlQ29uZmlnUGF0aHNbaV07XG4gICAgICB2YXIgcCA9IHBhY2thZ2VDb25maWdQYXRoc1twYWNrYWdlQ29uZmlnUGF0aF0gfHwgKHBhY2thZ2VDb25maWdQYXRoc1twYWNrYWdlQ29uZmlnUGF0aF0gPSBjcmVhdGVQa2dDb25maWdQYXRoT2JqKHBhY2thZ2VDb25maWdQYXRoKSk7XG4gICAgICBpZiAobm9ybWFsaXplZC5sZW5ndGggPCBwLmxlbmd0aClcbiAgICAgICAgY29udGludWU7XG4gICAgICB2YXIgbWF0Y2ggPSBub3JtYWxpemVkLm1hdGNoKHAucmVnRXgpO1xuICAgICAgaWYgKG1hdGNoICYmICghcGtnTmFtZSB8fCAoIShleGFjdE1hdGNoICYmIHAud2lsZGNhcmQpICYmIHBrZ05hbWUubGVuZ3RoIDwgbWF0Y2hbMV0ubGVuZ3RoKSkpIHtcbiAgICAgICAgcGtnTmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICBleGFjdE1hdGNoID0gIXAud2lsZGNhcmQ7XG4gICAgICAgIGNvbmZpZ1BhdGggPSBwa2dOYW1lICsgcGFja2FnZUNvbmZpZ1BhdGguc3Vic3RyKHAubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXBrZ05hbWUpXG4gICAgICByZXR1cm47XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFja2FnZU5hbWU6IHBrZ05hbWUsXG4gICAgICBjb25maWdQYXRoOiBjb25maWdQYXRoXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvYWRQYWNrYWdlQ29uZmlnUGF0aChsb2FkZXIsIHBrZ05hbWUsIHBrZ0NvbmZpZ1BhdGgpIHtcbiAgICB2YXIgY29uZmlnTG9hZGVyID0gbG9hZGVyLnBsdWdpbkxvYWRlciB8fCBsb2FkZXI7XG5cbiAgICAvLyBOQiByZW1vdmUgdGhpcyB3aGVuIGpzb24gaXMgZGVmYXVsdFxuICAgIChjb25maWdMb2FkZXIubWV0YVtwa2dDb25maWdQYXRoXSA9IGNvbmZpZ0xvYWRlci5tZXRhW3BrZ0NvbmZpZ1BhdGhdIHx8IHt9KS5mb3JtYXQgPSAnanNvbic7XG4gICAgY29uZmlnTG9hZGVyLm1ldGFbcGtnQ29uZmlnUGF0aF0ubG9hZGVyID0gbnVsbDtcblxuICAgIHJldHVybiBjb25maWdMb2FkZXIubG9hZChwa2dDb25maWdQYXRoKVxuICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNmZyA9IGNvbmZpZ0xvYWRlci5nZXQocGtnQ29uZmlnUGF0aClbJ2RlZmF1bHQnXTtcblxuICAgICAgLy8gc3VwcG9ydCBcInN5c3RlbWpzXCIgcHJlZml4aW5nXG4gICAgICBpZiAoY2ZnLnN5c3RlbWpzKVxuICAgICAgICBjZmcgPSBjZmcuc3lzdGVtanM7XG5cbiAgICAgIC8vIG1vZHVsZXMgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgICAgIGlmIChjZmcubW9kdWxlcykge1xuICAgICAgICBjZmcubWV0YSA9IGNmZy5tb2R1bGVzO1xuICAgICAgICB3YXJuLmNhbGwobG9hZGVyLCAnUGFja2FnZSBjb25maWcgZmlsZSAnICsgcGtnQ29uZmlnUGF0aCArICcgaXMgY29uZmlndXJlZCB3aXRoIFwibW9kdWxlc1wiLCB3aGljaCBpcyBkZXByZWNhdGVkIGFzIGl0IGhhcyBiZWVuIHJlbmFtZWQgdG8gXCJtZXRhXCIuJyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBzZXRQa2dDb25maWcobG9hZGVyLCBwa2dOYW1lLCBjZmcsIHRydWUpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0TWV0YU1hdGNoZXMocGtnTWV0YSwgc3ViUGF0aCwgbWF0Y2hGbikge1xuICAgIC8vIHdpbGRjYXJkIG1ldGFcbiAgICB2YXIgbWV0YSA9IHt9O1xuICAgIHZhciB3aWxkY2FyZEluZGV4O1xuICAgIGZvciAodmFyIG1vZHVsZSBpbiBwa2dNZXRhKSB7XG4gICAgICAvLyBhbGxvdyBtZXRhIHRvIHN0YXJ0IHdpdGggLi8gZm9yIGZsZXhpYmlsaXR5XG4gICAgICB2YXIgZG90UmVsID0gbW9kdWxlLnN1YnN0cigwLCAyKSA9PSAnLi8nID8gJy4vJyA6ICcnO1xuICAgICAgaWYgKGRvdFJlbClcbiAgICAgICAgbW9kdWxlID0gbW9kdWxlLnN1YnN0cigyKTtcblxuICAgICAgd2lsZGNhcmRJbmRleCA9IG1vZHVsZS5pbmRleE9mKCcqJyk7XG4gICAgICBpZiAod2lsZGNhcmRJbmRleCA9PT0gLTEpXG4gICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICBpZiAobW9kdWxlLnN1YnN0cigwLCB3aWxkY2FyZEluZGV4KSA9PSBzdWJQYXRoLnN1YnN0cigwLCB3aWxkY2FyZEluZGV4KVxuICAgICAgICAgICYmIG1vZHVsZS5zdWJzdHIod2lsZGNhcmRJbmRleCArIDEpID09IHN1YlBhdGguc3Vic3RyKHN1YlBhdGgubGVuZ3RoIC0gbW9kdWxlLmxlbmd0aCArIHdpbGRjYXJkSW5kZXggKyAxKSkge1xuICAgICAgICAvLyBhbG93IG1hdGNoIGZ1bmN0aW9uIHRvIHJldHVybiB0cnVlIGZvciBhbiBleGl0IHBhdGhcbiAgICAgICAgaWYgKG1hdGNoRm4obW9kdWxlLCBwa2dNZXRhW2RvdFJlbCArIG1vZHVsZV0sIG1vZHVsZS5zcGxpdCgnLycpLmxlbmd0aCkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBleGFjdCBtZXRhXG4gICAgdmFyIGV4YWN0TWV0YSA9IHBrZ01ldGFbc3ViUGF0aF0gJiYgcGtnTWV0YS5oYXNPd25Qcm9wZXJ0eSAmJiBwa2dNZXRhLmhhc093blByb3BlcnR5KHN1YlBhdGgpID8gcGtnTWV0YVtzdWJQYXRoXSA6IHBrZ01ldGFbJy4vJyArIHN1YlBhdGhdO1xuICAgIGlmIChleGFjdE1ldGEpXG4gICAgICBtYXRjaEZuKGV4YWN0TWV0YSwgZXhhY3RNZXRhLCAwKTtcbiAgfVxuXG4gIGhvb2soJ2xvY2F0ZScsIGZ1bmN0aW9uKGxvY2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobG9jYXRlLmNhbGwodGhpcywgbG9hZCkpXG4gICAgICAudGhlbihmdW5jdGlvbihhZGRyZXNzKSB7XG4gICAgICAgIHZhciBwa2dOYW1lID0gZ2V0UGFja2FnZShsb2FkZXIsIGxvYWQubmFtZSk7XG4gICAgICAgIGlmIChwa2dOYW1lKSB7XG4gICAgICAgICAgdmFyIHBrZyA9IGxvYWRlci5wYWNrYWdlc1twa2dOYW1lXTtcbiAgICAgICAgICB2YXIgc3ViUGF0aCA9IGxvYWQubmFtZS5zdWJzdHIocGtnTmFtZS5sZW5ndGggKyAxKTtcblxuICAgICAgICAgIHZhciBtZXRhID0ge307XG4gICAgICAgICAgaWYgKHBrZy5tZXRhKSB7XG4gICAgICAgICAgICB2YXIgYmVzdERlcHRoID0gMDtcblxuICAgICAgICAgICAgLy8gTkIgc3VwcG9ydCBhIG1haW4gc2hvcnRoYW5kIGluIG1ldGEgaGVyZT9cbiAgICAgICAgICAgIGdldE1ldGFNYXRjaGVzKHBrZy5tZXRhLCBzdWJQYXRoLCBmdW5jdGlvbihtZXRhUGF0dGVybiwgbWF0Y2hNZXRhLCBtYXRjaERlcHRoKSB7XG4gICAgICAgICAgICAgIGlmIChtYXRjaERlcHRoID4gYmVzdERlcHRoKVxuICAgICAgICAgICAgICAgIGJlc3REZXB0aCA9IG1hdGNoRGVwdGg7XG4gICAgICAgICAgICAgIGV4dGVuZE1ldGEobWV0YSwgbWF0Y2hNZXRhLCBtYXRjaERlcHRoICYmIGJlc3REZXB0aCA+IG1hdGNoRGVwdGgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGV4dGVuZE1ldGEobG9hZC5tZXRhZGF0YSwgbWV0YSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gZm9ybWF0XG4gICAgICAgICAgaWYgKHBrZy5mb3JtYXQgJiYgIWxvYWQubWV0YWRhdGEubG9hZGVyKVxuICAgICAgICAgICAgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPSBsb2FkLm1ldGFkYXRhLmZvcm1hdCB8fCBwa2cuZm9ybWF0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxufSkoKTtcbi8qXG4gKiBTY3JpcHQgdGFnIGZldGNoXG4gKlxuICogV2hlbiBsb2FkLm1ldGFkYXRhLnNjcmlwdExvYWQgaXMgdHJ1ZSwgd2UgbG9hZCB2aWEgc2NyaXB0IHRhZyBpbmplY3Rpb24uXG4gKi9cbihmdW5jdGlvbigpIHtcblxuICBpZiAodHlwZW9mIGRvY3VtZW50ICE9ICd1bmRlZmluZWQnKVxuICAgIHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblxuICB2YXIgY3VyU3lzdGVtO1xuICB2YXIgY3VyUmVxdWlyZTtcblxuICAvLyBpZiBkb2luZyB3b3JrZXIgZXhlY3V0aW5nLCB0aGlzIGlzIHNldCB0byB0aGUgbG9hZCByZWNvcmQgYmVpbmcgZXhlY3V0ZWRcbiAgdmFyIHdvcmtlckxvYWQgPSBudWxsO1xuICBcbiAgLy8gaW50ZXJhY3RpdmUgbW9kZSBoYW5kbGluZyBtZXRob2QgY291cnRlc3kgUmVxdWlyZUpTXG4gIHZhciBpZUV2ZW50cyA9IGhlYWQgJiYgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgdmFyIGlzT3BlcmEgPSB0eXBlb2Ygb3BlcmEgIT09ICd1bmRlZmluZWQnICYmIG9wZXJhLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE9wZXJhXSc7XG4gICAgcmV0dXJuIHMuYXR0YWNoRXZlbnQgJiYgIShzLmF0dGFjaEV2ZW50LnRvU3RyaW5nICYmIHMuYXR0YWNoRXZlbnQudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSA8IDApICYmICFpc09wZXJhO1xuICB9KSgpO1xuXG4gIC8vIElFIGludGVyYWN0aXZlLW9ubHkgcGFydFxuICAvLyB3ZSBzdG9yZSBsb2FkaW5nIHNjcmlwdHMgYXJyYXkgYXMgeyBzY3JpcHQ6IDxzY3JpcHQ+LCBsb2FkOiB7Li4ufSB9XG4gIHZhciBpbnRlcmFjdGl2ZUxvYWRpbmdTY3JpcHRzID0gW107XG4gIHZhciBpbnRlcmFjdGl2ZVNjcmlwdDtcbiAgZnVuY3Rpb24gZ2V0SW50ZXJhY3RpdmVTY3JpcHRMb2FkKCkge1xuICAgIGlmIChpbnRlcmFjdGl2ZVNjcmlwdCAmJiBpbnRlcmFjdGl2ZVNjcmlwdC5zY3JpcHQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJylcbiAgICAgIHJldHVybiBpbnRlcmFjdGl2ZVNjcmlwdC5sb2FkO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlcmFjdGl2ZUxvYWRpbmdTY3JpcHRzLmxlbmd0aDsgaSsrKVxuICAgICAgaWYgKGludGVyYWN0aXZlTG9hZGluZ1NjcmlwdHNbaV0uc2NyaXB0LnJlYWR5U3RhdGUgPT0gJ2ludGVyYWN0aXZlJykge1xuICAgICAgICBpbnRlcmFjdGl2ZVNjcmlwdCA9IGludGVyYWN0aXZlTG9hZGluZ1NjcmlwdHNbaV07XG4gICAgICAgIHJldHVybiBpbnRlcmFjdGl2ZVNjcmlwdC5sb2FkO1xuICAgICAgfVxuICB9XG4gIFxuICAvLyBTeXN0ZW0ucmVnaXN0ZXIsIFN5c3RlbS5yZWdpc3RlckR5bmFtaWMsIEFNRCBkZWZpbmUgcGlwZWxpbmVcbiAgLy8gdGhpcyBpcyBjYWxsZWQgYnkgdGhlIGFib3ZlIG1ldGhvZHMgd2hlbiB0aGV5IGV4ZWN1dGVcbiAgLy8gd2UgdGhlbiBydW4gdGhlIHJlZHVjZVJlZ2lzdGVyXyBjb2xsZWN0aW9uIGZ1bmN0aW9uIGVpdGhlciBpbW1lZGlhdGVseVxuICAvLyBpZiB3ZSBhcmUgaW4gSUUgYW5kIGtub3cgdGhlIGN1cnJlbnRseSBleGVjdXRpbmcgc2NyaXB0IChpbnRlcmFjdGl2ZSlcbiAgLy8gb3IgbGF0ZXIgaWYgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgc3luY2hyb25vdXMgbG9hZCBjYWxsYmFjayB0byBrbm93IHRoZSBzY3JpcHRcbiAgdmFyIGxvYWRpbmdDbnQgPSAwO1xuICB2YXIgcmVnaXN0ZXJRdWV1ZSA9IFtdO1xuICBob29rKCdwdXNoUmVnaXN0ZXJfJywgZnVuY3Rpb24ocHVzaFJlZ2lzdGVyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHJlZ2lzdGVyKSB7XG4gICAgICAvLyBpZiB1c2luZyBldmFsLWV4ZWN1dGlvbiB0aGVuIHNraXBcbiAgICAgIGlmIChwdXNoUmVnaXN0ZXIuY2FsbCh0aGlzLCByZWdpc3RlcikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gaWYgdXNpbmcgd29ya2VyIGV4ZWN1dGlvbiwgdGhlbiB3ZSdyZSBkb25lXG4gICAgICBpZiAod29ya2VyTG9hZClcbiAgICAgICAgdGhpcy5yZWR1Y2VSZWdpc3Rlcl8od29ya2VyTG9hZCwgcmVnaXN0ZXIpO1xuXG4gICAgICAvLyBkZXRlY3QgaWYgd2Uga25vdyB0aGUgY3VycmVudGx5IGV4ZWN1dGluZyBsb2FkIChJRSlcbiAgICAgIC8vIGlmIHNvLCBpbW1lZGlhdGVseSBjYWxsIHJlZHVjZVJlZ2lzdGVyXG4gICAgICBlbHNlIGlmIChpZUV2ZW50cylcbiAgICAgICAgdGhpcy5yZWR1Y2VSZWdpc3Rlcl8oZ2V0SW50ZXJhY3RpdmVTY3JpcHRMb2FkKCksIHJlZ2lzdGVyKTtcblxuICAgICAgLy8gb3RoZXJ3aXNlLCBhZGQgdG8gb3VyIGV4ZWN1dGlvbiBxdWV1ZVxuICAgICAgLy8gdG8gY2FsbCByZWR1Y2VSZWdpc3RlciBvbiBzeW5jIHNjcmlwdCBsb2FkIGV2ZW50XG4gICAgICBlbHNlIGlmIChsb2FkaW5nQ250KVxuICAgICAgICByZWdpc3RlclF1ZXVlLnB1c2gocmVnaXN0ZXIpO1xuXG4gICAgICAvLyBpZiB3ZSdyZSBub3QgY3VycmVudGx5IGxvYWRpbmcgYW55dGhpbmcgdGhvdWdoXG4gICAgICAvLyB0aGVuIGRvIHRoZSByZWR1Y3Rpb24gYWdhaW5zdCBhIG51bGwgbG9hZFxuICAgICAgLy8gKG91dCBvZiBiYW5kIG5hbWVkIGRlZmluZSBvciBuYW1lZCByZWdpc3RlcilcbiAgICAgIC8vIG5vdGUgZXZlbiBpbiBub24tc2NyaXB0IGVudmlyb25tZW50cywgdGhpcyBjYXRjaCBpcyB1c2VkXG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMucmVkdWNlUmVnaXN0ZXJfKG51bGwsIHJlZ2lzdGVyKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gd2ViV29ya2VySW1wb3J0KGxvYWRlciwgbG9hZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIGlmIChsb2FkLm1ldGFkYXRhLmludGVncml0eSlcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignU3VicmVzb3VyY2UgaW50ZWdyaXR5IGNoZWNraW5nIGlzIG5vdCBzdXBwb3J0ZWQgaW4gd2ViIHdvcmtlcnMuJykpO1xuXG4gICAgICB3b3JrZXJMb2FkID0gbG9hZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGltcG9ydFNjcmlwdHMobG9hZC5hZGRyZXNzKTtcbiAgICAgIH1cbiAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgd29ya2VyTG9hZCA9IG51bGw7XG4gICAgICAgIHJlamVjdChlKTtcbiAgICAgIH1cbiAgICAgIHdvcmtlckxvYWQgPSBudWxsO1xuXG4gICAgICAvLyBpZiBub3RoaW5nIHJlZ2lzdGVyZWQsIHRoZW4gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIGlmICghbG9hZC5tZXRhZGF0YS5lbnRyeSlcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihsb2FkLmFkZHJlc3MgKyAnIGRpZCBub3QgY2FsbCBTeXN0ZW0ucmVnaXN0ZXIgb3IgQU1EIGRlZmluZScpKTtcblxuICAgICAgcmVzb2x2ZSgnJyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBvdmVycmlkZSBmZXRjaCB0byB1c2Ugc2NyaXB0IGluamVjdGlvblxuICBob29rKCdmZXRjaCcsIGZ1bmN0aW9uKGZldGNoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuXG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2pzb24nIHx8ICFsb2FkLm1ldGFkYXRhLnNjcmlwdExvYWQgfHwgKCFpc0Jyb3dzZXIgJiYgIWlzV29ya2VyKSlcbiAgICAgICAgcmV0dXJuIGZldGNoLmNhbGwodGhpcywgbG9hZCk7XG5cbiAgICAgIGlmIChpc1dvcmtlcilcbiAgICAgICAgcmV0dXJuIHdlYldvcmtlckltcG9ydChsb2FkZXIsIGxvYWQpO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIFxuICAgICAgICBzLmFzeW5jID0gdHJ1ZTtcblxuICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5jcm9zc09yaWdpbilcbiAgICAgICAgICBzLmNyb3NzT3JpZ2luID0gbG9hZC5tZXRhZGF0YS5jcm9zc09yaWdpbjtcblxuICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5pbnRlZ3JpdHkpXG4gICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoJ2ludGVncml0eScsIGxvYWQubWV0YWRhdGEuaW50ZWdyaXR5KTtcblxuICAgICAgICBpZiAoaWVFdmVudHMpIHtcbiAgICAgICAgICBzLmF0dGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgaW50ZXJhY3RpdmVMb2FkaW5nU2NyaXB0cy5wdXNoKHtcbiAgICAgICAgICAgIHNjcmlwdDogcyxcbiAgICAgICAgICAgIGxvYWQ6IGxvYWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBzLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBjb21wbGV0ZSwgZmFsc2UpO1xuICAgICAgICAgIHMuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvciwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9hZGluZ0NudCsrO1xuXG4gICAgICAgIGN1clN5c3RlbSA9IF9fZ2xvYmFsLlN5c3RlbTtcbiAgICAgICAgY3VyUmVxdWlyZSA9IF9fZ2xvYmFsLnJlcXVpcmU7XG5cbiAgICAgICAgcy5zcmMgPSBsb2FkLmFkZHJlc3M7XG4gICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQocyk7XG5cbiAgICAgICAgZnVuY3Rpb24gY29tcGxldGUoZXZ0KSB7XG4gICAgICAgICAgaWYgKHMucmVhZHlTdGF0ZSAmJiBzLnJlYWR5U3RhdGUgIT0gJ2xvYWRlZCcgJiYgcy5yZWFkeVN0YXRlICE9ICdjb21wbGV0ZScpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBsb2FkaW5nQ250LS07XG5cbiAgICAgICAgICAvLyBjb21wbGV0ZSBjYWxsIGlzIHN5bmMgb24gZXhlY3V0aW9uIGZpbmlzaFxuICAgICAgICAgIC8vIChpbiBpZSBhbHJlYWR5IGRvbmUgcmVkdWN0aW9ucylcbiAgICAgICAgICBpZiAoIWxvYWQubWV0YWRhdGEuZW50cnkgJiYgIXJlZ2lzdGVyUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb2FkZXIucmVkdWNlUmVnaXN0ZXJfKGxvYWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmICghaWVFdmVudHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVnaXN0ZXJRdWV1ZS5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgbG9hZGVyLnJlZHVjZVJlZ2lzdGVyXyhsb2FkLCByZWdpc3RlclF1ZXVlW2ldKTtcbiAgICAgICAgICAgIHJlZ2lzdGVyUXVldWUgPSBbXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjbGVhbnVwKCk7XG5cbiAgICAgICAgICAvLyBpZiBub3RoaW5nIHJlZ2lzdGVyZWQsIHRoZW4gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgICAgICBpZiAoIWxvYWQubWV0YWRhdGEuZW50cnkgJiYgIWxvYWQubWV0YWRhdGEuYnVuZGxlKVxuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihsb2FkLm5hbWUgKyAnIGRpZCBub3QgY2FsbCBTeXN0ZW0ucmVnaXN0ZXIgb3IgQU1EIGRlZmluZS4gSWYgbG9hZGluZyBhIGdsb2JhbCBtb2R1bGUgY29uZmlndXJlIHRoZSBnbG9iYWwgbmFtZSB2aWEgdGhlIG1ldGEgZXhwb3J0cyBwcm9wZXJ0eSBmb3Igc2NyaXB0IGluamVjdGlvbiBzdXBwb3J0LicpKTtcblxuICAgICAgICAgIHJlc29sdmUoJycpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXJyb3IoZXZ0KSB7XG4gICAgICAgICAgY2xlYW51cCgpO1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2FkIHNjcmlwdCAnICsgbG9hZC5hZGRyZXNzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgICAgIF9fZ2xvYmFsLlN5c3RlbSA9IGN1clN5c3RlbTtcbiAgICAgICAgICBfX2dsb2JhbC5yZXF1aXJlID0gY3VyUmVxdWlyZTtcblxuICAgICAgICAgIGlmIChzLmRldGFjaEV2ZW50KSB7XG4gICAgICAgICAgICBzLmRldGFjaEV2ZW50KCdvbnJlYWR5c3RhdGVjaGFuZ2UnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludGVyYWN0aXZlTG9hZGluZ1NjcmlwdHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgIGlmIChpbnRlcmFjdGl2ZUxvYWRpbmdTY3JpcHRzW2ldLnNjcmlwdCA9PSBzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGludGVyYWN0aXZlU2NyaXB0ICYmIGludGVyYWN0aXZlU2NyaXB0LnNjcmlwdCA9PSBzKVxuICAgICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGludGVyYWN0aXZlTG9hZGluZ1NjcmlwdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgY29tcGxldGUsIGZhbHNlKTtcbiAgICAgICAgICAgIHMucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvciwgZmFsc2UpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGhlYWQucmVtb3ZlQ2hpbGQocyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xufSkoKTtcbi8qXG4gKiBJbnN0YW50aWF0ZSByZWdpc3RyeSBleHRlbnNpb25cbiAqXG4gKiBTdXBwb3J0cyBUcmFjZXVyIFN5c3RlbS5yZWdpc3RlciAnaW5zdGFudGlhdGUnIG91dHB1dCBmb3IgbG9hZGluZyBFUzYgYXMgRVM1LlxuICpcbiAqIC0gQ3JlYXRlcyB0aGUgbG9hZGVyLnJlZ2lzdGVyIGZ1bmN0aW9uXG4gKiAtIEFsc28gc3VwcG9ydHMgbWV0YWRhdGEuZm9ybWF0ID0gJ3JlZ2lzdGVyJyBpbiBpbnN0YW50aWF0ZSBmb3IgYW5vbnltb3VzIHJlZ2lzdGVyIG1vZHVsZXNcbiAqIC0gQWxzbyBzdXBwb3J0cyBtZXRhZGF0YS5kZXBzLCBtZXRhZGF0YS5leGVjdXRlIGFuZCBtZXRhZGF0YS5leGVjdXRpbmdSZXF1aXJlXG4gKiAgICAgZm9yIGhhbmRsaW5nIGR5bmFtaWMgbW9kdWxlcyBhbG9uZ3NpZGUgcmVnaXN0ZXItdHJhbnNmb3JtZWQgRVM2IG1vZHVsZXNcbiAqXG4gKlxuICogVGhlIGNvZGUgaGVyZSByZXBsaWNhdGVzIHRoZSBFUzYgbGlua2luZyBncm91cHMgYWxnb3JpdGhtIHRvIGVuc3VyZSB0aGF0XG4gKiBjaXJjdWxhciBFUzYgY29tcGlsZWQgaW50byBTeXN0ZW0ucmVnaXN0ZXIgY2FuIHdvcmsgYWxvbmdzaWRlIGNpcmN1bGFyIEFNRCBcbiAqIGFuZCBDb21tb25KUywgaWRlbnRpY2FsbHkgdG8gdGhlIGFjdHVhbCBFUzYgbG9hZGVyLlxuICpcbiAqL1xuXG5cbi8qXG4gKiBSZWdpc3RyeSBzaWRlIHRhYmxlIGVudHJpZXMgaW4gbG9hZGVyLmRlZmluZWRcbiAqIFJlZ2lzdHJ5IEVudHJ5IENvbnRhaW5zOlxuICogICAgLSBuYW1lXG4gKiAgICAtIGRlcHMgXG4gKiAgICAtIGRlY2xhcmUgZm9yIGRlY2xhcmF0aXZlIG1vZHVsZXNcbiAqICAgIC0gZXhlY3V0ZSBmb3IgZHluYW1pYyBtb2R1bGVzLCBkaWZmZXJlbnQgdG8gZGVjbGFyYXRpdmUgZXhlY3V0ZSBvbiBtb2R1bGVcbiAqICAgIC0gZXhlY3V0aW5nUmVxdWlyZSBpbmRpY2F0ZXMgcmVxdWlyZSBkcml2ZXMgZXhlY3V0aW9uIGZvciBjaXJjdWxhcml0eSBvZiBkeW5hbWljIG1vZHVsZXNcbiAqICAgIC0gZGVjbGFyYXRpdmUgb3B0aW9uYWwgYm9vbGVhbiBpbmRpY2F0aW5nIHdoaWNoIG9mIHRoZSBhYm92ZVxuICpcbiAqIENhbiBwcmVsb2FkIG1vZHVsZXMgZGlyZWN0bHkgb24gU3lzdGVtSlMuZGVmaW5lZFsnbXkvbW9kdWxlJ10gPSB7IGRlcHMsIGV4ZWN1dGUsIGV4ZWN1dGluZ1JlcXVpcmUgfVxuICpcbiAqIFRoZW4gdGhlIGVudHJ5IGdldHMgcG9wdWxhdGVkIHdpdGggZGVyaXZlZCBpbmZvcm1hdGlvbiBkdXJpbmcgcHJvY2Vzc2luZzpcbiAqICAgIC0gbm9ybWFsaXplZERlcHMgZGVyaXZlZCBmcm9tIGRlcHMsIGNyZWF0ZWQgaW4gaW5zdGFudGlhdGVcbiAqICAgIC0gZ3JvdXBJbmRleCB1c2VkIGJ5IGdyb3VwIGxpbmtpbmcgYWxnb3JpdGhtXG4gKiAgICAtIGV2YWx1YXRlZCBpbmRpY2F0aW5nIHdoZXRoZXIgZXZhbHVhdGlvbiBoYXMgaGFwcGVuZFxuICogICAgLSBtb2R1bGUgdGhlIG1vZHVsZSByZWNvcmQgb2JqZWN0LCBjb250YWluaW5nOlxuICogICAgICAtIGV4cG9ydHMgYWN0dWFsIG1vZHVsZSBleHBvcnRzXG4gKlxuICogICAgRm9yIGR5bmFtaWMgd2UgdHJhY2sgdGhlIGVzIG1vZHVsZSB3aXRoOlxuICogICAgLSBlc01vZHVsZSBhY3R1YWwgZXMgbW9kdWxlIHZhbHVlXG4gKiAgICAtIGVzbUV4cG9ydHMgd2hldGhlciB0byBleHRlbmQgdGhlIGVzTW9kdWxlIHdpdGggbmFtZWQgZXhwb3J0c1xuICogICAgICBcbiAqICAgIFRoZW4gZm9yIGRlY2xhcmF0aXZlIG9ubHkgd2UgdHJhY2sgZHluYW1pYyBiaW5kaW5ncyB3aXRoIHRoZSAnbW9kdWxlJyByZWNvcmRzOlxuICogICAgICAtIG5hbWVcbiAqICAgICAgLSBleHBvcnRzXG4gKiAgICAgIC0gc2V0dGVycyBkZWNsYXJhdGl2ZSBzZXR0ZXIgZnVuY3Rpb25zXG4gKiAgICAgIC0gZGVwZW5kZW5jaWVzLCBtb2R1bGUgcmVjb3JkcyBvZiBkZXBlbmRlbmNpZXNcbiAqICAgICAgLSBpbXBvcnRlcnMsIG1vZHVsZSByZWNvcmRzIG9mIGRlcGVuZGVudHNcbiAqXG4gKiBBZnRlciBsaW5rZWQgYW5kIGV2YWx1YXRlZCwgZW50cmllcyBhcmUgcmVtb3ZlZCwgZGVjbGFyYXRpdmUgbW9kdWxlIHJlY29yZHMgcmVtYWluIGluIHNlcGFyYXRlXG4gKiBtb2R1bGUgYmluZGluZyB0YWJsZVxuICpcbiAqL1xuXG52YXIgbGVhZGluZ0NvbW1lbnRBbmRNZXRhUmVnRXggPSAvXihcXHMqXFwvXFwqW15cXCpdKihcXCooPyFcXC8pW15cXCpdKikqXFwqXFwvfFxccypcXC9cXC9bXlxcbl0qfFxccypcIlteXCJdK1wiXFxzKjs/fFxccyonW14nXSsnXFxzKjs/KSpcXHMqLztcbmZ1bmN0aW9uIGRldGVjdFJlZ2lzdGVyRm9ybWF0KHNvdXJjZSkge1xuICB2YXIgbGVhZGluZ0NvbW1lbnRBbmRNZXRhID0gc291cmNlLm1hdGNoKGxlYWRpbmdDb21tZW50QW5kTWV0YVJlZ0V4KTtcbiAgcmV0dXJuIGxlYWRpbmdDb21tZW50QW5kTWV0YSAmJiBzb3VyY2Uuc3Vic3RyKGxlYWRpbmdDb21tZW50QW5kTWV0YVswXS5sZW5ndGgsIDE1KSA9PSAnU3lzdGVtLnJlZ2lzdGVyJztcbn1cblxuZnVuY3Rpb24gY3JlYXRlRW50cnkoKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogbnVsbCxcbiAgICBkZXBzOiBudWxsLFxuICAgIG9yaWdpbmFsSW5kaWNlczogbnVsbCxcbiAgICBkZWNsYXJlOiBudWxsLFxuICAgIGV4ZWN1dGU6IG51bGwsXG4gICAgZXhlY3V0aW5nUmVxdWlyZTogZmFsc2UsXG4gICAgZGVjbGFyYXRpdmU6IGZhbHNlLFxuICAgIG5vcm1hbGl6ZWREZXBzOiBudWxsLFxuICAgIGdyb3VwSW5kZXg6IG51bGwsXG4gICAgZXZhbHVhdGVkOiBmYWxzZSxcbiAgICBtb2R1bGU6IG51bGwsXG4gICAgZXNNb2R1bGU6IG51bGwsXG4gICAgZXNtRXhwb3J0czogZmFsc2VcbiAgfTtcbn1cblxuKGZ1bmN0aW9uKCkge1xuXG4gIC8qXG4gICAqIFRoZXJlIGFyZSB0d28gdmFyaWF0aW9ucyBvZiBTeXN0ZW0ucmVnaXN0ZXI6XG4gICAqIDEuIFN5c3RlbS5yZWdpc3RlciBmb3IgRVM2IGNvbnZlcnNpb24gKDItMyBwYXJhbXMpIC0gU3lzdGVtLnJlZ2lzdGVyKFtuYW1lLCBdZGVwcywgZGVjbGFyZSlcbiAgICogICAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Nb2R1bGVMb2FkZXIvZXM2LW1vZHVsZS1sb2FkZXIvd2lraS9TeXN0ZW0ucmVnaXN0ZXItRXhwbGFpbmVkXG4gICAqXG4gICAqIDIuIFN5c3RlbS5yZWdpc3RlckR5bmFtaWMgZm9yIGR5bmFtaWMgbW9kdWxlcyAoMy00IHBhcmFtcykgLSBTeXN0ZW0ucmVnaXN0ZXJEeW5hbWljKFtuYW1lLCBdZGVwcywgZXhlY3V0aW5nUmVxdWlyZSwgZXhlY3V0ZSlcbiAgICogdGhlIHRydWUgb3IgZmFsc2Ugc3RhdGVtZW50IFxuICAgKlxuICAgKiB0aGlzIGV4dGVuc2lvbiBpbXBsZW1lbnRzIHRoZSBsaW5raW5nIGFsZ29yaXRobSBmb3IgdGhlIHR3byB2YXJpYXRpb25zIGlkZW50aWNhbCB0byB0aGUgc3BlY1xuICAgKiBhbGxvd2luZyBjb21waWxlZCBFUzYgY2lyY3VsYXIgcmVmZXJlbmNlcyB0byB3b3JrIGFsb25nc2lkZSBBTUQgYW5kIENKUyBjaXJjdWxhciByZWZlcmVuY2VzLlxuICAgKlxuICAgKi9cbiAgU3lzdGVtSlNMb2FkZXIucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24obmFtZSwgZGVwcywgZGVjbGFyZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPSAnc3RyaW5nJykge1xuICAgICAgZGVjbGFyZSA9IGRlcHM7XG4gICAgICBkZXBzID0gbmFtZTtcbiAgICAgIG5hbWUgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIGR5bmFtaWMgYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICAvLyBjYW4gYmUgZGVwcmVjYXRlZCBldmVudHVhbGx5XG4gICAgaWYgKHR5cGVvZiBkZWNsYXJlID09ICdib29sZWFuJylcbiAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyRHluYW1pYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGVudHJ5ID0gY3JlYXRlRW50cnkoKTtcbiAgICAvLyBpZGVhbGx5IHdvdWxkbid0IGFwcGx5IG1hcCBjb25maWcgdG8gYnVuZGxlIG5hbWVzIGJ1dCBcbiAgICAvLyBkZXBlbmRlbmNpZXMgZ28gdGhyb3VnaCBtYXAgcmVnYXJkbGVzcyBzbyB3ZSBjYW4ndCByZXN0cmljdFxuICAgIC8vIGNvdWxkIHJlY29uc2lkZXIgaW4gc2hpZnQgdG8gbmV3IHNwZWNcbiAgICBlbnRyeS5uYW1lID0gbmFtZSAmJiAodGhpcy5kZWNhbm9uaWNhbGl6ZSB8fCB0aGlzLm5vcm1hbGl6ZSkuY2FsbCh0aGlzLCBuYW1lKTtcbiAgICBlbnRyeS5kZWNsYXJhdGl2ZSA9IHRydWU7XG4gICAgZW50cnkuZGVwcyA9IGRlcHM7XG4gICAgZW50cnkuZGVjbGFyZSA9IGRlY2xhcmU7XG5cbiAgICB0aGlzLnB1c2hSZWdpc3Rlcl8oe1xuICAgICAgYW1kOiBmYWxzZSxcbiAgICAgIGVudHJ5OiBlbnRyeVxuICAgIH0pO1xuICB9O1xuICBTeXN0ZW1KU0xvYWRlci5wcm90b3R5cGUucmVnaXN0ZXJEeW5hbWljID0gZnVuY3Rpb24obmFtZSwgZGVwcywgZGVjbGFyZSwgZXhlY3V0ZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPSAnc3RyaW5nJykge1xuICAgICAgZXhlY3V0ZSA9IGRlY2xhcmU7XG4gICAgICBkZWNsYXJlID0gZGVwcztcbiAgICAgIGRlcHMgPSBuYW1lO1xuICAgICAgbmFtZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gZHluYW1pY1xuICAgIHZhciBlbnRyeSA9IGNyZWF0ZUVudHJ5KCk7XG4gICAgZW50cnkubmFtZSA9IG5hbWUgJiYgKHRoaXMuZGVjYW5vbmljYWxpemUgfHwgdGhpcy5ub3JtYWxpemUpLmNhbGwodGhpcywgbmFtZSk7XG4gICAgZW50cnkuZGVwcyA9IGRlcHM7XG4gICAgZW50cnkuZXhlY3V0ZSA9IGV4ZWN1dGU7XG4gICAgZW50cnkuZXhlY3V0aW5nUmVxdWlyZSA9IGRlY2xhcmU7XG5cbiAgICB0aGlzLnB1c2hSZWdpc3Rlcl8oe1xuICAgICAgYW1kOiBmYWxzZSxcbiAgICAgIGVudHJ5OiBlbnRyeVxuICAgIH0pO1xuICB9O1xuICBob29rKCdyZWR1Y2VSZWdpc3Rlcl8nLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCwgcmVnaXN0ZXIpIHtcbiAgICAgIGlmICghcmVnaXN0ZXIpXG4gICAgICAgIHJldHVybjtcblxuICAgICAgdmFyIGVudHJ5ID0gcmVnaXN0ZXIuZW50cnk7XG4gICAgICB2YXIgY3VyTWV0YSA9IGxvYWQgJiYgbG9hZC5tZXRhZGF0YTtcblxuICAgICAgLy8gbmFtZWQgcmVnaXN0ZXJcbiAgICAgIGlmIChlbnRyeS5uYW1lKSB7XG4gICAgICAgIGlmICghKGVudHJ5Lm5hbWUgaW4gdGhpcy5kZWZpbmVkKSlcbiAgICAgICAgICB0aGlzLmRlZmluZWRbZW50cnkubmFtZV0gPSBlbnRyeTtcblxuICAgICAgICBpZiAoY3VyTWV0YSlcbiAgICAgICAgICBjdXJNZXRhLmJ1bmRsZSA9IHRydWU7XG4gICAgICB9XG4gICAgICAvLyBhbm9ueW1vdXMgcmVnaXN0ZXJcbiAgICAgIGlmICghZW50cnkubmFtZSB8fCBsb2FkICYmICFjdXJNZXRhLmVudHJ5ICYmIGVudHJ5Lm5hbWUgPT0gbG9hZC5uYW1lKSB7XG4gICAgICAgIGlmICghY3VyTWV0YSlcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIFN5c3RlbS5yZWdpc3RlciBjYWxsLiBBbm9ueW1vdXMgU3lzdGVtLnJlZ2lzdGVyIGNhbGxzIGNhbiBvbmx5IGJlIG1hZGUgYnkgbW9kdWxlcyBsb2FkZWQgYnkgU3lzdGVtSlMuaW1wb3J0IGFuZCBub3QgdmlhIHNjcmlwdCB0YWdzLicpO1xuICAgICAgICBpZiAoY3VyTWV0YS5lbnRyeSkge1xuICAgICAgICAgIGlmIChjdXJNZXRhLmZvcm1hdCA9PSAncmVnaXN0ZXInKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdWx0aXBsZSBhbm9ueW1vdXMgU3lzdGVtLnJlZ2lzdGVyIGNhbGxzIGluIG1vZHVsZSAnICsgbG9hZC5uYW1lICsgJy4gSWYgbG9hZGluZyBhIGJ1bmRsZSwgZW5zdXJlIGFsbCB0aGUgU3lzdGVtLnJlZ2lzdGVyIGNhbGxzIGFyZSBuYW1lZC4nKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSAnICsgbG9hZC5uYW1lICsgJyBpbnRlcnByZXRlZCBhcyAnICsgY3VyTWV0YS5mb3JtYXQgKyAnIG1vZHVsZSBmb3JtYXQsIGJ1dCBjYWxsZWQgU3lzdGVtLnJlZ2lzdGVyLicpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY3VyTWV0YS5mb3JtYXQpXG4gICAgICAgICAgY3VyTWV0YS5mb3JtYXQgPSAncmVnaXN0ZXInO1xuICAgICAgICBjdXJNZXRhLmVudHJ5ID0gZW50cnk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgaG9va0NvbnN0cnVjdG9yKGZ1bmN0aW9uKGNvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcblxuICAgICAgdGhpcy5kZWZpbmVkID0ge307XG4gICAgICB0aGlzLl9sb2FkZXIubW9kdWxlUmVjb3JkcyA9IHt9O1xuICAgIH07XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGJ1aWxkR3JvdXBzKGVudHJ5LCBsb2FkZXIsIGdyb3Vwcykge1xuICAgIGdyb3Vwc1tlbnRyeS5ncm91cEluZGV4XSA9IGdyb3Vwc1tlbnRyeS5ncm91cEluZGV4XSB8fCBbXTtcblxuICAgIGlmIChpbmRleE9mLmNhbGwoZ3JvdXBzW2VudHJ5Lmdyb3VwSW5kZXhdLCBlbnRyeSkgIT0gLTEpXG4gICAgICByZXR1cm47XG5cbiAgICBncm91cHNbZW50cnkuZ3JvdXBJbmRleF0ucHVzaChlbnRyeSk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVudHJ5Lm5vcm1hbGl6ZWREZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGRlcE5hbWUgPSBlbnRyeS5ub3JtYWxpemVkRGVwc1tpXTtcbiAgICAgIHZhciBkZXBFbnRyeSA9IGxvYWRlci5kZWZpbmVkW2RlcE5hbWVdO1xuICAgICAgXG4gICAgICAvLyBub3QgaW4gdGhlIHJlZ2lzdHJ5IG1lYW5zIGFscmVhZHkgbGlua2VkIC8gRVM2XG4gICAgICBpZiAoIWRlcEVudHJ5IHx8IGRlcEVudHJ5LmV2YWx1YXRlZClcbiAgICAgICAgY29udGludWU7XG4gICAgICBcbiAgICAgIC8vIG5vdyB3ZSBrbm93IHRoZSBlbnRyeSBpcyBpbiBvdXIgdW5saW5rZWQgbGlua2FnZSBncm91cFxuICAgICAgdmFyIGRlcEdyb3VwSW5kZXggPSBlbnRyeS5ncm91cEluZGV4ICsgKGRlcEVudHJ5LmRlY2xhcmF0aXZlICE9IGVudHJ5LmRlY2xhcmF0aXZlKTtcblxuICAgICAgLy8gdGhlIGdyb3VwIGluZGV4IG9mIGFuIGVudHJ5IGlzIGFsd2F5cyB0aGUgbWF4aW11bVxuICAgICAgaWYgKGRlcEVudHJ5Lmdyb3VwSW5kZXggPT09IG51bGwgfHwgZGVwRW50cnkuZ3JvdXBJbmRleCA8IGRlcEdyb3VwSW5kZXgpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIGlmIGFscmVhZHkgaW4gYSBncm91cCwgcmVtb3ZlIGZyb20gdGhlIG9sZCBncm91cFxuICAgICAgICBpZiAoZGVwRW50cnkuZ3JvdXBJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIGdyb3Vwc1tkZXBFbnRyeS5ncm91cEluZGV4XS5zcGxpY2UoaW5kZXhPZi5jYWxsKGdyb3Vwc1tkZXBFbnRyeS5ncm91cEluZGV4XSwgZGVwRW50cnkpLCAxKTtcblxuICAgICAgICAgIC8vIGlmIHRoZSBvbGQgZ3JvdXAgaXMgZW1wdHksIHRoZW4gd2UgaGF2ZSBhIG1peGVkIGRlcG5kZW5jeSBjeWNsZVxuICAgICAgICAgIGlmIChncm91cHNbZGVwRW50cnkuZ3JvdXBJbmRleF0ubGVuZ3RoID09IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXhlZCBkZXBlbmRlbmN5IGN5Y2xlIGRldGVjdGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVwRW50cnkuZ3JvdXBJbmRleCA9IGRlcEdyb3VwSW5kZXg7XG4gICAgICB9XG5cbiAgICAgIGJ1aWxkR3JvdXBzKGRlcEVudHJ5LCBsb2FkZXIsIGdyb3Vwcyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbGluayhuYW1lLCBzdGFydEVudHJ5LCBsb2FkZXIpIHtcbiAgICAvLyBza2lwIGlmIGFscmVhZHkgbGlua2VkXG4gICAgaWYgKHN0YXJ0RW50cnkubW9kdWxlKVxuICAgICAgcmV0dXJuO1xuXG4gICAgc3RhcnRFbnRyeS5ncm91cEluZGV4ID0gMDtcblxuICAgIHZhciBncm91cHMgPSBbXTtcblxuICAgIGJ1aWxkR3JvdXBzKHN0YXJ0RW50cnksIGxvYWRlciwgZ3JvdXBzKTtcblxuICAgIHZhciBjdXJHcm91cERlY2xhcmF0aXZlID0gISFzdGFydEVudHJ5LmRlY2xhcmF0aXZlID09IGdyb3Vwcy5sZW5ndGggJSAyO1xuICAgIGZvciAodmFyIGkgPSBncm91cHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBncm91cCA9IGdyb3Vwc1tpXTtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZ3JvdXAubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gZ3JvdXBbal07XG5cbiAgICAgICAgLy8gbGluayBlYWNoIGdyb3VwXG4gICAgICAgIGlmIChjdXJHcm91cERlY2xhcmF0aXZlKVxuICAgICAgICAgIGxpbmtEZWNsYXJhdGl2ZU1vZHVsZShlbnRyeSwgbG9hZGVyKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGxpbmtEeW5hbWljTW9kdWxlKGVudHJ5LCBsb2FkZXIpO1xuICAgICAgfVxuICAgICAgY3VyR3JvdXBEZWNsYXJhdGl2ZSA9ICFjdXJHcm91cERlY2xhcmF0aXZlOyBcbiAgICB9XG4gIH1cblxuICAvLyBtb2R1bGUgYmluZGluZyByZWNvcmRzXG4gIGZ1bmN0aW9uIE1vZHVsZVJlY29yZCgpIHt9XG4gIGRlZmluZVByb3BlcnR5KE1vZHVsZVJlY29yZCwgJ3RvU3RyaW5nJywge1xuICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAnTW9kdWxlJztcbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGdldE9yQ3JlYXRlTW9kdWxlUmVjb3JkKG5hbWUsIG1vZHVsZVJlY29yZHMpIHtcbiAgICByZXR1cm4gbW9kdWxlUmVjb3Jkc1tuYW1lXSB8fCAobW9kdWxlUmVjb3Jkc1tuYW1lXSA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBkZXBlbmRlbmNpZXM6IFtdLFxuICAgICAgZXhwb3J0czogbmV3IE1vZHVsZVJlY29yZCgpLCAvLyBzdGFydCBmcm9tIGFuIGVtcHR5IG1vZHVsZSBhbmQgZXh0ZW5kXG4gICAgICBpbXBvcnRlcnM6IFtdXG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBsaW5rRGVjbGFyYXRpdmVNb2R1bGUoZW50cnksIGxvYWRlcikge1xuICAgIC8vIG9ubHkgbGluayBpZiBhbHJlYWR5IG5vdCBhbHJlYWR5IHN0YXJ0ZWQgbGlua2luZyAoc3RvcHMgYXQgY2lyY3VsYXIpXG4gICAgaWYgKGVudHJ5Lm1vZHVsZSlcbiAgICAgIHJldHVybjtcblxuICAgIHZhciBtb2R1bGVSZWNvcmRzID0gbG9hZGVyLl9sb2FkZXIubW9kdWxlUmVjb3JkcztcbiAgICB2YXIgbW9kdWxlID0gZW50cnkubW9kdWxlID0gZ2V0T3JDcmVhdGVNb2R1bGVSZWNvcmQoZW50cnkubmFtZSwgbW9kdWxlUmVjb3Jkcyk7XG4gICAgdmFyIGV4cG9ydHMgPSBlbnRyeS5tb2R1bGUuZXhwb3J0cztcblxuICAgIHZhciBkZWNsYXJhdGlvbiA9IGVudHJ5LmRlY2xhcmUuY2FsbChfX2dsb2JhbCwgZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgIG1vZHVsZS5sb2NrZWQgPSB0cnVlO1xuXG4gICAgICBpZiAodHlwZW9mIG5hbWUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBuYW1lKVxuICAgICAgICAgIGV4cG9ydHNbcF0gPSBuYW1lW3BdO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGV4cG9ydHNbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBtb2R1bGUuaW1wb3J0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgaW1wb3J0ZXJNb2R1bGUgPSBtb2R1bGUuaW1wb3J0ZXJzW2ldO1xuICAgICAgICBpZiAoIWltcG9ydGVyTW9kdWxlLmxvY2tlZCkge1xuICAgICAgICAgIHZhciBpbXBvcnRlckluZGV4ID0gaW5kZXhPZi5jYWxsKGltcG9ydGVyTW9kdWxlLmRlcGVuZGVuY2llcywgbW9kdWxlKTtcbiAgICAgICAgICBpbXBvcnRlck1vZHVsZS5zZXR0ZXJzW2ltcG9ydGVySW5kZXhdKGV4cG9ydHMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1vZHVsZS5sb2NrZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LCB7IGlkOiBlbnRyeS5uYW1lIH0pO1xuICAgIFxuICAgIG1vZHVsZS5zZXR0ZXJzID0gZGVjbGFyYXRpb24uc2V0dGVycztcbiAgICBtb2R1bGUuZXhlY3V0ZSA9IGRlY2xhcmF0aW9uLmV4ZWN1dGU7XG5cbiAgICBpZiAoIW1vZHVsZS5zZXR0ZXJzIHx8ICFtb2R1bGUuZXhlY3V0ZSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBTeXN0ZW0ucmVnaXN0ZXIgZm9ybSBmb3IgJyArIGVudHJ5Lm5hbWUpO1xuICAgIH1cblxuICAgIC8vIG5vdyBsaW5rIGFsbCB0aGUgbW9kdWxlIGRlcGVuZGVuY2llc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gZW50cnkubm9ybWFsaXplZERlcHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgZGVwTmFtZSA9IGVudHJ5Lm5vcm1hbGl6ZWREZXBzW2ldO1xuICAgICAgdmFyIGRlcEVudHJ5ID0gbG9hZGVyLmRlZmluZWRbZGVwTmFtZV07XG4gICAgICB2YXIgZGVwTW9kdWxlID0gbW9kdWxlUmVjb3Jkc1tkZXBOYW1lXTtcblxuICAgICAgLy8gd29yayBvdXQgaG93IHRvIHNldCBkZXBFeHBvcnRzIGJhc2VkIG9uIHNjZW5hcmlvcy4uLlxuICAgICAgdmFyIGRlcEV4cG9ydHM7XG5cbiAgICAgIGlmIChkZXBNb2R1bGUpIHtcbiAgICAgICAgZGVwRXhwb3J0cyA9IGRlcE1vZHVsZS5leHBvcnRzO1xuICAgICAgfVxuICAgICAgLy8gZHluYW1pYywgYWxyZWFkeSBsaW5rZWQgaW4gb3VyIHJlZ2lzdHJ5XG4gICAgICBlbHNlIGlmIChkZXBFbnRyeSAmJiAhZGVwRW50cnkuZGVjbGFyYXRpdmUpIHtcbiAgICAgICAgZGVwRXhwb3J0cyA9IGRlcEVudHJ5LmVzTW9kdWxlO1xuICAgICAgfVxuICAgICAgLy8gaW4gdGhlIGxvYWRlciByZWdpc3RyeVxuICAgICAgZWxzZSBpZiAoIWRlcEVudHJ5KSB7XG4gICAgICAgIGRlcEV4cG9ydHMgPSBsb2FkZXIuZ2V0KGRlcE5hbWUpO1xuICAgICAgfVxuICAgICAgLy8gd2UgaGF2ZSBhbiBlbnRyeSAtPiBsaW5rXG4gICAgICBlbHNlIHtcbiAgICAgICAgbGlua0RlY2xhcmF0aXZlTW9kdWxlKGRlcEVudHJ5LCBsb2FkZXIpO1xuICAgICAgICBkZXBNb2R1bGUgPSBkZXBFbnRyeS5tb2R1bGU7XG4gICAgICAgIGRlcEV4cG9ydHMgPSBkZXBNb2R1bGUuZXhwb3J0cztcbiAgICAgIH1cblxuICAgICAgLy8gb25seSBkZWNsYXJhdGl2ZSBtb2R1bGVzIGhhdmUgZHluYW1pYyBiaW5kaW5nc1xuICAgICAgaWYgKGRlcE1vZHVsZSAmJiBkZXBNb2R1bGUuaW1wb3J0ZXJzKSB7XG4gICAgICAgIGRlcE1vZHVsZS5pbXBvcnRlcnMucHVzaChtb2R1bGUpO1xuICAgICAgICBtb2R1bGUuZGVwZW5kZW5jaWVzLnB1c2goZGVwTW9kdWxlKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBtb2R1bGUuZGVwZW5kZW5jaWVzLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIHJ1biBzZXR0ZXJzIGZvciBhbGwgZW50cmllcyB3aXRoIHRoZSBtYXRjaGluZyBkZXBlbmRlbmN5IG5hbWVcbiAgICAgIHZhciBvcmlnaW5hbEluZGljZXMgPSBlbnRyeS5vcmlnaW5hbEluZGljZXNbaV07XG4gICAgICBmb3IgKHZhciBqID0gMCwgbGVuID0gb3JpZ2luYWxJbmRpY2VzLmxlbmd0aDsgaiA8IGxlbjsgKytqKSB7XG4gICAgICAgIHZhciBpbmRleCA9IG9yaWdpbmFsSW5kaWNlc1tqXTtcbiAgICAgICAgaWYgKG1vZHVsZS5zZXR0ZXJzW2luZGV4XSkge1xuICAgICAgICAgIG1vZHVsZS5zZXR0ZXJzW2luZGV4XShkZXBFeHBvcnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEFuIGFuYWxvZyB0byBsb2FkZXIuZ2V0IGNvdmVyaW5nIGV4ZWN1dGlvbiBvZiBhbGwgdGhyZWUgbGF5ZXJzIChyZWFsIGRlY2xhcmF0aXZlLCBzaW11bGF0ZWQgZGVjbGFyYXRpdmUsIHNpbXVsYXRlZCBkeW5hbWljKVxuICBmdW5jdGlvbiBnZXRNb2R1bGUobmFtZSwgbG9hZGVyKSB7XG4gICAgdmFyIGV4cG9ydHM7XG4gICAgdmFyIGVudHJ5ID0gbG9hZGVyLmRlZmluZWRbbmFtZV07XG5cbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICBleHBvcnRzID0gbG9hZGVyLmdldChuYW1lKTtcbiAgICAgIGlmICghZXhwb3J0cylcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9hZCBkZXBlbmRlbmN5ICcgKyBuYW1lICsgJy4nKTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgIGlmIChlbnRyeS5kZWNsYXJhdGl2ZSlcbiAgICAgICAgZW5zdXJlRXZhbHVhdGVkKG5hbWUsIGVudHJ5LCBbXSwgbG9hZGVyKTtcbiAgICBcbiAgICAgIGVsc2UgaWYgKCFlbnRyeS5ldmFsdWF0ZWQpXG4gICAgICAgIGxpbmtEeW5hbWljTW9kdWxlKGVudHJ5LCBsb2FkZXIpO1xuXG4gICAgICBleHBvcnRzID0gZW50cnkubW9kdWxlLmV4cG9ydHM7XG4gICAgfVxuXG4gICAgaWYgKCghZW50cnkgfHwgZW50cnkuZGVjbGFyYXRpdmUpICYmIGV4cG9ydHMgJiYgZXhwb3J0cy5fX3VzZURlZmF1bHQpXG4gICAgICByZXR1cm4gZXhwb3J0c1snZGVmYXVsdCddO1xuICAgIFxuICAgIHJldHVybiBleHBvcnRzO1xuICB9XG5cbiAgZnVuY3Rpb24gbGlua0R5bmFtaWNNb2R1bGUoZW50cnksIGxvYWRlcikge1xuICAgIGlmIChlbnRyeS5tb2R1bGUpXG4gICAgICByZXR1cm47XG5cbiAgICB2YXIgZXhwb3J0cyA9IHt9O1xuXG4gICAgdmFyIG1vZHVsZSA9IGVudHJ5Lm1vZHVsZSA9IHsgZXhwb3J0czogZXhwb3J0cywgaWQ6IGVudHJ5Lm5hbWUgfTtcblxuICAgIC8vIEFNRCByZXF1aXJlcyBleGVjdXRlIHRoZSB0cmVlIGZpcnN0XG4gICAgaWYgKCFlbnRyeS5leGVjdXRpbmdSZXF1aXJlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVudHJ5Lm5vcm1hbGl6ZWREZXBzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgZGVwTmFtZSA9IGVudHJ5Lm5vcm1hbGl6ZWREZXBzW2ldO1xuICAgICAgICAvLyB3ZSBrbm93IHdlIG9ubHkgbmVlZCB0byBsaW5rIGR5bmFtaWMgZHVlIHRvIGxpbmtpbmcgYWxnb3JpdGhtXG4gICAgICAgIHZhciBkZXBFbnRyeSA9IGxvYWRlci5kZWZpbmVkW2RlcE5hbWVdO1xuICAgICAgICBpZiAoZGVwRW50cnkpXG4gICAgICAgICAgbGlua0R5bmFtaWNNb2R1bGUoZGVwRW50cnksIGxvYWRlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbm93IGV4ZWN1dGVcbiAgICBlbnRyeS5ldmFsdWF0ZWQgPSB0cnVlO1xuICAgIHZhciBvdXRwdXQgPSBlbnRyeS5leGVjdXRlLmNhbGwoX19nbG9iYWwsIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gZW50cnkuZGVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGVudHJ5LmRlcHNbaV0gIT0gbmFtZSlcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgcmV0dXJuIGdldE1vZHVsZShlbnRyeS5ub3JtYWxpemVkRGVwc1tpXSwgbG9hZGVyKTtcbiAgICAgIH1cbiAgICAgIC8vIHRyeSBhbmQgbm9ybWFsaXplIHRoZSBkZXBlbmRlbmN5IHRvIHNlZSBpZiB3ZSBoYXZlIGFub3RoZXIgZm9ybVxuICAgICAgdmFyIG5hbWVOb3JtYWxpemVkID0gbG9hZGVyLm5vcm1hbGl6ZVN5bmMobmFtZSwgZW50cnkubmFtZSk7XG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKGVudHJ5Lm5vcm1hbGl6ZWREZXBzLCBuYW1lTm9ybWFsaXplZCkgIT0gLTEpXG4gICAgICAgIHJldHVybiBnZXRNb2R1bGUobmFtZU5vcm1hbGl6ZWQsIGxvYWRlcik7XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcignTW9kdWxlICcgKyBuYW1lICsgJyBub3QgZGVjbGFyZWQgYXMgYSBkZXBlbmRlbmN5IG9mICcgKyBlbnRyeS5uYW1lKTtcbiAgICB9LCBleHBvcnRzLCBtb2R1bGUpO1xuICAgIFxuICAgIGlmIChvdXRwdXQpXG4gICAgICBtb2R1bGUuZXhwb3J0cyA9IG91dHB1dDtcblxuICAgIC8vIGNyZWF0ZSB0aGUgZXNNb2R1bGUgb2JqZWN0LCB3aGljaCBhbGxvd3MgRVM2IG5hbWVkIGltcG9ydHMgb2YgZHluYW1pY3NcbiAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHM7XG5cbiAgICAvLyBfX2VzTW9kdWxlIGZsYWcgdHJlYXRzIGFzIGFscmVhZHktbmFtZWRcbiAgICBpZiAoZXhwb3J0cyAmJiAoZXhwb3J0cy5fX2VzTW9kdWxlIHx8IGV4cG9ydHMgaW5zdGFuY2VvZiBNb2R1bGUpKVxuICAgICAgZW50cnkuZXNNb2R1bGUgPSBsb2FkZXIubmV3TW9kdWxlKGV4cG9ydHMpO1xuICAgIC8vIHNldCBtb2R1bGUgYXMgJ2RlZmF1bHQnIGV4cG9ydCwgdGhlbiBmYWtlIG5hbWVkIGV4cG9ydHMgYnkgaXRlcmF0aW5nIHByb3BlcnRpZXNcbiAgICBlbHNlIGlmIChlbnRyeS5lc21FeHBvcnRzICYmIGV4cG9ydHMgIT09IF9fZ2xvYmFsKVxuICAgICAgZW50cnkuZXNNb2R1bGUgPSBsb2FkZXIubmV3TW9kdWxlKGdldEVTTW9kdWxlKGV4cG9ydHMpKTtcbiAgICAvLyBqdXN0IHVzZSB0aGUgJ2RlZmF1bHQnIGV4cG9ydFxuICAgIGVsc2VcbiAgICAgIGVudHJ5LmVzTW9kdWxlID0gbG9hZGVyLm5ld01vZHVsZSh7ICdkZWZhdWx0JzogZXhwb3J0cyB9KTtcbiAgfVxuXG4gIC8qXG4gICAqIEdpdmVuIGEgbW9kdWxlLCBhbmQgdGhlIGxpc3Qgb2YgbW9kdWxlcyBmb3IgdGhpcyBjdXJyZW50IGJyYW5jaCxcbiAgICogIGVuc3VyZSB0aGF0IGVhY2ggb2YgdGhlIGRlcGVuZGVuY2llcyBvZiB0aGlzIG1vZHVsZSBpcyBldmFsdWF0ZWRcbiAgICogICh1bmxlc3Mgb25lIGlzIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSBhbHJlYWR5IGluIHRoZSBsaXN0IG9mIHNlZW5cbiAgICogIG1vZHVsZXMsIGluIHdoaWNoIGNhc2Ugd2UgZXhlY3V0ZSBpdClcbiAgICpcbiAgICogVGhlbiB3ZSBldmFsdWF0ZSB0aGUgbW9kdWxlIGl0c2VsZiBkZXB0aC1maXJzdCBsZWZ0IHRvIHJpZ2h0IFxuICAgKiBleGVjdXRpb24gdG8gbWF0Y2ggRVM2IG1vZHVsZXNcbiAgICovXG4gIGZ1bmN0aW9uIGVuc3VyZUV2YWx1YXRlZChtb2R1bGVOYW1lLCBlbnRyeSwgc2VlbiwgbG9hZGVyKSB7XG4gICAgLy8gaWYgYWxyZWFkeSBzZWVuLCB0aGF0IG1lYW5zIGl0J3MgYW4gYWxyZWFkeS1ldmFsdWF0ZWQgbm9uIGNpcmN1bGFyIGRlcGVuZGVuY3lcbiAgICBpZiAoIWVudHJ5IHx8IGVudHJ5LmV2YWx1YXRlZCB8fCAhZW50cnkuZGVjbGFyYXRpdmUpXG4gICAgICByZXR1cm47XG5cbiAgICAvLyB0aGlzIG9ubHkgYXBwbGllcyB0byBkZWNsYXJhdGl2ZSBtb2R1bGVzIHdoaWNoIGxhdGUtZXhlY3V0ZVxuXG4gICAgc2Vlbi5wdXNoKG1vZHVsZU5hbWUpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbnRyeS5ub3JtYWxpemVkRGVwcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBkZXBOYW1lID0gZW50cnkubm9ybWFsaXplZERlcHNbaV07XG4gICAgICBpZiAoaW5kZXhPZi5jYWxsKHNlZW4sIGRlcE5hbWUpID09IC0xKSB7XG4gICAgICAgIGlmICghbG9hZGVyLmRlZmluZWRbZGVwTmFtZV0pXG4gICAgICAgICAgbG9hZGVyLmdldChkZXBOYW1lKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGVuc3VyZUV2YWx1YXRlZChkZXBOYW1lLCBsb2FkZXIuZGVmaW5lZFtkZXBOYW1lXSwgc2VlbiwgbG9hZGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZW50cnkuZXZhbHVhdGVkKVxuICAgICAgcmV0dXJuO1xuXG4gICAgZW50cnkuZXZhbHVhdGVkID0gdHJ1ZTtcbiAgICBlbnRyeS5tb2R1bGUuZXhlY3V0ZS5jYWxsKF9fZ2xvYmFsKTtcbiAgfVxuXG4gIC8vIG92ZXJyaWRlIHRoZSBkZWxldGUgbWV0aG9kIHRvIGFsc28gY2xlYXIgdGhlIHJlZ2lzdGVyIGNhY2hlc1xuICBob29rKCdkZWxldGUnLCBmdW5jdGlvbihkZWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSkge1xuICAgICAgZGVsZXRlIHRoaXMuX2xvYWRlci5tb2R1bGVSZWNvcmRzW25hbWVdO1xuICAgICAgZGVsZXRlIHRoaXMuZGVmaW5lZFtuYW1lXTtcbiAgICAgIHJldHVybiBkZWwuY2FsbCh0aGlzLCBuYW1lKTtcbiAgICB9O1xuICB9KTtcblxuICBob29rKCdmZXRjaCcsIGZ1bmN0aW9uKGZldGNoKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICAgIGlmICh0aGlzLmRlZmluZWRbbG9hZC5uYW1lXSkge1xuICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdkZWZpbmVkJztcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICBsb2FkLm1ldGFkYXRhLmRlcHMgPSBsb2FkLm1ldGFkYXRhLmRlcHMgfHwgW107XG4gICAgICBcbiAgICAgIHJldHVybiBmZXRjaC5jYWxsKHRoaXMsIGxvYWQpO1xuICAgIH07XG4gIH0pO1xuXG4gIGhvb2soJ3RyYW5zbGF0ZScsIGZ1bmN0aW9uKHRyYW5zbGF0ZSkge1xuICAgIC8vIHdlIHJ1biB0aGUgbWV0YSBkZXRlY3Rpb24gaGVyZSAocmVnaXN0ZXIgaXMgYWZ0ZXIgbWV0YSlcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgbG9hZC5tZXRhZGF0YS5kZXBzID0gbG9hZC5tZXRhZGF0YS5kZXBzIHx8IFtdO1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cmFuc2xhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSkudGhlbihmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgLy8gcnVuIGRldGVjdGlvbiBmb3IgcmVnaXN0ZXIgZm9ybWF0XG4gICAgICAgIGlmIChsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAncmVnaXN0ZXInIHx8ICFsb2FkLm1ldGFkYXRhLmZvcm1hdCAmJiBkZXRlY3RSZWdpc3RlckZvcm1hdChsb2FkLnNvdXJjZSkpXG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPSAncmVnaXN0ZXInO1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gaW1wbGVtZW50IGEgcGVyZm9yYW5jZSBzaG9ydHBhdGggZm9yIFN5c3RlbS5sb2FkIHdpdGggbm8gZGVwc1xuICBob29rKCdsb2FkJywgZnVuY3Rpb24oZG9Mb2FkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5vcm1hbGl6ZWQpIHtcbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgICAgdmFyIGVudHJ5ID0gbG9hZGVyLmRlZmluZWRbbm9ybWFsaXplZF07XG5cbiAgICAgIGlmICghZW50cnkgfHwgZW50cnkuZGVwcy5sZW5ndGgpXG4gICAgICAgIHJldHVybiBkb0xvYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgICAgZW50cnkub3JpZ2luYWxJbmRpY2VzID0gZW50cnkubm9ybWFsaXplZERlcHMgPSBbXTtcblxuICAgICAgLy8gcmVjdXJzaXZlbHkgZW5zdXJlIHRoYXQgdGhlIG1vZHVsZSBhbmQgYWxsIGl0cyBcbiAgICAgIC8vIGRlcGVuZGVuY2llcyBhcmUgbGlua2VkICh3aXRoIGRlcGVuZGVuY3kgZ3JvdXAgaGFuZGxpbmcpXG4gICAgICBsaW5rKG5vcm1hbGl6ZWQsIGVudHJ5LCBsb2FkZXIpO1xuXG4gICAgICAvLyBub3cgaGFuZGxlIGRlcGVuZGVuY3kgZXhlY3V0aW9uIGluIGNvcnJlY3Qgb3JkZXJcbiAgICAgIGVuc3VyZUV2YWx1YXRlZChub3JtYWxpemVkLCBlbnRyeSwgW10sIGxvYWRlcik7XG4gICAgICBpZiAoIWVudHJ5LmVzTW9kdWxlKVxuICAgICAgICBlbnRyeS5lc01vZHVsZSA9IGxvYWRlci5uZXdNb2R1bGUoZW50cnkubW9kdWxlLmV4cG9ydHMpO1xuXG4gICAgICAvLyByZW1vdmUgZnJvbSB0aGUgcmVnaXN0cnlcbiAgICAgIGlmICghbG9hZGVyLnRyYWNlKVxuICAgICAgICBsb2FkZXIuZGVmaW5lZFtub3JtYWxpemVkXSA9IHVuZGVmaW5lZDtcblxuICAgICAgLy8gcmV0dXJuIHRoZSBkZWZpbmVkIG1vZHVsZSBvYmplY3RcbiAgICAgIGxvYWRlci5zZXQobm9ybWFsaXplZCwgZW50cnkuZXNNb2R1bGUpO1xuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgaG9vaygnaW5zdGFudGlhdGUnLCBmdW5jdGlvbihpbnN0YW50aWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2RldGVjdCcpXG4gICAgICAgIGxvYWQubWV0YWRhdGEuZm9ybWF0ID0gdW5kZWZpbmVkO1xuXG4gICAgICAvLyBhc3N1bWVzIHByZXZpb3VzIGluc3RhbnRpYXRlIGlzIHN5bmNcbiAgICAgIC8vIChjb3JlIGpzb24gc3VwcG9ydClcbiAgICAgIGluc3RhbnRpYXRlLmNhbGwodGhpcywgbG9hZCk7XG5cbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuXG4gICAgICB2YXIgZW50cnk7XG5cbiAgICAgIC8vIGZpcnN0IHdlIGNoZWNrIGlmIHRoaXMgbW9kdWxlIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZCBpbiB0aGUgcmVnaXN0cnlcbiAgICAgIGlmIChsb2FkZXIuZGVmaW5lZFtsb2FkLm5hbWVdKSB7XG4gICAgICAgIGVudHJ5ID0gbG9hZGVyLmRlZmluZWRbbG9hZC5uYW1lXTtcbiAgICAgICAgLy8gZG9uJ3Qgc3VwcG9ydCBkZXBzIGZvciBFUyBtb2R1bGVzXG4gICAgICAgIGlmICghZW50cnkuZGVjbGFyYXRpdmUpXG4gICAgICAgICAgZW50cnkuZGVwcyA9IGVudHJ5LmRlcHMuY29uY2F0KGxvYWQubWV0YWRhdGEuZGVwcyk7XG4gICAgICAgIGVudHJ5LmRlcHMgPSBlbnRyeS5kZXBzLmNvbmNhdChsb2FkLm1ldGFkYXRhLmRlcHMpO1xuICAgICAgfVxuXG4gICAgICAvLyBwaWNrZWQgdXAgYWxyZWFkeSBieSBhbiBhbm9ueW1vdXMgU3lzdGVtLnJlZ2lzdGVyIHNjcmlwdCBpbmplY3Rpb25cbiAgICAgIC8vIG9yIHZpYSB0aGUgZHluYW1pYyBmb3JtYXRzXG4gICAgICBlbHNlIGlmIChsb2FkLm1ldGFkYXRhLmVudHJ5KSB7XG4gICAgICAgIGVudHJ5ID0gbG9hZC5tZXRhZGF0YS5lbnRyeTtcbiAgICAgICAgZW50cnkuZGVwcyA9IGVudHJ5LmRlcHMuY29uY2F0KGxvYWQubWV0YWRhdGEuZGVwcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnRhaW5zIFN5c3RlbS5yZWdpc3RlciBjYWxsc1xuICAgICAgLy8gKGRvbnQgcnVuIGJ1bmRsZXMgaW4gdGhlIGJ1aWxkZXIpXG4gICAgICBlbHNlIGlmICghKGxvYWRlci5idWlsZGVyICYmIGxvYWQubWV0YWRhdGEuYnVuZGxlKSBcbiAgICAgICAgICAmJiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ3JlZ2lzdGVyJyB8fCBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnZXNtJyB8fCBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnZXM2JykpIHtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgX19leGVjICE9ICd1bmRlZmluZWQnKVxuICAgICAgICAgIF9fZXhlYy5jYWxsKGxvYWRlciwgbG9hZCk7XG5cbiAgICAgICAgaWYgKCFsb2FkLm1ldGFkYXRhLmVudHJ5ICYmICFsb2FkLm1ldGFkYXRhLmJ1bmRsZSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobG9hZC5uYW1lICsgJyBkZXRlY3RlZCBhcyAnICsgbG9hZC5tZXRhZGF0YS5mb3JtYXQgKyAnIGJ1dCBkaWRuXFwndCBleGVjdXRlLicpO1xuXG4gICAgICAgIGVudHJ5ID0gbG9hZC5tZXRhZGF0YS5lbnRyeTtcblxuICAgICAgICAvLyBzdXBwb3J0IG1ldGFkYXRhIGRlcHMgZm9yIFN5c3RlbS5yZWdpc3RlclxuICAgICAgICBpZiAoZW50cnkgJiYgbG9hZC5tZXRhZGF0YS5kZXBzKVxuICAgICAgICAgIGVudHJ5LmRlcHMgPSBlbnRyeS5kZXBzLmNvbmNhdChsb2FkLm1ldGFkYXRhLmRlcHMpO1xuICAgICAgfVxuXG4gICAgICAvLyBuYW1lZCBidW5kbGVzIGFyZSBqdXN0IGFuIGVtcHR5IG1vZHVsZVxuICAgICAgaWYgKCFlbnRyeSkge1xuICAgICAgICBlbnRyeSA9IGNyZWF0ZUVudHJ5KCk7XG4gICAgICAgIGVudHJ5LmRlcHMgPSBsb2FkLm1ldGFkYXRhLmRlcHM7XG4gICAgICAgIGVudHJ5LmV4ZWN1dGUgPSBmdW5jdGlvbigpIHt9O1xuICAgICAgfVxuXG4gICAgICAvLyBwbGFjZSB0aGlzIG1vZHVsZSBvbnRvIGRlZmluZWQgZm9yIGNpcmN1bGFyIHJlZmVyZW5jZXNcbiAgICAgIGxvYWRlci5kZWZpbmVkW2xvYWQubmFtZV0gPSBlbnRyeTtcbiAgICAgIFxuICAgICAgdmFyIGdyb3VwZWQgPSBncm91cChlbnRyeS5kZXBzKTtcbiAgICAgIFxuICAgICAgZW50cnkuZGVwcyA9IGdyb3VwZWQubmFtZXM7XG4gICAgICBlbnRyeS5vcmlnaW5hbEluZGljZXMgPSBncm91cGVkLmluZGljZXM7XG4gICAgICBlbnRyeS5uYW1lID0gbG9hZC5uYW1lO1xuICAgICAgZW50cnkuZXNtRXhwb3J0cyA9IGxvYWQubWV0YWRhdGEuZXNtRXhwb3J0cyAhPT0gZmFsc2U7XG5cbiAgICAgIC8vIGZpcnN0LCBub3JtYWxpemUgYWxsIGRlcGVuZGVuY2llc1xuICAgICAgdmFyIG5vcm1hbGl6ZVByb21pc2VzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGVudHJ5LmRlcHMubGVuZ3RoOyBpIDwgbDsgaSsrKVxuICAgICAgICBub3JtYWxpemVQcm9taXNlcy5wdXNoKFByb21pc2UucmVzb2x2ZShsb2FkZXIubm9ybWFsaXplKGVudHJ5LmRlcHNbaV0sIGxvYWQubmFtZSkpKTtcblxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKG5vcm1hbGl6ZVByb21pc2VzKS50aGVuKGZ1bmN0aW9uKG5vcm1hbGl6ZWREZXBzKSB7XG5cbiAgICAgICAgZW50cnkubm9ybWFsaXplZERlcHMgPSBub3JtYWxpemVkRGVwcztcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRlcHM6IGVudHJ5LmRlcHMsXG4gICAgICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyByZWN1cnNpdmVseSBlbnN1cmUgdGhhdCB0aGUgbW9kdWxlIGFuZCBhbGwgaXRzIFxuICAgICAgICAgICAgLy8gZGVwZW5kZW5jaWVzIGFyZSBsaW5rZWQgKHdpdGggZGVwZW5kZW5jeSBncm91cCBoYW5kbGluZylcbiAgICAgICAgICAgIGxpbmsobG9hZC5uYW1lLCBlbnRyeSwgbG9hZGVyKTtcblxuICAgICAgICAgICAgLy8gbm93IGhhbmRsZSBkZXBlbmRlbmN5IGV4ZWN1dGlvbiBpbiBjb3JyZWN0IG9yZGVyXG4gICAgICAgICAgICBlbnN1cmVFdmFsdWF0ZWQobG9hZC5uYW1lLCBlbnRyeSwgW10sIGxvYWRlcik7XG5cbiAgICAgICAgICAgIGlmICghZW50cnkuZXNNb2R1bGUpXG4gICAgICAgICAgICAgIGVudHJ5LmVzTW9kdWxlID0gbG9hZGVyLm5ld01vZHVsZShlbnRyeS5tb2R1bGUuZXhwb3J0cyk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSByZWdpc3RyeVxuICAgICAgICAgICAgaWYgKCFsb2FkZXIudHJhY2UpXG4gICAgICAgICAgICAgIGxvYWRlci5kZWZpbmVkW2xvYWQubmFtZV0gPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIC8vIHJldHVybiB0aGUgZGVmaW5lZCBtb2R1bGUgb2JqZWN0XG4gICAgICAgICAgICByZXR1cm4gZW50cnkuZXNNb2R1bGU7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSk7XG59KSgpO1xuLypcbiAqIEV4dGVuc2lvbiB0byBkZXRlY3QgRVM2IGFuZCBhdXRvLWxvYWQgVHJhY2V1ciBvciBCYWJlbCBmb3IgcHJvY2Vzc2luZ1xuICovXG4oZnVuY3Rpb24oKSB7XG4gIC8vIGdvb2QgZW5vdWdoIEVTNiBtb2R1bGUgZGV0ZWN0aW9uIHJlZ2V4IC0gZm9ybWF0IGRldGVjdGlvbnMgbm90IGRlc2lnbmVkIHRvIGJlIGFjY3VyYXRlLCBidXQgdG8gaGFuZGxlIHRoZSA5OSUgdXNlIGNhc2VcbiAgdmFyIGVzbVJlZ0V4ID0gLyheXFxzKnxbfVxcKTtcXG5dXFxzKikoaW1wb3J0XFxzKihbJ1wiXXwoXFwqXFxzK2FzXFxzKyk/W15cIidcXChcXClcXG47XStcXHMqZnJvbVxccypbJ1wiXXxcXHspfGV4cG9ydFxccytcXCpcXHMrZnJvbVxccytbXCInXXxleHBvcnRcXHMqKFxce3xkZWZhdWx0fGZ1bmN0aW9ufGNsYXNzfHZhcnxjb25zdHxsZXR8YXN5bmNcXHMrZnVuY3Rpb24pKS87XG5cbiAgdmFyIHRyYWNldXJSdW50aW1lUmVnRXggPSAvXFwkdHJhY2V1clJ1bnRpbWVcXHMqXFwuLztcbiAgdmFyIGJhYmVsSGVscGVyc1JlZ0V4ID0gL2JhYmVsSGVscGVyc1xccypcXC4vO1xuXG4gIGhvb2soJ3RyYW5zbGF0ZScsIGZ1bmN0aW9uKHRyYW5zbGF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgcmV0dXJuIHRyYW5zbGF0ZS5hcHBseShsb2FkZXIsIGFyZ3MpXG4gICAgICAudGhlbihmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgLy8gZGV0ZWN0ICYgdHJhbnNwaWxlIEVTNlxuICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2VzbScgfHwgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2VzNicgfHwgIWxvYWQubWV0YWRhdGEuZm9ybWF0ICYmIHNvdXJjZS5tYXRjaChlc21SZWdFeCkpIHtcbiAgICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2VzNicpXG4gICAgICAgICAgICB3YXJuLmNhbGwobG9hZGVyLCAnTW9kdWxlICcgKyBsb2FkLm5hbWUgKyAnIGhhcyBtZXRhZGF0YSBzZXR0aW5nIGl0cyBmb3JtYXQgdG8gXCJlczZcIiwgd2hpY2ggaXMgZGVwcmVjYXRlZC5cXG5UaGlzIHNob3VsZCBiZSB1cGRhdGVkIHRvIFwiZXNtXCIuJyk7XG5cbiAgICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdlc20nO1xuXG4gICAgICAgICAgaWYgKGxvYWQubWV0YWRhdGEuZGVwcykge1xuICAgICAgICAgICAgdmFyIGRlcEluamVjdCA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2FkLm1ldGFkYXRhLmRlcHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgIGRlcEluamVjdCArPSAnaW1wb3J0IFwiJyArIGxvYWQubWV0YWRhdGEuZGVwc1tpXSArICdcIjsgJztcbiAgICAgICAgICAgIGxvYWQuc291cmNlID0gZGVwSW5qZWN0ICsgc291cmNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChsb2FkZXIudHJhbnNwaWxlciA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIC8vIHdlIGFjY2VwdCB0cmFuc2xhdGlvbiB0byBlc20gZm9yIGJ1aWxkcyB0aG91Z2ggdG8gZW5hYmxlIGVnIHJvbGx1cCBvcHRpbWl6YXRpb25zXG4gICAgICAgICAgICBpZiAobG9hZGVyLmJ1aWxkZXIpXG4gICAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gZHluYW1pY2FsbHkgdHJhbnNwaWxlIEVTIG1vZHVsZSBhcyBTeXN0ZW1KUy50cmFuc3BpbGVyIHNldCB0byBmYWxzZS4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzZXR0aW5nIF9sb2FkZXIubG9hZGVkVHJhbnNwaWxlciA9IGZhbHNlIHRlbGxzIHRoZSBuZXh0IGJsb2NrIHRvXG4gICAgICAgICAgLy8gZG8gY2hlY2tzIGZvciBzZXR0aW5nIHRyYW5zcGlsZXIgbWV0YWRhdGFcbiAgICAgICAgICBsb2FkZXIuX2xvYWRlci5sb2FkZWRUcmFuc3BpbGVyID0gbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlciB8fCBmYWxzZTtcbiAgICAgICAgICBpZiAobG9hZGVyLnBsdWdpbkxvYWRlcilcbiAgICAgICAgICAgIGxvYWRlci5wbHVnaW5Mb2FkZXIuX2xvYWRlci5sb2FkZWRUcmFuc3BpbGVyID0gbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlciB8fCBmYWxzZTtcblxuICAgICAgICAgIC8vIGRvIHRyYW5zcGlsYXRpb25cbiAgICAgICAgICByZXR1cm4gKGxvYWRlci5fbG9hZGVyLnRyYW5zcGlsZXJQcm9taXNlIHx8IChcbiAgICAgICAgICAgIGxvYWRlci5fbG9hZGVyLnRyYW5zcGlsZXJQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgICAgICBfX2dsb2JhbFtsb2FkZXIudHJhbnNwaWxlciA9PSAndHlwZXNjcmlwdCcgPyAndHMnIDogbG9hZGVyLnRyYW5zcGlsZXJdIHx8IChsb2FkZXIucGx1Z2luTG9hZGVyIHx8IGxvYWRlcilbJ2ltcG9ydCddKGxvYWRlci50cmFuc3BpbGVyKVxuICAgICAgICAgICkpKS50aGVuKGZ1bmN0aW9uKHRyYW5zcGlsZXIpIHtcbiAgICAgICAgICAgIGxvYWRlci5fbG9hZGVyLmxvYWRlZFRyYW5zcGlsZXJSdW50aW1lID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gdHJhbnNsYXRlIGhvb2tzIG1lYW5zIHRoaXMgaXMgYSB0cmFuc3BpbGVyIHBsdWdpbiBpbnN0ZWFkIG9mIGEgcmF3IGltcGxlbWVudGF0aW9uXG4gICAgICAgICAgICBpZiAodHJhbnNwaWxlci50cmFuc2xhdGUpIHtcbiAgICAgICAgICAgICAgLy8gaWYgdHJhbnNwaWxlciBpcyB0aGUgc2FtZSBhcyB0aGUgcGx1Z2luIGxvYWRlciwgdGhlbiBkb24ndCBydW4gdHdpY2VcbiAgICAgICAgICAgICAgaWYgKHRyYW5zcGlsZXIgPT0gbG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvYWQuc291cmNlO1xuXG4gICAgICAgICAgICAgIC8vIGNvbnZlcnQgdGhlIHNvdXJjZSBtYXAgaW50byBhbiBvYmplY3QgZm9yIHRyYW5zcGlsYXRpb24gY2hhaW5pbmdcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBsb2FkLm1ldGFkYXRhLnNvdXJjZU1hcCA9PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICBsb2FkLm1ldGFkYXRhLnNvdXJjZU1hcCA9IEpTT04ucGFyc2UobG9hZC5tZXRhZGF0YS5zb3VyY2VNYXApO1xuXG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJhbnNwaWxlci50cmFuc2xhdGUuYXBwbHkobG9hZGVyLCBhcmdzKSlcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICAgICAgICAgICAgLy8gc2FuaXRpemUgc291cmNlTWFwIGlmIGFuIG9iamVjdCBub3QgYSBKU09OIHN0cmluZ1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBsb2FkLm1ldGFkYXRhLnNvdXJjZU1hcDtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBzb3VyY2VNYXAgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBvcmlnaW5hbE5hbWUgPSBsb2FkLmFkZHJlc3Muc3BsaXQoJyEnKVswXTtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgLy8gZm9yY2Ugc2V0IHRoZSBmaWxlbmFtZSBvZiB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2VNYXAuZmlsZSB8fCBzb3VyY2VNYXAuZmlsZSA9PSBsb2FkLmFkZHJlc3MpXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcC5maWxlID0gb3JpZ2luYWxOYW1lICsgJyF0cmFuc3BpbGVkJztcblxuICAgICAgICAgICAgICAgICAgLy8gZm9yY2Ugc2V0IHRoZSBzb3VyY2VzIGxpc3QgaWYgb25seSBvbmUgc291cmNlXG4gICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZU1hcC5zb3VyY2VzIHx8IHNvdXJjZU1hcC5zb3VyY2VzLmxlbmd0aCA8PSAxICYmICghc291cmNlTWFwLnNvdXJjZXNbMF0gfHwgc291cmNlTWFwLnNvdXJjZXNbMF0gPT0gbG9hZC5hZGRyZXNzKSlcbiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwLnNvdXJjZXMgPSBbb3JpZ2luYWxOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2VzbScgJiYgIWxvYWRlci5idWlsZGVyICYmIGRldGVjdFJlZ2lzdGVyRm9ybWF0KHNvdXJjZSkpXG4gICAgICAgICAgICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdyZWdpc3Rlcic7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGxlZ2FjeSBidWlsZGVyIHN1cHBvcnRcbiAgICAgICAgICAgIGlmIChsb2FkZXIuYnVpbGRlcilcbiAgICAgICAgICAgICAgbG9hZC5tZXRhZGF0YS5vcmlnaW5hbFNvdXJjZSA9IGxvYWQuc291cmNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBkZWZpbmVkIGluIGVzNi1tb2R1bGUtbG9hZGVyL3NyYy90cmFuc3BpbGUuanNcbiAgICAgICAgICAgIHJldHVybiB0cmFuc3BpbGUuY2FsbChsb2FkZXIsIGxvYWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgICAgICAgLy8gY2xlYXIgc291cmNlTWFwIGFzIHRyYW5zcGlsZXIgZW1iZWRzIGl0XG4gICAgICAgICAgICAgIGxvYWQubWV0YWRhdGEuc291cmNlTWFwID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBza2lwIHRyYW5zcGlsZXIgYW5kIHRyYW5zcGlsZXIgcnVudGltZSBsb2FkaW5nIHdoZW4gdHJhbnNwaWxlciBpcyBkaXNhYmxlZFxuICAgICAgICBpZiAobG9hZGVyLnRyYW5zcGlsZXIgPT09IGZhbHNlKVxuICAgICAgICAgIHJldHVybiBzb3VyY2U7XG5cbiAgICAgICAgLy8gbG9hZCB0aGUgdHJhbnNwaWxlciBjb3JyZWN0bHlcbiAgICAgICAgaWYgKGxvYWRlci5fbG9hZGVyLmxvYWRlZFRyYW5zcGlsZXIgPT09IGZhbHNlICYmIChsb2FkZXIudHJhbnNwaWxlciA9PSAndHJhY2V1cicgfHwgbG9hZGVyLnRyYW5zcGlsZXIgPT0gJ3R5cGVzY3JpcHQnIHx8IGxvYWRlci50cmFuc3BpbGVyID09ICdiYWJlbCcpXG4gICAgICAgICAgICAmJiBsb2FkLm5hbWUgPT0gbG9hZGVyLm5vcm1hbGl6ZVN5bmMobG9hZGVyLnRyYW5zcGlsZXIpKSB7XG5cbiAgICAgICAgICAvLyBhbHdheXMgbG9hZCB0cmFuc3BpbGVyIGFzIGEgZ2xvYmFsXG4gICAgICAgICAgaWYgKHNvdXJjZS5sZW5ndGggPiAxMDAgJiYgIWxvYWQubWV0YWRhdGEuZm9ybWF0KSB7XG4gICAgICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdnbG9iYWwnO1xuXG4gICAgICAgICAgICBpZiAobG9hZGVyLnRyYW5zcGlsZXIgPT09ICd0cmFjZXVyJylcbiAgICAgICAgICAgICAgbG9hZC5tZXRhZGF0YS5leHBvcnRzID0gJ3RyYWNldXInO1xuICAgICAgICAgICAgaWYgKGxvYWRlci50cmFuc3BpbGVyID09PSAndHlwZXNjcmlwdCcpXG4gICAgICAgICAgICAgIGxvYWQubWV0YWRhdGEuZXhwb3J0cyA9ICd0cyc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsb2FkIHRoZSB0cmFuc3BpbGVyIHJ1bnRpbWUgY29ycmVjdGx5XG4gICAgICAgIGlmIChsb2FkZXIuX2xvYWRlci5sb2FkZWRUcmFuc3BpbGVyUnVudGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAobG9hZC5uYW1lID09IGxvYWRlci5ub3JtYWxpemVTeW5jKCd0cmFjZXVyLXJ1bnRpbWUnKVxuICAgICAgICAgICAgICB8fCBsb2FkLm5hbWUgPT0gbG9hZGVyLm5vcm1hbGl6ZVN5bmMoJ2JhYmVsL2V4dGVybmFsLWhlbHBlcnMqJykpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UubGVuZ3RoID4gMTAwKVxuICAgICAgICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9IGxvYWQubWV0YWRhdGEuZm9ybWF0IHx8ICdnbG9iYWwnO1xuXG4gICAgICAgICAgICBsb2FkZXIuX2xvYWRlci5sb2FkZWRUcmFuc3BpbGVyUnVudGltZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGV0ZWN0IHRyYW5zcGlsZXIgcnVudGltZSB1c2FnZSB0byBsb2FkIHJ1bnRpbWVzXG4gICAgICAgIGlmICgobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ3JlZ2lzdGVyJyB8fCBsb2FkLm1ldGFkYXRhLmJ1bmRsZSkgJiYgbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlclJ1bnRpbWUgIT09IHRydWUpIHtcbiAgICAgICAgICBpZiAobG9hZGVyLnRyYW5zcGlsZXIgPT0gJ3RyYWNldXInICYmICFfX2dsb2JhbC4kdHJhY2V1clJ1bnRpbWUgJiYgbG9hZC5zb3VyY2UubWF0Y2godHJhY2V1clJ1bnRpbWVSZWdFeCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5fbG9hZGVyLmxvYWRlZFRyYW5zcGlsZXJSdW50aW1lID0gbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlclJ1bnRpbWUgfHwgZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gbG9hZGVyWydpbXBvcnQnXSgndHJhY2V1ci1ydW50aW1lJykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobG9hZGVyLnRyYW5zcGlsZXIgPT0gJ2JhYmVsJyAmJiAhX19nbG9iYWwuYmFiZWxIZWxwZXJzICYmIGxvYWQuc291cmNlLm1hdGNoKGJhYmVsSGVscGVyc1JlZ0V4KSkge1xuICAgICAgICAgICAgbG9hZGVyLl9sb2FkZXIubG9hZGVkVHJhbnNwaWxlclJ1bnRpbWUgPSBsb2FkZXIuX2xvYWRlci5sb2FkZWRUcmFuc3BpbGVyUnVudGltZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJbJ2ltcG9ydCddKCdiYWJlbC9leHRlcm5hbC1oZWxwZXJzJykudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcblxufSkoKTtcbi8qXG4gIFN5c3RlbUpTIEdsb2JhbCBGb3JtYXRcblxuICBTdXBwb3J0c1xuICAgIG1ldGFkYXRhLmRlcHNcbiAgICBtZXRhZGF0YS5nbG9iYWxzXG4gICAgbWV0YWRhdGEuZXhwb3J0c1xuXG4gIFdpdGhvdXQgbWV0YWRhdGEuZXhwb3J0cywgZGV0ZWN0cyB3cml0ZXMgdG8gdGhlIGdsb2JhbCBvYmplY3QuXG4qL1xudmFyIF9fZ2xvYmFsTmFtZSA9IHR5cGVvZiBzZWxmICE9ICd1bmRlZmluZWQnID8gJ3NlbGYnIDogJ2dsb2JhbCc7XG5cbmhvb2soJ2ZldGNoJywgZnVuY3Rpb24oZmV0Y2gpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICBpZiAobG9hZC5tZXRhZGF0YS5leHBvcnRzICYmICFsb2FkLm1ldGFkYXRhLmZvcm1hdClcbiAgICAgIGxvYWQubWV0YWRhdGEuZm9ybWF0ID0gJ2dsb2JhbCc7XG4gICAgcmV0dXJuIGZldGNoLmNhbGwodGhpcywgbG9hZCk7XG4gIH07XG59KTtcblxuLy8gaWRlYWxseSB3ZSBjb3VsZCBzdXBwb3J0IHNjcmlwdCBsb2FkaW5nIGZvciBnbG9iYWxzLCBidXQgdGhlIGlzc3VlIHdpdGggdGhhdCBpcyB0aGF0XG4vLyB3ZSBjYW4ndCBkbyBpdCB3aXRoIEFNRCBzdXBwb3J0IHNpZGUtYnktc2lkZSBzaW5jZSBBTUQgc3VwcG9ydCBtZWFucyBkZWZpbmluZyB0aGVcbi8vIGdsb2JhbCBkZWZpbmUsIGFuZCBnbG9iYWwgc3VwcG9ydCBtZWFucyBub3QgZGVmaW5pbmluZyBpdCwgeWV0IHdlIGRvbid0IGhhdmUgYW55IGhvb2tcbi8vIGludG8gdGhlIFwicHJlLWV4ZWN1dGlvblwiIHBoYXNlIG9mIGEgc2NyaXB0IHRhZyBiZWluZyBsb2FkZWQgdG8gaGFuZGxlIGJvdGggY2FzZXNcbmhvb2soJ2luc3RhbnRpYXRlJywgZnVuY3Rpb24oaW5zdGFudGlhdGUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICB2YXIgbG9hZGVyID0gdGhpcztcblxuICAgIGlmICghbG9hZC5tZXRhZGF0YS5mb3JtYXQpXG4gICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdnbG9iYWwnO1xuXG4gICAgLy8gZ2xvYmFsIGlzIGEgZmFsbGJhY2sgbW9kdWxlIGZvcm1hdFxuICAgIGlmIChsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnZ2xvYmFsJyAmJiAhbG9hZC5tZXRhZGF0YS5lbnRyeSkge1xuXG4gICAgICB2YXIgZW50cnkgPSBjcmVhdGVFbnRyeSgpO1xuXG4gICAgICBsb2FkLm1ldGFkYXRhLmVudHJ5ID0gZW50cnk7XG5cbiAgICAgIGVudHJ5LmRlcHMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgZyBpbiBsb2FkLm1ldGFkYXRhLmdsb2JhbHMpIHtcbiAgICAgICAgdmFyIGdsID0gbG9hZC5tZXRhZGF0YS5nbG9iYWxzW2ddO1xuICAgICAgICBpZiAoZ2wpXG4gICAgICAgICAgZW50cnkuZGVwcy5wdXNoKGdsKTtcbiAgICAgIH1cblxuICAgICAgZW50cnkuZXhlY3V0ZSA9IGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSkge1xuXG4gICAgICAgIHZhciBnbG9iYWxzO1xuICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5nbG9iYWxzKSB7XG4gICAgICAgICAgZ2xvYmFscyA9IHt9O1xuICAgICAgICAgIGZvciAodmFyIGcgaW4gbG9hZC5tZXRhZGF0YS5nbG9iYWxzKVxuICAgICAgICAgICAgaWYgKGxvYWQubWV0YWRhdGEuZ2xvYmFsc1tnXSlcbiAgICAgICAgICAgICAgZ2xvYmFsc1tnXSA9IHJlcXVpcmUobG9hZC5tZXRhZGF0YS5nbG9iYWxzW2ddKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIGV4cG9ydE5hbWUgPSBsb2FkLm1ldGFkYXRhLmV4cG9ydHM7XG5cbiAgICAgICAgaWYgKGV4cG9ydE5hbWUpXG4gICAgICAgICAgbG9hZC5zb3VyY2UgKz0gJ1xcbicgKyBfX2dsb2JhbE5hbWUgKyAnW1wiJyArIGV4cG9ydE5hbWUgKyAnXCJdID0gJyArIGV4cG9ydE5hbWUgKyAnOyc7XG5cbiAgICAgICAgdmFyIHJldHJpZXZlR2xvYmFsID0gbG9hZGVyLmdldCgnQEBnbG9iYWwtaGVscGVycycpLnByZXBhcmVHbG9iYWwobW9kdWxlLmlkLCBleHBvcnROYW1lLCBnbG9iYWxzLCAhIWxvYWQubWV0YWRhdGEuZW5jYXBzdWxhdGVHbG9iYWwpO1xuICAgICAgICBfX2V4ZWMuY2FsbChsb2FkZXIsIGxvYWQpO1xuXG4gICAgICAgIHJldHVybiByZXRyaWV2ZUdsb2JhbCgpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW5zdGFudGlhdGUuY2FsbCh0aGlzLCBsb2FkKTtcbiAgfTtcbn0pO1xuXG5cbmZ1bmN0aW9uIGdldEdsb2JhbFZhbHVlKGV4cG9ydHMpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09ICdzdHJpbmcnKVxuICAgIHJldHVybiByZWFkTWVtYmVyRXhwcmVzc2lvbihleHBvcnRzLCBfX2dsb2JhbCk7XG5cbiAgaWYgKCEoZXhwb3J0cyBpbnN0YW5jZW9mIEFycmF5KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dsb2JhbCBleHBvcnRzIG11c3QgYmUgYSBzdHJpbmcgb3IgYXJyYXkuJyk7XG5cbiAgdmFyIGdsb2JhbFZhbHVlID0ge307XG4gIHZhciBmaXJzdCA9IHRydWU7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciB2YWwgPSByZWFkTWVtYmVyRXhwcmVzc2lvbihleHBvcnRzW2ldLCBfX2dsb2JhbCk7XG4gICAgaWYgKGZpcnN0KSB7XG4gICAgICBnbG9iYWxWYWx1ZVsnZGVmYXVsdCddID0gdmFsO1xuICAgICAgZmlyc3QgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2xvYmFsVmFsdWVbZXhwb3J0c1tpXS5zcGxpdCgnLicpLnBvcCgpXSA9IHZhbDtcbiAgfVxuICByZXR1cm4gZ2xvYmFsVmFsdWU7XG59XG5cbmhvb2soJ3JlZHVjZVJlZ2lzdGVyXycsIGZ1bmN0aW9uKHJlZHVjZVJlZ2lzdGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbihsb2FkLCByZWdpc3Rlcikge1xuICAgIGlmIChyZWdpc3RlciB8fCAhbG9hZC5tZXRhZGF0YS5leHBvcnRzKVxuICAgICAgcmV0dXJuIHJlZHVjZVJlZ2lzdGVyLmNhbGwodGhpcywgbG9hZCwgcmVnaXN0ZXIpO1xuXG4gICAgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPSAnZ2xvYmFsJztcbiAgICB2YXIgZW50cnkgPSBsb2FkLm1ldGFkYXRhLmVudHJ5ID0gY3JlYXRlRW50cnkoKTtcbiAgICBlbnRyeS5kZXBzID0gbG9hZC5tZXRhZGF0YS5kZXBzO1xuICAgIHZhciBnbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlKGxvYWQubWV0YWRhdGEuZXhwb3J0cyk7XG4gICAgZW50cnkuZXhlY3V0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGdsb2JhbFZhbHVlO1xuICAgIH07XG4gIH07XG59KTtcblxuaG9va0NvbnN0cnVjdG9yKGZ1bmN0aW9uKGNvbnN0cnVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICBjb25zdHJ1Y3Rvci5jYWxsKGxvYWRlcik7XG5cbiAgICB2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4gICAgLy8gYmFyZSBtaW5pbXVtIGlnbm9yZXNcbiAgICB2YXIgaWdub3JlZEdsb2JhbFByb3BzID0gWydfZycsICdzZXNzaW9uU3RvcmFnZScsICdsb2NhbFN0b3JhZ2UnLCAnY2xpcGJvYXJkRGF0YScsICdmcmFtZXMnLCAnZnJhbWVFbGVtZW50JywgJ2V4dGVybmFsJywgXG4gICAgICAnbW96QW5pbWF0aW9uU3RhcnRUaW1lJywgJ3dlYmtpdFN0b3JhZ2VJbmZvJywgJ3dlYmtpdEluZGV4ZWREQicsICdtb3pJbm5lclNjcmVlblknLCAnbW96SW5uZXJTY3JlZW5YJ107XG5cbiAgICB2YXIgZ2xvYmFsU25hcHNob3Q7XG5cbiAgICBmdW5jdGlvbiBmb3JFYWNoR2xvYmFsKGNhbGxiYWNrKSB7XG4gICAgICBpZiAoT2JqZWN0LmtleXMpXG4gICAgICAgIE9iamVjdC5rZXlzKF9fZ2xvYmFsKS5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgICAgIGVsc2VcbiAgICAgICAgZm9yICh2YXIgZyBpbiBfX2dsb2JhbCkge1xuICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChfX2dsb2JhbCwgZykpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICBjYWxsYmFjayhnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvckVhY2hHbG9iYWxWYWx1ZShjYWxsYmFjaykge1xuICAgICAgZm9yRWFjaEdsb2JhbChmdW5jdGlvbihnbG9iYWxOYW1lKSB7XG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwoaWdub3JlZEdsb2JhbFByb3BzLCBnbG9iYWxOYW1lKSAhPSAtMSlcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gX19nbG9iYWxbZ2xvYmFsTmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZ25vcmVkR2xvYmFsUHJvcHMucHVzaChnbG9iYWxOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhnbG9iYWxOYW1lLCB2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBsb2FkZXIuc2V0KCdAQGdsb2JhbC1oZWxwZXJzJywgbG9hZGVyLm5ld01vZHVsZSh7XG4gICAgICBwcmVwYXJlR2xvYmFsOiBmdW5jdGlvbihtb2R1bGVOYW1lLCBleHBvcnRzLCBnbG9iYWxzLCBlbmNhcHN1bGF0ZSkge1xuICAgICAgICAvLyBkaXNhYmxlIG1vZHVsZSBkZXRlY3Rpb25cbiAgICAgICAgdmFyIGN1ckRlZmluZSA9IF9fZ2xvYmFsLmRlZmluZTtcbiAgICAgICAgXG4gICAgICAgIF9fZ2xvYmFsLmRlZmluZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBzZXQgZ2xvYmFsc1xuICAgICAgICB2YXIgb2xkR2xvYmFscztcbiAgICAgICAgaWYgKGdsb2JhbHMpIHtcbiAgICAgICAgICBvbGRHbG9iYWxzID0ge307XG4gICAgICAgICAgZm9yICh2YXIgZyBpbiBnbG9iYWxzKSB7XG4gICAgICAgICAgICBvbGRHbG9iYWxzW2ddID0gX19nbG9iYWxbZ107XG4gICAgICAgICAgICBfX2dsb2JhbFtnXSA9IGdsb2JhbHNbZ107XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gc3RvcmUgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnbG9iYWwgb2JqZWN0IGluIG9yZGVyIHRvIGRldGVjdCBjaGFuZ2VzXG4gICAgICAgIGlmICghZXhwb3J0cykge1xuICAgICAgICAgIGdsb2JhbFNuYXBzaG90ID0ge307XG5cbiAgICAgICAgICBmb3JFYWNoR2xvYmFsVmFsdWUoZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgIGdsb2JhbFNuYXBzaG90W25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZXR1cm4gZnVuY3Rpb24gdG8gcmV0cmlldmUgZ2xvYmFsXG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgZ2xvYmFsVmFsdWUgPSBleHBvcnRzID8gZ2V0R2xvYmFsVmFsdWUoZXhwb3J0cykgOiB7fTtcblxuICAgICAgICAgIHZhciBzaW5nbGVHbG9iYWw7XG4gICAgICAgICAgdmFyIG11bHRpcGxlRXhwb3J0cyA9ICEhZXhwb3J0cztcblxuICAgICAgICAgIGlmICghZXhwb3J0cyB8fCBlbmNhcHN1bGF0ZSlcbiAgICAgICAgICAgIGZvckVhY2hHbG9iYWxWYWx1ZShmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoZ2xvYmFsU25hcHNob3RbbmFtZV0gPT09IHZhbHVlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBhbGxvdyBnbG9iYWwgZW5jYXBzdWxhdGlvbiB3aGVyZSBnbG9iYWxzIGFyZSByZW1vdmVkXG4gICAgICAgICAgICAgIGlmIChlbmNhcHN1bGF0ZSlcbiAgICAgICAgICAgICAgICBfX2dsb2JhbFtuYW1lXSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICBpZiAoIWV4cG9ydHMpIHtcbiAgICAgICAgICAgICAgICBnbG9iYWxWYWx1ZVtuYW1lXSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzaW5nbGVHbG9iYWwgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIGlmICghbXVsdGlwbGVFeHBvcnRzICYmIHNpbmdsZUdsb2JhbCAhPT0gdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIG11bHRpcGxlRXhwb3J0cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2luZ2xlR2xvYmFsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgIGdsb2JhbFZhbHVlID0gbXVsdGlwbGVFeHBvcnRzID8gZ2xvYmFsVmFsdWUgOiBzaW5nbGVHbG9iYWw7XG5cbiAgICAgICAgICAvLyByZXZlcnQgZ2xvYmFsc1xuICAgICAgICAgIGlmIChvbGRHbG9iYWxzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBnIGluIG9sZEdsb2JhbHMpXG4gICAgICAgICAgICAgIF9fZ2xvYmFsW2ddID0gb2xkR2xvYmFsc1tnXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgX19nbG9iYWwuZGVmaW5lID0gY3VyRGVmaW5lO1xuXG4gICAgICAgICAgcmV0dXJuIGdsb2JhbFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuLypcbiAgU3lzdGVtSlMgQ29tbW9uSlMgRm9ybWF0XG4qL1xuKGZ1bmN0aW9uKCkge1xuICAvLyBDSlMgTW9kdWxlIEZvcm1hdFxuICAvLyByZXF1aXJlKCcuLi4nKSB8fCBleHBvcnRzWycnXSA9IC4uLiB8fCBleHBvcnRzLmFzZCA9IC4uLiB8fCBtb2R1bGUuZXhwb3J0cyA9IC4uLlxuICB2YXIgY2pzRXhwb3J0c1JlZ0V4ID0gLyg/Ol5cXHVGRUZGP3xbXiRfYS16QS1aXFx4QTAtXFx1RkZGRi5dKShleHBvcnRzXFxzKihcXFtbJ1wiXXxcXC4pfG1vZHVsZShcXC5leHBvcnRzfFxcWydleHBvcnRzJ1xcXXxcXFtcImV4cG9ydHNcIlxcXSlcXHMqKFxcW1snXCJdfFs9LFxcLl0pKS87XG4gIC8vIFJlZ0V4IGFkanVzdGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2picmFudGx5L3lhYmJsZS9ibG9iL21hc3Rlci9saWIveWFiYmxlLmpzI0wzMzlcbiAgdmFyIGNqc1JlcXVpcmVSZWdFeCA9IC8oPzpeXFx1RkVGRj98W14kX2EtekEtWlxceEEwLVxcdUZGRkYuXCInXSlyZXF1aXJlXFxzKlxcKFxccyooXCJbXlwiXFxcXF0qKD86XFxcXC5bXlwiXFxcXF0qKSpcInwnW14nXFxcXF0qKD86XFxcXC5bXidcXFxcXSopKicpXFxzKlxcKS9nO1xuICB2YXIgY29tbWVudFJlZ0V4ID0gLyhefFteXFxcXF0pKFxcL1xcKihbXFxzXFxTXSo/KVxcKlxcL3woW146XXxeKVxcL1xcLyguKikkKS9tZztcblxuICB2YXIgc3RyaW5nUmVnRXggPSAvKFwiW15cIlxcXFxcXG5cXHJdKihcXFxcLlteXCJcXFxcXFxuXFxyXSopKlwifCdbXidcXFxcXFxuXFxyXSooXFxcXC5bXidcXFxcXFxuXFxyXSopKicpL2c7XG5cbiAgLy8gdXNlZCB0byBzdXBwb3J0IGxlYWRpbmcgIyEvdXNyL2Jpbi9lbnYgaW4gc2NyaXB0cyBhcyBzdXBwb3J0ZWQgaW4gTm9kZVxuICB2YXIgaGFzaEJhbmdSZWdFeCA9IC9eXFwjXFwhLiovO1xuXG4gIGZ1bmN0aW9uIGdldENKU0RlcHMoc291cmNlKSB7XG4gICAgY2pzUmVxdWlyZVJlZ0V4Lmxhc3RJbmRleCA9IGNvbW1lbnRSZWdFeC5sYXN0SW5kZXggPSBzdHJpbmdSZWdFeC5sYXN0SW5kZXggPSAwO1xuXG4gICAgdmFyIGRlcHMgPSBbXTtcblxuICAgIHZhciBtYXRjaDtcblxuICAgIC8vIHRyYWNrIHN0cmluZyBhbmQgY29tbWVudCBsb2NhdGlvbnMgZm9yIHVubWluaWZpZWQgc291cmNlICAgIFxuICAgIHZhciBzdHJpbmdMb2NhdGlvbnMgPSBbXSwgY29tbWVudExvY2F0aW9ucyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gaW5Mb2NhdGlvbihsb2NhdGlvbnMsIG1hdGNoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKGxvY2F0aW9uc1tpXVswXSA8IG1hdGNoLmluZGV4ICYmIGxvY2F0aW9uc1tpXVsxXSA+IG1hdGNoLmluZGV4KVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzb3VyY2UubGVuZ3RoIC8gc291cmNlLnNwbGl0KCdcXG4nKS5sZW5ndGggPCAyMDApIHtcbiAgICAgIHdoaWxlIChtYXRjaCA9IHN0cmluZ1JlZ0V4LmV4ZWMoc291cmNlKSlcbiAgICAgICAgc3RyaW5nTG9jYXRpb25zLnB1c2goW21hdGNoLmluZGV4LCBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aF0pO1xuXG4gICAgICAvLyBUT0RPOiB0cmFjayB0ZW1wbGF0ZSBsaXRlcmFscyBoZXJlIGJlZm9yZSBjb21tZW50c1xuICAgICAgXG4gICAgICB3aGlsZSAobWF0Y2ggPSBjb21tZW50UmVnRXguZXhlYyhzb3VyY2UpKSB7XG4gICAgICAgIC8vIG9ubHkgdHJhY2sgY29tbWVudHMgbm90IHN0YXJ0aW5nIGluIHN0cmluZ3NcbiAgICAgICAgaWYgKCFpbkxvY2F0aW9uKHN0cmluZ0xvY2F0aW9ucywgbWF0Y2gpKVxuICAgICAgICAgIGNvbW1lbnRMb2NhdGlvbnMucHVzaChbbWF0Y2guaW5kZXggKyBtYXRjaFsxXS5sZW5ndGgsIG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoIC0gMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHdoaWxlIChtYXRjaCA9IGNqc1JlcXVpcmVSZWdFeC5leGVjKHNvdXJjZSkpIHtcbiAgICAgIC8vIGVuc3VyZSB3ZSdyZSBub3Qgd2l0aGluIGEgc3RyaW5nIG9yIGNvbW1lbnQgbG9jYXRpb25cbiAgICAgIGlmICghaW5Mb2NhdGlvbihzdHJpbmdMb2NhdGlvbnMsIG1hdGNoKSAmJiAhaW5Mb2NhdGlvbihjb21tZW50TG9jYXRpb25zLCBtYXRjaCkpIHtcbiAgICAgICAgdmFyIGRlcCA9IG1hdGNoWzFdLnN1YnN0cigxLCBtYXRjaFsxXS5sZW5ndGggLSAyKTtcbiAgICAgICAgLy8gc2tpcCBjYXNlcyBsaWtlIHJlcXVpcmUoJ1wiICsgZmlsZSArIFwiJylcbiAgICAgICAgaWYgKGRlcC5tYXRjaCgvXCJ8Jy8pKVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAvLyB0cmFpbGluZyBzbGFzaCByZXF1aXJlcyBhcmUgcmVtb3ZlZCBhcyB0aGV5IGRvbid0IG1hcCBtYWlucyBpbiBTeXN0ZW1KU1xuICAgICAgICBpZiAoZGVwW2RlcC5sZW5ndGggLSAxXSA9PSAnLycpXG4gICAgICAgICAgZGVwID0gZGVwLnN1YnN0cigwLCBkZXAubGVuZ3RoIC0gMSk7XG4gICAgICAgIGRlcHMucHVzaChkZXApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkZXBzO1xuICB9XG5cbiAgaG9vaygnaW5zdGFudGlhdGUnLCBmdW5jdGlvbihpbnN0YW50aWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIGlmICghbG9hZC5tZXRhZGF0YS5mb3JtYXQpIHtcbiAgICAgICAgY2pzRXhwb3J0c1JlZ0V4Lmxhc3RJbmRleCA9IDA7XG4gICAgICAgIGNqc1JlcXVpcmVSZWdFeC5sYXN0SW5kZXggPSAwO1xuICAgICAgICBpZiAoY2pzUmVxdWlyZVJlZ0V4LmV4ZWMobG9hZC5zb3VyY2UpIHx8IGNqc0V4cG9ydHNSZWdFeC5leGVjKGxvYWQuc291cmNlKSlcbiAgICAgICAgICBsb2FkLm1ldGFkYXRhLmZvcm1hdCA9ICdjanMnO1xuICAgICAgfVxuXG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2NqcycpIHtcbiAgICAgICAgdmFyIG1ldGFEZXBzID0gbG9hZC5tZXRhZGF0YS5kZXBzO1xuICAgICAgICB2YXIgZGVwcyA9IGxvYWQubWV0YWRhdGEuY2pzUmVxdWlyZURldGVjdGlvbiA9PT0gZmFsc2UgPyBbXSA6IGdldENKU0RlcHMobG9hZC5zb3VyY2UpO1xuXG4gICAgICAgIGZvciAodmFyIGcgaW4gbG9hZC5tZXRhZGF0YS5nbG9iYWxzKVxuICAgICAgICAgIGlmIChsb2FkLm1ldGFkYXRhLmdsb2JhbHNbZ10pXG4gICAgICAgICAgICBkZXBzLnB1c2gobG9hZC5tZXRhZGF0YS5nbG9iYWxzW2ddKTtcblxuICAgICAgICB2YXIgZW50cnkgPSBjcmVhdGVFbnRyeSgpO1xuXG4gICAgICAgIGxvYWQubWV0YWRhdGEuZW50cnkgPSBlbnRyeTtcblxuICAgICAgICBlbnRyeS5kZXBzID0gZGVwcztcbiAgICAgICAgZW50cnkuZXhlY3V0aW5nUmVxdWlyZSA9IHRydWU7XG4gICAgICAgIGVudHJ5LmV4ZWN1dGUgPSBmdW5jdGlvbihfcmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgICAgICAgZnVuY3Rpb24gcmVxdWlyZShuYW1lKSB7XG4gICAgICAgICAgICBpZiAobmFtZVtuYW1lLmxlbmd0aCAtIDFdID09ICcvJylcbiAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKDAsIG5hbWUubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gX3JlcXVpcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVxdWlyZS5yZXNvbHZlID0gZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGxvYWRlci5nZXQoJ0BAY2pzLWhlbHBlcnMnKS5yZXF1aXJlUmVzb2x2ZShuYW1lLCBtb2R1bGUuaWQpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gc3VwcG9ydCBtb2R1bGUucGF0aHMgaXNoXG4gICAgICAgICAgbW9kdWxlLnBhdGhzID0gW107XG4gICAgICAgICAgbW9kdWxlLnJlcXVpcmUgPSBfcmVxdWlyZTtcblxuICAgICAgICAgIC8vIGVuc3VyZSBtZXRhIGRlcHMgZXhlY3V0ZSBmaXJzdFxuICAgICAgICAgIGlmICghbG9hZC5tZXRhZGF0YS5janNEZWZlckRlcHNFeGVjdXRlKVxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhRGVwcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgcmVxdWlyZShtZXRhRGVwc1tpXSk7XG5cbiAgICAgICAgICB2YXIgcGF0aFZhcnMgPSBsb2FkZXIuZ2V0KCdAQGNqcy1oZWxwZXJzJykuZ2V0UGF0aFZhcnMobW9kdWxlLmlkKTtcbiAgICAgICAgICB2YXIgX19janNXcmFwcGVyID0ge1xuICAgICAgICAgICAgZXhwb3J0czogZXhwb3J0cyxcbiAgICAgICAgICAgIGFyZ3M6IFtyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUsIHBhdGhWYXJzLmZpbGVuYW1lLCBwYXRoVmFycy5kaXJuYW1lLCBfX2dsb2JhbCwgX19nbG9iYWxdXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHZhciBjanNXcmFwcGVyID0gXCIoZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlLCBfX2ZpbGVuYW1lLCBfX2Rpcm5hbWUsIGdsb2JhbCwgR0xPQkFMXCI7XG5cbiAgICAgICAgICAvLyBhZGQgbWV0YWRhdGEuZ2xvYmFscyB0byB0aGUgd3JhcHBlciBhcmd1bWVudHNcbiAgICAgICAgICBpZiAobG9hZC5tZXRhZGF0YS5nbG9iYWxzKVxuICAgICAgICAgICAgZm9yICh2YXIgZyBpbiBsb2FkLm1ldGFkYXRhLmdsb2JhbHMpIHtcbiAgICAgICAgICAgICAgX19janNXcmFwcGVyLmFyZ3MucHVzaChyZXF1aXJlKGxvYWQubWV0YWRhdGEuZ2xvYmFsc1tnXSkpO1xuICAgICAgICAgICAgICBjanNXcmFwcGVyICs9IFwiLCBcIiArIGc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkaXNhYmxlIEFNRCBkZXRlY3Rpb25cbiAgICAgICAgICB2YXIgZGVmaW5lID0gX19nbG9iYWwuZGVmaW5lO1xuICAgICAgICAgIF9fZ2xvYmFsLmRlZmluZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICBfX2dsb2JhbC5fX2Nqc1dyYXBwZXIgPSBfX2Nqc1dyYXBwZXI7XG5cbiAgICAgICAgICBsb2FkLnNvdXJjZSA9IGNqc1dyYXBwZXIgKyBcIikge1wiICsgbG9hZC5zb3VyY2UucmVwbGFjZShoYXNoQmFuZ1JlZ0V4LCAnJykgKyBcIlxcbn0pLmFwcGx5KF9fY2pzV3JhcHBlci5leHBvcnRzLCBfX2Nqc1dyYXBwZXIuYXJncyk7XCI7XG5cbiAgICAgICAgICBfX2V4ZWMuY2FsbChsb2FkZXIsIGxvYWQpO1xuXG4gICAgICAgICAgX19nbG9iYWwuX19janNXcmFwcGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF9fZ2xvYmFsLmRlZmluZSA9IGRlZmluZTtcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbnRpYXRlLmNhbGwobG9hZGVyLCBsb2FkKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG5ob29rQ29uc3RydWN0b3IoZnVuY3Rpb24oY29uc3RydWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgIGNvbnN0cnVjdG9yLmNhbGwobG9hZGVyKTtcblxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPSAndW5kZWZpbmVkJyAmJiB3aW5kb3cubG9jYXRpb24pXG4gICAgICB2YXIgd2luZG93T3JpZ2luID0gbG9jYXRpb24ucHJvdG9jb2wgKyAnLy8nICsgbG9jYXRpb24uaG9zdG5hbWUgKyAobG9jYXRpb24ucG9ydCA/ICc6JyArIGxvY2F0aW9uLnBvcnQgOiAnJyk7XG5cbiAgICBmdW5jdGlvbiBzdHJpcE9yaWdpbihwYXRoKSB7XG4gICAgICBpZiAocGF0aC5zdWJzdHIoMCwgOCkgPT0gJ2ZpbGU6Ly8vJylcbiAgICAgICAgcmV0dXJuIHBhdGguc3Vic3RyKDcgKyAhIWlzV2luZG93cyk7XG4gICAgICBcbiAgICAgIGlmICh3aW5kb3dPcmlnaW4gJiYgcGF0aC5zdWJzdHIoMCwgd2luZG93T3JpZ2luLmxlbmd0aCkgPT0gd2luZG93T3JpZ2luKVxuICAgICAgICByZXR1cm4gcGF0aC5zdWJzdHIod2luZG93T3JpZ2luLmxlbmd0aCk7XG5cbiAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cblxuICAgIGxvYWRlci5zZXQoJ0BAY2pzLWhlbHBlcnMnLCBsb2FkZXIubmV3TW9kdWxlKHtcbiAgICAgIHJlcXVpcmVSZXNvbHZlOiBmdW5jdGlvbihyZXF1ZXN0LCBwYXJlbnRJZCkge1xuICAgICAgICByZXR1cm4gc3RyaXBPcmlnaW4obG9hZGVyLm5vcm1hbGl6ZVN5bmMocmVxdWVzdCwgcGFyZW50SWQpKTtcbiAgICAgIH0sXG4gICAgICBnZXRQYXRoVmFyczogZnVuY3Rpb24obW9kdWxlSWQpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGFueSBwbHVnaW4gc3ludGF4XG4gICAgICAgIHZhciBwbHVnaW5JbmRleCA9IG1vZHVsZUlkLmxhc3RJbmRleE9mKCchJyk7XG4gICAgICAgIHZhciBmaWxlbmFtZTtcbiAgICAgICAgaWYgKHBsdWdpbkluZGV4ICE9IC0xKVxuICAgICAgICAgIGZpbGVuYW1lID0gbW9kdWxlSWQuc3Vic3RyKDAsIHBsdWdpbkluZGV4KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGZpbGVuYW1lID0gbW9kdWxlSWQ7XG5cbiAgICAgICAgdmFyIGRpcm5hbWUgPSBmaWxlbmFtZS5zcGxpdCgnLycpO1xuICAgICAgICBkaXJuYW1lLnBvcCgpO1xuICAgICAgICBkaXJuYW1lID0gZGlybmFtZS5qb2luKCcvJyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBmaWxlbmFtZTogc3RyaXBPcmlnaW4oZmlsZW5hbWUpLFxuICAgICAgICAgIGRpcm5hbWU6IHN0cmlwT3JpZ2luKGRpcm5hbWUpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSkpXG4gIH07XG59KTsvKlxuICogQU1EIEhlbHBlciBmdW5jdGlvbiBtb2R1bGVcbiAqIFNlcGFyYXRlZCBpbnRvIGl0cyBvd24gZmlsZSBhcyB0aGlzIGlzIHRoZSBwYXJ0IG5lZWRlZCBmb3IgZnVsbCBBTUQgc3VwcG9ydCBpbiBTRlggYnVpbGRzXG4gKiBOQiBzaW5jZSBpbXBsZW1lbnRhdGlvbnMgaGF2ZSBub3cgZGl2ZXJnZWQgdGhpcyBjYW4gYmUgbWVyZ2VkIGJhY2sgd2l0aCBhbWQuanNcbiAqL1xuXG5ob29rKCdmZXRjaCcsIGZ1bmN0aW9uKGZldGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgLy8gc2NyaXB0IGxvYWQgaW1wbGllcyBkZWZpbmUgZ2xvYmFsIGxlYWtcbiAgICBpZiAobG9hZC5tZXRhZGF0YS5zY3JpcHRMb2FkICYmIGlzQnJvd3NlcilcbiAgICAgIF9fZ2xvYmFsLmRlZmluZSA9IHRoaXMuYW1kRGVmaW5lO1xuICAgIHJldHVybiBmZXRjaC5jYWxsKHRoaXMsIGxvYWQpO1xuICB9O1xufSk7XG4gXG5ob29rQ29uc3RydWN0b3IoZnVuY3Rpb24oY29uc3RydWN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuICAgIGNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG5cbiAgICB2YXIgY29tbWVudFJlZ0V4ID0gLyhcXC9cXCooW1xcc1xcU10qPylcXCpcXC98KFteOl18XilcXC9cXC8oLiopJCkvbWc7XG4gICAgdmFyIGNqc1JlcXVpcmVQcmUgPSBcIig/Ol58W14kX2EtekEtWlxcXFx4QTAtXFxcXHVGRkZGLl0pXCI7XG4gICAgdmFyIGNqc1JlcXVpcmVQb3N0ID0gXCJcXFxccypcXFxcKFxcXFxzKihcXFwiKFteXFxcIl0rKVxcXCJ8JyhbXiddKyknKVxcXFxzKlxcXFwpXCI7XG4gICAgdmFyIGZuQnJhY2tldFJlZ0V4ID0gL1xcKChbXlxcKV0qKVxcKS87XG4gICAgdmFyIHdzUmVnRXggPSAvXlxccyt8XFxzKyQvZztcbiAgICBcbiAgICB2YXIgcmVxdWlyZVJlZ0V4cyA9IHt9O1xuXG4gICAgZnVuY3Rpb24gZ2V0Q0pTRGVwcyhzb3VyY2UsIHJlcXVpcmVJbmRleCkge1xuXG4gICAgICAvLyByZW1vdmUgY29tbWVudHNcbiAgICAgIHNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKGNvbW1lbnRSZWdFeCwgJycpO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHJlcXVpcmUgYWxpYXNcbiAgICAgIHZhciBwYXJhbXMgPSBzb3VyY2UubWF0Y2goZm5CcmFja2V0UmVnRXgpO1xuICAgICAgdmFyIHJlcXVpcmVBbGlhcyA9IChwYXJhbXNbMV0uc3BsaXQoJywnKVtyZXF1aXJlSW5kZXhdIHx8ICdyZXF1aXJlJykucmVwbGFjZSh3c1JlZ0V4LCAnJyk7XG5cbiAgICAgIC8vIGZpbmQgb3IgZ2VuZXJhdGUgdGhlIHJlZ2V4IGZvciB0aGlzIHJlcXVpcmVBbGlhc1xuICAgICAgdmFyIHJlcXVpcmVSZWdFeCA9IHJlcXVpcmVSZWdFeHNbcmVxdWlyZUFsaWFzXSB8fCAocmVxdWlyZVJlZ0V4c1tyZXF1aXJlQWxpYXNdID0gbmV3IFJlZ0V4cChjanNSZXF1aXJlUHJlICsgcmVxdWlyZUFsaWFzICsgY2pzUmVxdWlyZVBvc3QsICdnJykpO1xuXG4gICAgICByZXF1aXJlUmVnRXgubGFzdEluZGV4ID0gMDtcblxuICAgICAgdmFyIGRlcHMgPSBbXTtcblxuICAgICAgdmFyIG1hdGNoO1xuICAgICAgd2hpbGUgKG1hdGNoID0gcmVxdWlyZVJlZ0V4LmV4ZWMoc291cmNlKSlcbiAgICAgICAgZGVwcy5wdXNoKG1hdGNoWzJdIHx8IG1hdGNoWzNdKTtcblxuICAgICAgcmV0dXJuIGRlcHM7XG4gICAgfVxuXG4gICAgLypcbiAgICAgIEFNRC1jb21wYXRpYmxlIHJlcXVpcmVcbiAgICAgIFRvIGNvcHkgUmVxdWlyZUpTLCBzZXQgd2luZG93LnJlcXVpcmUgPSB3aW5kb3cucmVxdWlyZWpzID0gbG9hZGVyLmFtZFJlcXVpcmVcbiAgICAqL1xuICAgIGZ1bmN0aW9uIHJlcXVpcmUobmFtZXMsIGNhbGxiYWNrLCBlcnJiYWNrLCByZWZlcmVyKSB7XG4gICAgICAvLyBpbiBhbWQsIGZpcnN0IGFyZyBjYW4gYmUgYSBjb25maWcgb2JqZWN0Li4uIHdlIGp1c3QgaWdub3JlXG4gICAgICBpZiAodHlwZW9mIG5hbWVzID09ICdvYmplY3QnICYmICEobmFtZXMgaW5zdGFuY2VvZiBBcnJheSkpXG4gICAgICAgIHJldHVybiByZXF1aXJlLmFwcGx5KG51bGwsIEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsIDEsIGFyZ3VtZW50cy5sZW5ndGggLSAxKSk7XG5cbiAgICAgIC8vIGFtZCByZXF1aXJlXG4gICAgICBpZiAodHlwZW9mIG5hbWVzID09ICdzdHJpbmcnICYmIHR5cGVvZiBjYWxsYmFjayA9PSAnZnVuY3Rpb24nKVxuICAgICAgICBuYW1lcyA9IFtuYW1lc107XG4gICAgICBpZiAobmFtZXMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB2YXIgZHluYW1pY1JlcXVpcmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgZHluYW1pY1JlcXVpcmVzLnB1c2gobG9hZGVyWydpbXBvcnQnXShuYW1lc1tpXSwgcmVmZXJlcikpO1xuICAgICAgICBQcm9taXNlLmFsbChkeW5hbWljUmVxdWlyZXMpLnRoZW4oZnVuY3Rpb24obW9kdWxlcykge1xuICAgICAgICAgIGlmIChjYWxsYmFjaylcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIG1vZHVsZXMpO1xuICAgICAgICB9LCBlcnJiYWNrKTtcbiAgICAgIH1cblxuICAgICAgLy8gY29tbW9uanMgcmVxdWlyZVxuICAgICAgZWxzZSBpZiAodHlwZW9mIG5hbWVzID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhciBkZWZhdWx0SlNFeHRlbnNpb24gPSBsb2FkZXIuZGVmYXVsdEpTRXh0ZW5zaW9ucyAmJiBuYW1lcy5zdWJzdHIobmFtZXMubGVuZ3RoIC0gMywgMykgIT0gJy5qcyc7XG4gICAgICAgIHZhciBub3JtYWxpemVkID0gbG9hZGVyLmRlY2Fub25pY2FsaXplKG5hbWVzLCByZWZlcmVyKTtcbiAgICAgICAgaWYgKGRlZmF1bHRKU0V4dGVuc2lvbiAmJiBub3JtYWxpemVkLnN1YnN0cihub3JtYWxpemVkLmxlbmd0aCAtIDMsIDMpID09ICcuanMnKVxuICAgICAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkLnN1YnN0cigwLCBub3JtYWxpemVkLmxlbmd0aCAtIDMpO1xuICAgICAgICB2YXIgbW9kdWxlID0gbG9hZGVyLmdldChub3JtYWxpemVkKTtcbiAgICAgICAgaWYgKCFtb2R1bGUpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2R1bGUgbm90IGFscmVhZHkgbG9hZGVkIGxvYWRpbmcgXCInICsgbmFtZXMgKyAnXCIgYXMgJyArIG5vcm1hbGl6ZWQgKyAocmVmZXJlciA/ICcgZnJvbSBcIicgKyByZWZlcmVyICsgJ1wiLicgOiAnLicpKTtcbiAgICAgICAgcmV0dXJuIG1vZHVsZS5fX3VzZURlZmF1bHQgPyBtb2R1bGVbJ2RlZmF1bHQnXSA6IG1vZHVsZTtcbiAgICAgIH1cblxuICAgICAgZWxzZVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIHJlcXVpcmUnKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBkZWZpbmUobmFtZSwgZGVwcywgZmFjdG9yeSkge1xuICAgICAgaWYgKHR5cGVvZiBuYW1lICE9ICdzdHJpbmcnKSB7XG4gICAgICAgIGZhY3RvcnkgPSBkZXBzO1xuICAgICAgICBkZXBzID0gbmFtZTtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoIShkZXBzIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgIGZhY3RvcnkgPSBkZXBzO1xuICAgICAgICBkZXBzID0gWydyZXF1aXJlJywgJ2V4cG9ydHMnLCAnbW9kdWxlJ10uc3BsaWNlKDAsIGZhY3RvcnkubGVuZ3RoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBmYWN0b3J5ICE9ICdmdW5jdGlvbicpXG4gICAgICAgIGZhY3RvcnkgPSAoZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhY3Rvcnk7IH1cbiAgICAgICAgfSkoZmFjdG9yeSk7XG5cbiAgICAgIC8vIGluIElFOCwgYSB0cmFpbGluZyBjb21tYSBiZWNvbWVzIGEgdHJhaWxpbmcgdW5kZWZpbmVkIGVudHJ5XG4gICAgICBpZiAoZGVwc1tkZXBzLmxlbmd0aCAtIDFdID09PSB1bmRlZmluZWQpXG4gICAgICAgIGRlcHMucG9wKCk7XG5cbiAgICAgIC8vIHJlbW92ZSBzeXN0ZW0gZGVwZW5kZW5jaWVzXG4gICAgICB2YXIgcmVxdWlyZUluZGV4LCBleHBvcnRzSW5kZXgsIG1vZHVsZUluZGV4O1xuICAgICAgXG4gICAgICBpZiAoKHJlcXVpcmVJbmRleCA9IGluZGV4T2YuY2FsbChkZXBzLCAncmVxdWlyZScpKSAhPSAtMSkge1xuICAgICAgICBcbiAgICAgICAgZGVwcy5zcGxpY2UocmVxdWlyZUluZGV4LCAxKTtcblxuICAgICAgICAvLyBvbmx5IHRyYWNlIGNqcyByZXF1aXJlcyBmb3Igbm9uLW5hbWVkXG4gICAgICAgIC8vIG5hbWVkIGRlZmluZXMgYXNzdW1lIHRoZSB0cmFjZSBoYXMgYWxyZWFkeSBiZWVuIGRvbmVcbiAgICAgICAgaWYgKCFuYW1lKVxuICAgICAgICAgIGRlcHMgPSBkZXBzLmNvbmNhdChnZXRDSlNEZXBzKGZhY3RvcnkudG9TdHJpbmcoKSwgcmVxdWlyZUluZGV4KSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgoZXhwb3J0c0luZGV4ID0gaW5kZXhPZi5jYWxsKGRlcHMsICdleHBvcnRzJykpICE9IC0xKVxuICAgICAgICBkZXBzLnNwbGljZShleHBvcnRzSW5kZXgsIDEpO1xuICAgICAgXG4gICAgICBpZiAoKG1vZHVsZUluZGV4ID0gaW5kZXhPZi5jYWxsKGRlcHMsICdtb2R1bGUnKSkgIT0gLTEpXG4gICAgICAgIGRlcHMuc3BsaWNlKG1vZHVsZUluZGV4LCAxKTtcblxuICAgICAgZnVuY3Rpb24gZXhlY3V0ZShyZXEsIGV4cG9ydHMsIG1vZHVsZSkge1xuICAgICAgICB2YXIgZGVwVmFsdWVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICBkZXBWYWx1ZXMucHVzaChyZXEoZGVwc1tpXSkpO1xuXG4gICAgICAgIG1vZHVsZS51cmkgPSBtb2R1bGUuaWQ7XG5cbiAgICAgICAgbW9kdWxlLmNvbmZpZyA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAgICAgLy8gYWRkIGJhY2sgaW4gc3lzdGVtIGRlcGVuZGVuY2llc1xuICAgICAgICBpZiAobW9kdWxlSW5kZXggIT0gLTEpXG4gICAgICAgICAgZGVwVmFsdWVzLnNwbGljZShtb2R1bGVJbmRleCwgMCwgbW9kdWxlKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleHBvcnRzSW5kZXggIT0gLTEpXG4gICAgICAgICAgZGVwVmFsdWVzLnNwbGljZShleHBvcnRzSW5kZXgsIDAsIGV4cG9ydHMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlcXVpcmVJbmRleCAhPSAtMSkge1xuICAgICAgICAgIGZ1bmN0aW9uIGNvbnRleHR1YWxSZXF1aXJlKG5hbWVzLCBjYWxsYmFjaywgZXJyYmFjaykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lcyA9PSAnc3RyaW5nJyAmJiB0eXBlb2YgY2FsbGJhY2sgIT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcShuYW1lcyk7XG4gICAgICAgICAgICByZXR1cm4gcmVxdWlyZS5jYWxsKGxvYWRlciwgbmFtZXMsIGNhbGxiYWNrLCBlcnJiYWNrLCBtb2R1bGUuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZXh0dWFsUmVxdWlyZS50b1VybCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSB3aXRob3V0IGRlZmF1bHRKU0V4dGVuc2lvbnNcbiAgICAgICAgICAgIHZhciBkZWZhdWx0SlNFeHRlbnNpb24gPSBsb2FkZXIuZGVmYXVsdEpTRXh0ZW5zaW9ucyAmJiBuYW1lLnN1YnN0cihuYW1lLmxlbmd0aCAtIDMsIDMpICE9ICcuanMnO1xuICAgICAgICAgICAgdmFyIHVybCA9IGxvYWRlci5kZWNhbm9uaWNhbGl6ZShuYW1lLCBtb2R1bGUuaWQpO1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRKU0V4dGVuc2lvbiAmJiB1cmwuc3Vic3RyKHVybC5sZW5ndGggLSAzLCAzKSA9PSAnLmpzJylcbiAgICAgICAgICAgICAgdXJsID0gdXJsLnN1YnN0cigwLCB1cmwubGVuZ3RoIC0gMyk7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZGVwVmFsdWVzLnNwbGljZShyZXF1aXJlSW5kZXgsIDAsIGNvbnRleHR1YWxSZXF1aXJlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCBnbG9iYWwgcmVxdWlyZSB0byBBTUQgcmVxdWlyZVxuICAgICAgICB2YXIgY3VyUmVxdWlyZSA9IF9fZ2xvYmFsLnJlcXVpcmU7XG4gICAgICAgIF9fZ2xvYmFsLnJlcXVpcmUgPSByZXF1aXJlO1xuXG4gICAgICAgIHZhciBvdXRwdXQgPSBmYWN0b3J5LmFwcGx5KGV4cG9ydHNJbmRleCA9PSAtMSA/IF9fZ2xvYmFsIDogZXhwb3J0cywgZGVwVmFsdWVzKTtcblxuICAgICAgICBfX2dsb2JhbC5yZXF1aXJlID0gY3VyUmVxdWlyZTtcblxuICAgICAgICBpZiAodHlwZW9mIG91dHB1dCA9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUpXG4gICAgICAgICAgb3V0cHV0ID0gbW9kdWxlLmV4cG9ydHM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvdXRwdXQgIT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgIH1cblxuICAgICAgdmFyIGVudHJ5ID0gY3JlYXRlRW50cnkoKTtcbiAgICAgIGVudHJ5Lm5hbWUgPSBuYW1lICYmIChsb2FkZXIuZGVjYW5vbmljYWxpemUgfHwgbG9hZGVyLm5vcm1hbGl6ZSkuY2FsbChsb2FkZXIsIG5hbWUpO1xuICAgICAgZW50cnkuZGVwcyA9IGRlcHM7XG4gICAgICBlbnRyeS5leGVjdXRlID0gZXhlY3V0ZTtcblxuICAgICAgbG9hZGVyLnB1c2hSZWdpc3Rlcl8oe1xuICAgICAgICBhbWQ6IHRydWUsXG4gICAgICAgIGVudHJ5OiBlbnRyeVxuICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmluZS5hbWQgPSB7fTtcblxuICAgIC8vIHJlZHVjdGlvbiBmdW5jdGlvbiB0byBhdHRhY2ggZGVmaW5lcyB0byBhIGxvYWQgcmVjb3JkXG4gICAgaG9vaygncmVkdWNlUmVnaXN0ZXJfJywgZnVuY3Rpb24ocmVkdWNlUmVnaXN0ZXIpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihsb2FkLCByZWdpc3Rlcikge1xuICAgICAgICAvLyBvbmx5IGhhbmRsZSBBTUQgcmVnaXN0ZXJzIGhlcmVcbiAgICAgICAgaWYgKCFyZWdpc3RlciB8fCAhcmVnaXN0ZXIuYW1kKVxuICAgICAgICAgIHJldHVybiByZWR1Y2VSZWdpc3Rlci5jYWxsKHRoaXMsIGxvYWQsIHJlZ2lzdGVyKTtcblxuICAgICAgICB2YXIgY3VyTWV0YSA9IGxvYWQgJiYgbG9hZC5tZXRhZGF0YTtcbiAgICAgICAgdmFyIGVudHJ5ID0gcmVnaXN0ZXIuZW50cnk7XG5cbiAgICAgICAgaWYgKGN1ck1ldGEpIHtcbiAgICAgICAgICBpZiAoIWN1ck1ldGEuZm9ybWF0IHx8IGN1ck1ldGEuZm9ybWF0ID09ICdkZXRlY3QnKVxuICAgICAgICAgICAgY3VyTWV0YS5mb3JtYXQgPSAnYW1kJztcbiAgICAgICAgICBlbHNlIGlmICghZW50cnkubmFtZSAmJiBjdXJNZXRhLmZvcm1hdCAhPSAnYW1kJylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQU1EIGRlZmluZSBjYWxsZWQgd2hpbGUgZXhlY3V0aW5nICcgKyBjdXJNZXRhLmZvcm1hdCArICcgbW9kdWxlICcgKyBsb2FkLm5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gYW5vbnltb3VzIGRlZmluZVxuICAgICAgICBpZiAoIWVudHJ5Lm5hbWUpIHtcbiAgICAgICAgICBpZiAoIWN1ck1ldGEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmV4cGVjdGVkIGFub255bW91cyBBTUQgZGVmaW5lLicpO1xuXG4gICAgICAgICAgaWYgKGN1ck1ldGEuZW50cnkgJiYgIWN1ck1ldGEuZW50cnkubmFtZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVsdGlwbGUgYW5vbnltb3VzIGRlZmluZXMgaW4gbW9kdWxlICcgKyBsb2FkLm5hbWUpO1xuICAgICAgICAgIFxuICAgICAgICAgIGN1ck1ldGEuZW50cnkgPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICAvLyBuYW1lZCBkZWZpbmVcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgLy8gaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgZGVmaW5lcywgXG4gICAgICAgICAgLy8gdGhlbiBsZXQgdGhpcyBiZSBhbiBhbm9ueW1vdXMgZGVmaW5lXG4gICAgICAgICAgLy8gdGhpcyBpcyBqdXN0IHRvIHN1cHBvcnQgc2luZ2xlIG1vZHVsZXMgb2YgdGhlIGZvcm06XG4gICAgICAgICAgLy8gZGVmaW5lKCdqcXVlcnknKVxuICAgICAgICAgIC8vIHN0aWxsIGxvYWRpbmcgYW5vbnltb3VzbHlcbiAgICAgICAgICAvLyBiZWNhdXNlIGl0IGlzIGRvbmUgd2lkZWx5IGVub3VnaCB0byBiZSB1c2VmdWxcbiAgICAgICAgICAvLyBhcyBzb29uIGFzIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgZGVmaW5lLCB0aGlzIGdldHMgcmVtb3ZlZCB0aG91Z2hcbiAgICAgICAgICBpZiAoY3VyTWV0YSkge1xuICAgICAgICAgICAgaWYgKCFjdXJNZXRhLmVudHJ5ICYmICFjdXJNZXRhLmJ1bmRsZSlcbiAgICAgICAgICAgICAgY3VyTWV0YS5lbnRyeSA9IGVudHJ5O1xuICAgICAgICAgICAgZWxzZSBpZiAoY3VyTWV0YS5lbnRyeSAmJiBjdXJNZXRhLmVudHJ5Lm5hbWUpXG4gICAgICAgICAgICAgIGN1ck1ldGEuZW50cnkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIC8vIG5vdGUgdGhpcyBpcyBub3cgYSBidW5kbGVcbiAgICAgICAgICAgIGN1ck1ldGEuYnVuZGxlID0gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBkZWZpbmUgdGhlIG1vZHVsZSB0aHJvdWdoIHRoZSByZWdpc3RlciByZWdpc3RyeVxuICAgICAgICAgIGlmICghKGVudHJ5Lm5hbWUgaW4gdGhpcy5kZWZpbmVkKSlcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lZFtlbnRyeS5uYW1lXSA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgbG9hZGVyLmFtZERlZmluZSA9IGRlZmluZTtcbiAgICBsb2FkZXIuYW1kUmVxdWlyZSA9IHJlcXVpcmU7XG4gIH07XG59KTsvKlxuICBTeXN0ZW1KUyBBTUQgRm9ybWF0XG4qL1xuKGZ1bmN0aW9uKCkge1xuICAvLyBBTUQgTW9kdWxlIEZvcm1hdCBEZXRlY3Rpb24gUmVnRXhcbiAgLy8gZGVmaW5lKFsuLiwgLi4sIC4uXSwgLi4uKVxuICAvLyBkZWZpbmUodmFyTmFtZSk7IHx8IGRlZmluZShmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzKSB7fSk7IHx8IGRlZmluZSh7fSlcbiAgdmFyIGFtZFJlZ0V4ID0gLyg/Ol5cXHVGRUZGP3xbXiRfYS16QS1aXFx4QTAtXFx1RkZGRi5dKWRlZmluZVxccypcXChcXHMqKFwiW15cIl0rXCJcXHMqLFxccyp8J1teJ10rJ1xccyosXFxzKik/XFxzKihcXFsoXFxzKigoXCJbXlwiXStcInwnW14nXSsnKVxccyosfFxcL1xcLy4qXFxyP1xcbnxcXC9cXCooLnxcXHMpKj9cXCpcXC8pKSooXFxzKihcIlteXCJdK1wifCdbXiddKycpXFxzKiw/KT8oXFxzKihcXC9cXC8uKlxccj9cXG58XFwvXFwqKC58XFxzKSo/XFwqXFwvKSkqXFxzKlxcXXxmdW5jdGlvblxccyp8e3xbXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKlxcKSkvO1xuXG4gIGhvb2soJ2luc3RhbnRpYXRlJywgZnVuY3Rpb24oaW5zdGFudGlhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG4gICAgICBcbiAgICAgIGlmIChsb2FkLm1ldGFkYXRhLmZvcm1hdCA9PSAnYW1kJyB8fCAhbG9hZC5tZXRhZGF0YS5mb3JtYXQgJiYgbG9hZC5zb3VyY2UubWF0Y2goYW1kUmVnRXgpKSB7XG4gICAgICAgIGxvYWQubWV0YWRhdGEuZm9ybWF0ID0gJ2FtZCc7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWxvYWRlci5idWlsZGVyICYmIGxvYWRlci5leGVjdXRlICE9PSBmYWxzZSkge1xuICAgICAgICAgIHZhciBjdXJEZWZpbmUgPSBfX2dsb2JhbC5kZWZpbmU7XG4gICAgICAgICAgX19nbG9iYWwuZGVmaW5lID0gdGhpcy5hbWREZWZpbmU7XG5cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgX19leGVjLmNhbGwobG9hZGVyLCBsb2FkKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBfX2dsb2JhbC5kZWZpbmUgPSBjdXJEZWZpbmU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFsb2FkLm1ldGFkYXRhLmVudHJ5ICYmICFsb2FkLm1ldGFkYXRhLmJ1bmRsZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FNRCBtb2R1bGUgJyArIGxvYWQubmFtZSArICcgZGlkIG5vdCBkZWZpbmUnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBsb2FkLm1ldGFkYXRhLmV4ZWN1dGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2FkLm1ldGFkYXRhLmJ1aWxkZXJFeGVjdXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaW5zdGFudGlhdGUuY2FsbChsb2FkZXIsIGxvYWQpO1xuICAgIH07XG4gIH0pO1xuXG59KSgpO1xuLypcbiAgU3lzdGVtSlMgTG9hZGVyIFBsdWdpbiBTdXBwb3J0XG5cbiAgU3VwcG9ydHMgcGx1Z2luIGxvYWRlciBzeW50YXggd2l0aCBcIiFcIiwgb3IgdmlhIG1ldGFkYXRhLmxvYWRlclxuXG4gIFRoZSBwbHVnaW4gbmFtZSBpcyBsb2FkZWQgYXMgYSBtb2R1bGUgaXRzZWxmLCBhbmQgY2FuIG92ZXJyaWRlIHN0YW5kYXJkIGxvYWRlciBob29rc1xuICBmb3IgdGhlIHBsdWdpbiByZXNvdXJjZS4gU2VlIHRoZSBwbHVnaW4gc2VjdGlvbiBvZiB0aGUgc3lzdGVtanMgcmVhZG1lLlxuKi9cblxuKGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBnZXRQYXJlbnROYW1lKGxvYWRlciwgcGFyZW50TmFtZSkge1xuICAgIC8vIGlmIHBhcmVudCBpcyBhIHBsdWdpbiwgbm9ybWFsaXplIGFnYWluc3QgdGhlIHBhcmVudCBwbHVnaW4gYXJndW1lbnQgb25seVxuICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICB2YXIgcGFyZW50UGx1Z2luSW5kZXg7XG4gICAgICBpZiAobG9hZGVyLnBsdWdpbkZpcnN0KSB7XG4gICAgICAgIGlmICgocGFyZW50UGx1Z2luSW5kZXggPSBwYXJlbnROYW1lLmxhc3RJbmRleE9mKCchJykpICE9IC0xKVxuICAgICAgICAgIHJldHVybiBwYXJlbnROYW1lLnN1YnN0cihwYXJlbnRQbHVnaW5JbmRleCArIDEpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICgocGFyZW50UGx1Z2luSW5kZXggPSBwYXJlbnROYW1lLmluZGV4T2YoJyEnKSkgIT0gLTEpXG4gICAgICAgICAgcmV0dXJuIHBhcmVudE5hbWUuc3Vic3RyKDAsIHBhcmVudFBsdWdpbkluZGV4KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBhcmVudE5hbWU7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VQbHVnaW4obG9hZGVyLCBuYW1lKSB7XG4gICAgdmFyIGFyZ3VtZW50TmFtZTtcbiAgICB2YXIgcGx1Z2luTmFtZTtcblxuICAgIHZhciBwbHVnaW5JbmRleCA9IG5hbWUubGFzdEluZGV4T2YoJyEnKTtcblxuICAgIGlmIChwbHVnaW5JbmRleCA9PSAtMSlcbiAgICAgIHJldHVybjtcblxuICAgIGlmIChsb2FkZXIucGx1Z2luRmlyc3QpIHtcbiAgICAgIGFyZ3VtZW50TmFtZSA9IG5hbWUuc3Vic3RyKHBsdWdpbkluZGV4ICsgMSk7XG4gICAgICBwbHVnaW5OYW1lID0gbmFtZS5zdWJzdHIoMCwgcGx1Z2luSW5kZXgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFyZ3VtZW50TmFtZSA9IG5hbWUuc3Vic3RyKDAsIHBsdWdpbkluZGV4KTtcbiAgICAgIHBsdWdpbk5hbWUgPSBuYW1lLnN1YnN0cihwbHVnaW5JbmRleCArIDEpIHx8IGFyZ3VtZW50TmFtZS5zdWJzdHIoYXJndW1lbnROYW1lLmxhc3RJbmRleE9mKCcuJykgKyAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgYXJndW1lbnQ6IGFyZ3VtZW50TmFtZSxcbiAgICAgIHBsdWdpbjogcGx1Z2luTmFtZVxuICAgIH07XG4gIH1cblxuICAvLyBwdXQgbmFtZSBiYWNrIHRvZ2V0aGVyIGFmdGVyIHBhcnRzIGhhdmUgYmVlbiBub3JtYWxpemVkXG4gIGZ1bmN0aW9uIGNvbWJpbmVQbHVnaW5QYXJ0cyhsb2FkZXIsIGFyZ3VtZW50TmFtZSwgcGx1Z2luTmFtZSwgZGVmYXVsdEV4dGVuc2lvbikge1xuICAgIGlmIChkZWZhdWx0RXh0ZW5zaW9uICYmIGFyZ3VtZW50TmFtZS5zdWJzdHIoYXJndW1lbnROYW1lLmxlbmd0aCAtIDMsIDMpID09ICcuanMnKVxuICAgICAgYXJndW1lbnROYW1lID0gYXJndW1lbnROYW1lLnN1YnN0cigwLCBhcmd1bWVudE5hbWUubGVuZ3RoIC0gMyk7XG5cbiAgICBpZiAobG9hZGVyLnBsdWdpbkZpcnN0KSB7XG4gICAgICByZXR1cm4gcGx1Z2luTmFtZSArICchJyArIGFyZ3VtZW50TmFtZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gYXJndW1lbnROYW1lICsgJyEnICsgcGx1Z2luTmFtZTtcbiAgICB9XG4gIH1cblxuICAvLyBub3RlIGlmIG5vcm1hbGl6ZSB3aWxsIGFkZCBhIGRlZmF1bHQganMgZXh0ZW5zaW9uXG4gIC8vIGlmIHNvLCByZW1vdmUgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAgLy8gdGhpcyBpcyBzdHJhbmdlIGFuZCBzdWNrcywgYnV0IHdpbGwgYmUgZGVwcmVjYXRlZFxuICBmdW5jdGlvbiBjaGVja0RlZmF1bHRFeHRlbnNpb24obG9hZGVyLCBhcmcpIHtcbiAgICByZXR1cm4gbG9hZGVyLmRlZmF1bHRKU0V4dGVuc2lvbnMgJiYgYXJnLnN1YnN0cihhcmcubGVuZ3RoIC0gMywgMykgIT0gJy5qcyc7IFxuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlTm9ybWFsaXplU3luYyhub3JtYWxpemVTeW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG5hbWUsIHBhcmVudE5hbWUsIGlzUGx1Z2luKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIFxuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlUGx1Z2luKGxvYWRlciwgbmFtZSk7XG4gICAgICBwYXJlbnROYW1lID0gZ2V0UGFyZW50TmFtZSh0aGlzLCBwYXJlbnROYW1lKTtcblxuICAgICAgaWYgKCFwYXJzZWQpXG4gICAgICAgIHJldHVybiBub3JtYWxpemVTeW5jLmNhbGwodGhpcywgbmFtZSwgcGFyZW50TmFtZSwgaXNQbHVnaW4pO1xuXG4gICAgICAvLyBpZiB0aGlzIGlzIGEgcGx1Z2luLCBub3JtYWxpemUgdGhlIHBsdWdpbiBuYW1lIGFuZCB0aGUgYXJndW1lbnRcbiAgICAgIHZhciBhcmd1bWVudE5hbWUgPSBsb2FkZXIubm9ybWFsaXplU3luYyhwYXJzZWQuYXJndW1lbnQsIHBhcmVudE5hbWUsIHRydWUpO1xuICAgICAgdmFyIHBsdWdpbk5hbWUgPSBsb2FkZXIubm9ybWFsaXplU3luYyhwYXJzZWQucGx1Z2luLCBwYXJlbnROYW1lLCB0cnVlKTtcbiAgICAgIHJldHVybiBjb21iaW5lUGx1Z2luUGFydHMobG9hZGVyLCBhcmd1bWVudE5hbWUsIHBsdWdpbk5hbWUsIGNoZWNrRGVmYXVsdEV4dGVuc2lvbihsb2FkZXIsIHBhcnNlZC5hcmd1bWVudCkpO1xuICAgIH07XG4gIH1cbiAgXG4gIGhvb2soJ2RlY2Fub25pY2FsaXplJywgY3JlYXRlTm9ybWFsaXplU3luYyk7XG4gIGhvb2soJ25vcm1hbGl6ZVN5bmMnLCBjcmVhdGVOb3JtYWxpemVTeW5jKTtcblxuICBob29rKCdub3JtYWxpemUnLCBmdW5jdGlvbihub3JtYWxpemUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgcGFyZW50TmFtZSwgaXNQbHVnaW4pIHtcbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuXG4gICAgICBwYXJlbnROYW1lID0gZ2V0UGFyZW50TmFtZSh0aGlzLCBwYXJlbnROYW1lKTtcblxuICAgICAgdmFyIHBhcnNlZCA9IHBhcnNlUGx1Z2luKGxvYWRlciwgbmFtZSk7XG5cbiAgICAgIGlmICghcGFyc2VkKVxuICAgICAgICByZXR1cm4gbm9ybWFsaXplLmNhbGwobG9hZGVyLCBuYW1lLCBwYXJlbnROYW1lLCBpc1BsdWdpbik7XG5cbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgIGxvYWRlci5ub3JtYWxpemUocGFyc2VkLmFyZ3VtZW50LCBwYXJlbnROYW1lLCB0cnVlKSxcbiAgICAgICAgbG9hZGVyLm5vcm1hbGl6ZShwYXJzZWQucGx1Z2luLCBwYXJlbnROYW1lLCBmYWxzZSlcbiAgICAgIF0pXG4gICAgICAudGhlbihmdW5jdGlvbihub3JtYWxpemVkKSB7XG4gICAgICAgIHJldHVybiBjb21iaW5lUGx1Z2luUGFydHMobG9hZGVyLCBub3JtYWxpemVkWzBdLCBub3JtYWxpemVkWzFdLCBjaGVja0RlZmF1bHRFeHRlbnNpb24obG9hZGVyLCBwYXJzZWQuYXJndW1lbnQpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgaG9vaygnbG9jYXRlJywgZnVuY3Rpb24obG9jYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICAgIHZhciBsb2FkZXIgPSB0aGlzO1xuXG4gICAgICB2YXIgbmFtZSA9IGxvYWQubmFtZTtcblxuICAgICAgLy8gcGx1Z2luIHN5bnRheFxuICAgICAgdmFyIHBsdWdpblN5bnRheEluZGV4O1xuICAgICAgaWYgKGxvYWRlci5wbHVnaW5GaXJzdCkge1xuICAgICAgICBpZiAoKHBsdWdpblN5bnRheEluZGV4ID0gbmFtZS5pbmRleE9mKCchJykpICE9IC0xKSB7XG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5sb2FkZXIgPSBuYW1lLnN1YnN0cigwLCBwbHVnaW5TeW50YXhJbmRleCk7XG4gICAgICAgICAgbG9hZC5uYW1lID0gbmFtZS5zdWJzdHIocGx1Z2luU3ludGF4SW5kZXggKyAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICgocGx1Z2luU3ludGF4SW5kZXggPSBuYW1lLmxhc3RJbmRleE9mKCchJykpICE9IC0xKSB7XG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5sb2FkZXIgPSBuYW1lLnN1YnN0cihwbHVnaW5TeW50YXhJbmRleCArIDEpO1xuICAgICAgICAgIGxvYWQubmFtZSA9IG5hbWUuc3Vic3RyKDAsIHBsdWdpblN5bnRheEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbG9jYXRlLmNhbGwobG9hZGVyLCBsb2FkKVxuICAgICAgLnRoZW4oZnVuY3Rpb24oYWRkcmVzcykge1xuICAgICAgICBpZiAocGx1Z2luU3ludGF4SW5kZXggIT0gLTEgfHwgIWxvYWQubWV0YWRhdGEubG9hZGVyKVxuICAgICAgICAgIHJldHVybiBhZGRyZXNzO1xuXG4gICAgICAgIC8vIG5vcm1hbGl6ZSBwbHVnaW4gcmVsYXRpdmUgdG8gcGFyZW50IGluIGxvY2F0ZSBoZXJlIHdoZW5cbiAgICAgICAgLy8gdXNpbmcgcGx1Z2luIHZpYSBsb2FkZXIgbWV0YWRhdGFcbiAgICAgICAgcmV0dXJuIChsb2FkZXIucGx1Z2luTG9hZGVyIHx8IGxvYWRlcikubm9ybWFsaXplKGxvYWQubWV0YWRhdGEubG9hZGVyLCBsb2FkLm5hbWUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGxvYWRlck5vcm1hbGl6ZWQpIHtcbiAgICAgICAgICBsb2FkLm1ldGFkYXRhLmxvYWRlciA9IGxvYWRlck5vcm1hbGl6ZWQ7XG4gICAgICAgICAgcmV0dXJuIGFkZHJlc3M7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGFkZHJlc3MpIHtcbiAgICAgICAgdmFyIHBsdWdpbiA9IGxvYWQubWV0YWRhdGEubG9hZGVyO1xuXG4gICAgICAgIGlmICghcGx1Z2luKVxuICAgICAgICAgIHJldHVybiBhZGRyZXNzO1xuXG4gICAgICAgIC8vIGRvbid0IGFsbG93IGEgcGx1Z2luIHRvIGxvYWQgaXRzZWxmXG4gICAgICAgIGlmIChsb2FkLm5hbWUgPT0gcGx1Z2luKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignUGx1Z2luICcgKyBwbHVnaW4gKyAnIGNhbm5vdCBsb2FkIGl0c2VsZiwgbWFrZSBzdXJlIGl0IGlzIGV4Y2x1ZGVkIGZyb20gYW55IHdpbGRjYXJkIG1ldGEgY29uZmlndXJhdGlvbiB2aWEgYSBjdXN0b20gbG9hZGVyOiBmYWxzZSBydWxlLicpO1xuXG4gICAgICAgIC8vIG9ubHkgZmV0Y2ggdGhlIHBsdWdpbiBpdHNlbGYgaWYgdGhpcyBuYW1lIGlzbid0IGRlZmluZWRcbiAgICAgICAgaWYgKGxvYWRlci5kZWZpbmVkICYmIGxvYWRlci5kZWZpbmVkW25hbWVdKVxuICAgICAgICAgIHJldHVybiBhZGRyZXNzO1xuXG4gICAgICAgIHZhciBwbHVnaW5Mb2FkZXIgPSBsb2FkZXIucGx1Z2luTG9hZGVyIHx8IGxvYWRlcjtcblxuICAgICAgICAvLyBsb2FkIHRoZSBwbHVnaW4gbW9kdWxlIGFuZCBydW4gc3RhbmRhcmQgbG9jYXRlXG4gICAgICAgIHJldHVybiBwbHVnaW5Mb2FkZXJbJ2ltcG9ydCddKHBsdWdpbilcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24obG9hZGVyTW9kdWxlKSB7XG4gICAgICAgICAgLy8gc3RvcmUgdGhlIHBsdWdpbiBtb2R1bGUgaXRzZWxmIG9uIHRoZSBtZXRhZGF0YVxuICAgICAgICAgIGxvYWQubWV0YWRhdGEubG9hZGVyTW9kdWxlID0gbG9hZGVyTW9kdWxlO1xuXG4gICAgICAgICAgbG9hZC5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgICBpZiAobG9hZGVyTW9kdWxlLmxvY2F0ZSlcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJNb2R1bGUubG9jYXRlLmNhbGwobG9hZGVyLCBsb2FkKTtcblxuICAgICAgICAgIHJldHVybiBhZGRyZXNzO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuXG4gIGhvb2soJ2ZldGNoJywgZnVuY3Rpb24oZmV0Y2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUgJiYgbG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUuZmV0Y2ggJiYgbG9hZC5tZXRhZGF0YS5mb3JtYXQgIT0gJ2RlZmluZWQnKSB7XG4gICAgICAgIGxvYWQubWV0YWRhdGEuc2NyaXB0TG9hZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUuZmV0Y2guY2FsbChsb2FkZXIsIGxvYWQsIGZ1bmN0aW9uKGxvYWQpIHtcbiAgICAgICAgICByZXR1cm4gZmV0Y2guY2FsbChsb2FkZXIsIGxvYWQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZmV0Y2guY2FsbChsb2FkZXIsIGxvYWQpO1xuICAgICAgfVxuICAgIH07XG4gIH0pO1xuXG4gIGhvb2soJ3RyYW5zbGF0ZScsIGZ1bmN0aW9uKHRyYW5zbGF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKGxvYWQubWV0YWRhdGEubG9hZGVyTW9kdWxlICYmIGxvYWQubWV0YWRhdGEubG9hZGVyTW9kdWxlLnRyYW5zbGF0ZSAmJiBsb2FkLm1ldGFkYXRhLmZvcm1hdCAhPSAnZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsb2FkLm1ldGFkYXRhLmxvYWRlck1vZHVsZS50cmFuc2xhdGUuYXBwbHkobG9hZGVyLCBhcmdzKSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICB2YXIgc291cmNlTWFwID0gbG9hZC5tZXRhZGF0YS5zb3VyY2VNYXA7XG5cbiAgICAgICAgICAvLyBzYW5pdGl6ZSBzb3VyY2VNYXAgaWYgYW4gb2JqZWN0IG5vdCBhIEpTT04gc3RyaW5nXG4gICAgICAgICAgaWYgKHNvdXJjZU1hcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VNYXAgIT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbG9hZC5tZXRhZGF0YS5zb3VyY2VNYXAgbXVzdCBiZSBzZXQgdG8gYW4gb2JqZWN0LicpO1xuXG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxOYW1lID0gbG9hZC5hZGRyZXNzLnNwbGl0KCchJylbMF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGZvcmNlIHNldCB0aGUgZmlsZW5hbWUgb2YgdGhlIG9yaWdpbmFsIGZpbGVcbiAgICAgICAgICAgIGlmICghc291cmNlTWFwLmZpbGUgfHwgc291cmNlTWFwLmZpbGUgPT0gbG9hZC5hZGRyZXNzKVxuICAgICAgICAgICAgICBzb3VyY2VNYXAuZmlsZSA9IG9yaWdpbmFsTmFtZSArICchdHJhbnNwaWxlZCc7XG5cbiAgICAgICAgICAgIC8vIGZvcmNlIHNldCB0aGUgc291cmNlcyBsaXN0IGlmIG9ubHkgb25lIHNvdXJjZVxuICAgICAgICAgICAgaWYgKCFzb3VyY2VNYXAuc291cmNlcyB8fCBzb3VyY2VNYXAuc291cmNlcy5sZW5ndGggPD0gMSAmJiAoIXNvdXJjZU1hcC5zb3VyY2VzWzBdIHx8IHNvdXJjZU1hcC5zb3VyY2VzWzBdID09IGxvYWQuYWRkcmVzcykpXG4gICAgICAgICAgICAgIHNvdXJjZU1hcC5zb3VyY2VzID0gW29yaWdpbmFsTmFtZV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gaWYgcnVubmluZyBvbiBmaWxlOi8vLyBVUkxzLCBzb3VyY2VzQ29udGVudCBpcyBuZWNlc3NhcnlcbiAgICAgICAgICAvLyBsb2FkLm1ldGFkYXRhLnNvdXJjZU1hcC5zb3VyY2VzQ29udGVudCA9IFtsb2FkLnNvdXJjZV07XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnc3RyaW5nJylcbiAgICAgICAgICAgIGxvYWQuc291cmNlID0gcmVzdWx0O1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHdhcm4uY2FsbCh0aGlzLCAnUGx1Z2luICcgKyBsb2FkLm1ldGFkYXRhLmxvYWRlciArICcgc2hvdWxkIHJldHVybiB0aGUgc291cmNlIGluIHRyYW5zbGF0ZSwgaW5zdGVhZCBvZiBzZXR0aW5nIGxvYWQuc291cmNlIGRpcmVjdGx5LiBUaGlzIHN1cHBvcnQgd2lsbCBiZSBkZXByZWNhdGVkLicpO1xuXG4gICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZS5hcHBseShsb2FkZXIsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJhbnNsYXRlLmFwcGx5KGxvYWRlciwgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgaG9vaygnaW5zdGFudGlhdGUnLCBmdW5jdGlvbihpbnN0YW50aWF0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbihsb2FkKSB7XG4gICAgICB2YXIgbG9hZGVyID0gdGhpcztcbiAgICAgIHZhciBjYWxsZWRJbnN0YW50aWF0ZSA9IGZhbHNlO1xuXG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUgJiYgbG9hZC5tZXRhZGF0YS5sb2FkZXJNb2R1bGUuaW5zdGFudGlhdGUgJiYgIWxvYWRlci5idWlsZGVyICYmIGxvYWQubWV0YWRhdGEuZm9ybWF0ICE9ICdkZWZpbmVkJylcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsb2FkLm1ldGFkYXRhLmxvYWRlck1vZHVsZS5pbnN0YW50aWF0ZS5jYWxsKGxvYWRlciwgbG9hZCwgZnVuY3Rpb24obG9hZCkge1xuICAgICAgICAgIGlmIChjYWxsZWRJbnN0YW50aWF0ZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5zdGFudGlhdGUgbXVzdCBvbmx5IGJlIGNhbGxlZCBvbmNlLicpO1xuICAgICAgICAgIGNhbGxlZEluc3RhbnRpYXRlID0gdHJ1ZTtcbiAgICAgICAgICByZXR1cm4gaW5zdGFudGlhdGUuY2FsbChsb2FkZXIsIGxvYWQpO1xuICAgICAgICB9KSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICBpZiAoY2FsbGVkSW5zdGFudGlhdGUpXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5lbnRyeSA9IGNyZWF0ZUVudHJ5KCk7XG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5lbnRyeS5leGVjdXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBsb2FkLm1ldGFkYXRhLmVudHJ5LmRlcHMgPSBsb2FkLm1ldGFkYXRhLmRlcHM7XG4gICAgICAgICAgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPSAnZGVmaW5lZCc7XG4gICAgICAgICAgcmV0dXJuIGluc3RhbnRpYXRlLmNhbGwobG9hZGVyLCBsb2FkKTtcbiAgICAgICAgfSk7XG4gICAgICBlbHNlXG4gICAgICAgIHJldHVybiBpbnN0YW50aWF0ZS5jYWxsKGxvYWRlciwgbG9hZCk7XG4gICAgfTtcbiAgfSk7XG5cbn0pKCk7LypcbiAqIENvbmRpdGlvbnMgRXh0ZW5zaW9uXG4gKlxuICogICBBbGxvd3MgYSBjb25kaXRpb24gbW9kdWxlIHRvIGFsdGVyIHRoZSByZXNvbHV0aW9uIG9mIGFuIGltcG9ydCB2aWEgc3ludGF4OlxuICpcbiAqICAgICBpbXBvcnQgJCBmcm9tICdqcXVlcnkvI3ticm93c2VyfSc7XG4gKlxuICogICBXaWxsIGZpcnN0IGxvYWQgdGhlIG1vZHVsZSAnYnJvd3NlcicgdmlhIGBTeXN0ZW1KUy5pbXBvcnQoJ2Jyb3dzZXInKWAgYW5kIFxuICogICB0YWtlIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiB0aGF0IG1vZHVsZS5cbiAqICAgSWYgdGhlIGRlZmF1bHQgZXhwb3J0IGlzIG5vdCBhIHN0cmluZywgYW4gZXJyb3IgaXMgdGhyb3duLlxuICogXG4gKiAgIFdlIHRoZW4gc3Vic3RpdHV0ZSB0aGUgc3RyaW5nIGludG8gdGhlIHJlcXVpcmUgdG8gZ2V0IHRoZSBjb25kaXRpb25hbCByZXNvbHV0aW9uXG4gKiAgIGVuYWJsaW5nIGVudmlyb25tZW50LXNwZWNpZmljIHZhcmlhdGlvbnMgbGlrZTpcbiAqIFxuICogICAgIGltcG9ydCAkIGZyb20gJ2pxdWVyeS9pZSdcbiAqICAgICBpbXBvcnQgJCBmcm9tICdqcXVlcnkvZmlyZWZveCdcbiAqICAgICBpbXBvcnQgJCBmcm9tICdqcXVlcnkvY2hyb21lJ1xuICogICAgIGltcG9ydCAkIGZyb20gJ2pxdWVyeS9zYWZhcmknXG4gKlxuICogICBJdCBjYW4gYmUgdXNlZnVsIGZvciBhIGNvbmRpdGlvbiBtb2R1bGUgdG8gZGVmaW5lIG11bHRpcGxlIGNvbmRpdGlvbnMuXG4gKiAgIFRoaXMgY2FuIGJlIGRvbmUgdmlhIHRoZSBgfGAgbW9kaWZpZXIgdG8gc3BlY2lmeSBhbiBleHBvcnQgbWVtYmVyIGV4cHJlc3Npb246XG4gKlxuICogICAgIGltcG9ydCAnanF1ZXJ5LyN7Li9icm93c2VyLmpzfGdyYWRlLnZlcnNpb259J1xuICpcbiAqICAgV2hlcmUgdGhlIGBncmFkZWAgZXhwb3J0IGB2ZXJzaW9uYCBtZW1iZXIgaW4gdGhlIGBicm93c2VyLmpzYCBtb2R1bGUgIGlzIHN1YnN0aXR1dGVkLlxuICpcbiAqXG4gKiBCb29sZWFuIENvbmRpdGlvbmFsc1xuICpcbiAqICAgRm9yIHBvbHlmaWxsIG1vZHVsZXMsIHRoYXQgYXJlIHVzZWQgYXMgaW1wb3J0cyBidXQgaGF2ZSBubyBtb2R1bGUgdmFsdWUsXG4gKiAgIGEgYmluYXJ5IGNvbmRpdGlvbmFsIGFsbG93cyBhIG1vZHVsZSBub3QgdG8gYmUgbG9hZGVkIGF0IGFsbCBpZiBub3QgbmVlZGVkOlxuICpcbiAqICAgICBpbXBvcnQgJ2VzNS1zaGltIz8uL2NvbmRpdGlvbnMuanN8bmVlZHMtZXM1c2hpbSdcbiAqXG4gKiAgIFRoZXNlIGNvbmRpdGlvbnMgY2FuIGFsc28gYmUgbmVnYXRlZCB2aWE6XG4gKiAgICAgXG4gKiAgICAgaW1wb3J0ICdlczUtc2hpbSM/Li9jb25kaXRpb25zLmpzfH5lczYnXG4gKlxuICovXG5cbiAgdmFyIHN5c0NvbmRpdGlvbnMgPSBbJ2Jyb3dzZXInLCAnbm9kZScsICdkZXYnLCAnYnVpbGQnLCAncHJvZHVjdGlvbicsICdkZWZhdWx0J107XG5cbiAgZnVuY3Rpb24gcGFyc2VDb25kaXRpb24oY29uZGl0aW9uKSB7XG4gICAgdmFyIGNvbmRpdGlvbkV4cG9ydCwgY29uZGl0aW9uTW9kdWxlLCBuZWdhdGlvbjtcblxuICAgIHZhciBuZWdhdGlvbiA9IGNvbmRpdGlvblswXSA9PSAnfic7XG4gICAgdmFyIGNvbmRpdGlvbkV4cG9ydEluZGV4ID0gY29uZGl0aW9uLmxhc3RJbmRleE9mKCd8Jyk7XG4gICAgaWYgKGNvbmRpdGlvbkV4cG9ydEluZGV4ICE9IC0xKSB7XG4gICAgICBjb25kaXRpb25FeHBvcnQgPSBjb25kaXRpb24uc3Vic3RyKGNvbmRpdGlvbkV4cG9ydEluZGV4ICsgMSk7XG4gICAgICBjb25kaXRpb25Nb2R1bGUgPSBjb25kaXRpb24uc3Vic3RyKG5lZ2F0aW9uLCBjb25kaXRpb25FeHBvcnRJbmRleCAtIG5lZ2F0aW9uKTtcbiAgICAgIFxuICAgICAgaWYgKG5lZ2F0aW9uKVxuICAgICAgICB3YXJuLmNhbGwodGhpcywgJ0NvbmRpdGlvbiBuZWdhdGlvbiBmb3JtIFwiJyArIGNvbmRpdGlvbiArICdcIiBpcyBkZXByZWNhdGVkIGZvciBcIicgKyBjb25kaXRpb25Nb2R1bGUgKyAnfH4nICsgY29uZGl0aW9uRXhwb3J0ICsgJ1wiJyk7XG5cbiAgICAgIGlmIChjb25kaXRpb25FeHBvcnRbMF0gPT0gJ34nKSB7XG4gICAgICAgIG5lZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgY29uZGl0aW9uRXhwb3J0ID0gY29uZGl0aW9uRXhwb3J0LnN1YnN0cigxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25kaXRpb25FeHBvcnQgPSAnZGVmYXVsdCc7XG4gICAgICBjb25kaXRpb25Nb2R1bGUgPSBjb25kaXRpb24uc3Vic3RyKG5lZ2F0aW9uKTtcbiAgICAgIGlmIChzeXNDb25kaXRpb25zLmluZGV4T2YoY29uZGl0aW9uTW9kdWxlKSAhPSAtMSkge1xuICAgICAgICBjb25kaXRpb25FeHBvcnQgPSBjb25kaXRpb25Nb2R1bGU7XG4gICAgICAgIGNvbmRpdGlvbk1vZHVsZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG1vZHVsZTogY29uZGl0aW9uTW9kdWxlIHx8ICdAc3lzdGVtLWVudicsXG4gICAgICBwcm9wOiBjb25kaXRpb25FeHBvcnQsXG4gICAgICBuZWdhdGU6IG5lZ2F0aW9uXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlcmlhbGl6ZUNvbmRpdGlvbihjb25kaXRpb25PYmopIHtcbiAgICByZXR1cm4gY29uZGl0aW9uT2JqLm1vZHVsZSArICd8JyArIChjb25kaXRpb25PYmoubmVnYXRlID8gJ34nIDogJycpICsgY29uZGl0aW9uT2JqLnByb3A7XG4gIH1cblxuICBmdW5jdGlvbiByZXNvbHZlQ29uZGl0aW9uKGNvbmRpdGlvbk9iaiwgcGFyZW50TmFtZSwgYm9vbCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoY29uZGl0aW9uT2JqLm1vZHVsZSwgcGFyZW50TmFtZSlcbiAgICAudGhlbihmdW5jdGlvbihub3JtYWxpemVkQ29uZGl0aW9uKSB7XG4gICAgICByZXR1cm4gc2VsZi5sb2FkKG5vcm1hbGl6ZWRDb25kaXRpb24pXG4gICAgICAudGhlbihmdW5jdGlvbihxKSB7XG4gICAgICAgIHZhciBtID0gcmVhZE1lbWJlckV4cHJlc3Npb24oY29uZGl0aW9uT2JqLnByb3AsIHNlbGYuZ2V0KG5vcm1hbGl6ZWRDb25kaXRpb24pKTtcblxuICAgICAgICBpZiAoYm9vbCAmJiB0eXBlb2YgbSAhPSAnYm9vbGVhbicpXG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ29uZGl0aW9uICcgKyBzZXJpYWxpemVDb25kaXRpb24oY29uZGl0aW9uT2JqKSArICcgZGlkIG5vdCByZXNvbHZlIHRvIGEgYm9vbGVhbi4nKTtcblxuICAgICAgICByZXR1cm4gY29uZGl0aW9uT2JqLm5lZ2F0ZSA/ICFtIDogbTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIGludGVycG9sYXRpb25SZWdFeCA9IC8jXFx7W15cXH1dK1xcfS87XG4gIGZ1bmN0aW9uIGludGVycG9sYXRlQ29uZGl0aW9uYWwobmFtZSwgcGFyZW50TmFtZSkge1xuICAgIC8vIGZpcnN0IHdlIG5vcm1hbGl6ZSB0aGUgY29uZGl0aW9uYWxcbiAgICB2YXIgY29uZGl0aW9uYWxNYXRjaCA9IG5hbWUubWF0Y2goaW50ZXJwb2xhdGlvblJlZ0V4KTtcblxuICAgIGlmICghY29uZGl0aW9uYWxNYXRjaClcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmFtZSk7XG5cbiAgICB2YXIgY29uZGl0aW9uT2JqID0gcGFyc2VDb25kaXRpb24uY2FsbCh0aGlzLCBjb25kaXRpb25hbE1hdGNoWzBdLnN1YnN0cigyLCBjb25kaXRpb25hbE1hdGNoWzBdLmxlbmd0aCAtIDMpKTtcblxuICAgIC8vIGluIGJ1aWxkcywgcmV0dXJuIG5vcm1hbGl6ZWQgY29uZGl0aW9uYWxcbiAgICBpZiAodGhpcy5idWlsZGVyKVxuICAgICAgcmV0dXJuIHRoaXNbJ25vcm1hbGl6ZSddKGNvbmRpdGlvbk9iai5tb2R1bGUsIHBhcmVudE5hbWUpXG4gICAgICAudGhlbihmdW5jdGlvbihjb25kaXRpb25Nb2R1bGUpIHtcbiAgICAgICAgY29uZGl0aW9uT2JqLm1vZHVsZSA9IGNvbmRpdGlvbk1vZHVsZTtcbiAgICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZShpbnRlcnBvbGF0aW9uUmVnRXgsICcjeycgKyBzZXJpYWxpemVDb25kaXRpb24oY29uZGl0aW9uT2JqKSArICd9Jyk7XG4gICAgICB9KTtcblxuICAgIHJldHVybiByZXNvbHZlQ29uZGl0aW9uLmNhbGwodGhpcywgY29uZGl0aW9uT2JqLCBwYXJlbnROYW1lLCBmYWxzZSlcbiAgICAudGhlbihmdW5jdGlvbihjb25kaXRpb25WYWx1ZSkge1xuICAgICAgaWYgKHR5cGVvZiBjb25kaXRpb25WYWx1ZSAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBjb25kaXRpb24gdmFsdWUgZm9yICcgKyBuYW1lICsgJyBkb2VzblxcJ3QgcmVzb2x2ZSB0byBhIHN0cmluZy4nKTtcblxuICAgICAgaWYgKGNvbmRpdGlvblZhbHVlLmluZGV4T2YoJy8nKSAhPSAtMSlcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlZCB0byBpbnRlcnBvbGF0ZSBjb25kaXRpb25hbCAnICsgbmFtZSArIChwYXJlbnROYW1lID8gJyBpbiAnICsgcGFyZW50TmFtZSA6ICcnKSArICdcXG5cXHRUaGUgY29uZGl0aW9uIHZhbHVlICcgKyBjb25kaXRpb25WYWx1ZSArICcgY2Fubm90IGNvbnRhaW4gYSBcIi9cIiBzZXBhcmF0b3IuJyk7XG5cbiAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoaW50ZXJwb2xhdGlvblJlZ0V4LCBjb25kaXRpb25WYWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBib29sZWFuQ29uZGl0aW9uYWwobmFtZSwgcGFyZW50TmFtZSkge1xuICAgIC8vIGZpcnN0IHdlIG5vcm1hbGl6ZSB0aGUgY29uZGl0aW9uYWxcbiAgICB2YXIgYm9vbGVhbkluZGV4ID0gbmFtZS5sYXN0SW5kZXhPZignIz8nKTtcblxuICAgIGlmIChib29sZWFuSW5kZXggPT0gLTEpXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5hbWUpO1xuXG4gICAgdmFyIGNvbmRpdGlvbk9iaiA9IHBhcnNlQ29uZGl0aW9uLmNhbGwodGhpcywgbmFtZS5zdWJzdHIoYm9vbGVhbkluZGV4ICsgMikpO1xuXG4gICAgLy8gaW4gYnVpbGRzLCByZXR1cm4gbm9ybWFsaXplZCBjb25kaXRpb25hbFxuICAgIGlmICh0aGlzLmJ1aWxkZXIpXG4gICAgICByZXR1cm4gdGhpc1snbm9ybWFsaXplJ10oY29uZGl0aW9uT2JqLm1vZHVsZSwgcGFyZW50TmFtZSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uKGNvbmRpdGlvbk1vZHVsZSkge1xuICAgICAgICBjb25kaXRpb25PYmoubW9kdWxlID0gY29uZGl0aW9uTW9kdWxlO1xuICAgICAgICByZXR1cm4gbmFtZS5zdWJzdHIoMCwgYm9vbGVhbkluZGV4KSArICcjPycgKyBzZXJpYWxpemVDb25kaXRpb24oY29uZGl0aW9uT2JqKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc29sdmVDb25kaXRpb24uY2FsbCh0aGlzLCBjb25kaXRpb25PYmosIHBhcmVudE5hbWUsIHRydWUpXG4gICAgLnRoZW4oZnVuY3Rpb24oY29uZGl0aW9uVmFsdWUpIHtcbiAgICAgIHJldHVybiBjb25kaXRpb25WYWx1ZSA/IG5hbWUuc3Vic3RyKDAsIGJvb2xlYW5JbmRleCkgOiAnQGVtcHR5JztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIG5vcm1hbGl6ZVN5bmMgZG9lcyBub3QgcGFyc2UgY29uZGl0aW9uYWxzIGF0IGFsbCBhbHRob3VnaCBpdCBjb3VsZFxuICBob29rKCdub3JtYWxpemUnLCBmdW5jdGlvbihub3JtYWxpemUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obmFtZSwgcGFyZW50TmFtZSwgc2tpcEV4dCkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG4gICAgICByZXR1cm4gYm9vbGVhbkNvbmRpdGlvbmFsLmNhbGwobG9hZGVyLCBuYW1lLCBwYXJlbnROYW1lKVxuICAgICAgLnRoZW4oZnVuY3Rpb24obmFtZSkge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplLmNhbGwobG9hZGVyLCBuYW1lLCBwYXJlbnROYW1lLCBza2lwRXh0KTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbihub3JtYWxpemVkKSB7XG4gICAgICAgIHJldHVybiBpbnRlcnBvbGF0ZUNvbmRpdGlvbmFsLmNhbGwobG9hZGVyLCBub3JtYWxpemVkLCBwYXJlbnROYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0pO1xuLypcbiAqIEFsaWFzIEV4dGVuc2lvblxuICpcbiAqIEFsbG93cyBhIG1vZHVsZSB0byBiZSBhIHBsYWluIGNvcHkgb2YgYW5vdGhlciBtb2R1bGUgYnkgbW9kdWxlIG5hbWVcbiAqXG4gKiBTeXN0ZW1KUy5tZXRhWydteWJvb3RzdHJhcGFsaWFzJ10gPSB7IGFsaWFzOiAnYm9vdHN0cmFwJyB9O1xuICpcbiAqL1xuKGZ1bmN0aW9uKCkge1xuICAvLyBhbGlhc2VzXG4gIGhvb2soJ2ZldGNoJywgZnVuY3Rpb24oZmV0Y2gpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIGFsaWFzID0gbG9hZC5tZXRhZGF0YS5hbGlhcztcbiAgICAgIHZhciBhbGlhc0RlcHMgPSBsb2FkLm1ldGFkYXRhLmRlcHMgfHwgW107XG4gICAgICBpZiAoYWxpYXMpIHtcbiAgICAgICAgbG9hZC5tZXRhZGF0YS5mb3JtYXQgPSAnZGVmaW5lZCc7XG4gICAgICAgIHZhciBlbnRyeSA9IGNyZWF0ZUVudHJ5KCk7XG4gICAgICAgIHRoaXMuZGVmaW5lZFtsb2FkLm5hbWVdID0gZW50cnk7XG4gICAgICAgIGVudHJ5LmRlY2xhcmF0aXZlID0gdHJ1ZTtcbiAgICAgICAgZW50cnkuZGVwcyA9IGFsaWFzRGVwcy5jb25jYXQoW2FsaWFzXSk7XG4gICAgICAgIGVudHJ5LmRlY2xhcmUgPSBmdW5jdGlvbihfZXhwb3J0KSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNldHRlcnM6IFtmdW5jdGlvbihtb2R1bGUpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBtb2R1bGUpXG4gICAgICAgICAgICAgICAgX2V4cG9ydChwLCBtb2R1bGVbcF0pO1xuICAgICAgICAgICAgICBpZiAobW9kdWxlLl9fdXNlRGVmYXVsdClcbiAgICAgICAgICAgICAgICBlbnRyeS5tb2R1bGUuZXhwb3J0cy5fX3VzZURlZmF1bHQgPSB0cnVlO1xuICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICBleGVjdXRlOiBmdW5jdGlvbigpIHt9XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmV0Y2guY2FsbCh0aGlzLCBsb2FkKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7LypcbiAqIE1ldGEgRXh0ZW5zaW9uXG4gKlxuICogU2V0cyBkZWZhdWx0IG1ldGFkYXRhIG9uIGEgbG9hZCByZWNvcmQgKGxvYWQubWV0YWRhdGEpIGZyb21cbiAqIGxvYWRlci5tZXRhZGF0YSB2aWEgU3lzdGVtSlMubWV0YSBmdW5jdGlvbi5cbiAqXG4gKlxuICogQWxzbyBwcm92aWRlcyBhbiBpbmxpbmUgbWV0YSBzeW50YXggZm9yIG1vZHVsZSBtZXRhIGluIHNvdXJjZS5cbiAqXG4gKiBFZzpcbiAqXG4gKiBsb2FkZXIubWV0YSh7XG4gKiAgICdteS9tb2R1bGUnOiB7IGRlcHM6IFsnanF1ZXJ5J10gfVxuICogICAnbXkvKic6IHsgZm9ybWF0OiAnYW1kJyB9XG4gKiB9KTtcbiAqXG4gKiBXaGljaCBpbiB0dXJuIHBvcHVsYXRlcyBsb2FkZXIubWV0YWRhdGEuXG4gKlxuICogbG9hZC5tZXRhZGF0YS5kZXBzIGFuZCBsb2FkLm1ldGFkYXRhLmZvcm1hdCB3aWxsIHRoZW4gYmUgc2V0XG4gKiBmb3IgJ215L21vZHVsZSdcbiAqXG4gKiBUaGUgc2FtZSBtZXRhIGNvdWxkIGJlIHNldCB3aXRoIGEgbXkvbW9kdWxlLmpzIGZpbGUgY29udGFpbmluZzpcbiAqXG4gKiBteS9tb2R1bGUuanNcbiAqICAgXCJmb3JtYXQgYW1kXCI7XG4gKiAgIFwiZGVwc1tdIGpxdWVyeVwiO1xuICogICBcImdsb2JhbHMuc29tZSB2YWx1ZVwiXG4gKiAgIGNvbnNvbGUubG9nKCd0aGlzIGlzIG15L21vZHVsZScpO1xuICpcbiAqIENvbmZpZ3VyYXRpb24gbWV0YSBhbHdheXMgdGFrZXMgcHJlZmVyZW5jZSB0byBpbmxpbmUgbWV0YS5cbiAqXG4gKiBNdWx0aXBsZSBtYXRjaGVzIGluIHdpbGRjYXJkcyBhcmUgc3VwcG9ydGVkIGFuZCBhbW1lbmQgdGhlIG1ldGEuXG4gKlxuICpcbiAqIFRoZSBiZW5lZml0cyBvZiB0aGUgZnVuY3Rpb24gZm9ybSBpcyB0aGF0IHBhdGhzIGFyZSBVUkwtbm9ybWFsaXplZFxuICogc3VwcG9ydGluZyBzYXlcbiAqXG4gKiBsb2FkZXIubWV0YSh7ICcuL2FwcCc6IHsgZm9ybWF0OiAnY2pzJyB9IH0pO1xuICpcbiAqIEluc3RlYWQgb2YgbmVlZGluZyB0byBzZXQgYWdhaW5zdCB0aGUgYWJzb2x1dGUgVVJMIChodHRwczovL3NpdGUuY29tL2FwcC5qcylcbiAqXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4gIGhvb2tDb25zdHJ1Y3RvcihmdW5jdGlvbihjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubWV0YSA9IHt9O1xuICAgICAgY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICB9O1xuICB9KTtcblxuICBob29rKCdsb2NhdGUnLCBmdW5jdGlvbihsb2NhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIG1ldGEgPSB0aGlzLm1ldGE7XG4gICAgICB2YXIgbmFtZSA9IGxvYWQubmFtZTtcblxuICAgICAgLy8gTkIgZm9yIHBlcmYsIG1heWJlIGludHJvZHVjZSBhIGZhc3QtcGF0aCB3aWxkY2FyZCBsb29rdXAgY2FjaGUgaGVyZVxuICAgICAgLy8gd2hpY2ggaXMgY2hlY2tlZCBmaXJzdFxuXG4gICAgICAvLyBhcHBseSB3aWxkY2FyZCBtZXRhc1xuICAgICAgdmFyIGJlc3REZXB0aCA9IDA7XG4gICAgICB2YXIgd2lsZGNhcmRJbmRleDtcbiAgICAgIGZvciAodmFyIG1vZHVsZSBpbiBtZXRhKSB7XG4gICAgICAgIHdpbGRjYXJkSW5kZXggPSBtb2R1bGUuaW5kZXhPZignKicpO1xuICAgICAgICBpZiAod2lsZGNhcmRJbmRleCA9PT0gLTEpXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGlmIChtb2R1bGUuc3Vic3RyKDAsIHdpbGRjYXJkSW5kZXgpID09PSBuYW1lLnN1YnN0cigwLCB3aWxkY2FyZEluZGV4KVxuICAgICAgICAgICAgJiYgbW9kdWxlLnN1YnN0cih3aWxkY2FyZEluZGV4ICsgMSkgPT09IG5hbWUuc3Vic3RyKG5hbWUubGVuZ3RoIC0gbW9kdWxlLmxlbmd0aCArIHdpbGRjYXJkSW5kZXggKyAxKSkge1xuICAgICAgICAgIHZhciBkZXB0aCA9IG1vZHVsZS5zcGxpdCgnLycpLmxlbmd0aDtcbiAgICAgICAgICBpZiAoZGVwdGggPiBiZXN0RGVwdGgpXG4gICAgICAgICAgICBiZXN0RGVwdGggPSBkZXB0aDtcbiAgICAgICAgICBleHRlbmRNZXRhKGxvYWQubWV0YWRhdGEsIG1ldGFbbW9kdWxlXSwgYmVzdERlcHRoICE9IGRlcHRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBhcHBseSBleGFjdCBtZXRhXG4gICAgICBpZiAobWV0YVtuYW1lXSlcbiAgICAgICAgZXh0ZW5kTWV0YShsb2FkLm1ldGFkYXRhLCBtZXRhW25hbWVdKTtcblxuICAgICAgcmV0dXJuIGxvY2F0ZS5jYWxsKHRoaXMsIGxvYWQpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIGRldGVjdCBhbnkgbWV0YSBoZWFkZXIgc3ludGF4XG4gIC8vIG9ubHkgc2V0IGlmIG5vdCBhbHJlYWR5IHNldFxuICB2YXIgbWV0YVJlZ0V4ID0gL14oXFxzKlxcL1xcKlteXFwqXSooXFwqKD8hXFwvKVteXFwqXSopKlxcKlxcL3xcXHMqXFwvXFwvW15cXG5dKnxcXHMqXCJbXlwiXStcIlxccyo7P3xcXHMqJ1teJ10rJ1xccyo7PykrLztcbiAgdmFyIG1ldGFQYXJ0UmVnRXggPSAvXFwvXFwqW15cXCpdKihcXCooPyFcXC8pW15cXCpdKikqXFwqXFwvfFxcL1xcL1teXFxuXSp8XCJbXlwiXStcIlxccyo7P3wnW14nXSsnXFxzKjs/L2c7XG5cbiAgZnVuY3Rpb24gc2V0TWV0YVByb3BlcnR5KHRhcmdldCwgcCwgdmFsdWUpIHtcbiAgICB2YXIgcFBhcnRzID0gcC5zcGxpdCgnLicpO1xuICAgIHZhciBjdXJQYXJ0O1xuICAgIHdoaWxlIChwUGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgY3VyUGFydCA9IHBQYXJ0cy5zaGlmdCgpO1xuICAgICAgdGFyZ2V0ID0gdGFyZ2V0W2N1clBhcnRdID0gdGFyZ2V0W2N1clBhcnRdIHx8IHt9O1xuICAgIH1cbiAgICBjdXJQYXJ0ID0gcFBhcnRzLnNoaWZ0KCk7XG4gICAgaWYgKCEoY3VyUGFydCBpbiB0YXJnZXQpKVxuICAgICAgdGFyZ2V0W2N1clBhcnRdID0gdmFsdWU7XG4gIH1cblxuICBob29rKCd0cmFuc2xhdGUnLCBmdW5jdGlvbih0cmFuc2xhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgLy8gc2hvcnRwYXRoIGZvciBidW5kbGVkXG4gICAgICBpZiAobG9hZC5tZXRhZGF0YS5mb3JtYXQgPT0gJ2RlZmluZWQnKSB7XG4gICAgICAgIGxvYWQubWV0YWRhdGEuZGVwcyA9IGxvYWQubWV0YWRhdGEuZGVwcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShsb2FkLnNvdXJjZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE5CIG1ldGEgd2lsbCBiZSBwb3N0LXRyYW5zbGF0ZSBwZW5kaW5nIHRyYW5zcGlsZXIgY29udmVyc2lvbiB0byBwbHVnaW5zXG4gICAgICB2YXIgbWV0YSA9IGxvYWQuc291cmNlLm1hdGNoKG1ldGFSZWdFeCk7XG4gICAgICBpZiAobWV0YSkge1xuICAgICAgICB2YXIgbWV0YVBhcnRzID0gbWV0YVswXS5tYXRjaChtZXRhUGFydFJlZ0V4KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGFQYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjdXJQYXJ0ID0gbWV0YVBhcnRzW2ldO1xuICAgICAgICAgIHZhciBsZW4gPSBjdXJQYXJ0Lmxlbmd0aDtcblxuICAgICAgICAgIHZhciBmaXJzdENoYXIgPSBjdXJQYXJ0LnN1YnN0cigwLCAxKTtcbiAgICAgICAgICBpZiAoY3VyUGFydC5zdWJzdHIobGVuIC0gMSwgMSkgPT0gJzsnKVxuICAgICAgICAgICAgbGVuLS07XG5cbiAgICAgICAgICBpZiAoZmlyc3RDaGFyICE9ICdcIicgJiYgZmlyc3RDaGFyICE9IFwiJ1wiKVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICB2YXIgbWV0YVN0cmluZyA9IGN1clBhcnQuc3Vic3RyKDEsIGN1clBhcnQubGVuZ3RoIC0gMyk7XG4gICAgICAgICAgdmFyIG1ldGFOYW1lID0gbWV0YVN0cmluZy5zdWJzdHIoMCwgbWV0YVN0cmluZy5pbmRleE9mKCcgJykpO1xuXG4gICAgICAgICAgaWYgKG1ldGFOYW1lKSB7XG4gICAgICAgICAgICB2YXIgbWV0YVZhbHVlID0gbWV0YVN0cmluZy5zdWJzdHIobWV0YU5hbWUubGVuZ3RoICsgMSwgbWV0YVN0cmluZy5sZW5ndGggLSBtZXRhTmFtZS5sZW5ndGggLSAxKTtcblxuICAgICAgICAgICAgaWYgKG1ldGFOYW1lLnN1YnN0cihtZXRhTmFtZS5sZW5ndGggLSAyLCAyKSA9PSAnW10nKSB7XG4gICAgICAgICAgICAgIG1ldGFOYW1lID0gbWV0YU5hbWUuc3Vic3RyKDAsIG1ldGFOYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgICBsb2FkLm1ldGFkYXRhW21ldGFOYW1lXSA9IGxvYWQubWV0YWRhdGFbbWV0YU5hbWVdIHx8IFtdO1xuICAgICAgICAgICAgICBsb2FkLm1ldGFkYXRhW21ldGFOYW1lXS5wdXNoKG1ldGFWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChsb2FkLm1ldGFkYXRhW21ldGFOYW1lXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBiYWNrd2FyZHMgY29tcGF0IGZvciBwcmV2aW91cyBcImRlcHNcIiBzeW50YXhcbiAgICAgICAgICAgICAgd2Fybi5jYWxsKHRoaXMsICdNb2R1bGUgJyArIGxvYWQubmFtZSArICcgY29udGFpbnMgZGVwcmVjYXRlZCBcImRlcHMgJyArIG1ldGFWYWx1ZSArICdcIiBtZXRhIHN5bnRheC5cXG5UaGlzIHNob3VsZCBiZSB1cGRhdGVkIHRvIFwiZGVwc1tdICcgKyBtZXRhVmFsdWUgKyAnXCIgZm9yIHB1c2hpbmcgdG8gYXJyYXkgbWV0YS4nKTtcbiAgICAgICAgICAgICAgbG9hZC5tZXRhZGF0YVttZXRhTmFtZV0ucHVzaChtZXRhVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIHNldE1ldGFQcm9wZXJ0eShsb2FkLm1ldGFkYXRhLCBtZXRhTmFtZSwgbWV0YVZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsb2FkLm1ldGFkYXRhW21ldGFTdHJpbmddID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRyYW5zbGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH0pO1xufSkoKTtcbi8qXG4gIFN5c3RlbSBidW5kbGVzXG5cbiAgQWxsb3dzIGEgYnVuZGxlIG1vZHVsZSB0byBiZSBzcGVjaWZpZWQgd2hpY2ggd2lsbCBiZSBkeW5hbWljYWxseSBcbiAgbG9hZGVkIGJlZm9yZSB0cnlpbmcgdG8gbG9hZCBhIGdpdmVuIG1vZHVsZS5cblxuICBGb3IgZXhhbXBsZTpcbiAgU3lzdGVtSlMuYnVuZGxlc1snbXlidW5kbGUnXSA9IFsnanF1ZXJ5JywgJ2Jvb3RzdHJhcC9qcy9ib290c3RyYXAnXVxuXG4gIFdpbGwgcmVzdWx0IGluIGEgbG9hZCB0byBcIm15YnVuZGxlXCIgd2hlbmV2ZXIgYSBsb2FkIHRvIFwianF1ZXJ5XCJcbiAgb3IgXCJib290c3RyYXAvanMvYm9vdHN0cmFwXCIgaXMgbWFkZS5cblxuICBJbiB0aGlzIHdheSwgdGhlIGJ1bmRsZSBiZWNvbWVzIHRoZSByZXF1ZXN0IHRoYXQgcHJvdmlkZXMgdGhlIG1vZHVsZVxuKi9cblxuKGZ1bmN0aW9uKCkge1xuICAvLyBidW5kbGVzIHN1cHBvcnQgKGp1c3QgbGlrZSBSZXF1aXJlSlMpXG4gIC8vIGJ1bmRsZSBuYW1lIGlzIG1vZHVsZSBuYW1lIG9mIGJ1bmRsZSBpdHNlbGZcbiAgLy8gYnVuZGxlIGlzIGFycmF5IG9mIG1vZHVsZXMgZGVmaW5lZCBieSB0aGUgYnVuZGxlXG4gIC8vIHdoZW4gYSBtb2R1bGUgaW4gdGhlIGJ1bmRsZSBpcyByZXF1ZXN0ZWQsIHRoZSBidW5kbGUgaXMgbG9hZGVkIGluc3RlYWRcbiAgLy8gb2YgdGhlIGZvcm0gU3lzdGVtSlMuYnVuZGxlc1snbXlidW5kbGUnXSA9IFsnanF1ZXJ5JywgJ2Jvb3RzdHJhcC9qcy9ib290c3RyYXAnXVxuICBob29rQ29uc3RydWN0b3IoZnVuY3Rpb24oY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5idW5kbGVzID0ge307XG4gICAgICB0aGlzLl9sb2FkZXIubG9hZGVkQnVuZGxlcyA9IHt9O1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIGFzc2lnbiBidW5kbGUgbWV0YWRhdGEgZm9yIGJ1bmRsZSBsb2Fkc1xuICBob29rKCdsb2NhdGUnLCBmdW5jdGlvbihsb2NhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG4gICAgICB2YXIgbWF0Y2hlZCA9IGZhbHNlO1xuXG4gICAgICBpZiAoIShsb2FkLm5hbWUgaW4gbG9hZGVyLmRlZmluZWQpKVxuICAgICAgICBmb3IgKHZhciBiIGluIGxvYWRlci5idW5kbGVzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2FkZXIuYnVuZGxlc1tiXS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGN1ck1vZHVsZSA9IGxvYWRlci5idW5kbGVzW2JdW2ldO1xuXG4gICAgICAgICAgICBpZiAoY3VyTW9kdWxlID09IGxvYWQubmFtZSkge1xuICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHdpbGRjYXJkIGluIGJ1bmRsZXMgZG9lcyBub3QgaW5jbHVkZSAvIGJvdW5kYXJpZXNcbiAgICAgICAgICAgIGlmIChjdXJNb2R1bGUuaW5kZXhPZignKicpICE9IC0xKSB7XG4gICAgICAgICAgICAgIHZhciBwYXJ0cyA9IGN1ck1vZHVsZS5zcGxpdCgnKicpO1xuICAgICAgICAgICAgICBpZiAocGFydHMubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICAgICAgICBsb2FkZXIuYnVuZGxlc1tiXS5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGxvYWQubmFtZS5zdWJzdHJpbmcoMCwgcGFydHNbMF0ubGVuZ3RoKSA9PSBwYXJ0c1swXSAmJlxuICAgICAgICAgICAgICAgICAgbG9hZC5uYW1lLnN1YnN0cihsb2FkLm5hbWUubGVuZ3RoIC0gcGFydHNbMV0ubGVuZ3RoLCBwYXJ0c1sxXS5sZW5ndGgpID09IHBhcnRzWzFdICYmXG4gICAgICAgICAgICAgICAgICBsb2FkLm5hbWUuc3Vic3RyKHBhcnRzWzBdLmxlbmd0aCwgbG9hZC5uYW1lLmxlbmd0aCAtIHBhcnRzWzFdLmxlbmd0aCAtIHBhcnRzWzBdLmxlbmd0aCkuaW5kZXhPZignLycpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAobWF0Y2hlZClcbiAgICAgICAgICAgIHJldHVybiBsb2FkZXJbJ2ltcG9ydCddKGIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGxvY2F0ZS5jYWxsKGxvYWRlciwgbG9hZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICByZXR1cm4gbG9jYXRlLmNhbGwobG9hZGVyLCBsb2FkKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG4vKlxuICogRGVwZW5kZW5jeSBUcmVlIENhY2hlXG4gKiBcbiAqIEFsbG93cyBhIGJ1aWxkIHRvIHByZS1wb3B1bGF0ZSBhIGRlcGVuZGVuY3kgdHJhY2UgdHJlZSBvbiB0aGUgbG9hZGVyIG9mIFxuICogdGhlIGV4cGVjdGVkIGRlcGVuZGVuY3kgdHJlZSwgdG8gYmUgbG9hZGVkIHVwZnJvbnQgd2hlbiByZXF1ZXN0aW5nIHRoZVxuICogbW9kdWxlLCBhdm9pbmRpbmcgdGhlIG4gcm91bmQgdHJpcHMgbGF0ZW5jeSBvZiBtb2R1bGUgbG9hZGluZywgd2hlcmUgXG4gKiBuIGlzIHRoZSBkZXBlbmRlbmN5IHRyZWUgZGVwdGguXG4gKlxuICogZWc6XG4gKiBTeXN0ZW1KUy5kZXBDYWNoZSA9IHtcbiAqICAnYXBwJzogWydub3JtYWxpemVkJywgJ2RlcHMnXSxcbiAqICAnbm9ybWFsaXplZCc6IFsnYW5vdGhlciddLFxuICogICdkZXBzJzogWyd0cmVlJ11cbiAqIH07XG4gKiBcbiAqIFN5c3RlbUpTLmltcG9ydCgnYXBwJykgXG4gKiAvLyBzaW11bHRhbmVvdXNseSBzdGFydHMgbG9hZGluZyBhbGwgb2Y6XG4gKiAvLyAnbm9ybWFsaXplZCcsICdkZXBzJywgJ2Fub3RoZXInLCAndHJlZSdcbiAqIC8vIGJlZm9yZSBcImFwcFwiIHNvdXJjZSBpcyBldmVuIGxvYWRlZFxuICpcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gIGhvb2tDb25zdHJ1Y3RvcihmdW5jdGlvbihjb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmRlcENhY2hlID0ge307XG4gICAgfVxuICB9KTtcblxuICBob29rKCdsb2NhdGUnLCBmdW5jdGlvbihsb2NhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obG9hZCkge1xuICAgICAgdmFyIGxvYWRlciA9IHRoaXM7XG4gICAgICAvLyBsb2FkIGRpcmVjdCBkZXBzLCBpbiB0dXJuIHdpbGwgcGljayB1cCB0aGVpciB0cmFjZSB0cmVlc1xuICAgICAgdmFyIGRlcHMgPSBsb2FkZXIuZGVwQ2FjaGVbbG9hZC5uYW1lXTtcbiAgICAgIGlmIChkZXBzKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgbG9hZGVyWydpbXBvcnQnXShkZXBzW2ldLCBsb2FkLm5hbWUpO1xuXG4gICAgICByZXR1cm4gbG9jYXRlLmNhbGwobG9hZGVyLCBsb2FkKTtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG4gIFxuU3lzdGVtID0gbmV3IFN5c3RlbUpTTG9hZGVyKCk7XG5cbl9fZ2xvYmFsLlN5c3RlbUpTID0gU3lzdGVtO1xuU3lzdGVtLnZlcnNpb24gPSAnMC4xOS4zMSBTdGFuZGFyZCc7XG4gIGlmICh0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzICYmIHR5cGVvZiBleHBvcnRzID09ICdvYmplY3QnKVxuICAgIG1vZHVsZS5leHBvcnRzID0gU3lzdGVtO1xuXG4gIF9fZ2xvYmFsLlN5c3RlbSA9IFN5c3RlbTtcblxufSkodHlwZW9mIHNlbGYgIT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogZ2xvYmFsKTt9XG5cbi8vIGF1dG8tbG9hZCBQcm9taXNlIHBvbHlmaWxsIGlmIG5lZWRlZCBpbiB0aGUgYnJvd3NlclxudmFyIGRvUG9seWZpbGwgPSB0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCc7XG5cbi8vIGRvY3VtZW50LndyaXRlXG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICB2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgJF9fY3VyU2NyaXB0ID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdO1xuICBpZiAoZG9Qb2x5ZmlsbCkge1xuICAgIHZhciBjdXJQYXRoID0gJF9fY3VyU2NyaXB0LnNyYztcbiAgICB2YXIgYmFzZVBhdGggPSBjdXJQYXRoLnN1YnN0cigwLCBjdXJQYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICB3aW5kb3cuc3lzdGVtSlNCb290c3RyYXAgPSBib290c3RyYXA7XG4gICAgZG9jdW1lbnQud3JpdGUoXG4gICAgICAnPCcgKyAnc2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIiBzcmM9XCInICsgYmFzZVBhdGggKyAnc3lzdGVtLXBvbHlmaWxscy5qc1wiPicgKyAnPCcgKyAnL3NjcmlwdD4nXG4gICAgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBib290c3RyYXAoKTtcbiAgfVxufVxuLy8gaW1wb3J0U2NyaXB0c1xuZWxzZSBpZiAodHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gIHZhciBiYXNlUGF0aCA9ICcnO1xuICB0cnkge1xuICAgIHRocm93IG5ldyBFcnJvcignXycpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZS5zdGFjay5yZXBsYWNlKC8oPzphdHxAKS4qKGh0dHAuKyk6W1xcZF0rOltcXGRdKy8sIGZ1bmN0aW9uKG0sIHVybCkge1xuICAgICAgJF9fY3VyU2NyaXB0ID0geyBzcmM6IHVybCB9O1xuICAgICAgYmFzZVBhdGggPSB1cmwucmVwbGFjZSgvXFwvW15cXC9dKiQvLCAnLycpO1xuICAgIH0pO1xuICB9XG4gIGlmIChkb1BvbHlmaWxsKVxuICAgIGltcG9ydFNjcmlwdHMoYmFzZVBhdGggKyAnc3lzdGVtLXBvbHlmaWxscy5qcycpO1xuICBib290c3RyYXAoKTtcbn1cbmVsc2Uge1xuICAkX19jdXJTY3JpcHQgPSB0eXBlb2YgX19maWxlbmFtZSAhPSAndW5kZWZpbmVkJyA/IHsgc3JjOiBfX2ZpbGVuYW1lIH0gOiBudWxsO1xuICBib290c3RyYXAoKTtcbn1cblxuXG59KSgpOyIsIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG5cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG5cblxuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XCJ1c2Ugc3RyaWN0XCI7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdHZhciBldmVudF90YXJnZXRfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBkZWZpbmVfcHJvcGVydHlfMSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdHZhciByZWdpc3Rlcl9lbGVtZW50XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHR2YXIgcHJvcGVydHlfZGVzY3JpcHRvcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIHRpbWVyc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgc2V0ID0gJ3NldCc7XG5cdHZhciBjbGVhciA9ICdjbGVhcic7XG5cdHZhciBibG9ja2luZ01ldGhvZHMgPSBbJ2FsZXJ0JywgJ3Byb21wdCcsICdjb25maXJtJ107XG5cdHZhciBfZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyA9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHdpbmRvdztcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCBzZXQsIGNsZWFyLCAnVGltZW91dCcpO1xuXHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdJbnRlcnZhbCcpO1xuXHR0aW1lcnNfMS5wYXRjaFRpbWVyKF9nbG9iYWwsIHNldCwgY2xlYXIsICdJbW1lZGlhdGUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAncmVxdWVzdCcsICdjYW5jZWxNYWNyb1Rhc2snLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAnbW96UmVxdWVzdCcsICdtb3pDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0dGltZXJzXzEucGF0Y2hUaW1lcihfZ2xvYmFsLCAnd2Via2l0UmVxdWVzdCcsICd3ZWJraXRDYW5jZWwnLCAnQW5pbWF0aW9uRnJhbWUnKTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja2luZ01ldGhvZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBuYW1lID0gYmxvY2tpbmdNZXRob2RzW2ldO1xuXHQgICAgdXRpbHNfMS5wYXRjaE1ldGhvZChfZ2xvYmFsLCBuYW1lLCBmdW5jdGlvbiAoZGVsZWdhdGUsIHN5bWJvbCwgbmFtZSkge1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAocywgYXJncykge1xuXHQgICAgICAgICAgICByZXR1cm4gWm9uZS5jdXJyZW50LnJ1bihkZWxlZ2F0ZSwgX2dsb2JhbCwgYXJncywgbmFtZSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0pO1xuXHR9XG5cdGV2ZW50X3RhcmdldF8xLmV2ZW50VGFyZ2V0UGF0Y2goX2dsb2JhbCk7XG5cdHByb3BlcnR5X2Rlc2NyaXB0b3JfMS5wcm9wZXJ0eURlc2NyaXB0b3JQYXRjaChfZ2xvYmFsKTtcblx0dXRpbHNfMS5wYXRjaENsYXNzKCdNdXRhdGlvbk9ic2VydmVyJyk7XG5cdHV0aWxzXzEucGF0Y2hDbGFzcygnV2ViS2l0TXV0YXRpb25PYnNlcnZlcicpO1xuXHR1dGlsc18xLnBhdGNoQ2xhc3MoJ0ZpbGVSZWFkZXInKTtcblx0ZGVmaW5lX3Byb3BlcnR5XzEucHJvcGVydHlQYXRjaCgpO1xuXHRyZWdpc3Rlcl9lbGVtZW50XzEucmVnaXN0ZXJFbGVtZW50UGF0Y2goX2dsb2JhbCk7XG5cdC8vIFRyZWF0IFhNTEhUVFBSZXF1ZXN0IGFzIGEgbWFjcm90YXNrLlxuXHRwYXRjaFhIUihfZ2xvYmFsKTtcblx0dmFyIFhIUl9UQVNLID0gdXRpbHNfMS56b25lU3ltYm9sKCd4aHJUYXNrJyk7XG5cdGZ1bmN0aW9uIHBhdGNoWEhSKHdpbmRvdykge1xuXHQgICAgZnVuY3Rpb24gZmluZFBlbmRpbmdUYXNrKHRhcmdldCkge1xuXHQgICAgICAgIHZhciBwZW5kaW5nVGFzayA9IHRhcmdldFtYSFJfVEFTS107XG5cdCAgICAgICAgcmV0dXJuIHBlbmRpbmdUYXNrO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcblx0ICAgICAgICBkYXRhLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoZGF0YS50YXJnZXQucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkge1xuXHQgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmFib3J0ZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0YXNrLmludm9rZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIHN0b3JlZFRhc2sgPSBkYXRhLnRhcmdldFtYSFJfVEFTS107XG5cdCAgICAgICAgaWYgKCFzdG9yZWRUYXNrKSB7XG5cdCAgICAgICAgICAgIGRhdGEudGFyZ2V0W1hIUl9UQVNLXSA9IHRhc2s7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldE5hdGl2ZS5hcHBseShkYXRhLnRhcmdldCwgZGF0YS5hcmdzKTtcblx0ICAgICAgICByZXR1cm4gdGFzaztcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHBsYWNlaG9sZGVyQ2FsbGJhY2soKSB7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjbGVhclRhc2sodGFzaykge1xuXHQgICAgICAgIHZhciBkYXRhID0gdGFzay5kYXRhO1xuXHQgICAgICAgIC8vIE5vdGUgLSBpZGVhbGx5LCB3ZSB3b3VsZCBjYWxsIGRhdGEudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIgaGVyZSwgYnV0IGl0J3MgdG9vIGxhdGVcblx0ICAgICAgICAvLyB0byBwcmV2ZW50IGl0IGZyb20gZmlyaW5nLiBTbyBpbnN0ZWFkLCB3ZSBzdG9yZSBpbmZvIGZvciB0aGUgZXZlbnQgbGlzdGVuZXIuXG5cdCAgICAgICAgZGF0YS5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm4gY2xlYXJOYXRpdmUuYXBwbHkoZGF0YS50YXJnZXQsIGRhdGEuYXJncyk7XG5cdCAgICB9XG5cdCAgICB2YXIgc2V0TmF0aXZlID0gdXRpbHNfMS5wYXRjaE1ldGhvZCh3aW5kb3cuWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnc2VuZCcsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZ1bmN0aW9uIChzZWxmLCBhcmdzKSB7XG5cdCAgICAgICAgdmFyIHpvbmUgPSBab25lLmN1cnJlbnQ7XG5cdCAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICAgIHRhcmdldDogc2VsZixcblx0ICAgICAgICAgICAgaXNQZXJpb2RpYzogZmFsc2UsXG5cdCAgICAgICAgICAgIGRlbGF5OiBudWxsLFxuXHQgICAgICAgICAgICBhcmdzOiBhcmdzLFxuXHQgICAgICAgICAgICBhYm9ydGVkOiBmYWxzZVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmV0dXJuIHpvbmUuc2NoZWR1bGVNYWNyb1Rhc2soJ1hNTEh0dHBSZXF1ZXN0LnNlbmQnLCBwbGFjZWhvbGRlckNhbGxiYWNrLCBvcHRpb25zLCBzY2hlZHVsZVRhc2ssIGNsZWFyVGFzayk7XG5cdCAgICB9OyB9KTtcblx0ICAgIHZhciBjbGVhck5hdGl2ZSA9IHV0aWxzXzEucGF0Y2hNZXRob2Qod2luZG93LlhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZSwgJ2Fib3J0JywgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHQgICAgICAgIHZhciB0YXNrID0gZmluZFBlbmRpbmdUYXNrKHNlbGYpO1xuXHQgICAgICAgIGlmICh0YXNrICYmIHR5cGVvZiB0YXNrLnR5cGUgPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgLy8gSWYgdGhlIFhIUiBoYXMgYWxyZWFkeSBjb21wbGV0ZWQsIGRvIG5vdGhpbmcuXG5cdCAgICAgICAgICAgIGlmICh0YXNrLmNhbmNlbEZuID09IG51bGwpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0YXNrLnpvbmUuY2FuY2VsVGFzayh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBhcmUgdHJ5aW5nIHRvIGFib3J0IGFuIFhIUiB3aGljaCBoYXMgbm90IHlldCBiZWVuIHNlbnQsIHNvIHRoZXJlIGlzIG5vIHRhc2sgdG8gY2FuY2VsLiBEbyBub3RoaW5nLlxuXHQgICAgfTsgfSk7XG5cdH1cblx0Ly8vIEdFT19MT0NBVElPTlxuXHRpZiAoX2dsb2JhbFsnbmF2aWdhdG9yJ10gJiYgX2dsb2JhbFsnbmF2aWdhdG9yJ10uZ2VvbG9jYXRpb24pIHtcblx0ICAgIHV0aWxzXzEucGF0Y2hQcm90b3R5cGUoX2dsb2JhbFsnbmF2aWdhdG9yJ10uZ2VvbG9jYXRpb24sIFtcblx0ICAgICAgICAnZ2V0Q3VycmVudFBvc2l0aW9uJyxcblx0ICAgICAgICAnd2F0Y2hQb3NpdGlvbidcblx0ICAgIF0pO1xuXHR9XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkgeztcblx0O1xuXHR2YXIgWm9uZSA9IChmdW5jdGlvbiAoZ2xvYmFsKSB7XG5cdCAgICB2YXIgWm9uZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gWm9uZShwYXJlbnQsIHpvbmVTcGVjKSB7XG5cdCAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSBudWxsO1xuXHQgICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG5cdCAgICAgICAgICAgIHRoaXMuX25hbWUgPSB6b25lU3BlYyA/IHpvbmVTcGVjLm5hbWUgfHwgJ3VubmFtZWQnIDogJzxyb290Pic7XG5cdCAgICAgICAgICAgIHRoaXMuX3Byb3BlcnRpZXMgPSB6b25lU3BlYyAmJiB6b25lU3BlYy5wcm9wZXJ0aWVzIHx8IHt9O1xuXHQgICAgICAgICAgICB0aGlzLl96b25lRGVsZWdhdGUgPSBuZXcgWm9uZURlbGVnYXRlKHRoaXMsIHRoaXMuX3BhcmVudCAmJiB0aGlzLl9wYXJlbnQuX3pvbmVEZWxlZ2F0ZSwgem9uZVNwZWMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJjdXJyZW50XCIsIHtcblx0ICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBfY3VycmVudFpvbmU7IH0sXG5cdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIDtcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWm9uZSwgXCJjdXJyZW50VGFza1wiLCB7XG5cdCAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gX2N1cnJlbnRUYXNrOyB9LFxuXHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgICA7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmUucHJvdG90eXBlLCBcInBhcmVudFwiLCB7XG5cdCAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fcGFyZW50OyB9LFxuXHQgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgICA7XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFpvbmUucHJvdG90eXBlLCBcIm5hbWVcIiwge1xuXHQgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMuX25hbWU7IH0sXG5cdCAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIDtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcblx0ICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnQpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Ll9wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudC5fcHJvcGVydGllc1trZXldO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuX3BhcmVudDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uICh6b25lU3BlYykge1xuXHQgICAgICAgICAgICBpZiAoIXpvbmVTcGVjKVxuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdab25lU3BlYyByZXF1aXJlZCEnKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5mb3JrKHRoaXMsIHpvbmVTcGVjKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIHNvdXJjZSkge1xuXHQgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGluZyBmdW5jdGlvbiBnb3Q6ICcgKyBjYWxsYmFjayk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIF9jYWxsYmFjayA9IHRoaXMuX3pvbmVEZWxlZ2F0ZS5pbnRlcmNlcHQodGhpcywgY2FsbGJhY2ssIHNvdXJjZSk7XG5cdCAgICAgICAgICAgIHZhciB6b25lID0gdGhpcztcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB6b25lLnJ1bkd1YXJkZWQoX2NhbGxiYWNrLCB0aGlzLCBhcmd1bWVudHMsIHNvdXJjZSk7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzLCBzb3VyY2UpIHtcblx0ICAgICAgICAgICAgaWYgKGFwcGx5VGhpcyA9PT0gdm9pZCAwKSB7IGFwcGx5VGhpcyA9IG51bGw7IH1cblx0ICAgICAgICAgICAgaWYgKGFwcGx5QXJncyA9PT0gdm9pZCAwKSB7IGFwcGx5QXJncyA9IG51bGw7IH1cblx0ICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdm9pZCAwKSB7IHNvdXJjZSA9IG51bGw7IH1cblx0ICAgICAgICAgICAgdmFyIG9sZFpvbmUgPSBfY3VycmVudFpvbmU7XG5cdCAgICAgICAgICAgIF9jdXJyZW50Wm9uZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICBfY3VycmVudFpvbmUgPSBvbGRab25lO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5ydW5HdWFyZGVkID0gZnVuY3Rpb24gKGNhbGxiYWNrLCBhcHBseVRoaXMsIGFwcGx5QXJncywgc291cmNlKSB7XG5cdCAgICAgICAgICAgIGlmIChhcHBseVRoaXMgPT09IHZvaWQgMCkgeyBhcHBseVRoaXMgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIGlmIChhcHBseUFyZ3MgPT09IHZvaWQgMCkgeyBhcHBseUFyZ3MgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIGlmIChzb3VyY2UgPT09IHZvaWQgMCkgeyBzb3VyY2UgPSBudWxsOyB9XG5cdCAgICAgICAgICAgIHZhciBvbGRab25lID0gX2N1cnJlbnRab25lO1xuXHQgICAgICAgICAgICBfY3VycmVudFpvbmUgPSB0aGlzO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZSh0aGlzLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fem9uZURlbGVnYXRlLmhhbmRsZUVycm9yKHRoaXMsIGVycm9yKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICBfY3VycmVudFpvbmUgPSBvbGRab25lO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5ydW5UYXNrID0gZnVuY3Rpb24gKHRhc2ssIGFwcGx5VGhpcywgYXBwbHlBcmdzKSB7XG5cdCAgICAgICAgICAgIHRhc2sucnVuQ291bnQrKztcblx0ICAgICAgICAgICAgaWYgKHRhc2suem9uZSAhPSB0aGlzKVxuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHRhc2sgY2FuIG9ubHkgYmUgcnVuIGluIHRoZSB6b25lIHdoaWNoIGNyZWF0ZWQgaXQhIChDcmVhdGlvbjogJyArXG5cdCAgICAgICAgICAgICAgICAgICAgdGFzay56b25lLm5hbWUgKyAnOyBFeGVjdXRpb246ICcgKyB0aGlzLm5hbWUgKyAnKScpO1xuXHQgICAgICAgICAgICB2YXIgcHJldmlvdXNUYXNrID0gX2N1cnJlbnRUYXNrO1xuXHQgICAgICAgICAgICBfY3VycmVudFRhc2sgPSB0YXNrO1xuXHQgICAgICAgICAgICB2YXIgb2xkWm9uZSA9IF9jdXJyZW50Wm9uZTtcblx0ICAgICAgICAgICAgX2N1cnJlbnRab25lID0gdGhpcztcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGlmICh0YXNrLnR5cGUgPT0gJ21hY3JvVGFzaycgJiYgdGFzay5kYXRhICYmICF0YXNrLmRhdGEuaXNQZXJpb2RpYykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhc2suY2FuY2VsRm4gPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLmludm9rZVRhc2sodGhpcywgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3pvbmVEZWxlZ2F0ZS5oYW5kbGVFcnJvcih0aGlzLCBlcnJvcikpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgX2N1cnJlbnRab25lID0gb2xkWm9uZTtcblx0ICAgICAgICAgICAgICAgIF9jdXJyZW50VGFzayA9IHByZXZpb3VzVGFzaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUuc2NoZWR1bGVNaWNyb1Rhc2sgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5zY2hlZHVsZVRhc2sodGhpcywgbmV3IFpvbmVUYXNrKCdtaWNyb1Rhc2snLCB0aGlzLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgbnVsbCkpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZS5wcm90b3R5cGUuc2NoZWR1bGVNYWNyb1Rhc2sgPSBmdW5jdGlvbiAoc291cmNlLCBjYWxsYmFjaywgZGF0YSwgY3VzdG9tU2NoZWR1bGUsIGN1c3RvbUNhbmNlbCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fem9uZURlbGVnYXRlLnNjaGVkdWxlVGFzayh0aGlzLCBuZXcgWm9uZVRhc2soJ21hY3JvVGFzaycsIHRoaXMsIHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUucHJvdG90eXBlLnNjaGVkdWxlRXZlbnRUYXNrID0gZnVuY3Rpb24gKHNvdXJjZSwgY2FsbGJhY2ssIGRhdGEsIGN1c3RvbVNjaGVkdWxlLCBjdXN0b21DYW5jZWwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3pvbmVEZWxlZ2F0ZS5zY2hlZHVsZVRhc2sodGhpcywgbmV3IFpvbmVUYXNrKCdldmVudFRhc2snLCB0aGlzLCBzb3VyY2UsIGNhbGxiYWNrLCBkYXRhLCBjdXN0b21TY2hlZHVsZSwgY3VzdG9tQ2FuY2VsKSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lLnByb3RvdHlwZS5jYW5jZWxUYXNrID0gZnVuY3Rpb24gKHRhc2spIHtcblx0ICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5fem9uZURlbGVnYXRlLmNhbmNlbFRhc2sodGhpcywgdGFzayk7XG5cdCAgICAgICAgICAgIHRhc2sucnVuQ291bnQgPSAtMTtcblx0ICAgICAgICAgICAgdGFzay5jYW5jZWxGbiA9IG51bGw7XG5cdCAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmUuX19zeW1ib2xfXyA9IF9fc3ltYm9sX187XG5cdCAgICAgICAgcmV0dXJuIFpvbmU7XG5cdCAgICB9KCkpO1xuXHQgICAgO1xuXHQgICAgdmFyIFpvbmVEZWxlZ2F0ZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gWm9uZURlbGVnYXRlKHpvbmUsIHBhcmVudERlbGVnYXRlLCB6b25lU3BlYykge1xuXHQgICAgICAgICAgICB0aGlzLl90YXNrQ291bnRzID0geyBtaWNyb1Rhc2s6IDAsIG1hY3JvVGFzazogMCwgZXZlbnRUYXNrOiAwIH07XG5cdCAgICAgICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG5cdCAgICAgICAgICAgIHRoaXMuX3BhcmVudERlbGVnYXRlID0gcGFyZW50RGVsZWdhdGU7XG5cdCAgICAgICAgICAgIHRoaXMuX2ZvcmtaUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYyAmJiB6b25lU3BlYy5vbkZvcmsgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9mb3JrWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9mb3JrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkZvcmsgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9mb3JrRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2ludGVyY2VwdFpTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faW50ZXJjZXB0WlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnRlcmNlcHREbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW50ZXJjZXB0ID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW50ZXJjZXB0RGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2ludm9rZVpTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnZva2VEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uSW52b2tlID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5faW52b2tlRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2hhbmRsZUVycm9yWlMgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHpvbmVTcGVjIDogcGFyZW50RGVsZWdhdGUuX2hhbmRsZUVycm9yWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9oYW5kbGVFcnJvckRsZ3QgPSB6b25lU3BlYyAmJiAoem9uZVNwZWMub25IYW5kbGVFcnJvciA/IHBhcmVudERlbGVnYXRlIDogcGFyZW50RGVsZWdhdGUuX2hhbmRsZUVycm9yRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlVGFza1pTID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gem9uZVNwZWMgOiBwYXJlbnREZWxlZ2F0ZS5fc2NoZWR1bGVUYXNrWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZVRhc2tEbGd0ID0gem9uZVNwZWMgJiYgKHpvbmVTcGVjLm9uU2NoZWR1bGVUYXNrID8gcGFyZW50RGVsZWdhdGUgOiBwYXJlbnREZWxlZ2F0ZS5fc2NoZWR1bGVUYXNrRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2ludm9rZVRhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9pbnZva2VUYXNrWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9pbnZva2VUYXNrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkludm9rZVRhc2sgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9pbnZva2VUYXNrRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2NhbmNlbFRhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9jYW5jZWxUYXNrWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9jYW5jZWxUYXNrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkNhbmNlbFRhc2sgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9jYW5jZWxUYXNrRGxndCk7XG5cdCAgICAgICAgICAgIHRoaXMuX2hhc1Rhc2taUyA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhc1Rhc2sgPyB6b25lU3BlYyA6IHBhcmVudERlbGVnYXRlLl9oYXNUYXNrWlMpO1xuXHQgICAgICAgICAgICB0aGlzLl9oYXNUYXNrRGxndCA9IHpvbmVTcGVjICYmICh6b25lU3BlYy5vbkhhc1Rhc2sgPyBwYXJlbnREZWxlZ2F0ZSA6IHBhcmVudERlbGVnYXRlLl9oYXNUYXNrRGxndCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuZm9yayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCB6b25lU3BlYykge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5fZm9ya1pTXG5cdCAgICAgICAgICAgICAgICA/IHRoaXMuX2ZvcmtaUy5vbkZvcmsodGhpcy5fZm9ya0RsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgem9uZVNwZWMpXG5cdCAgICAgICAgICAgICAgICA6IG5ldyBab25lKHRhcmdldFpvbmUsIHpvbmVTcGVjKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaW50ZXJjZXB0ID0gZnVuY3Rpb24gKHRhcmdldFpvbmUsIGNhbGxiYWNrLCBzb3VyY2UpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVyY2VwdFpTXG5cdCAgICAgICAgICAgICAgICA/IHRoaXMuX2ludGVyY2VwdFpTLm9uSW50ZXJjZXB0KHRoaXMuX2ludGVyY2VwdERsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgY2FsbGJhY2ssIHNvdXJjZSlcblx0ICAgICAgICAgICAgICAgIDogY2FsbGJhY2s7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmludm9rZSA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faW52b2tlWlNcblx0ICAgICAgICAgICAgICAgID8gdGhpcy5faW52b2tlWlMub25JbnZva2UodGhpcy5faW52b2tlRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCBjYWxsYmFjaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MsIHNvdXJjZSlcblx0ICAgICAgICAgICAgICAgIDogY2FsbGJhY2suYXBwbHkoYXBwbHlUaGlzLCBhcHBseUFyZ3MpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5oYW5kbGVFcnJvciA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBlcnJvcikge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlRXJyb3JaU1xuXHQgICAgICAgICAgICAgICAgPyB0aGlzLl9oYW5kbGVFcnJvclpTLm9uSGFuZGxlRXJyb3IodGhpcy5faGFuZGxlRXJyb3JEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIGVycm9yKVxuXHQgICAgICAgICAgICAgICAgOiB0cnVlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZURlbGVnYXRlLnByb3RvdHlwZS5zY2hlZHVsZVRhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgdGFzaykge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NjaGVkdWxlVGFza1pTKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlVGFza1pTLm9uU2NoZWR1bGVUYXNrKHRoaXMuX3NjaGVkdWxlVGFza0RsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgdGFzayk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXNrLnNjaGVkdWxlRm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICB0YXNrLnNjaGVkdWxlRm4odGFzayk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIGlmICh0YXNrLnR5cGUgPT0gJ21pY3JvVGFzaycpIHtcblx0ICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZU1pY3JvVGFzayh0YXNrKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGFzayBpcyBtaXNzaW5nIHNjaGVkdWxlRm4uJyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdGFzaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIGlmICh0YXJnZXRab25lID09IHRoaXMuem9uZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRhc2tDb3VudCh0YXNrLnR5cGUsIDEpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lRGVsZWdhdGUucHJvdG90eXBlLmludm9rZVRhc2sgPSBmdW5jdGlvbiAodGFyZ2V0Wm9uZSwgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpIHtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnZva2VUYXNrWlNcblx0ICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX2ludm9rZVRhc2taUy5vbkludm9rZVRhc2sodGhpcy5faW52b2tlVGFza0RsZ3QsIHRoaXMuem9uZSwgdGFyZ2V0Wm9uZSwgdGFzaywgYXBwbHlUaGlzLCBhcHBseUFyZ3MpXG5cdCAgICAgICAgICAgICAgICAgICAgOiB0YXNrLmNhbGxiYWNrLmFwcGx5KGFwcGx5VGhpcywgYXBwbHlBcmdzKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBmaW5hbGx5IHtcblx0ICAgICAgICAgICAgICAgIGlmICh0YXJnZXRab25lID09IHRoaXMuem9uZSAmJiAodGFzay50eXBlICE9ICdldmVudFRhc2snKSAmJiAhKHRhc2suZGF0YSAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYykpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUYXNrQ291bnQodGFzay50eXBlLCAtMSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuY2FuY2VsVGFzayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCB0YXNrKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWx1ZTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMuX2NhbmNlbFRhc2taUykge1xuXHQgICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLl9jYW5jZWxUYXNrWlMub25DYW5jZWxUYXNrKHRoaXMuX2NhbmNlbFRhc2tEbGd0LCB0aGlzLnpvbmUsIHRhcmdldFpvbmUsIHRhc2spO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKCF0YXNrLmNhbmNlbEZuKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rhc2sgZG9lcyBub3Qgc3VwcG9ydCBjYW5jZWxsYXRpb24sIG9yIGlzIGFscmVhZHkgY2FuY2VsZWQuJyk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB2YWx1ZSA9IHRhc2suY2FuY2VsRm4odGFzayk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHRhcmdldFpvbmUgPT0gdGhpcy56b25lKSB7XG5cdCAgICAgICAgICAgICAgICAvLyB0aGlzIHNob3VsZCBub3QgYmUgaW4gdGhlIGZpbmFsbHkgYmxvY2ssIGJlY2F1c2UgZXhjZXB0aW9ucyBhc3N1bWUgbm90IGNhbmNlbGVkLlxuXHQgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVGFza0NvdW50KHRhc2sudHlwZSwgLTEpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuaGFzVGFzayA9IGZ1bmN0aW9uICh0YXJnZXRab25lLCBpc0VtcHR5KSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNUYXNrWlMgJiYgdGhpcy5faGFzVGFza1pTLm9uSGFzVGFzayh0aGlzLl9oYXNUYXNrRGxndCwgdGhpcy56b25lLCB0YXJnZXRab25lLCBpc0VtcHR5KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVEZWxlZ2F0ZS5wcm90b3R5cGUuX3VwZGF0ZVRhc2tDb3VudCA9IGZ1bmN0aW9uICh0eXBlLCBjb3VudCkge1xuXHQgICAgICAgICAgICB2YXIgY291bnRzID0gdGhpcy5fdGFza0NvdW50cztcblx0ICAgICAgICAgICAgdmFyIHByZXYgPSBjb3VudHNbdHlwZV07XG5cdCAgICAgICAgICAgIHZhciBuZXh0ID0gY291bnRzW3R5cGVdID0gcHJldiArIGNvdW50O1xuXHQgICAgICAgICAgICBpZiAobmV4dCA8IDApIHtcblx0ICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW9yZSB0YXNrcyBleGVjdXRlZCB0aGVuIHdlcmUgc2NoZWR1bGVkLicpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChwcmV2ID09IDAgfHwgbmV4dCA9PSAwKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgaXNFbXB0eSA9IHtcblx0ICAgICAgICAgICAgICAgICAgICBtaWNyb1Rhc2s6IGNvdW50cy5taWNyb1Rhc2sgPiAwLFxuXHQgICAgICAgICAgICAgICAgICAgIG1hY3JvVGFzazogY291bnRzLm1hY3JvVGFzayA+IDAsXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXNrOiBjb3VudHMuZXZlbnRUYXNrID4gMCxcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IHR5cGVcblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzVGFzayh0aGlzLnpvbmUsIGlzRW1wdHkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgZmluYWxseSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudERlbGVnYXRlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhcmVudERlbGVnYXRlLl91cGRhdGVUYXNrQ291bnQodHlwZSwgY291bnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmV0dXJuIFpvbmVEZWxlZ2F0ZTtcblx0ICAgIH0oKSk7XG5cdCAgICB2YXIgWm9uZVRhc2sgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZ1bmN0aW9uIFpvbmVUYXNrKHR5cGUsIHpvbmUsIHNvdXJjZSwgY2FsbGJhY2ssIG9wdGlvbnMsIHNjaGVkdWxlRm4sIGNhbmNlbEZuKSB7XG5cdCAgICAgICAgICAgIHRoaXMucnVuQ291bnQgPSAwO1xuXHQgICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuXHQgICAgICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuXHQgICAgICAgICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcblx0ICAgICAgICAgICAgdGhpcy5kYXRhID0gb3B0aW9ucztcblx0ICAgICAgICAgICAgdGhpcy5zY2hlZHVsZUZuID0gc2NoZWR1bGVGbjtcblx0ICAgICAgICAgICAgdGhpcy5jYW5jZWxGbiA9IGNhbmNlbEZuO1xuXHQgICAgICAgICAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG5cdCAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICAgICAgdGhpcy5pbnZva2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB6b25lLnJ1blRhc2soc2VsZiwgdGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgICAgICAgIGRyYWluTWljcm9UYXNrUXVldWUoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIFpvbmVUYXNrO1xuXHQgICAgfSgpKTtcblx0ICAgIGZ1bmN0aW9uIF9fc3ltYm9sX18obmFtZSkgeyByZXR1cm4gJ19fem9uZV9zeW1ib2xfXycgKyBuYW1lOyB9XG5cdCAgICA7XG5cdCAgICB2YXIgc3ltYm9sU2V0VGltZW91dCA9IF9fc3ltYm9sX18oJ3NldFRpbWVvdXQnKTtcblx0ICAgIHZhciBzeW1ib2xQcm9taXNlID0gX19zeW1ib2xfXygnUHJvbWlzZScpO1xuXHQgICAgdmFyIHN5bWJvbFRoZW4gPSBfX3N5bWJvbF9fKCd0aGVuJyk7XG5cdCAgICB2YXIgX2N1cnJlbnRab25lID0gbmV3IFpvbmUobnVsbCwgbnVsbCk7XG5cdCAgICB2YXIgX2N1cnJlbnRUYXNrID0gbnVsbDtcblx0ICAgIHZhciBfbWljcm9UYXNrUXVldWUgPSBbXTtcblx0ICAgIHZhciBfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlID0gZmFsc2U7XG5cdCAgICB2YXIgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycyA9IFtdO1xuXHQgICAgdmFyIF9kcmFpblNjaGVkdWxlZCA9IGZhbHNlO1xuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVRdWV1ZURyYWluKCkge1xuXHQgICAgICAgIGlmICghX2RyYWluU2NoZWR1bGVkICYmICFfY3VycmVudFRhc2sgJiYgX21pY3JvVGFza1F1ZXVlLmxlbmd0aCA9PSAwKSB7XG5cdCAgICAgICAgICAgIC8vIFdlIGFyZSBub3QgcnVubmluZyBpbiBUYXNrLCBzbyB3ZSBuZWVkIHRvIGtpY2tzdGFydCB0aGUgbWljcm90YXNrIHF1ZXVlLlxuXHQgICAgICAgICAgICBpZiAoZ2xvYmFsW3N5bWJvbFByb21pc2VdKSB7XG5cdCAgICAgICAgICAgICAgICBnbG9iYWxbc3ltYm9sUHJvbWlzZV0ucmVzb2x2ZSgwKVtzeW1ib2xUaGVuXShkcmFpbk1pY3JvVGFza1F1ZXVlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGdsb2JhbFtzeW1ib2xTZXRUaW1lb3V0XShkcmFpbk1pY3JvVGFza1F1ZXVlLCAwKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWljcm9UYXNrKHRhc2spIHtcblx0ICAgICAgICBzY2hlZHVsZVF1ZXVlRHJhaW4oKTtcblx0ICAgICAgICBfbWljcm9UYXNrUXVldWUucHVzaCh0YXNrKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNvbnNvbGVFcnJvcihlKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGlvbiA9IGUgJiYgZS5yZWplY3Rpb247XG5cdCAgICAgICAgaWYgKHJlamVjdGlvbikge1xuXHQgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmhhbmRsZWQgUHJvbWlzZSByZWplY3Rpb246JywgcmVqZWN0aW9uIGluc3RhbmNlb2YgRXJyb3IgPyByZWplY3Rpb24ubWVzc2FnZSA6IHJlamVjdGlvbiwgJzsgWm9uZTonLCBlLnpvbmUubmFtZSwgJzsgVGFzazonLCBlLnRhc2sgJiYgZS50YXNrLnNvdXJjZSwgJzsgVmFsdWU6JywgcmVqZWN0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGRyYWluTWljcm9UYXNrUXVldWUoKSB7XG5cdCAgICAgICAgaWYgKCFfaXNEcmFpbmluZ01pY3JvdGFza1F1ZXVlKSB7XG5cdCAgICAgICAgICAgIF9pc0RyYWluaW5nTWljcm90YXNrUXVldWUgPSB0cnVlO1xuXHQgICAgICAgICAgICB3aGlsZSAoX21pY3JvVGFza1F1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgdmFyIHF1ZXVlID0gX21pY3JvVGFza1F1ZXVlO1xuXHQgICAgICAgICAgICAgICAgX21pY3JvVGFza1F1ZXVlID0gW107XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRhc2sgPSBxdWV1ZVtpXTtcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnpvbmUucnVuVGFzayh0YXNrLCBudWxsLCBudWxsKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZUVycm9yKGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB3aGlsZSAoX3VuY2F1Z2h0UHJvbWlzZUVycm9ycy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgIHZhciB1bmNhdWdodFByb21pc2VFcnJvcnMgPSBfdW5jYXVnaHRQcm9taXNlRXJyb3JzO1xuXHQgICAgICAgICAgICAgICAgX3VuY2F1Z2h0UHJvbWlzZUVycm9ycyA9IFtdO1xuXHQgICAgICAgICAgICAgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbihpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHVuY2F1Z2h0UHJvbWlzZUVycm9yID0gdW5jYXVnaHRQcm9taXNlRXJyb3JzW2ldO1xuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHVuY2F1Z2h0UHJvbWlzZUVycm9yLnpvbmUucnVuR3VhcmRlZChmdW5jdGlvbiAoKSB7IHRocm93IHVuY2F1Z2h0UHJvbWlzZUVycm9yOyB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZUVycm9yKGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuY2F1Z2h0UHJvbWlzZUVycm9ycy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICAgICAgICAgIF9sb29wXzEoaSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgX2lzRHJhaW5pbmdNaWNyb3Rhc2tRdWV1ZSA9IGZhbHNlO1xuXHQgICAgICAgICAgICBfZHJhaW5TY2hlZHVsZWQgPSBmYWxzZTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBpc1RoZW5hYmxlKHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlLnRoZW47XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBmb3J3YXJkUmVzb2x1dGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH1cblx0ICAgIGZ1bmN0aW9uIGZvcndhcmRSZWplY3Rpb24ocmVqZWN0aW9uKSB7IHJldHVybiBab25lQXdhcmVQcm9taXNlLnJlamVjdChyZWplY3Rpb24pOyB9XG5cdCAgICB2YXIgc3ltYm9sU3RhdGUgPSBfX3N5bWJvbF9fKCdzdGF0ZScpO1xuXHQgICAgdmFyIHN5bWJvbFZhbHVlID0gX19zeW1ib2xfXygndmFsdWUnKTtcblx0ICAgIHZhciBzb3VyY2UgPSAnUHJvbWlzZS50aGVuJztcblx0ICAgIHZhciBVTlJFU09MVkVEID0gbnVsbDtcblx0ICAgIHZhciBSRVNPTFZFRCA9IHRydWU7XG5cdCAgICB2YXIgUkVKRUNURUQgPSBmYWxzZTtcblx0ICAgIHZhciBSRUpFQ1RFRF9OT19DQVRDSCA9IDA7XG5cdCAgICBmdW5jdGlvbiBtYWtlUmVzb2x2ZXIocHJvbWlzZSwgc3RhdGUpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgc3RhdGUsIHYpO1xuXHQgICAgICAgICAgICAvLyBEbyBub3QgcmV0dXJuIHZhbHVlIG9yIHlvdSB3aWxsIGJyZWFrIHRoZSBQcm9taXNlIHNwZWMuXG5cdCAgICAgICAgfTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHN0YXRlLCB2YWx1ZSkge1xuXHQgICAgICAgIGlmIChwcm9taXNlW3N5bWJvbFN0YXRlXSA9PT0gVU5SRVNPTFZFRCkge1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBab25lQXdhcmVQcm9taXNlICYmIHZhbHVlW3N5bWJvbFN0YXRlXSAhPT0gVU5SRVNPTFZFRCkge1xuXHQgICAgICAgICAgICAgICAgY2xlYXJSZWplY3RlZE5vQ2F0Y2godmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgdmFsdWVbc3ltYm9sU3RhdGVdLCB2YWx1ZVtzeW1ib2xWYWx1ZV0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2UgaWYgKGlzVGhlbmFibGUodmFsdWUpKSB7XG5cdCAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKG1ha2VSZXNvbHZlcihwcm9taXNlLCBzdGF0ZSksIG1ha2VSZXNvbHZlcihwcm9taXNlLCBmYWxzZSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBzdGF0ZTtcblx0ICAgICAgICAgICAgICAgIHZhciBxdWV1ZSA9IHByb21pc2Vbc3ltYm9sVmFsdWVdO1xuXHQgICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xWYWx1ZV0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOykge1xuXHQgICAgICAgICAgICAgICAgICAgIHNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0KHByb21pc2UsIHF1ZXVlW2krK10sIHF1ZXVlW2krK10sIHF1ZXVlW2krK10sIHF1ZXVlW2krK10pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PSAwICYmIHN0YXRlID09IFJFSkVDVEVEKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBSRUpFQ1RFRF9OT19DQVRDSDtcblx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmNhdWdodCAoaW4gcHJvbWlzZSk6IFwiICsgdmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBlO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5yZWplY3Rpb24gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IucHJvbWlzZSA9IHByb21pc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLnpvbmUgPSBab25lLmN1cnJlbnQ7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLnRhc2sgPSBab25lLmN1cnJlbnRUYXNrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLnB1c2goZXJyb3IpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZVF1ZXVlRHJhaW4oKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gUmVzb2x2aW5nIGFuIGFscmVhZHkgcmVzb2x2ZWQgcHJvbWlzZSBpcyBhIG5vb3AuXG5cdCAgICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBjbGVhclJlamVjdGVkTm9DYXRjaChwcm9taXNlKSB7XG5cdCAgICAgICAgaWYgKHByb21pc2Vbc3ltYm9sU3RhdGVdID09PSBSRUpFQ1RFRF9OT19DQVRDSCkge1xuXHQgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFN0YXRlXSA9IFJFSkVDVEVEO1xuXHQgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF91bmNhdWdodFByb21pc2VFcnJvcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIGlmIChwcm9taXNlID09PSBfdW5jYXVnaHRQcm9taXNlRXJyb3JzW2ldLnByb21pc2UpIHtcblx0ICAgICAgICAgICAgICAgICAgICBfdW5jYXVnaHRQcm9taXNlRXJyb3JzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0KHByb21pc2UsIHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcblx0ICAgICAgICBjbGVhclJlamVjdGVkTm9DYXRjaChwcm9taXNlKTtcblx0ICAgICAgICB2YXIgZGVsZWdhdGUgPSBwcm9taXNlW3N5bWJvbFN0YXRlXSA/IG9uRnVsZmlsbGVkIHx8IGZvcndhcmRSZXNvbHV0aW9uIDogb25SZWplY3RlZCB8fCBmb3J3YXJkUmVqZWN0aW9uO1xuXHQgICAgICAgIHpvbmUuc2NoZWR1bGVNaWNyb1Rhc2soc291cmNlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShjaGFpblByb21pc2UsIHRydWUsIHpvbmUucnVuKGRlbGVnYXRlLCBudWxsLCBbcHJvbWlzZVtzeW1ib2xWYWx1ZV1dKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShjaGFpblByb21pc2UsIGZhbHNlLCBlcnJvcik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHZhciBab25lQXdhcmVQcm9taXNlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmdW5jdGlvbiBab25lQXdhcmVQcm9taXNlKGV4ZWN1dG9yKSB7XG5cdCAgICAgICAgICAgIHZhciBwcm9taXNlID0gdGhpcztcblx0ICAgICAgICAgICAgcHJvbWlzZVtzeW1ib2xTdGF0ZV0gPSBVTlJFU09MVkVEO1xuXHQgICAgICAgICAgICBwcm9taXNlW3N5bWJvbFZhbHVlXSA9IFtdOyAvLyBxdWV1ZTtcblx0ICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGV4ZWN1dG9yICYmIGV4ZWN1dG9yKG1ha2VSZXNvbHZlcihwcm9taXNlLCBSRVNPTFZFRCksIG1ha2VSZXNvbHZlcihwcm9taXNlLCBSRUpFQ1RFRCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlLCBmYWxzZSwgZSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5yZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXNvbHZlUHJvbWlzZShuZXcgdGhpcyhudWxsKSwgUkVTT0xWRUQsIHZhbHVlKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVBd2FyZVByb21pc2UucmVqZWN0ID0gZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXNvbHZlUHJvbWlzZShuZXcgdGhpcyhudWxsKSwgUkVKRUNURUQsIGVycm9yKTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIFpvbmVBd2FyZVByb21pc2UucmFjZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc29sdmU7XG5cdCAgICAgICAgICAgIHZhciByZWplY3Q7XG5cdCAgICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IHRoaXMoZnVuY3Rpb24gKHJlcywgcmVqKSB7IHJlc29sdmUgPSByZXM7IHJlamVjdCA9IHJlajsgfSk7XG5cdCAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVzb2x2ZSh2YWx1ZSkgeyBwcm9taXNlICYmIChwcm9taXNlID0gbnVsbCB8fCByZXNvbHZlKHZhbHVlKSk7IH1cblx0ICAgICAgICAgICAgZnVuY3Rpb24gb25SZWplY3QoZXJyb3IpIHsgcHJvbWlzZSAmJiAocHJvbWlzZSA9IG51bGwgfHwgcmVqZWN0KGVycm9yKSk7IH1cblx0ICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCB2YWx1ZXNfMSA9IHZhbHVlczsgX2kgPCB2YWx1ZXNfMS5sZW5ndGg7IF9pKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbHVlc18xW19pXTtcblx0ICAgICAgICAgICAgICAgIGlmICghaXNUaGVuYWJsZSh2YWx1ZSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMucmVzb2x2ZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB2YWx1ZS50aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5hbGwgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG5cdCAgICAgICAgICAgIHZhciByZXNvbHZlO1xuXHQgICAgICAgICAgICB2YXIgcmVqZWN0O1xuXHQgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzKGZ1bmN0aW9uIChyZXMsIHJlaikgeyByZXNvbHZlID0gcmVzOyByZWplY3QgPSByZWo7IH0pO1xuXHQgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuXHQgICAgICAgICAgICB2YXIgcmVzb2x2ZWRWYWx1ZXMgPSBbXTtcblx0ICAgICAgICAgICAgZnVuY3Rpb24gb25SZWplY3QoZXJyb3IpIHsgcHJvbWlzZSAmJiByZWplY3QoZXJyb3IpOyBwcm9taXNlID0gbnVsbDsgfVxuXHQgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHZhbHVlc18yID0gdmFsdWVzOyBfaSA8IHZhbHVlc18yLmxlbmd0aDsgX2krKykge1xuXHQgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzXzJbX2ldO1xuXHQgICAgICAgICAgICAgICAgaWYgKCFpc1RoZW5hYmxlKHZhbHVlKSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5yZXNvbHZlKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHZhbHVlLnRoZW4oKGZ1bmN0aW9uIChpbmRleCkgeyByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZWRWYWx1ZXNbaW5kZXhdID0gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICAgICAgY291bnQtLTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAocHJvbWlzZSAmJiAhY291bnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNvbHZlZFZhbHVlcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHByb21pc2UgPT0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH07IH0pKGNvdW50KSwgb25SZWplY3QpO1xuXHQgICAgICAgICAgICAgICAgY291bnQrKztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWNvdW50KVxuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNvbHZlZFZhbHVlcyk7XG5cdCAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgWm9uZUF3YXJlUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuXHQgICAgICAgICAgICB2YXIgY2hhaW5Qcm9taXNlID0gbmV3IFpvbmVBd2FyZVByb21pc2UobnVsbCk7XG5cdCAgICAgICAgICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuXHQgICAgICAgICAgICBpZiAodGhpc1tzeW1ib2xTdGF0ZV0gPT0gVU5SRVNPTFZFRCkge1xuXHQgICAgICAgICAgICAgICAgdGhpc1tzeW1ib2xWYWx1ZV0ucHVzaCh6b25lLCBjaGFpblByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlUmVzb2x2ZU9yUmVqZWN0KHRoaXMsIHpvbmUsIGNoYWluUHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiBjaGFpblByb21pc2U7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBab25lQXdhcmVQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXR1cm4gWm9uZUF3YXJlUHJvbWlzZTtcblx0ICAgIH0oKSk7XG5cdCAgICB2YXIgTmF0aXZlUHJvbWlzZSA9IGdsb2JhbFtfX3N5bWJvbF9fKCdQcm9taXNlJyldID0gZ2xvYmFsLlByb21pc2U7XG5cdCAgICBnbG9iYWwuUHJvbWlzZSA9IFpvbmVBd2FyZVByb21pc2U7XG5cdCAgICBpZiAoTmF0aXZlUHJvbWlzZSkge1xuXHQgICAgICAgIHZhciBOYXRpdmVQcm9taXNlUHJvdG90b3R5cGUgPSBOYXRpdmVQcm9taXNlLnByb3RvdHlwZTtcblx0ICAgICAgICB2YXIgTmF0aXZlUHJvbWlzZVRoZW5fMSA9IE5hdGl2ZVByb21pc2VQcm90b3RvdHlwZVtfX3N5bWJvbF9fKCd0aGVuJyldXG5cdCAgICAgICAgICAgID0gTmF0aXZlUHJvbWlzZVByb3RvdG90eXBlLnRoZW47XG5cdCAgICAgICAgTmF0aXZlUHJvbWlzZVByb3RvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAob25SZXNvbHZlLCBvblJlamVjdCkge1xuXHQgICAgICAgICAgICB2YXIgbmF0aXZlUHJvbWlzZSA9IHRoaXM7XG5cdCAgICAgICAgICAgIHJldHVybiBuZXcgWm9uZUF3YXJlUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICBOYXRpdmVQcm9taXNlVGhlbl8xLmNhbGwobmF0aXZlUHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgICAgfSkudGhlbihvblJlc29sdmUsIG9uUmVqZWN0KTtcblx0ICAgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGdsb2JhbC5ab25lID0gWm9uZTtcblx0fSkodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3cpO1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBXVEZfSVNTVUVfNTU1ID0gJ0FuY2hvcixBcmVhLEF1ZGlvLEJSLEJhc2UsQmFzZUZvbnQsQm9keSxCdXR0b24sQ2FudmFzLENvbnRlbnQsRExpc3QsRGlyZWN0b3J5LERpdixFbWJlZCxGaWVsZFNldCxGb250LEZvcm0sRnJhbWUsRnJhbWVTZXQsSFIsSGVhZCxIZWFkaW5nLEh0bWwsSUZyYW1lLEltYWdlLElucHV0LEtleWdlbixMSSxMYWJlbCxMZWdlbmQsTGluayxNYXAsTWFycXVlZSxNZWRpYSxNZW51LE1ldGEsTWV0ZXIsTW9kLE9MaXN0LE9iamVjdCxPcHRHcm91cCxPcHRpb24sT3V0cHV0LFBhcmFncmFwaCxQcmUsUHJvZ3Jlc3MsUXVvdGUsU2NyaXB0LFNlbGVjdCxTb3VyY2UsU3BhbixTdHlsZSxUYWJsZUNhcHRpb24sVGFibGVDZWxsLFRhYmxlQ29sLFRhYmxlLFRhYmxlUm93LFRhYmxlU2VjdGlvbixUZXh0QXJlYSxUaXRsZSxUcmFjayxVTGlzdCxVbmtub3duLFZpZGVvJztcblx0dmFyIE5PX0VWRU5UX1RBUkdFVCA9ICdBcHBsaWNhdGlvbkNhY2hlLEV2ZW50U291cmNlLEZpbGVSZWFkZXIsSW5wdXRNZXRob2RDb250ZXh0LE1lZGlhQ29udHJvbGxlcixNZXNzYWdlUG9ydCxOb2RlLFBlcmZvcm1hbmNlLFNWR0VsZW1lbnRJbnN0YW5jZSxTaGFyZWRXb3JrZXIsVGV4dFRyYWNrLFRleHRUcmFja0N1ZSxUZXh0VHJhY2tMaXN0LFdlYktpdE5hbWVkRmxvdyxXb3JrZXIsV29ya2VyR2xvYmFsU2NvcGUsWE1MSHR0cFJlcXVlc3QsWE1MSHR0cFJlcXVlc3RFdmVudFRhcmdldCxYTUxIdHRwUmVxdWVzdFVwbG9hZCxJREJSZXF1ZXN0LElEQk9wZW5EQlJlcXVlc3QsSURCRGF0YWJhc2UsSURCVHJhbnNhY3Rpb24sSURCQ3Vyc29yLERCSW5kZXgnLnNwbGl0KCcsJyk7XG5cdHZhciBFVkVOVF9UQVJHRVQgPSAnRXZlbnRUYXJnZXQnO1xuXHRmdW5jdGlvbiBldmVudFRhcmdldFBhdGNoKF9nbG9iYWwpIHtcblx0ICAgIHZhciBhcGlzID0gW107XG5cdCAgICB2YXIgaXNXdGYgPSBfZ2xvYmFsWyd3dGYnXTtcblx0ICAgIGlmIChpc1d0Zikge1xuXHQgICAgICAgIC8vIFdvcmthcm91bmQgZm9yOiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3RyYWNpbmctZnJhbWV3b3JrL2lzc3Vlcy81NTVcblx0ICAgICAgICBhcGlzID0gV1RGX0lTU1VFXzU1NS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAodikgeyByZXR1cm4gJ0hUTUwnICsgdiArICdFbGVtZW50JzsgfSkuY29uY2F0KE5PX0VWRU5UX1RBUkdFVCk7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChfZ2xvYmFsW0VWRU5UX1RBUkdFVF0pIHtcblx0ICAgICAgICBhcGlzLnB1c2goRVZFTlRfVEFSR0VUKTtcblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIC8vIE5vdGU6IEV2ZW50VGFyZ2V0IGlzIG5vdCBhdmFpbGFibGUgaW4gYWxsIGJyb3dzZXJzLFxuXHQgICAgICAgIC8vIGlmIGl0J3Mgbm90IGF2YWlsYWJsZSwgd2UgaW5zdGVhZCBwYXRjaCB0aGUgQVBJcyBpbiB0aGUgSURMIHRoYXQgaW5oZXJpdCBmcm9tIEV2ZW50VGFyZ2V0XG5cdCAgICAgICAgYXBpcyA9IE5PX0VWRU5UX1RBUkdFVDtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXBpcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciB0eXBlID0gX2dsb2JhbFthcGlzW2ldXTtcblx0ICAgICAgICB1dGlsc18xLnBhdGNoRXZlbnRUYXJnZXRNZXRob2RzKHR5cGUgJiYgdHlwZS5wcm90b3R5cGUpO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMuZXZlbnRUYXJnZXRQYXRjaCA9IGV2ZW50VGFyZ2V0UGF0Y2g7XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvKipcblx0ICogU3VwcHJlc3MgY2xvc3VyZSBjb21waWxlciBlcnJvcnMgYWJvdXQgdW5rbm93biAncHJvY2VzcycgdmFyaWFibGVcblx0ICogQGZpbGVvdmVydmlld1xuXHQgKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnN9XG5cdCAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblx0ZXhwb3J0cy56b25lU3ltYm9sID0gWm9uZVsnX19zeW1ib2xfXyddO1xuXHR2YXIgX2dsb2JhbCA9IHR5cGVvZiB3aW5kb3cgPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3c7XG5cdGZ1bmN0aW9uIGJpbmRBcmd1bWVudHMoYXJncywgc291cmNlKSB7XG5cdCAgICBmb3IgKHZhciBpID0gYXJncy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBhcmdzW2ldID0gWm9uZS5jdXJyZW50LndyYXAoYXJnc1tpXSwgc291cmNlICsgJ18nICsgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGFyZ3M7XG5cdH1cblx0ZXhwb3J0cy5iaW5kQXJndW1lbnRzID0gYmluZEFyZ3VtZW50cztcblx0O1xuXHRmdW5jdGlvbiBwYXRjaFByb3RvdHlwZShwcm90b3R5cGUsIGZuTmFtZXMpIHtcblx0ICAgIHZhciBzb3VyY2UgPSBwcm90b3R5cGUuY29uc3RydWN0b3JbJ25hbWUnXTtcblx0ICAgIHZhciBfbG9vcF8xID0gZnVuY3Rpb24oaSkge1xuXHQgICAgICAgIHZhciBuYW1lXzEgPSBmbk5hbWVzW2ldO1xuXHQgICAgICAgIHZhciBkZWxlZ2F0ZSA9IHByb3RvdHlwZVtuYW1lXzFdO1xuXHQgICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuXHQgICAgICAgICAgICBwcm90b3R5cGVbbmFtZV8xXSA9IChmdW5jdGlvbiAoZGVsZWdhdGUpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlbGVnYXRlLmFwcGx5KHRoaXMsIGJpbmRBcmd1bWVudHMoYXJndW1lbnRzLCBzb3VyY2UgKyAnLicgKyBuYW1lXzEpKTtcblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIH0pKGRlbGVnYXRlKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmbk5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgX2xvb3BfMShpKTtcblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnBhdGNoUHJvdG90eXBlID0gcGF0Y2hQcm90b3R5cGU7XG5cdDtcblx0ZXhwb3J0cy5pc1dlYldvcmtlciA9ICh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSk7XG5cdGV4cG9ydHMuaXNOb2RlID0gKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xuXHRleHBvcnRzLmlzQnJvd3NlciA9ICFleHBvcnRzLmlzTm9kZSAmJiAhZXhwb3J0cy5pc1dlYldvcmtlciAmJiAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3dbJ0hUTUxFbGVtZW50J10pO1xuXHRmdW5jdGlvbiBwYXRjaFByb3BlcnR5KG9iaiwgcHJvcCkge1xuXHQgICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwgcHJvcCkgfHwge1xuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICB9O1xuXHQgICAgLy8gQSBwcm9wZXJ0eSBkZXNjcmlwdG9yIGNhbm5vdCBoYXZlIGdldHRlci9zZXR0ZXIgYW5kIGJlIHdyaXRhYmxlXG5cdCAgICAvLyBkZWxldGluZyB0aGUgd3JpdGFibGUgYW5kIHZhbHVlIHByb3BlcnRpZXMgYXZvaWRzIHRoaXMgZXJyb3I6XG5cdCAgICAvL1xuXHQgICAgLy8gVHlwZUVycm9yOiBwcm9wZXJ0eSBkZXNjcmlwdG9ycyBtdXN0IG5vdCBzcGVjaWZ5IGEgdmFsdWUgb3IgYmUgd3JpdGFibGUgd2hlbiBhXG5cdCAgICAvLyBnZXR0ZXIgb3Igc2V0dGVyIGhhcyBiZWVuIHNwZWNpZmllZFxuXHQgICAgZGVsZXRlIGRlc2Mud3JpdGFibGU7XG5cdCAgICBkZWxldGUgZGVzYy52YWx1ZTtcblx0ICAgIC8vIHN1YnN0cigyKSBjdXogJ29uY2xpY2snIC0+ICdjbGljaycsIGV0Y1xuXHQgICAgdmFyIGV2ZW50TmFtZSA9IHByb3Auc3Vic3RyKDIpO1xuXHQgICAgdmFyIF9wcm9wID0gJ18nICsgcHJvcDtcblx0ICAgIGRlc2Muc2V0ID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgaWYgKHRoaXNbX3Byb3BdKSB7XG5cdCAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHRoaXNbX3Byb3BdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB2YXIgd3JhcEZuID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgcmVzdWx0O1xuXHQgICAgICAgICAgICAgICAgcmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gdW5kZWZpbmVkICYmICFyZXN1bHQpXG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgdGhpc1tfcHJvcF0gPSB3cmFwRm47XG5cdCAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIHdyYXBGbiwgZmFsc2UpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgdGhpc1tfcHJvcF0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdCAgICBkZXNjLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpc1tfcHJvcF07XG5cdCAgICB9O1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYyk7XG5cdH1cblx0ZXhwb3J0cy5wYXRjaFByb3BlcnR5ID0gcGF0Y2hQcm9wZXJ0eTtcblx0O1xuXHRmdW5jdGlvbiBwYXRjaE9uUHJvcGVydGllcyhvYmosIHByb3BlcnRpZXMpIHtcblx0ICAgIHZhciBvblByb3BlcnRpZXMgPSBbXTtcblx0ICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG5cdCAgICAgICAgaWYgKHByb3Auc3Vic3RyKDAsIDIpID09ICdvbicpIHtcblx0ICAgICAgICAgICAgb25Qcm9wZXJ0aWVzLnB1c2gocHJvcCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBvblByb3BlcnRpZXMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICBwYXRjaFByb3BlcnR5KG9iaiwgb25Qcm9wZXJ0aWVzW2pdKTtcblx0ICAgIH1cblx0ICAgIGlmIChwcm9wZXJ0aWVzKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHBhdGNoUHJvcGVydHkob2JqLCAnb24nICsgcHJvcGVydGllc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucGF0Y2hPblByb3BlcnRpZXMgPSBwYXRjaE9uUHJvcGVydGllcztcblx0O1xuXHR2YXIgRVZFTlRfVEFTS1MgPSBleHBvcnRzLnpvbmVTeW1ib2woJ2V2ZW50VGFza3MnKTtcblx0dmFyIEFERF9FVkVOVF9MSVNURU5FUiA9ICdhZGRFdmVudExpc3RlbmVyJztcblx0dmFyIFJFTU9WRV9FVkVOVF9MSVNURU5FUiA9ICdyZW1vdmVFdmVudExpc3RlbmVyJztcblx0dmFyIFNZTUJPTF9BRERfRVZFTlRfTElTVEVORVIgPSBleHBvcnRzLnpvbmVTeW1ib2woQUREX0VWRU5UX0xJU1RFTkVSKTtcblx0dmFyIFNZTUJPTF9SRU1PVkVfRVZFTlRfTElTVEVORVIgPSBleHBvcnRzLnpvbmVTeW1ib2woUkVNT1ZFX0VWRU5UX0xJU1RFTkVSKTtcblx0ZnVuY3Rpb24gZmluZEV4aXN0aW5nUmVnaXN0ZXJlZFRhc2sodGFyZ2V0LCBoYW5kbGVyLCBuYW1lLCBjYXB0dXJlLCByZW1vdmUpIHtcblx0ICAgIHZhciBldmVudFRhc2tzID0gdGFyZ2V0W0VWRU5UX1RBU0tTXTtcblx0ICAgIGlmIChldmVudFRhc2tzKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudFRhc2tzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHZhciBldmVudFRhc2sgPSBldmVudFRhc2tzW2ldO1xuXHQgICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50VGFzay5kYXRhO1xuXHQgICAgICAgICAgICBpZiAoZGF0YS5oYW5kbGVyID09PSBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAmJiBkYXRhLnVzZUNhcHR1cmluZyA9PT0gY2FwdHVyZVxuXHQgICAgICAgICAgICAgICAgJiYgZGF0YS5ldmVudE5hbWUgPT09IG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudFRhc2tzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIHJldHVybiBldmVudFRhc2s7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbnVsbDtcblx0fVxuXHRmdW5jdGlvbiBhdHRhY2hSZWdpc3RlcmVkRXZlbnQodGFyZ2V0LCBldmVudFRhc2spIHtcblx0ICAgIHZhciBldmVudFRhc2tzID0gdGFyZ2V0W0VWRU5UX1RBU0tTXTtcblx0ICAgIGlmICghZXZlbnRUYXNrcykge1xuXHQgICAgICAgIGV2ZW50VGFza3MgPSB0YXJnZXRbRVZFTlRfVEFTS1NdID0gW107XG5cdCAgICB9XG5cdCAgICBldmVudFRhc2tzLnB1c2goZXZlbnRUYXNrKTtcblx0fVxuXHRmdW5jdGlvbiBzY2hlZHVsZUV2ZW50TGlzdGVuZXIoZXZlbnRUYXNrKSB7XG5cdCAgICB2YXIgbWV0YSA9IGV2ZW50VGFzay5kYXRhO1xuXHQgICAgYXR0YWNoUmVnaXN0ZXJlZEV2ZW50KG1ldGEudGFyZ2V0LCBldmVudFRhc2spO1xuXHQgICAgcmV0dXJuIG1ldGEudGFyZ2V0W1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdKG1ldGEuZXZlbnROYW1lLCBldmVudFRhc2suaW52b2tlLCBtZXRhLnVzZUNhcHR1cmluZyk7XG5cdH1cblx0ZnVuY3Rpb24gY2FuY2VsRXZlbnRMaXN0ZW5lcihldmVudFRhc2spIHtcblx0ICAgIHZhciBtZXRhID0gZXZlbnRUYXNrLmRhdGE7XG5cdCAgICBmaW5kRXhpc3RpbmdSZWdpc3RlcmVkVGFzayhtZXRhLnRhcmdldCwgZXZlbnRUYXNrLmludm9rZSwgbWV0YS5ldmVudE5hbWUsIG1ldGEudXNlQ2FwdHVyaW5nLCB0cnVlKTtcblx0ICAgIG1ldGEudGFyZ2V0W1NZTUJPTF9SRU1PVkVfRVZFTlRfTElTVEVORVJdKG1ldGEuZXZlbnROYW1lLCBldmVudFRhc2suaW52b2tlLCBtZXRhLnVzZUNhcHR1cmluZyk7XG5cdH1cblx0ZnVuY3Rpb24gem9uZUF3YXJlQWRkRXZlbnRMaXN0ZW5lcihzZWxmLCBhcmdzKSB7XG5cdCAgICB2YXIgZXZlbnROYW1lID0gYXJnc1swXTtcblx0ICAgIHZhciBoYW5kbGVyID0gYXJnc1sxXTtcblx0ICAgIHZhciB1c2VDYXB0dXJpbmcgPSBhcmdzWzJdIHx8IGZhbHNlO1xuXHQgICAgLy8gLSBJbnNpZGUgYSBXZWIgV29ya2VyLCBgdGhpc2AgaXMgdW5kZWZpbmVkLCB0aGUgY29udGV4dCBpcyBgZ2xvYmFsYFxuXHQgICAgLy8gLSBXaGVuIGBhZGRFdmVudExpc3RlbmVyYCBpcyBjYWxsZWQgb24gdGhlIGdsb2JhbCBjb250ZXh0IGluIHN0cmljdCBtb2RlLCBgdGhpc2AgaXMgdW5kZWZpbmVkXG5cdCAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvem9uZS5qcy9pc3N1ZXMvMTkwXG5cdCAgICB2YXIgdGFyZ2V0ID0gc2VsZiB8fCBfZ2xvYmFsO1xuXHQgICAgdmFyIGRlbGVnYXRlID0gbnVsbDtcblx0ICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgZGVsZWdhdGUgPSBoYW5kbGVyO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAoaGFuZGxlciAmJiBoYW5kbGVyLmhhbmRsZUV2ZW50KSB7XG5cdCAgICAgICAgZGVsZWdhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHsgcmV0dXJuIGhhbmRsZXIuaGFuZGxlRXZlbnQoZXZlbnQpOyB9O1xuXHQgICAgfVxuXHQgICAgdmFyIHZhbGlkWm9uZUhhbmRsZXIgPSBmYWxzZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gSW4gY3Jvc3Mgc2l0ZSBjb250ZXh0cyAoc3VjaCBhcyBXZWJEcml2ZXIgZnJhbWV3b3JrcyBsaWtlIFNlbGVuaXVtKSxcblx0ICAgICAgICAvLyBhY2Nlc3NpbmcgdGhlIGhhbmRsZXIgb2JqZWN0IGhlcmUgd2lsbCBjYXVzZSBhbiBleGNlcHRpb24gdG8gYmUgdGhyb3duIHdoaWNoXG5cdCAgICAgICAgLy8gd2lsbCBmYWlsIHRlc3RzIHByZW1hdHVyZWx5LlxuXHQgICAgICAgIHZhbGlkWm9uZUhhbmRsZXIgPSBoYW5kbGVyICYmIGhhbmRsZXIudG9TdHJpbmcoKSA9PT0gXCJbb2JqZWN0IEZ1bmN0aW9uV3JhcHBlcl1cIjtcblx0ICAgIH1cblx0ICAgIGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gUmV0dXJuaW5nIG5vdGhpbmcgaGVyZSBpcyBmaW5lLCBiZWNhdXNlIG9iamVjdHMgaW4gYSBjcm9zcy1zaXRlIGNvbnRleHQgYXJlIHVudXNhYmxlXG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gSWdub3JlIHNwZWNpYWwgbGlzdGVuZXJzIG9mIElFMTEgJiBFZGdlIGRldiB0b29scywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL3pvbmUuanMvaXNzdWVzLzE1MFxuXHQgICAgaWYgKCFkZWxlZ2F0ZSB8fCB2YWxpZFpvbmVIYW5kbGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRhcmdldFtTWU1CT0xfQUREX0VWRU5UX0xJU1RFTkVSXShldmVudE5hbWUsIGhhbmRsZXIsIHVzZUNhcHR1cmluZyk7XG5cdCAgICB9XG5cdCAgICB2YXIgZXZlbnRUYXNrID0gZmluZEV4aXN0aW5nUmVnaXN0ZXJlZFRhc2sodGFyZ2V0LCBoYW5kbGVyLCBldmVudE5hbWUsIHVzZUNhcHR1cmluZywgZmFsc2UpO1xuXHQgICAgaWYgKGV2ZW50VGFzaykge1xuXHQgICAgICAgIC8vIHdlIGFscmVhZHkgcmVnaXN0ZXJlZCwgc28gdGhpcyB3aWxsIGhhdmUgbm9vcC5cblx0ICAgICAgICByZXR1cm4gdGFyZ2V0W1NZTUJPTF9BRERfRVZFTlRfTElTVEVORVJdKGV2ZW50TmFtZSwgZXZlbnRUYXNrLmludm9rZSwgdXNlQ2FwdHVyaW5nKTtcblx0ICAgIH1cblx0ICAgIHZhciB6b25lID0gWm9uZS5jdXJyZW50O1xuXHQgICAgdmFyIHNvdXJjZSA9IHRhcmdldC5jb25zdHJ1Y3RvclsnbmFtZSddICsgJy5hZGRFdmVudExpc3RlbmVyOicgKyBldmVudE5hbWU7XG5cdCAgICB2YXIgZGF0YSA9IHtcblx0ICAgICAgICB0YXJnZXQ6IHRhcmdldCxcblx0ICAgICAgICBldmVudE5hbWU6IGV2ZW50TmFtZSxcblx0ICAgICAgICBuYW1lOiBldmVudE5hbWUsXG5cdCAgICAgICAgdXNlQ2FwdHVyaW5nOiB1c2VDYXB0dXJpbmcsXG5cdCAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuXHQgICAgfTtcblx0ICAgIHpvbmUuc2NoZWR1bGVFdmVudFRhc2soc291cmNlLCBkZWxlZ2F0ZSwgZGF0YSwgc2NoZWR1bGVFdmVudExpc3RlbmVyLCBjYW5jZWxFdmVudExpc3RlbmVyKTtcblx0fVxuXHRmdW5jdGlvbiB6b25lQXdhcmVSZW1vdmVFdmVudExpc3RlbmVyKHNlbGYsIGFyZ3MpIHtcblx0ICAgIHZhciBldmVudE5hbWUgPSBhcmdzWzBdO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBhcmdzWzFdO1xuXHQgICAgdmFyIHVzZUNhcHR1cmluZyA9IGFyZ3NbMl0gfHwgZmFsc2U7XG5cdCAgICAvLyAtIEluc2lkZSBhIFdlYiBXb3JrZXIsIGB0aGlzYCBpcyB1bmRlZmluZWQsIHRoZSBjb250ZXh0IGlzIGBnbG9iYWxgXG5cdCAgICAvLyAtIFdoZW4gYGFkZEV2ZW50TGlzdGVuZXJgIGlzIGNhbGxlZCBvbiB0aGUgZ2xvYmFsIGNvbnRleHQgaW4gc3RyaWN0IG1vZGUsIGB0aGlzYCBpcyB1bmRlZmluZWRcblx0ICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci96b25lLmpzL2lzc3Vlcy8xOTBcblx0ICAgIHZhciB0YXJnZXQgPSBzZWxmIHx8IF9nbG9iYWw7XG5cdCAgICB2YXIgZXZlbnRUYXNrID0gZmluZEV4aXN0aW5nUmVnaXN0ZXJlZFRhc2sodGFyZ2V0LCBoYW5kbGVyLCBldmVudE5hbWUsIHVzZUNhcHR1cmluZywgdHJ1ZSk7XG5cdCAgICBpZiAoZXZlbnRUYXNrKSB7XG5cdCAgICAgICAgZXZlbnRUYXNrLnpvbmUuY2FuY2VsVGFzayhldmVudFRhc2spO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgdGFyZ2V0W1NZTUJPTF9SRU1PVkVfRVZFTlRfTElTVEVORVJdKGV2ZW50TmFtZSwgaGFuZGxlciwgdXNlQ2FwdHVyaW5nKTtcblx0ICAgIH1cblx0fVxuXHRmdW5jdGlvbiBwYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyhvYmopIHtcblx0ICAgIGlmIChvYmogJiYgb2JqLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0ICAgICAgICBwYXRjaE1ldGhvZChvYmosIEFERF9FVkVOVF9MSVNURU5FUiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gem9uZUF3YXJlQWRkRXZlbnRMaXN0ZW5lcjsgfSk7XG5cdCAgICAgICAgcGF0Y2hNZXRob2Qob2JqLCBSRU1PVkVfRVZFTlRfTElTVEVORVIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHpvbmVBd2FyZVJlbW92ZUV2ZW50TGlzdGVuZXI7IH0pO1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgICAgZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucGF0Y2hFdmVudFRhcmdldE1ldGhvZHMgPSBwYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcztcblx0O1xuXHR2YXIgb3JpZ2luYWxJbnN0YW5jZUtleSA9IGV4cG9ydHMuem9uZVN5bWJvbCgnb3JpZ2luYWxJbnN0YW5jZScpO1xuXHQvLyB3cmFwIHNvbWUgbmF0aXZlIEFQSSBvbiBgd2luZG93YFxuXHRmdW5jdGlvbiBwYXRjaENsYXNzKGNsYXNzTmFtZSkge1xuXHQgICAgdmFyIE9yaWdpbmFsQ2xhc3MgPSBfZ2xvYmFsW2NsYXNzTmFtZV07XG5cdCAgICBpZiAoIU9yaWdpbmFsQ2xhc3MpXG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgX2dsb2JhbFtjbGFzc05hbWVdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBhID0gYmluZEFyZ3VtZW50cyhhcmd1bWVudHMsIGNsYXNzTmFtZSk7XG5cdCAgICAgICAgc3dpdGNoIChhLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBjYXNlIDA6XG5cdCAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDE6XG5cdCAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoYVswXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgY2FzZSAyOlxuXHQgICAgICAgICAgICAgICAgdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSA9IG5ldyBPcmlnaW5hbENsYXNzKGFbMF0sIGFbMV0pO1xuXHQgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIGNhc2UgMzpcblx0ICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV0gPSBuZXcgT3JpZ2luYWxDbGFzcyhhWzBdLCBhWzFdLCBhWzJdKTtcblx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICBjYXNlIDQ6XG5cdCAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldID0gbmV3IE9yaWdpbmFsQ2xhc3MoYVswXSwgYVsxXSwgYVsyXSwgYVszXSk7XG5cdCAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKCdBcmcgbGlzdCB0b28gbG9uZy4nKTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGluc3RhbmNlID0gbmV3IE9yaWdpbmFsQ2xhc3MoZnVuY3Rpb24gKCkgeyB9KTtcblx0ICAgIHZhciBwcm9wO1xuXHQgICAgZm9yIChwcm9wIGluIGluc3RhbmNlKSB7XG5cdCAgICAgICAgKGZ1bmN0aW9uIChwcm9wKSB7XG5cdCAgICAgICAgICAgIGlmICh0eXBlb2YgaW5zdGFuY2VbcHJvcF0gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgIF9nbG9iYWxbY2xhc3NOYW1lXS5wcm90b3R5cGVbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF0uYXBwbHkodGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XSwgYXJndW1lbnRzKTtcblx0ICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2dsb2JhbFtjbGFzc05hbWVdLnByb3RvdHlwZSwgcHJvcCwge1xuXHQgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbb3JpZ2luYWxJbnN0YW5jZUtleV1bcHJvcF0gPSBab25lLmN1cnJlbnQud3JhcChmbiwgY2xhc3NOYW1lICsgJy4nICsgcHJvcCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW29yaWdpbmFsSW5zdGFuY2VLZXldW3Byb3BdID0gZm47XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc1tvcmlnaW5hbEluc3RhbmNlS2V5XVtwcm9wXTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0ocHJvcCkpO1xuXHQgICAgfVxuXHQgICAgZm9yIChwcm9wIGluIE9yaWdpbmFsQ2xhc3MpIHtcblx0ICAgICAgICBpZiAocHJvcCAhPT0gJ3Byb3RvdHlwZScgJiYgT3JpZ2luYWxDbGFzcy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuXHQgICAgICAgICAgICBfZ2xvYmFsW2NsYXNzTmFtZV1bcHJvcF0gPSBPcmlnaW5hbENsYXNzW3Byb3BdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0fVxuXHRleHBvcnRzLnBhdGNoQ2xhc3MgPSBwYXRjaENsYXNzO1xuXHQ7XG5cdGZ1bmN0aW9uIGNyZWF0ZU5hbWVkRm4obmFtZSwgZGVsZWdhdGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIChGdW5jdGlvbignZicsIFwicmV0dXJuIGZ1bmN0aW9uIFwiICsgbmFtZSArIFwiKCl7cmV0dXJuIGYodGhpcywgYXJndW1lbnRzKX1cIikpKGRlbGVnYXRlKTtcblx0ICAgIH1cblx0ICAgIGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gaWYgd2UgZmFpbCwgd2UgbXVzdCBiZSBDU1AsIGp1c3QgcmV0dXJuIGRlbGVnYXRlLlxuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH07XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy5jcmVhdGVOYW1lZEZuID0gY3JlYXRlTmFtZWRGbjtcblx0ZnVuY3Rpb24gcGF0Y2hNZXRob2QodGFyZ2V0LCBuYW1lLCBwYXRjaEZuKSB7XG5cdCAgICB2YXIgcHJvdG8gPSB0YXJnZXQ7XG5cdCAgICB3aGlsZSAocHJvdG8gJiYgIXByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG5cdCAgICAgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuXHQgICAgfVxuXHQgICAgaWYgKCFwcm90byAmJiB0YXJnZXRbbmFtZV0pIHtcblx0ICAgICAgICAvLyBzb21laG93IHdlIGRpZCBub3QgZmluZCBpdCwgYnV0IHdlIGNhbiBzZWUgaXQuIFRoaXMgaGFwcGVucyBvbiBJRSBmb3IgV2luZG93IHByb3BlcnRpZXMuXG5cdCAgICAgICAgcHJvdG8gPSB0YXJnZXQ7XG5cdCAgICB9XG5cdCAgICB2YXIgZGVsZWdhdGVOYW1lID0gZXhwb3J0cy56b25lU3ltYm9sKG5hbWUpO1xuXHQgICAgdmFyIGRlbGVnYXRlO1xuXHQgICAgaWYgKHByb3RvICYmICEoZGVsZWdhdGUgPSBwcm90b1tkZWxlZ2F0ZU5hbWVdKSkge1xuXHQgICAgICAgIGRlbGVnYXRlID0gcHJvdG9bZGVsZWdhdGVOYW1lXSA9IHByb3RvW25hbWVdO1xuXHQgICAgICAgIHByb3RvW25hbWVdID0gY3JlYXRlTmFtZWRGbihuYW1lLCBwYXRjaEZuKGRlbGVnYXRlLCBkZWxlZ2F0ZU5hbWUsIG5hbWUpKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkZWxlZ2F0ZTtcblx0fVxuXHRleHBvcnRzLnBhdGNoTWV0aG9kID0gcGF0Y2hNZXRob2Q7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdHZhciB1dGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Lypcblx0ICogVGhpcyBpcyBuZWNlc3NhcnkgZm9yIENocm9tZSBhbmQgQ2hyb21lIG1vYmlsZSwgdG8gZW5hYmxlXG5cdCAqIHRoaW5ncyBsaWtlIHJlZGVmaW5pbmcgYGNyZWF0ZWRDYWxsYmFja2Agb24gYW4gZWxlbWVudC5cblx0ICovXG5cdHZhciBfZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cdHZhciBfZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblx0dmFyIF9jcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xuXHR2YXIgdW5jb25maWd1cmFibGVzS2V5ID0gdXRpbHNfMS56b25lU3ltYm9sKCd1bmNvbmZpZ3VyYWJsZXMnKTtcblx0ZnVuY3Rpb24gcHJvcGVydHlQYXRjaCgpIHtcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA9IGZ1bmN0aW9uIChvYmosIHByb3AsIGRlc2MpIHtcblx0ICAgICAgICBpZiAoaXNVbmNvbmZpZ3VyYWJsZShvYmosIHByb3ApKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBhc3NpZ24gdG8gcmVhZCBvbmx5IHByb3BlcnR5IFxcJycgKyBwcm9wICsgJ1xcJyBvZiAnICsgb2JqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHByb3AgIT09ICdwcm90b3R5cGUnKSB7XG5cdCAgICAgICAgICAgIGRlc2MgPSByZXdyaXRlRGVzY3JpcHRvcihvYmosIHByb3AsIGRlc2MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYyk7XG5cdCAgICB9O1xuXHQgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgPSBmdW5jdGlvbiAob2JqLCBwcm9wcykge1xuXHQgICAgICAgIE9iamVjdC5rZXlzKHByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIHByb3BzW3Byb3BdKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICByZXR1cm4gb2JqO1xuXHQgICAgfTtcblx0ICAgIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob2JqLCBwcm90bykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcHJvdG8gPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICAgIE9iamVjdC5rZXlzKHByb3RvKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG5cdCAgICAgICAgICAgICAgICBwcm90b1twcm9wXSA9IHJld3JpdGVEZXNjcmlwdG9yKG9iaiwgcHJvcCwgcHJvdG9bcHJvcF0pO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIF9jcmVhdGUob2JqLCBwcm90byk7XG5cdCAgICB9O1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IGZ1bmN0aW9uIChvYmosIHByb3ApIHtcblx0ICAgICAgICB2YXIgZGVzYyA9IF9nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBwcm9wKTtcblx0ICAgICAgICBpZiAoaXNVbmNvbmZpZ3VyYWJsZShvYmosIHByb3ApKSB7XG5cdCAgICAgICAgICAgIGRlc2MuY29uZmlndXJhYmxlID0gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBkZXNjO1xuXHQgICAgfTtcblx0fVxuXHRleHBvcnRzLnByb3BlcnR5UGF0Y2ggPSBwcm9wZXJ0eVBhdGNoO1xuXHQ7XG5cdGZ1bmN0aW9uIF9yZWRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYykge1xuXHQgICAgZGVzYyA9IHJld3JpdGVEZXNjcmlwdG9yKG9iaiwgcHJvcCwgZGVzYyk7XG5cdCAgICByZXR1cm4gX2RlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgZGVzYyk7XG5cdH1cblx0ZXhwb3J0cy5fcmVkZWZpbmVQcm9wZXJ0eSA9IF9yZWRlZmluZVByb3BlcnR5O1xuXHQ7XG5cdGZ1bmN0aW9uIGlzVW5jb25maWd1cmFibGUob2JqLCBwcm9wKSB7XG5cdCAgICByZXR1cm4gb2JqICYmIG9ialt1bmNvbmZpZ3VyYWJsZXNLZXldICYmIG9ialt1bmNvbmZpZ3VyYWJsZXNLZXldW3Byb3BdO1xuXHR9XG5cdGZ1bmN0aW9uIHJld3JpdGVEZXNjcmlwdG9yKG9iaiwgcHJvcCwgZGVzYykge1xuXHQgICAgZGVzYy5jb25maWd1cmFibGUgPSB0cnVlO1xuXHQgICAgaWYgKCFkZXNjLmNvbmZpZ3VyYWJsZSkge1xuXHQgICAgICAgIGlmICghb2JqW3VuY29uZmlndXJhYmxlc0tleV0pIHtcblx0ICAgICAgICAgICAgX2RlZmluZVByb3BlcnR5KG9iaiwgdW5jb25maWd1cmFibGVzS2V5LCB7IHdyaXRhYmxlOiB0cnVlLCB2YWx1ZToge30gfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIG9ialt1bmNvbmZpZ3VyYWJsZXNLZXldW3Byb3BdID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkZXNjO1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHR2YXIgZGVmaW5lX3Byb3BlcnR5XzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgdXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdGZ1bmN0aW9uIHJlZ2lzdGVyRWxlbWVudFBhdGNoKF9nbG9iYWwpIHtcblx0ICAgIGlmICghdXRpbHNfMS5pc0Jyb3dzZXIgfHwgISgncmVnaXN0ZXJFbGVtZW50JyBpbiBfZ2xvYmFsLmRvY3VtZW50KSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBfcmVnaXN0ZXJFbGVtZW50ID0gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O1xuXHQgICAgdmFyIGNhbGxiYWNrcyA9IFtcblx0ICAgICAgICAnY3JlYXRlZENhbGxiYWNrJyxcblx0ICAgICAgICAnYXR0YWNoZWRDYWxsYmFjaycsXG5cdCAgICAgICAgJ2RldGFjaGVkQ2FsbGJhY2snLFxuXHQgICAgICAgICdhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2snXG5cdCAgICBdO1xuXHQgICAgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50ID0gZnVuY3Rpb24gKG5hbWUsIG9wdHMpIHtcblx0ICAgICAgICBpZiAob3B0cyAmJiBvcHRzLnByb3RvdHlwZSkge1xuXHQgICAgICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSAnRG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OjonICsgY2FsbGJhY2s7XG5cdCAgICAgICAgICAgICAgICBpZiAob3B0cy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoY2FsbGJhY2spKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9wdHMucHJvdG90eXBlLCBjYWxsYmFjayk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGRlc2NyaXB0b3IgJiYgZGVzY3JpcHRvci52YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gWm9uZS5jdXJyZW50LndyYXAoZGVzY3JpcHRvci52YWx1ZSwgc291cmNlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZGVmaW5lX3Byb3BlcnR5XzEuX3JlZGVmaW5lUHJvcGVydHkob3B0cy5wcm90b3R5cGUsIGNhbGxiYWNrLCBkZXNjcmlwdG9yKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSA9IFpvbmUuY3VycmVudC53cmFwKG9wdHMucHJvdG90eXBlW2NhbGxiYWNrXSwgc291cmNlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRzLnByb3RvdHlwZVtjYWxsYmFja10pIHtcblx0ICAgICAgICAgICAgICAgICAgICBvcHRzLnByb3RvdHlwZVtjYWxsYmFja10gPSBab25lLmN1cnJlbnQud3JhcChvcHRzLnByb3RvdHlwZVtjYWxsYmFja10sIHNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gX3JlZ2lzdGVyRWxlbWVudC5hcHBseShkb2N1bWVudCwgW25hbWUsIG9wdHNdKTtcblx0ICAgIH07XG5cdH1cblx0ZXhwb3J0cy5yZWdpc3RlckVsZW1lbnRQYXRjaCA9IHJlZ2lzdGVyRWxlbWVudFBhdGNoO1xuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHdlYlNvY2tldFBhdGNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgZXZlbnROYW1lcyA9ICdjb3B5IGN1dCBwYXN0ZSBhYm9ydCBibHVyIGZvY3VzIGNhbnBsYXkgY2FucGxheXRocm91Z2ggY2hhbmdlIGNsaWNrIGNvbnRleHRtZW51IGRibGNsaWNrIGRyYWcgZHJhZ2VuZCBkcmFnZW50ZXIgZHJhZ2xlYXZlIGRyYWdvdmVyIGRyYWdzdGFydCBkcm9wIGR1cmF0aW9uY2hhbmdlIGVtcHRpZWQgZW5kZWQgaW5wdXQgaW52YWxpZCBrZXlkb3duIGtleXByZXNzIGtleXVwIGxvYWQgbG9hZGVkZGF0YSBsb2FkZWRtZXRhZGF0YSBsb2Fkc3RhcnQgbWVzc2FnZSBtb3VzZWRvd24gbW91c2VlbnRlciBtb3VzZWxlYXZlIG1vdXNlbW92ZSBtb3VzZW91dCBtb3VzZW92ZXIgbW91c2V1cCBwYXVzZSBwbGF5IHBsYXlpbmcgcHJvZ3Jlc3MgcmF0ZWNoYW5nZSByZXNldCBzY3JvbGwgc2Vla2VkIHNlZWtpbmcgc2VsZWN0IHNob3cgc3RhbGxlZCBzdWJtaXQgc3VzcGVuZCB0aW1ldXBkYXRlIHZvbHVtZWNoYW5nZSB3YWl0aW5nIG1vemZ1bGxzY3JlZW5jaGFuZ2UgbW96ZnVsbHNjcmVlbmVycm9yIG1venBvaW50ZXJsb2NrY2hhbmdlIG1venBvaW50ZXJsb2NrZXJyb3IgZXJyb3Igd2ViZ2xjb250ZXh0cmVzdG9yZWQgd2ViZ2xjb250ZXh0bG9zdCB3ZWJnbGNvbnRleHRjcmVhdGlvbmVycm9yJy5zcGxpdCgnICcpO1xuXHRmdW5jdGlvbiBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaChfZ2xvYmFsKSB7XG5cdCAgICBpZiAodXRpbHNfMS5pc05vZGUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgc3VwcG9ydHNXZWJTb2NrZXQgPSB0eXBlb2YgV2ViU29ja2V0ICE9PSAndW5kZWZpbmVkJztcblx0ICAgIGlmIChjYW5QYXRjaFZpYVByb3BlcnR5RGVzY3JpcHRvcigpKSB7XG5cdCAgICAgICAgLy8gZm9yIGJyb3dzZXJzIHRoYXQgd2UgY2FuIHBhdGNoIHRoZSBkZXNjcmlwdG9yOiAgQ2hyb21lICYgRmlyZWZveFxuXHQgICAgICAgIGlmICh1dGlsc18xLmlzQnJvd3Nlcikge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKEhUTUxFbGVtZW50LnByb3RvdHlwZSwgZXZlbnROYW1lcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0ICAgICAgICBpZiAodHlwZW9mIElEQkluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQkluZGV4LnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCUmVxdWVzdC5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQk9wZW5EQlJlcXVlc3QucHJvdG90eXBlLCBudWxsKTtcblx0ICAgICAgICAgICAgdXRpbHNfMS5wYXRjaE9uUHJvcGVydGllcyhJREJEYXRhYmFzZS5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgICAgIHV0aWxzXzEucGF0Y2hPblByb3BlcnRpZXMoSURCQ3Vyc29yLnByb3RvdHlwZSwgbnVsbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChzdXBwb3J0c1dlYlNvY2tldCkge1xuXHQgICAgICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKFdlYlNvY2tldC5wcm90b3R5cGUsIG51bGwpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIGVsc2Uge1xuXHQgICAgICAgIC8vIFNhZmFyaSwgQW5kcm9pZCBicm93c2VycyAoSmVsbHkgQmVhbilcblx0ICAgICAgICBwYXRjaFZpYUNhcHR1cmluZ0FsbFRoZUV2ZW50cygpO1xuXHQgICAgICAgIHV0aWxzXzEucGF0Y2hDbGFzcygnWE1MSHR0cFJlcXVlc3QnKTtcblx0ICAgICAgICBpZiAoc3VwcG9ydHNXZWJTb2NrZXQpIHtcblx0ICAgICAgICAgICAgd2ViU29ja2V0UGF0Y2guYXBwbHkoX2dsb2JhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdGV4cG9ydHMucHJvcGVydHlEZXNjcmlwdG9yUGF0Y2ggPSBwcm9wZXJ0eURlc2NyaXB0b3JQYXRjaDtcblx0ZnVuY3Rpb24gY2FuUGF0Y2hWaWFQcm9wZXJ0eURlc2NyaXB0b3IoKSB7XG5cdCAgICBpZiAodXRpbHNfMS5pc0Jyb3dzZXIgJiYgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoSFRNTEVsZW1lbnQucHJvdG90eXBlLCAnb25jbGljaycpXG5cdCAgICAgICAgJiYgdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgLy8gV2ViS2l0IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzQzNjRcblx0ICAgICAgICAvLyBJREwgaW50ZXJmYWNlIGF0dHJpYnV0ZXMgYXJlIG5vdCBjb25maWd1cmFibGVcblx0ICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoRWxlbWVudC5wcm90b3R5cGUsICdvbmNsaWNrJyk7XG5cdCAgICAgICAgaWYgKGRlc2MgJiYgIWRlc2MuY29uZmlndXJhYmxlKVxuXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnb25yZWFkeXN0YXRlY2hhbmdlJywge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgIHZhciByZXN1bHQgPSAhIXJlcS5vbnJlYWR5c3RhdGVjaGFuZ2U7XG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MSHR0cFJlcXVlc3QucHJvdG90eXBlLCAnb25yZWFkeXN0YXRlY2hhbmdlJywge30pO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHQ7XG5cdHZhciB1bmJvdW5kS2V5ID0gdXRpbHNfMS56b25lU3ltYm9sKCd1bmJvdW5kJyk7XG5cdC8vIFdoZW5ldmVyIGFueSBldmVudExpc3RlbmVyIGZpcmVzLCB3ZSBjaGVjayB0aGUgZXZlbnRMaXN0ZW5lciB0YXJnZXQgYW5kIGFsbCBwYXJlbnRzXG5cdC8vIGZvciBgb253aGF0ZXZlcmAgcHJvcGVydGllcyBhbmQgcmVwbGFjZSB0aGVtIHdpdGggem9uZS1ib3VuZCBmdW5jdGlvbnNcblx0Ly8gLSBDaHJvbWUgKGZvciBub3cpXG5cdGZ1bmN0aW9uIHBhdGNoVmlhQ2FwdHVyaW5nQWxsVGhlRXZlbnRzKCkge1xuXHQgICAgdmFyIF9sb29wXzEgPSBmdW5jdGlvbihpKSB7XG5cdCAgICAgICAgdmFyIHByb3BlcnR5ID0gZXZlbnROYW1lc1tpXTtcblx0ICAgICAgICB2YXIgb25wcm9wZXJ0eSA9ICdvbicgKyBwcm9wZXJ0eTtcblx0ICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKHByb3BlcnR5LCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgdmFyIGVsdCA9IGV2ZW50LnRhcmdldCwgYm91bmQsIHNvdXJjZTtcblx0ICAgICAgICAgICAgaWYgKGVsdCkge1xuXHQgICAgICAgICAgICAgICAgc291cmNlID0gZWx0LmNvbnN0cnVjdG9yWyduYW1lJ10gKyAnLicgKyBvbnByb3BlcnR5O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgc291cmNlID0gJ3Vua25vd24uJyArIG9ucHJvcGVydHk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgd2hpbGUgKGVsdCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGVsdFtvbnByb3BlcnR5XSAmJiAhZWx0W29ucHJvcGVydHldW3VuYm91bmRLZXldKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYm91bmQgPSBab25lLmN1cnJlbnQud3JhcChlbHRbb25wcm9wZXJ0eV0sIHNvdXJjZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgYm91bmRbdW5ib3VuZEtleV0gPSBlbHRbb25wcm9wZXJ0eV07XG5cdCAgICAgICAgICAgICAgICAgICAgZWx0W29ucHJvcGVydHldID0gYm91bmQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBlbHQgPSBlbHQucGFyZW50RWxlbWVudDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHRydWUpO1xuXHQgICAgfTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnROYW1lcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIF9sb29wXzEoaSk7XG5cdCAgICB9XG5cdCAgICA7XG5cdH1cblx0O1xuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB3ZSBoYXZlIHRvIHBhdGNoIHRoZSBpbnN0YW5jZSBzaW5jZSB0aGUgcHJvdG8gaXMgbm9uLWNvbmZpZ3VyYWJsZVxuXHRmdW5jdGlvbiBhcHBseShfZ2xvYmFsKSB7XG5cdCAgICB2YXIgV1MgPSBfZ2xvYmFsLldlYlNvY2tldDtcblx0ICAgIC8vIE9uIFNhZmFyaSB3aW5kb3cuRXZlbnRUYXJnZXQgZG9lc24ndCBleGlzdCBzbyBuZWVkIHRvIHBhdGNoIFdTIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyXG5cdCAgICAvLyBPbiBvbGRlciBDaHJvbWUsIG5vIG5lZWQgc2luY2UgRXZlbnRUYXJnZXQgd2FzIGFscmVhZHkgcGF0Y2hlZFxuXHQgICAgaWYgKCFfZ2xvYmFsLkV2ZW50VGFyZ2V0KSB7XG5cdCAgICAgICAgdXRpbHNfMS5wYXRjaEV2ZW50VGFyZ2V0TWV0aG9kcyhXUy5wcm90b3R5cGUpO1xuXHQgICAgfVxuXHQgICAgX2dsb2JhbC5XZWJTb2NrZXQgPSBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICAgIHZhciBzb2NrZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IG5ldyBXUyhhLCBiKSA6IG5ldyBXUyhhKTtcblx0ICAgICAgICB2YXIgcHJveHlTb2NrZXQ7XG5cdCAgICAgICAgLy8gU2FmYXJpIDcuMCBoYXMgbm9uLWNvbmZpZ3VyYWJsZSBvd24gJ29ubWVzc2FnZScgYW5kIGZyaWVuZHMgcHJvcGVydGllcyBvbiB0aGUgc29ja2V0IGluc3RhbmNlXG5cdCAgICAgICAgdmFyIG9ubWVzc2FnZURlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvY2tldCwgJ29ubWVzc2FnZScpO1xuXHQgICAgICAgIGlmIChvbm1lc3NhZ2VEZXNjICYmIG9ubWVzc2FnZURlc2MuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgICAgICAgICBwcm94eVNvY2tldCA9IE9iamVjdC5jcmVhdGUoc29ja2V0KTtcblx0ICAgICAgICAgICAgWydhZGRFdmVudExpc3RlbmVyJywgJ3JlbW92ZUV2ZW50TGlzdGVuZXInLCAnc2VuZCcsICdjbG9zZSddLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG5cdCAgICAgICAgICAgICAgICBwcm94eVNvY2tldFtwcm9wTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNvY2tldFtwcm9wTmFtZV0uYXBwbHkoc29ja2V0LCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgICAgICAgfTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICAvLyB3ZSBjYW4gcGF0Y2ggdGhlIHJlYWwgc29ja2V0XG5cdCAgICAgICAgICAgIHByb3h5U29ja2V0ID0gc29ja2V0O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB1dGlsc18xLnBhdGNoT25Qcm9wZXJ0aWVzKHByb3h5U29ja2V0LCBbJ2Nsb3NlJywgJ2Vycm9yJywgJ21lc3NhZ2UnLCAnb3BlbiddKTtcblx0ICAgICAgICByZXR1cm4gcHJveHlTb2NrZXQ7XG5cdCAgICB9O1xuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBXUykge1xuXHQgICAgICAgIF9nbG9iYWwuV2ViU29ja2V0W3Byb3BdID0gV1NbcHJvcF07XG5cdCAgICB9XG5cdH1cblx0ZXhwb3J0cy5hcHBseSA9IGFwcGx5O1xuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIHV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRmdW5jdGlvbiBwYXRjaFRpbWVyKHdpbmRvdywgc2V0TmFtZSwgY2FuY2VsTmFtZSwgbmFtZVN1ZmZpeCkge1xuXHQgICAgdmFyIHNldE5hdGl2ZSA9IG51bGw7XG5cdCAgICB2YXIgY2xlYXJOYXRpdmUgPSBudWxsO1xuXHQgICAgc2V0TmFtZSArPSBuYW1lU3VmZml4O1xuXHQgICAgY2FuY2VsTmFtZSArPSBuYW1lU3VmZml4O1xuXHQgICAgZnVuY3Rpb24gc2NoZWR1bGVUYXNrKHRhc2spIHtcblx0ICAgICAgICB2YXIgZGF0YSA9IHRhc2suZGF0YTtcblx0ICAgICAgICBkYXRhLmFyZ3NbMF0gPSB0YXNrLmludm9rZTtcblx0ICAgICAgICBkYXRhLmhhbmRsZUlkID0gc2V0TmF0aXZlLmFwcGx5KHdpbmRvdywgZGF0YS5hcmdzKTtcblx0ICAgICAgICByZXR1cm4gdGFzaztcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIGNsZWFyVGFzayh0YXNrKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyTmF0aXZlKHRhc2suZGF0YS5oYW5kbGVJZCk7XG5cdCAgICB9XG5cdCAgICBzZXROYXRpdmUgPSB1dGlsc18xLnBhdGNoTWV0aG9kKHdpbmRvdywgc2V0TmFtZSwgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICB2YXIgem9uZSA9IFpvbmUuY3VycmVudDtcblx0ICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgICAgICAgICBoYW5kbGVJZDogbnVsbCxcblx0ICAgICAgICAgICAgICAgIGlzUGVyaW9kaWM6IG5hbWVTdWZmaXggPT09ICdJbnRlcnZhbCcsXG5cdCAgICAgICAgICAgICAgICBkZWxheTogKG5hbWVTdWZmaXggPT09ICdUaW1lb3V0JyB8fCBuYW1lU3VmZml4ID09PSAnSW50ZXJ2YWwnKSA/IGFyZ3NbMV0gfHwgMCA6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBhcmdzOiBhcmdzXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgIHJldHVybiB6b25lLnNjaGVkdWxlTWFjcm9UYXNrKHNldE5hbWUsIGFyZ3NbMF0sIG9wdGlvbnMsIHNjaGVkdWxlVGFzaywgY2xlYXJUYXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIC8vIGNhdXNlIGFuIGVycm9yIGJ5IGNhbGxpbmcgaXQgZGlyZWN0bHkuXG5cdCAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZS5hcHBseSh3aW5kb3csIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgIH07IH0pO1xuXHQgICAgY2xlYXJOYXRpdmUgPSB1dGlsc18xLnBhdGNoTWV0aG9kKHdpbmRvdywgY2FuY2VsTmFtZSwgZnVuY3Rpb24gKGRlbGVnYXRlKSB7IHJldHVybiBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuXHQgICAgICAgIHZhciB0YXNrID0gYXJnc1swXTtcblx0ICAgICAgICBpZiAodGFzayAmJiB0eXBlb2YgdGFzay50eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBpZiAodGFzay5jYW5jZWxGbiAmJiB0YXNrLmRhdGEuaXNQZXJpb2RpYyB8fCB0YXNrLnJ1bkNvdW50ID09PSAwKSB7XG5cdCAgICAgICAgICAgICAgICAvLyBEbyBub3QgY2FuY2VsIGFscmVhZHkgY2FuY2VsZWQgZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICB0YXNrLnpvbmUuY2FuY2VsVGFzayh0YXNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgLy8gY2F1c2UgYW4gZXJyb3IgYnkgY2FsbGluZyBpdCBkaXJlY3RseS5cblx0ICAgICAgICAgICAgZGVsZWdhdGUuYXBwbHkod2luZG93LCBhcmdzKTtcblx0ICAgICAgICB9XG5cdCAgICB9OyB9KTtcblx0fVxuXHRleHBvcnRzLnBhdGNoVGltZXIgPSBwYXRjaFRpbWVyO1xuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pOyIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKEMpIE1pY3Jvc29mdC4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbnZhciBSZWZsZWN0O1xyXG4oZnVuY3Rpb24gKFJlZmxlY3QpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG4gICAgLy8gTG9hZCBnbG9iYWwgb3Igc2hpbSB2ZXJzaW9ucyBvZiBNYXAsIFNldCwgYW5kIFdlYWtNYXBcclxuICAgIHZhciBmdW5jdGlvblByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihGdW5jdGlvbik7XHJcbiAgICB2YXIgX01hcCA9IHR5cGVvZiBNYXAgPT09IFwiZnVuY3Rpb25cIiA/IE1hcCA6IENyZWF0ZU1hcFBvbHlmaWxsKCk7XHJcbiAgICB2YXIgX1NldCA9IHR5cGVvZiBTZXQgPT09IFwiZnVuY3Rpb25cIiA/IFNldCA6IENyZWF0ZVNldFBvbHlmaWxsKCk7XHJcbiAgICB2YXIgX1dlYWtNYXAgPSB0eXBlb2YgV2Vha01hcCA9PT0gXCJmdW5jdGlvblwiID8gV2Vha01hcCA6IENyZWF0ZVdlYWtNYXBQb2x5ZmlsbCgpO1xyXG4gICAgLy8gW1tNZXRhZGF0YV1dIGludGVybmFsIHNsb3RcclxuICAgIHZhciBfX01ldGFkYXRhX18gPSBuZXcgX1dlYWtNYXAoKTtcclxuICAgIC8qKlxyXG4gICAgICAqIEFwcGxpZXMgYSBzZXQgb2YgZGVjb3JhdG9ycyB0byBhIHByb3BlcnR5IG9mIGEgdGFyZ2V0IG9iamVjdC5cclxuICAgICAgKiBAcGFyYW0gZGVjb3JhdG9ycyBBbiBhcnJheSBvZiBkZWNvcmF0b3JzLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgdG8gZGVjb3JhdGUuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldERlc2NyaXB0b3IgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkgZGVzY3JpcHRvciBmb3IgdGhlIHRhcmdldCBrZXlcclxuICAgICAgKiBAcmVtYXJrcyBEZWNvcmF0b3JzIGFyZSBhcHBsaWVkIGluIHJldmVyc2Ugb3JkZXIuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBDIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICBDID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEMpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEMsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEMucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDLCBcInN0YXRpY01ldGhvZFwiLFxyXG4gICAgICAqICAgICAgICAgUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzQXJyYXksIEMsIFwic3RhdGljTWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihDLCBcInN0YXRpY01ldGhvZFwiKSkpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQy5wcm90b3R5cGUsIFwibWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnNBcnJheSwgQy5wcm90b3R5cGUsIFwibWV0aG9kXCIsXHJcbiAgICAgICogICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihDLnByb3RvdHlwZSwgXCJtZXRob2RcIikpKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCB0YXJnZXRLZXksIHRhcmdldERlc2NyaXB0b3IpIHtcclxuICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldERlc2NyaXB0b3IpKSB7XHJcbiAgICAgICAgICAgIGlmICghSXNBcnJheShkZWNvcmF0b3JzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoSXNVbmRlZmluZWQodGFyZ2V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFJc09iamVjdCh0YXJnZXREZXNjcmlwdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIERlY29yYXRlUHJvcGVydHlXaXRoRGVzY3JpcHRvcihkZWNvcmF0b3JzLCB0YXJnZXQsIHRhcmdldEtleSwgdGFyZ2V0RGVzY3JpcHRvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgIGlmICghSXNBcnJheShkZWNvcmF0b3JzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGVQcm9wZXJ0eVdpdGhvdXREZXNjcmlwdG9yKGRlY29yYXRvcnMsIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghSXNBcnJheShkZWNvcmF0b3JzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFJc0NvbnN0cnVjdG9yKHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gRGVjb3JhdGVDb25zdHJ1Y3RvcihkZWNvcmF0b3JzLCB0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJlZmxlY3QuZGVjb3JhdGUgPSBkZWNvcmF0ZTtcclxuICAgIC8qKlxyXG4gICAgICAqIEEgZGVmYXVsdCBtZXRhZGF0YSBkZWNvcmF0b3IgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIG9uIGEgY2xhc3MsIGNsYXNzIG1lbWJlciwgb3IgcGFyYW1ldGVyLlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBUaGUga2V5IGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhVmFsdWUgVGhlIHZhbHVlIGZvciB0aGUgbWV0YWRhdGEgZW50cnkuXHJcbiAgICAgICogQHJldHVybnMgQSBkZWNvcmF0b3IgZnVuY3Rpb24uXHJcbiAgICAgICogQHJlbWFya3NcclxuICAgICAgKiBJZiBgbWV0YWRhdGFLZXlgIGlzIGFscmVhZHkgZGVmaW5lZCBmb3IgdGhlIHRhcmdldCBhbmQgdGFyZ2V0IGtleSwgdGhlXHJcbiAgICAgICogbWV0YWRhdGFWYWx1ZSBmb3IgdGhhdCBrZXkgd2lsbCBiZSBvdmVyd3JpdHRlbi5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcbiAgICAgICogICAgIGNsYXNzIEMge1xyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yLCBUeXBlU2NyaXB0IG9ubHkpXHJcbiAgICAgICogICAgIGNsYXNzIEMge1xyXG4gICAgICAqICAgICAgICAgQFJlZmxlY3QubWV0YWRhdGEoa2V5LCB2YWx1ZSlcclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUsIFR5cGVTY3JpcHQgb25seSlcclxuICAgICAgKiAgICAgY2xhc3MgQyB7XHJcbiAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxyXG4gICAgICAqICAgICAgICAgcHJvcGVydHk7XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICBjbGFzcyBDIHtcclxuICAgICAgKiAgICAgICAgIEBSZWZsZWN0Lm1ldGFkYXRhKGtleSwgdmFsdWUpXHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgY2xhc3MgQyB7XHJcbiAgICAgICogICAgICAgICBAUmVmbGVjdC5tZXRhZGF0YShrZXksIHZhbHVlKVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWNvcmF0b3IodGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICAgICAgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgICAgICAgICBPcmRpbmFyeURlZmluZU93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlLCB0YXJnZXQsIHRhcmdldEtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUlzQ29uc3RydWN0b3IodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwgLyp0YXJnZXRLZXkqLyB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZWNvcmF0b3I7XHJcbiAgICB9XHJcbiAgICBSZWZsZWN0Lm1ldGFkYXRhID0gbWV0YWRhdGE7XHJcbiAgICAvKipcclxuICAgICAgKiBEZWZpbmUgYSB1bmlxdWUgbWV0YWRhdGEgZW50cnkgb24gdGhlIHRhcmdldC5cclxuICAgICAgKiBAcGFyYW0gbWV0YWRhdGFLZXkgQSBrZXkgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhVmFsdWUgQSB2YWx1ZSB0aGF0IGNvbnRhaW5zIGF0dGFjaGVkIG1ldGFkYXRhLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdG8gZGVmaW5lIG1ldGFkYXRhLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgQyB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEMpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEMsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEMucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBvcHRpb25zLCBDLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIG9wdGlvbnMsIEMucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBkZWNvcmF0b3IgZmFjdG9yeSBhcyBtZXRhZGF0YS1wcm9kdWNpbmcgYW5ub3RhdGlvbi5cclxuICAgICAgKiAgICAgZnVuY3Rpb24gTXlBbm5vdGF0aW9uKG9wdGlvbnMpOiBEZWNvcmF0b3Ige1xyXG4gICAgICAqICAgICAgICAgcmV0dXJuICh0YXJnZXQsIGtleT8pID0+IFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBvcHRpb25zLCB0YXJnZXQsIGtleSk7XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGVmaW5lTWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUsIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlEZWZpbmVPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YSA9IGRlZmluZU1ldGFkYXRhO1xyXG4gICAgLyoqXHJcbiAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluIGhhcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIG1ldGFkYXRhS2V5IEEga2V5IHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIG1ldGFkYXRhLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQHJldHVybnMgYHRydWVgIGlmIHRoZSBtZXRhZGF0YSBrZXkgd2FzIGRlZmluZWQgb24gdGhlIHRhcmdldCBvYmplY3Qgb3IgaXRzIHByb3RvdHlwZSBjaGFpbjsgb3RoZXJ3aXNlLCBgZmFsc2VgLlxyXG4gICAgICAqIEBleGFtcGxlXHJcbiAgICAgICpcclxuICAgICAgKiAgICAgY2xhc3MgQyB7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eSBkZWNsYXJhdGlvbnMgYXJlIG5vdCBwYXJ0IG9mIEVTNiwgdGhvdWdoIHRoZXkgYXJlIHZhbGlkIGluIFR5cGVTY3JpcHQ6XHJcbiAgICAgICogICAgICAgICAvLyBzdGF0aWMgc3RhdGljUHJvcGVydHk7XHJcbiAgICAgICogICAgICAgICAvLyBwcm9wZXJ0eTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAgICAgY29uc3RydWN0b3IocCkgeyB9XHJcbiAgICAgICogICAgICAgICBzdGF0aWMgc3RhdGljTWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgbWV0aG9kKHApIHsgfVxyXG4gICAgICAqICAgICB9XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gY29uc3RydWN0b3JcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEMpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEMsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEMucHJvdG90eXBlLCBcInByb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuaGFzTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLCBcInN0YXRpY01ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNNZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEMucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gaGFzTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlIYXNNZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5oYXNNZXRhZGF0YSA9IGhhc01ldGFkYXRhO1xyXG4gICAgLyoqXHJcbiAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgdGFyZ2V0IG9iamVjdCBoYXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIGtleSBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgbWV0YWRhdGEga2V5IHdhcyBkZWZpbmVkIG9uIHRoZSB0YXJnZXQgb2JqZWN0OyBvdGhlcndpc2UsIGBmYWxzZWAuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBDIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc093bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQyk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc093bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQywgXCJzdGF0aWNQcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc093bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQy5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5oYXNPd25NZXRhZGF0YShcImN1c3RvbTphbm5vdGF0aW9uXCIsIEMsIFwic3RhdGljTWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIG1ldGhvZCAob24gcHJvdG90eXBlKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0Lmhhc093bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQy5wcm90b3R5cGUsIFwibWV0aG9kXCIpO1xyXG4gICAgICAqXHJcbiAgICAgICovXHJcbiAgICBmdW5jdGlvbiBoYXNPd25NZXRhZGF0YShtZXRhZGF0YUtleSwgdGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICBpZiAoIUlzT2JqZWN0KHRhcmdldCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghSXNVbmRlZmluZWQodGFyZ2V0S2V5KSkge1xyXG4gICAgICAgICAgICB0YXJnZXRLZXkgPSBUb1Byb3BlcnR5S2V5KHRhcmdldEtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBPcmRpbmFyeUhhc093bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSk7XHJcbiAgICB9XHJcbiAgICBSZWZsZWN0Lmhhc093bk1ldGFkYXRhID0gaGFzT3duTWV0YWRhdGE7XHJcbiAgICAvKipcclxuICAgICAgKiBHZXRzIHRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIGtleSBvbiB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluLlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIG1ldGFkYXRhIGtleSBpZiBmb3VuZDsgb3RoZXJ3aXNlLCBgdW5kZWZpbmVkYC5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEMge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQywgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0TWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuZ2V0TWV0YWRhdGEgPSBnZXRNZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgdGhlIG1ldGFkYXRhIHZhbHVlIGZvciB0aGUgcHJvdmlkZWQgbWV0YWRhdGEga2V5IG9uIHRoZSB0YXJnZXQgb2JqZWN0LlxyXG4gICAgICAqIEBwYXJhbSBtZXRhZGF0YUtleSBBIGtleSB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSBtZXRhZGF0YS5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0IG9uIHdoaWNoIHRoZSBtZXRhZGF0YSBpcyBkZWZpbmVkLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXRLZXkgKE9wdGlvbmFsKSBUaGUgcHJvcGVydHkga2V5IGZvciB0aGUgdGFyZ2V0LlxyXG4gICAgICAqIEByZXR1cm5zIFRoZSBtZXRhZGF0YSB2YWx1ZSBmb3IgdGhlIG1ldGFkYXRhIGtleSBpZiBmb3VuZDsgb3RoZXJ3aXNlLCBgdW5kZWZpbmVkYC5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEMge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQywgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldE93bk1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEobWV0YWRhdGFLZXksIHRhcmdldCwgdGFyZ2V0S2V5KTtcclxuICAgIH1cclxuICAgIFJlZmxlY3QuZ2V0T3duTWV0YWRhdGEgPSBnZXRPd25NZXRhZGF0YTtcclxuICAgIC8qKlxyXG4gICAgICAqIEdldHMgdGhlIG1ldGFkYXRhIGtleXMgZGVmaW5lZCBvbiB0aGUgdGFyZ2V0IG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluLlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgdW5pcXVlIG1ldGFkYXRhIGtleXMuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBDIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE1ldGFkYXRhS2V5cyhDKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEMsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoQy5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMoQywgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0TWV0YWRhdGFLZXlzKEMucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0TWV0YWRhdGFLZXlzKHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlNZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5nZXRNZXRhZGF0YUtleXMgPSBnZXRNZXRhZGF0YUtleXM7XHJcbiAgICAvKipcclxuICAgICAgKiBHZXRzIHRoZSB1bmlxdWUgbWV0YWRhdGEga2V5cyBkZWZpbmVkIG9uIHRoZSB0YXJnZXQgb2JqZWN0LlxyXG4gICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3Qgb24gd2hpY2ggdGhlIG1ldGFkYXRhIGlzIGRlZmluZWQuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldEtleSAoT3B0aW9uYWwpIFRoZSBwcm9wZXJ0eSBrZXkgZm9yIHRoZSB0YXJnZXQuXHJcbiAgICAgICogQHJldHVybnMgQW4gYXJyYXkgb2YgdW5pcXVlIG1ldGFkYXRhIGtleXMuXHJcbiAgICAgICogQGV4YW1wbGVcclxuICAgICAgKlxyXG4gICAgICAqICAgICBjbGFzcyBDIHtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5IGRlY2xhcmF0aW9ucyBhcmUgbm90IHBhcnQgb2YgRVM2LCB0aG91Z2ggdGhleSBhcmUgdmFsaWQgaW4gVHlwZVNjcmlwdDpcclxuICAgICAgKiAgICAgICAgIC8vIHN0YXRpYyBzdGF0aWNQcm9wZXJ0eTtcclxuICAgICAgKiAgICAgICAgIC8vIHByb3BlcnR5O1xyXG4gICAgICAqXHJcbiAgICAgICogICAgICAgICBjb25zdHJ1Y3RvcihwKSB7IH1cclxuICAgICAgKiAgICAgICAgIHN0YXRpYyBzdGF0aWNNZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgICAgICBtZXRob2QocCkgeyB9XHJcbiAgICAgICogICAgIH1cclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBjb25zdHJ1Y3RvclxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmdldE93bk1ldGFkYXRhS2V5cyhDKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGFLZXlzKEMsIFwic3RhdGljUHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gcHJvcGVydHkgKG9uIHByb3RvdHlwZSlcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoQy5wcm90b3R5cGUsIFwicHJvcGVydHlcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBjb25zdHJ1Y3RvcilcclxuICAgICAgKiAgICAgcmVzdWx0ID0gUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMoQywgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZ2V0T3duTWV0YWRhdGFLZXlzKEMucHJvdG90eXBlLCBcIm1ldGhvZFwiKTtcclxuICAgICAgKlxyXG4gICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0T3duTWV0YWRhdGFLZXlzKHRhcmdldCwgdGFyZ2V0S2V5KSB7XHJcbiAgICAgICAgaWYgKCFJc09iamVjdCh0YXJnZXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIUlzVW5kZWZpbmVkKHRhcmdldEtleSkpIHtcclxuICAgICAgICAgICAgdGFyZ2V0S2V5ID0gVG9Qcm9wZXJ0eUtleSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5nZXRPd25NZXRhZGF0YUtleXMgPSBnZXRPd25NZXRhZGF0YUtleXM7XHJcbiAgICAvKipcclxuICAgICAgKiBEZWxldGVzIHRoZSBtZXRhZGF0YSBlbnRyeSBmcm9tIHRoZSB0YXJnZXQgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGtleS5cclxuICAgICAgKiBAcGFyYW0gbWV0YWRhdGFLZXkgQSBrZXkgdXNlZCB0byBzdG9yZSBhbmQgcmV0cmlldmUgbWV0YWRhdGEuXHJcbiAgICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdCBvbiB3aGljaCB0aGUgbWV0YWRhdGEgaXMgZGVmaW5lZC5cclxuICAgICAgKiBAcGFyYW0gdGFyZ2V0S2V5IChPcHRpb25hbCkgVGhlIHByb3BlcnR5IGtleSBmb3IgdGhlIHRhcmdldC5cclxuICAgICAgKiBAcmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG1ldGFkYXRhIGVudHJ5IHdhcyBmb3VuZCBhbmQgZGVsZXRlZDsgb3RoZXJ3aXNlLCBmYWxzZS5cclxuICAgICAgKiBAZXhhbXBsZVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIGNsYXNzIEMge1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHkgZGVjbGFyYXRpb25zIGFyZSBub3QgcGFydCBvZiBFUzYsIHRob3VnaCB0aGV5IGFyZSB2YWxpZCBpbiBUeXBlU2NyaXB0OlxyXG4gICAgICAqICAgICAgICAgLy8gc3RhdGljIHN0YXRpY1Byb3BlcnR5O1xyXG4gICAgICAqICAgICAgICAgLy8gcHJvcGVydHk7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgICAgIGNvbnN0cnVjdG9yKHApIHsgfVxyXG4gICAgICAqICAgICAgICAgc3RhdGljIHN0YXRpY01ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgICAgIG1ldGhvZChwKSB7IH1cclxuICAgICAgKiAgICAgfVxyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIGNvbnN0cnVjdG9yXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBwcm9wZXJ0eSAob24gY29uc3RydWN0b3IpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLCBcInN0YXRpY1Byb3BlcnR5XCIpO1xyXG4gICAgICAqXHJcbiAgICAgICogICAgIC8vIHByb3BlcnR5IChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJwcm9wZXJ0eVwiKTtcclxuICAgICAgKlxyXG4gICAgICAqICAgICAvLyBtZXRob2QgKG9uIGNvbnN0cnVjdG9yKVxyXG4gICAgICAqICAgICByZXN1bHQgPSBSZWZsZWN0LmRlbGV0ZU1ldGFkYXRhKFwiY3VzdG9tOmFubm90YXRpb25cIiwgQywgXCJzdGF0aWNNZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKiAgICAgLy8gbWV0aG9kIChvbiBwcm90b3R5cGUpXHJcbiAgICAgICogICAgIHJlc3VsdCA9IFJlZmxlY3QuZGVsZXRlTWV0YWRhdGEoXCJjdXN0b206YW5ub3RhdGlvblwiLCBDLnByb3RvdHlwZSwgXCJtZXRob2RcIik7XHJcbiAgICAgICpcclxuICAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGRlbGV0ZU1ldGFkYXRhKG1ldGFkYXRhS2V5LCB0YXJnZXQsIHRhcmdldEtleSkge1xyXG4gICAgICAgIGlmICghSXNPYmplY3QodGFyZ2V0KSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCFJc1VuZGVmaW5lZCh0YXJnZXRLZXkpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEtleSA9IFRvUHJvcGVydHlLZXkodGFyZ2V0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pvbmF0aGFuZHR1cm5lci9kZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWNzL21ldGFkYXRhLm1kI2RlbGV0ZW1ldGFkYXRhLW1ldGFkYXRha2V5LXAtXHJcbiAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcCh0YXJnZXQsIHRhcmdldEtleSwgLypjcmVhdGUqLyBmYWxzZSk7XHJcbiAgICAgICAgaWYgKElzVW5kZWZpbmVkKG1ldGFkYXRhTWFwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghbWV0YWRhdGFNYXAuZGVsZXRlKG1ldGFkYXRhS2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtZXRhZGF0YU1hcC5zaXplID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHRhcmdldE1ldGFkYXRhID0gX19NZXRhZGF0YV9fLmdldCh0YXJnZXQpO1xyXG4gICAgICAgIHRhcmdldE1ldGFkYXRhLmRlbGV0ZSh0YXJnZXRLZXkpO1xyXG4gICAgICAgIGlmICh0YXJnZXRNZXRhZGF0YS5zaXplID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX19NZXRhZGF0YV9fLmRlbGV0ZSh0YXJnZXQpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgUmVmbGVjdC5kZWxldGVNZXRhZGF0YSA9IGRlbGV0ZU1ldGFkYXRhO1xyXG4gICAgZnVuY3Rpb24gRGVjb3JhdGVDb25zdHJ1Y3RvcihkZWNvcmF0b3JzLCB0YXJnZXQpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgICAgICB2YXIgZGVjb3JhdG9yID0gZGVjb3JhdG9yc1tpXTtcclxuICAgICAgICAgICAgdmFyIGRlY29yYXRlZCA9IGRlY29yYXRvcih0YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKGRlY29yYXRlZCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghSXNDb25zdHJ1Y3RvcihkZWNvcmF0ZWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZGVjb3JhdGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBEZWNvcmF0ZVByb3BlcnR5V2l0aERlc2NyaXB0b3IoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSwgZGVzY3JpcHRvcikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xyXG4gICAgICAgICAgICB2YXIgZGVjb3JhdGVkID0gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHlLZXksIGRlc2NyaXB0b3IpO1xyXG4gICAgICAgICAgICBpZiAoIUlzVW5kZWZpbmVkKGRlY29yYXRlZCkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghSXNPYmplY3QoZGVjb3JhdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IgPSBkZWNvcmF0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBEZWNvcmF0ZVByb3BlcnR5V2l0aG91dERlc2NyaXB0b3IoZGVjb3JhdG9ycywgdGFyZ2V0LCBwcm9wZXJ0eUtleSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWNvcmF0b3IgPSBkZWNvcmF0b3JzW2ldO1xyXG4gICAgICAgICAgICBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eUtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2pvbmF0aGFuZHR1cm5lci9kZWNvcmF0b3JzL2Jsb2IvbWFzdGVyL3NwZWNzL21ldGFkYXRhLm1kI2dldG9yY3JlYXRlbWV0YWRhdGFtYXAtLW8tcC1jcmVhdGUtXHJcbiAgICBmdW5jdGlvbiBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKHRhcmdldCwgdGFyZ2V0S2V5LCBjcmVhdGUpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0TWV0YWRhdGEgPSBfX01ldGFkYXRhX18uZ2V0KHRhcmdldCk7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRNZXRhZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIWNyZWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YXJnZXRNZXRhZGF0YSA9IG5ldyBfTWFwKCk7XHJcbiAgICAgICAgICAgIF9fTWV0YWRhdGFfXy5zZXQodGFyZ2V0LCB0YXJnZXRNZXRhZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBrZXlNZXRhZGF0YSA9IHRhcmdldE1ldGFkYXRhLmdldCh0YXJnZXRLZXkpO1xyXG4gICAgICAgIGlmICgha2V5TWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCFjcmVhdGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAga2V5TWV0YWRhdGEgPSBuZXcgX01hcCgpO1xyXG4gICAgICAgICAgICB0YXJnZXRNZXRhZGF0YS5zZXQodGFyZ2V0S2V5LCBrZXlNZXRhZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlNZXRhZGF0YTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeWhhc21ldGFkYXRhLS1tZXRhZGF0YWtleS1vLXAtXHJcbiAgICBmdW5jdGlvbiBPcmRpbmFyeUhhc01ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XHJcbiAgICAgICAgdmFyIGhhc093biA9IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xyXG4gICAgICAgIGlmIChoYXNPd24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJlbnQgPSBHZXRQcm90b3R5cGVPZihPKTtcclxuICAgICAgICBpZiAocGFyZW50ICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBPcmRpbmFyeUhhc01ldGFkYXRhKE1ldGFkYXRhS2V5LCBwYXJlbnQsIFApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vam9uYXRoYW5kdHVybmVyL2RlY29yYXRvcnMvYmxvYi9tYXN0ZXIvc3BlY3MvbWV0YWRhdGEubWQjb3JkaW5hcnloYXNvd25tZXRhZGF0YS0tbWV0YWRhdGFrZXktby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlIYXNPd25NZXRhZGF0YShNZXRhZGF0YUtleSwgTywgUCkge1xyXG4gICAgICAgIHZhciBtZXRhZGF0YU1hcCA9IEdldE9yQ3JlYXRlTWV0YWRhdGFNYXAoTywgUCwgLypjcmVhdGUqLyBmYWxzZSk7XHJcbiAgICAgICAgaWYgKG1ldGFkYXRhTWFwID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQm9vbGVhbihtZXRhZGF0YU1hcC5oYXMoTWV0YWRhdGFLZXkpKTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeWdldG1ldGFkYXRhLS1tZXRhZGF0YWtleS1vLXAtXHJcbiAgICBmdW5jdGlvbiBPcmRpbmFyeUdldE1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XHJcbiAgICAgICAgdmFyIGhhc093biA9IE9yZGluYXJ5SGFzT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xyXG4gICAgICAgIGlmIChoYXNPd24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIE9yZGluYXJ5R2V0T3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE8sIFApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyZW50ID0gR2V0UHJvdG90eXBlT2YoTyk7XHJcbiAgICAgICAgaWYgKHBhcmVudCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gT3JkaW5hcnlHZXRNZXRhZGF0YShNZXRhZGF0YUtleSwgcGFyZW50LCBQKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeWdldG93bm1ldGFkYXRhLS1tZXRhZGF0YWtleS1vLXAtXHJcbiAgICBmdW5jdGlvbiBPcmRpbmFyeUdldE93bk1ldGFkYXRhKE1ldGFkYXRhS2V5LCBPLCBQKSB7XHJcbiAgICAgICAgdmFyIG1ldGFkYXRhTWFwID0gR2V0T3JDcmVhdGVNZXRhZGF0YU1hcChPLCBQLCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuICAgICAgICBpZiAobWV0YWRhdGFNYXAgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWV0YWRhdGFNYXAuZ2V0KE1ldGFkYXRhS2V5KTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeWRlZmluZW93bm1ldGFkYXRhLS1tZXRhZGF0YWtleS1tZXRhZGF0YXZhbHVlLW8tcC1cclxuICAgIGZ1bmN0aW9uIE9yZGluYXJ5RGVmaW5lT3duTWV0YWRhdGEoTWV0YWRhdGFLZXksIE1ldGFkYXRhVmFsdWUsIE8sIFApIHtcclxuICAgICAgICB2YXIgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKE8sIFAsIC8qY3JlYXRlKi8gdHJ1ZSk7XHJcbiAgICAgICAgbWV0YWRhdGFNYXAuc2V0KE1ldGFkYXRhS2V5LCBNZXRhZGF0YVZhbHVlKTtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeW1ldGFkYXRha2V5cy0tby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlNZXRhZGF0YUtleXMoTywgUCkge1xyXG4gICAgICAgIHZhciBvd25LZXlzID0gT3JkaW5hcnlPd25NZXRhZGF0YUtleXMoTywgUCk7XHJcbiAgICAgICAgdmFyIHBhcmVudCA9IEdldFByb3RvdHlwZU9mKE8pO1xyXG4gICAgICAgIGlmIChwYXJlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG93bktleXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwYXJlbnRLZXlzID0gT3JkaW5hcnlNZXRhZGF0YUtleXMocGFyZW50LCBQKTtcclxuICAgICAgICBpZiAocGFyZW50S2V5cy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb3duS2V5cztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG93bktleXMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmVudEtleXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZXQgPSBuZXcgX1NldCgpO1xyXG4gICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IG93bktleXMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBvd25LZXlzW19pXTtcclxuICAgICAgICAgICAgdmFyIGhhc0tleSA9IHNldC5oYXMoa2V5KTtcclxuICAgICAgICAgICAgaWYgKCFoYXNLZXkpIHtcclxuICAgICAgICAgICAgICAgIHNldC5hZGQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAodmFyIF9hID0gMDsgX2EgPCBwYXJlbnRLZXlzLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gcGFyZW50S2V5c1tfYV07XHJcbiAgICAgICAgICAgIHZhciBoYXNLZXkgPSBzZXQuaGFzKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghaGFzS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBzZXQuYWRkKGtleSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25hdGhhbmR0dXJuZXIvZGVjb3JhdG9ycy9ibG9iL21hc3Rlci9zcGVjcy9tZXRhZGF0YS5tZCNvcmRpbmFyeW93bm1ldGFkYXRha2V5cy0tby1wLVxyXG4gICAgZnVuY3Rpb24gT3JkaW5hcnlPd25NZXRhZGF0YUtleXModGFyZ2V0LCB0YXJnZXRLZXkpIHtcclxuICAgICAgICB2YXIgbWV0YWRhdGFNYXAgPSBHZXRPckNyZWF0ZU1ldGFkYXRhTWFwKHRhcmdldCwgdGFyZ2V0S2V5LCAvKmNyZWF0ZSovIGZhbHNlKTtcclxuICAgICAgICB2YXIga2V5cyA9IFtdO1xyXG4gICAgICAgIGlmIChtZXRhZGF0YU1hcCkge1xyXG4gICAgICAgICAgICBtZXRhZGF0YU1hcC5mb3JFYWNoKGZ1bmN0aW9uIChfLCBrZXkpIHsgcmV0dXJuIGtleXMucHVzaChrZXkpOyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcy11bmRlZmluZWQtdHlwZVxyXG4gICAgZnVuY3Rpb24gSXNVbmRlZmluZWQoeCkge1xyXG4gICAgICAgIHJldHVybiB4ID09PSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtaXNhcnJheVxyXG4gICAgZnVuY3Rpb24gSXNBcnJheSh4KSB7XHJcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoeCk7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LXR5cGVcclxuICAgIGZ1bmN0aW9uIElzT2JqZWN0KHgpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwib2JqZWN0XCIgPyB4ICE9PSBudWxsIDogdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1pc2NvbnN0cnVjdG9yXHJcbiAgICBmdW5jdGlvbiBJc0NvbnN0cnVjdG9yKHgpIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09IFwiZnVuY3Rpb25cIjtcclxuICAgIH1cclxuICAgIC8vIGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzLXN5bWJvbC10eXBlXHJcbiAgICBmdW5jdGlvbiBJc1N5bWJvbCh4KSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiO1xyXG4gICAgfVxyXG4gICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvcHJvcGVydHlrZXlcclxuICAgIGZ1bmN0aW9uIFRvUHJvcGVydHlLZXkodmFsdWUpIHtcclxuICAgICAgICBpZiAoSXNTeW1ib2wodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBHZXRQcm90b3R5cGVPZihPKSB7XHJcbiAgICAgICAgdmFyIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKE8pO1xyXG4gICAgICAgIGlmICh0eXBlb2YgTyAhPT0gXCJmdW5jdGlvblwiIHx8IE8gPT09IGZ1bmN0aW9uUHJvdG90eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVHlwZVNjcmlwdCBkb2Vzbid0IHNldCBfX3Byb3RvX18gaW4gRVM1LCBhcyBpdCdzIG5vbi1zdGFuZGFyZC4gXHJcbiAgICAgICAgLy8gVHJ5IHRvIGRldGVybWluZSB0aGUgc3VwZXJjbGFzcyBjb25zdHJ1Y3Rvci4gQ29tcGF0aWJsZSBpbXBsZW1lbnRhdGlvbnNcclxuICAgICAgICAvLyBtdXN0IGVpdGhlciBzZXQgX19wcm90b19fIG9uIGEgc3ViY2xhc3MgY29uc3RydWN0b3IgdG8gdGhlIHN1cGVyY2xhc3MgY29uc3RydWN0b3IsXHJcbiAgICAgICAgLy8gb3IgZW5zdXJlIGVhY2ggY2xhc3MgaGFzIGEgdmFsaWQgYGNvbnN0cnVjdG9yYCBwcm9wZXJ0eSBvbiBpdHMgcHJvdG90eXBlIHRoYXRcclxuICAgICAgICAvLyBwb2ludHMgYmFjayB0byB0aGUgY29uc3RydWN0b3IuXHJcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBub3QgdGhlIHNhbWUgYXMgRnVuY3Rpb24uW1tQcm90b3R5cGVdXSwgdGhlbiB0aGlzIGlzIGRlZmluYXRlbHkgaW5oZXJpdGVkLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlbiBpbiBFUzYgb3Igd2hlbiB1c2luZyBfX3Byb3RvX18gaW4gYSBjb21wYXRpYmxlIGJyb3dzZXIuXHJcbiAgICAgICAgaWYgKHByb3RvICE9PSBmdW5jdGlvblByb3RvdHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzdXBlciBwcm90b3R5cGUgaXMgT2JqZWN0LnByb3RvdHlwZSwgbnVsbCwgb3IgdW5kZWZpbmVkLCB0aGVuIHdlIGNhbm5vdCBkZXRlcm1pbmUgdGhlIGhlcml0YWdlLlxyXG4gICAgICAgIHZhciBwcm90b3R5cGUgPSBPLnByb3RvdHlwZTtcclxuICAgICAgICB2YXIgcHJvdG90eXBlUHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG90eXBlKTtcclxuICAgICAgICBpZiAocHJvdG90eXBlUHJvdG8gPT0gbnVsbCB8fCBwcm90b3R5cGVQcm90byA9PT0gT2JqZWN0LnByb3RvdHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBjb25zdHJ1Y3RvciB3YXMgbm90IGEgZnVuY3Rpb24sIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXHJcbiAgICAgICAgdmFyIGNvbnN0cnVjdG9yID0gcHJvdG90eXBlUHJvdG8uY29uc3RydWN0b3I7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zdHJ1Y3RvciAhPT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBzb21lIGtpbmQgb2Ygc2VsZi1yZWZlcmVuY2UsIHRoZW4gd2UgY2Fubm90IGRldGVybWluZSB0aGUgaGVyaXRhZ2UuXHJcbiAgICAgICAgaWYgKGNvbnN0cnVjdG9yID09PSBPKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90bztcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gd2UgaGF2ZSBhIHByZXR0eSBnb29kIGd1ZXNzIGF0IHRoZSBoZXJpdGFnZS5cclxuICAgICAgICByZXR1cm4gY29uc3RydWN0b3I7XHJcbiAgICB9XHJcbiAgICAvLyBuYWl2ZSBNYXAgc2hpbVxyXG4gICAgZnVuY3Rpb24gQ3JlYXRlTWFwUG9seWZpbGwoKSB7XHJcbiAgICAgICAgdmFyIGNhY2hlU2VudGluZWwgPSB7fTtcclxuICAgICAgICBmdW5jdGlvbiBNYXAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fdmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gY2FjaGVTZW50aW5lbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgTWFwLnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgZ2V0IHNpemUoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5fY2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9maW5kKGtleSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZSA9IGtleTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkZWxldGU6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmQoa2V5KTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fa2V5cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gY2FjaGVTZW50aW5lbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbHVlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBjYWNoZVNlbnRpbmVsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmb3JFYWNoOiBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNBcmcpIHtcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5fa2V5c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl92YWx1ZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBrZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzLCB2YWx1ZSwga2V5LCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2ZpbmQ6IGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlzID0gdGhpcy5fa2V5cztcclxuICAgICAgICAgICAgICAgIHZhciBzaXplID0ga2V5cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlzW2ldID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gTWFwO1xyXG4gICAgfVxyXG4gICAgLy8gbmFpdmUgU2V0IHNoaW1cclxuICAgIGZ1bmN0aW9uIENyZWF0ZVNldFBvbHlmaWxsKCkge1xyXG4gICAgICAgIHZhciBjYWNoZVNlbnRpbmVsID0ge307XHJcbiAgICAgICAgZnVuY3Rpb24gU2V0KCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgX01hcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBTZXQucHJvdG90eXBlID0ge1xyXG4gICAgICAgICAgICBnZXQgc2l6ZSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAubGVuZ3RoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBoYXM6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcC5oYXModmFsdWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwLnNldCh2YWx1ZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRlbGV0ZTogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmRlbGV0ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuY2xlYXIoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9yRWFjaDogZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXAuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBTZXQ7XHJcbiAgICB9XHJcbiAgICAvLyBuYWl2ZSBXZWFrTWFwIHNoaW1cclxuICAgIGZ1bmN0aW9uIENyZWF0ZVdlYWtNYXBQb2x5ZmlsbCgpIHtcclxuICAgICAgICB2YXIgVVVJRF9TSVpFID0gMTY7XHJcbiAgICAgICAgdmFyIGlzTm9kZSA9IHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xyXG4gICAgICAgIHZhciBub2RlQ3J5cHRvID0gaXNOb2RlICYmIHJlcXVpcmUoXCJjcnlwdG9cIik7XHJcbiAgICAgICAgdmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XHJcbiAgICAgICAgdmFyIGtleXMgPSB7fTtcclxuICAgICAgICB2YXIgcm9vdEtleSA9IENyZWF0ZVVuaXF1ZUtleSgpO1xyXG4gICAgICAgIGZ1bmN0aW9uIFdlYWtNYXAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleSA9IENyZWF0ZVVuaXF1ZUtleSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBXZWFrTWFwLnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgaGFzOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleSBpbiB0YWJsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYmxlW3RoaXMuX2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0YWJsZVt0aGlzLl9rZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGVsZXRlOiBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFibGUgPSBHZXRPckNyZWF0ZVdlYWtNYXBUYWJsZSh0YXJnZXQsIC8qY3JlYXRlKi8gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRhYmxlICYmIHRoaXMuX2tleSBpbiB0YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgdGFibGVbdGhpcy5fa2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IG5vdCBhIHJlYWwgY2xlYXIsIGp1c3QgbWFrZXMgdGhlIHByZXZpb3VzIGRhdGEgdW5yZWFjaGFibGVcclxuICAgICAgICAgICAgICAgIHRoaXMuX2tleSA9IENyZWF0ZVVuaXF1ZUtleSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmdW5jdGlvbiBGaWxsUmFuZG9tQnl0ZXMoYnVmZmVyLCBzaXplKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJbaV0gPSBNYXRoLnJhbmRvbSgpICogMjU1IHwgMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiBHZW5SYW5kb21CeXRlcyhzaXplKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlQ3J5cHRvKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5vZGVDcnlwdG8ucmFuZG9tQnl0ZXMoc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgVWludDhBcnJheSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KHNpemUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjcnlwdG8gIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIG1zQ3J5cHRvICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRmlsbFJhbmRvbUJ5dGVzKGRhdGEsIHNpemUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBBcnJheShzaXplKTtcclxuICAgICAgICAgICAgICAgIEZpbGxSYW5kb21CeXRlcyhkYXRhLCBzaXplKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZVVVSUQoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gR2VuUmFuZG9tQnl0ZXMoVVVJRF9TSVpFKTtcclxuICAgICAgICAgICAgLy8gbWFyayBhcyByYW5kb20gLSBSRkMgNDEyMiDCpyA0LjRcclxuICAgICAgICAgICAgZGF0YVs2XSA9IGRhdGFbNl0gJiAweDRmIHwgMHg0MDtcclxuICAgICAgICAgICAgZGF0YVs4XSA9IGRhdGFbOF0gJiAweGJmIHwgMHg4MDtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIG9mZnNldCA9IDA7IG9mZnNldCA8IFVVSURfU0laRTsgKytvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBieXRlID0gZGF0YVtvZmZzZXRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA9PT0gNCB8fCBvZmZzZXQgPT09IDYgfHwgb2Zmc2V0ID09PSA4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiLVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGUgPCAxNikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBcIjBcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBieXRlLnRvU3RyaW5nKDE2KS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIENyZWF0ZVVuaXF1ZUtleSgpIHtcclxuICAgICAgICAgICAgdmFyIGtleTtcclxuICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAga2V5ID0gXCJAQFdlYWtNYXBAQFwiICsgQ3JlYXRlVVVJRCgpO1xyXG4gICAgICAgICAgICB9IHdoaWxlIChoYXNPd24uY2FsbChrZXlzLCBrZXkpKTtcclxuICAgICAgICAgICAga2V5c1trZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gR2V0T3JDcmVhdGVXZWFrTWFwVGFibGUodGFyZ2V0LCBjcmVhdGUpIHtcclxuICAgICAgICAgICAgaWYgKCFoYXNPd24uY2FsbCh0YXJnZXQsIHJvb3RLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNyZWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCByb290S2V5LCB7IHZhbHVlOiBPYmplY3QuY3JlYXRlKG51bGwpIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0YXJnZXRbcm9vdEtleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBXZWFrTWFwO1xyXG4gICAgfVxyXG4gICAgLy8gaG9vayBnbG9iYWwgUmVmbGVjdFxyXG4gICAgKGZ1bmN0aW9uIChfX2dsb2JhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgX19nbG9iYWwuUmVmbGVjdCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBpZiAoX19nbG9iYWwuUmVmbGVjdCAhPT0gUmVmbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBSZWZsZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX19nbG9iYWwuUmVmbGVjdFtwXSA9IFJlZmxlY3RbcF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9fZ2xvYmFsLlJlZmxlY3QgPSBSZWZsZWN0O1xyXG4gICAgICAgIH1cclxuICAgIH0pKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOlxyXG4gICAgICAgIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOlxyXG4gICAgICAgICAgICB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDpcclxuICAgICAgICAgICAgICAgIEZ1bmN0aW9uKFwicmV0dXJuIHRoaXM7XCIpKCkpO1xyXG59KShSZWZsZWN0IHx8IChSZWZsZWN0ID0ge30pKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVmbGVjdC5qcy5tYXAiLCIvKipcbiAgQGxpY2Vuc2VcbiAgbGljZW5zZVxuICoqL1xuXCJmb3JtYXQgcmVnaXN0ZXJcIjtTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvcm9vdFwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXtcImJvb2xlYW5cIjohMSxcImZ1bmN0aW9uXCI6ITAsb2JqZWN0OiEwLG51bWJlcjohMSxzdHJpbmc6ITEsdW5kZWZpbmVkOiExfTtlLnJvb3Q9aVt0eXBlb2Ygc2VsZl0mJnNlbGZ8fGlbdHlwZW9mIHdpbmRvd10mJndpbmRvdzt2YXIgbz0oaVt0eXBlb2YgZV0mJmUmJiFlLm5vZGVUeXBlJiZlLGlbdHlwZW9mIHRdJiZ0JiYhdC5ub2RlVHlwZSYmdCxpW3R5cGVvZiByXSYmcik7cmV0dXJuIW98fG8uZ2xvYmFsIT09byYmby53aW5kb3chPT1vfHwoZS5yb290PW8pLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzRnVuY3Rpb25cIixbXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtyZXR1cm4gcy5kZWZpbmU9dm9pZCAwLGUuaXNGdW5jdGlvbj1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzQXJyYXlcIixbXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3JldHVybiByLmRlZmluZT12b2lkIDAsZS5pc0FycmF5PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZcIm51bWJlclwiPT10eXBlb2YgZS5sZW5ndGh9LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzT2JqZWN0XCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIG51bGwhPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtyZXR1cm4gcy5kZWZpbmU9dm9pZCAwLGUuaXNPYmplY3Q9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7cmV0dXJuIHIuZGVmaW5lPXZvaWQgMCxlLmVycm9yT2JqZWN0PXtlOnt9fSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyksdGhpcy5lcnJvcnM9dCx0aGlzLm5hbWU9XCJVbnN1YnNjcmlwdGlvbkVycm9yXCIsdGhpcy5tZXNzYWdlPXQ/dC5sZW5ndGgrXCIgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcXG5cIit0Lm1hcChmdW5jdGlvbihlLHQpe3JldHVybiB0KzErXCIpIFwiK2UudG9TdHJpbmcoKX0pLmpvaW4oXCJcXG5cIik6XCJcIn1yZXR1cm4gaSh0LGUpLHR9KEVycm9yKTtyZXR1cm4gZS5VbnN1YnNjcmlwdGlvbkVycm9yPW8sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL09ic2VydmVyXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyZXR1cm4gci5kZWZpbmU9dm9pZCAwLGUuZW1wdHk9e2lzVW5zdWJzY3JpYmVkOiEwLG5leHQ6ZnVuY3Rpb24oZSl7fSxlcnJvcjpmdW5jdGlvbihlKXt0aHJvdyBlfSxjb21wbGV0ZTpmdW5jdGlvbigpe319LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyXCIsW1wicnhqcy91dGlsL3Jvb3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvdXRpbC9yb290XCIpLG89aS5yb290LlN5bWJvbDtyZXR1cm4gZS4kJHJ4U3Vic2NyaWJlcj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBvW1wiZm9yXCJdP29bXCJmb3JcIl0oXCJyeFN1YnNjcmliZXJcIik6XCJAQHJ4U3Vic2NyaWJlclwiLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicG9ueWZpbGxcIixbXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3JldHVybiByLmRlZmluZT12b2lkIDAsdC5leHBvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5TeW1ib2w7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2Ygcj9yLm9ic2VydmFibGU/dD1yLm9ic2VydmFibGU6KHQ9cihcIm9ic2VydmFibGVcIiksci5vYnNlcnZhYmxlPXQpOnQ9XCJAQG9ic2VydmFibGVcIix0fSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvclwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmNhbGwodGhpcyxcIm9iamVjdCB1bnN1YnNjcmliZWRcIiksdGhpcy5uYW1lPVwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIn1yZXR1cm4gaSh0LGUpLHR9KEVycm9yKTtyZXR1cm4gZS5PYmplY3RVbnN1YnNjcmliZWRFcnJvcj1vLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9TdWJqZWN0U3Vic2NyaXB0aW9uXCIsW1wicnhqcy9TdWJzY3JpcHRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLG49ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzKSx0aGlzLnN1YmplY3Q9dCx0aGlzLnN1YnNjcmliZXI9cix0aGlzLmlzVW5zdWJzY3JpYmVkPSExfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1Vuc3Vic2NyaWJlZCl7dGhpcy5pc1Vuc3Vic2NyaWJlZD0hMDt2YXIgZT10aGlzLnN1YmplY3QsdD1lLm9ic2VydmVycztpZih0aGlzLnN1YmplY3Q9bnVsbCx0JiYwIT09dC5sZW5ndGgmJiFlLmlzU3RvcHBlZCYmIWUuaXNVbnN1YnNjcmliZWQpe3ZhciByPXQuaW5kZXhPZih0aGlzLnN1YnNjcmliZXIpOy0xIT09ciYmdC5zcGxpY2UociwxKX19fSx0fShvLlN1YnNjcmlwdGlvbik7cmV0dXJuIGUuU3ViamVjdFN1YnNjcmlwdGlvbj1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9Bc3luY1N1YmplY3RcIixbXCJyeGpzL1N1YmplY3RcIixcInJ4anMvU3Vic2NyaXB0aW9uXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpcHRpb25cIiksYT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy52YWx1ZT1udWxsLHRoaXMuaGFzTmV4dD0hMSx0aGlzLmhhc0NvbXBsZXRlZD0hMX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzQ29tcGxldGVkJiZ0aGlzLmhhc05leHQ/KHQubmV4dCh0aGlzLnZhbHVlKSx0LmNvbXBsZXRlKCksbi5TdWJzY3JpcHRpb24uRU1QVFkpOnRoaXMuaGFzRXJyb3I/KHQuZXJyb3IodGhpcy50aHJvd25FcnJvciksbi5TdWJzY3JpcHRpb24uRU1QVFkpOmUucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLHQpfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWU9ZSx0aGlzLmhhc05leHQ9ITB9LHQucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9ITAsdGhpcy5oYXNOZXh0JiZlLnByb3RvdHlwZS5uZXh0LmNhbGwodGhpcyx0aGlzLnZhbHVlKSxlLnByb3RvdHlwZS5jb21wbGV0ZS5jYWxsKHRoaXMpfSx0fShvLlN1YmplY3QpO3JldHVybiBlLkFzeW5jU3ViamVjdD1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0JvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvQXN5bmNTdWJqZWN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PXRoaXMscj1lLnNvdXJjZSxvPWUuc3Vic2NyaWJlcixuPXIuY2FsbGJhY2tGdW5jLGE9ci5hcmdzLHU9ci5zY2hlZHVsZXIscD1yLnN1YmplY3Q7aWYoIXApe3A9ci5zdWJqZWN0PW5ldyBiLkFzeW5jU3ViamVjdDt2YXIgaD1mdW5jdGlvbiBmKCl7Zm9yKHZhciBlPVtdLHI9MDtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKWVbci0wXT1hcmd1bWVudHNbcl07dmFyIG89Zi5zb3VyY2Usbj1vLnNlbGVjdG9yLGE9by5zdWJqZWN0LGI9ZS5zaGlmdCgpO2lmKGIpYS5lcnJvcihiKTtlbHNlIGlmKG4pe3ZhciBwPWMudHJ5Q2F0Y2gobikuYXBwbHkodGhpcyxlKTtwPT09bC5lcnJvck9iamVjdD90LmFkZCh1LnNjaGVkdWxlKGksMCx7ZXJyOmwuZXJyb3JPYmplY3QuZSxzdWJqZWN0OmF9KSk6dC5hZGQodS5zY2hlZHVsZShzLDAse3ZhbHVlOnAsc3ViamVjdDphfSkpfWVsc2V7dmFyIGg9MT09PWUubGVuZ3RoP2VbMF06ZTt0LmFkZCh1LnNjaGVkdWxlKHMsMCx7dmFsdWU6aCxzdWJqZWN0OmF9KSl9fTtoLnNvdXJjZT1yO3ZhciBkPWMudHJ5Q2F0Y2gobikuYXBwbHkodGhpcyxhLmNvbmNhdChoKSk7ZD09PWwuZXJyb3JPYmplY3QmJnAuZXJyb3IobC5lcnJvck9iamVjdC5lKX10LmFkZChwLnN1YnNjcmliZShvKSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1lLnZhbHVlLHI9ZS5zdWJqZWN0O3IubmV4dCh0KSxyLmNvbXBsZXRlKCl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmVycixyPWUuc3ViamVjdDtyLmVycm9yKHQpfXZhciBvPVN5c3RlbS5nbG9iYWwsbj1vLmRlZmluZTtvLmRlZmluZT12b2lkIDA7dmFyIGE9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LHU9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvdHJ5Q2F0Y2hcIiksbD1yZXF1aXJlKFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIpLGI9cmVxdWlyZShcInJ4anMvQXN5bmNTdWJqZWN0XCIpLHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpKXtlLmNhbGwodGhpcyksdGhpcy5jYWxsYmFja0Z1bmM9dCx0aGlzLnNlbGVjdG9yPXIsdGhpcy5hcmdzPXMsdGhpcy5zY2hlZHVsZXI9aX1yZXR1cm4gYSh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGUscixzKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9dm9pZCAwKSxmdW5jdGlvbigpe2Zvcih2YXIgaT1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKylpW28tMF09YXJndW1lbnRzW29dO3JldHVybiBuZXcgdChlLHIsaSxzKX19LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jYWxsYmFja0Z1bmMscz10aGlzLmFyZ3MsaT10aGlzLnNjaGVkdWxlcixvPXRoaXMuc3ViamVjdDtpZihpKXJldHVybiBpLnNjaGVkdWxlKHIsMCx7c291cmNlOnRoaXMsc3Vic2NyaWJlcjplfSk7aWYoIW8pe289dGhpcy5zdWJqZWN0PW5ldyBiLkFzeW5jU3ViamVjdDt2YXIgbj1mdW5jdGlvbiB1KCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdC0wXT1hcmd1bWVudHNbdF07dmFyIHI9dS5zb3VyY2Uscz1yLnNlbGVjdG9yLGk9ci5zdWJqZWN0LG89ZS5zaGlmdCgpO2lmKG8paS5lcnJvcihvKTtlbHNlIGlmKHMpe3ZhciBuPWMudHJ5Q2F0Y2gocykuYXBwbHkodGhpcyxlKTtuPT09bC5lcnJvck9iamVjdD9pLmVycm9yKGwuZXJyb3JPYmplY3QuZSk6KGkubmV4dChuKSxpLmNvbXBsZXRlKCkpfWVsc2UgaS5uZXh0KDE9PT1lLmxlbmd0aD9lWzBdOmUpLGkuY29tcGxldGUoKX07bi5zb3VyY2U9dGhpczt2YXIgYT1jLnRyeUNhdGNoKHQpLmFwcGx5KHRoaXMscy5jb25jYXQobikpO2E9PT1sLmVycm9yT2JqZWN0JiZvLmVycm9yKGwuZXJyb3JPYmplY3QuZSl9cmV0dXJuIG8uc3Vic2NyaWJlKGUpfSx0fSh1Lk9ic2VydmFibGUpO3JldHVybiBlLkJvdW5kTm9kZUNhbGxiYWNrT2JzZXJ2YWJsZT1wLG8uZGVmaW5lPW4sdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzU2NoZWR1bGVyXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuc2NoZWR1bGV9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3JldHVybiBzLmRlZmluZT12b2lkIDAsZS5pc1NjaGVkdWxlcj1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL1NjYWxhck9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyksdGhpcy52YWx1ZT10LHRoaXMuc2NoZWR1bGVyPXIsdGhpcy5faXNTY2FsYXI9ITAsciYmKHRoaXMuX2lzU2NhbGFyPSExKX1yZXR1cm4gaSh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGUscil7cmV0dXJuIG5ldyB0KGUscil9LHQuZGlzcGF0Y2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5kb25lLHI9ZS52YWx1ZSxzPWUuc3Vic2NyaWJlcjtyZXR1cm4gdD92b2lkIHMuY29tcGxldGUoKToocy5uZXh0KHIpLHZvaWQocy5pc1Vuc3Vic2NyaWJlZHx8KGUuZG9uZT0hMCx0aGlzLnNjaGVkdWxlKGUpKSkpfSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciByPXRoaXMudmFsdWUscz10aGlzLnNjaGVkdWxlcjtyZXR1cm4gcz9zLnNjaGVkdWxlKHQuZGlzcGF0Y2gsMCx7ZG9uZTohMSx2YWx1ZTpyLHN1YnNjcmliZXI6ZX0pOihlLm5leHQociksdm9pZChlLmlzVW5zdWJzY3JpYmVkfHxlLmNvbXBsZXRlKCkpKX0sdH0oby5PYnNlcnZhYmxlKTtyZXR1cm4gZS5TY2FsYXJPYnNlcnZhYmxlPW4sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzKSx0aGlzLnNjaGVkdWxlcj10fXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic2NyaWJlcjt0LmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5zY2hlZHVsZXI7cmV0dXJuIHI/ci5zY2hlZHVsZSh0LmRpc3BhdGNoLDAse3N1YnNjcmliZXI6ZX0pOnZvaWQgZS5jb21wbGV0ZSgpfSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLkVtcHR5T2JzZXJ2YWJsZT1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9LHQucHJvdG90eXBlLm5vdGlmeUVycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0fShvLlN1YnNjcmliZXIpO3JldHVybiBlLk91dGVyU3Vic2NyaWJlcj1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzUHJvbWlzZVwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLnN1YnNjcmliZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS50aGVufXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtyZXR1cm4gcy5kZWZpbmU9dm9pZCAwLGUuaXNQcm9taXNlPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiLFtcInJ4anMvdXRpbC9yb290XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3V0aWwvcm9vdFwiKSxvPWkucm9vdC5TeW1ib2w7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgbylvLml0ZXJhdG9yP2UuJCRpdGVyYXRvcj1vLml0ZXJhdG9yOlwiZnVuY3Rpb25cIj09dHlwZW9mIG9bXCJmb3JcIl0mJihlLiQkaXRlcmF0b3I9b1tcImZvclwiXShcIml0ZXJhdG9yXCIpKTtlbHNlIGlmKGkucm9vdC5TZXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG5ldyBpLnJvb3QuU2V0KVtcIkBAaXRlcmF0b3JcIl0pZS4kJGl0ZXJhdG9yPVwiQEBpdGVyYXRvclwiO2Vsc2UgaWYoaS5yb290Lk1hcClmb3IodmFyIG49T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaS5yb290Lk1hcC5wcm90b3R5cGUpLGE9MDthPG4ubGVuZ3RoOysrYSl7dmFyIHU9blthXTtpZihcImVudHJpZXNcIiE9PXUmJlwic2l6ZVwiIT09dSYmaS5yb290Lk1hcC5wcm90b3R5cGVbdV09PT1pLnJvb3QuTWFwLnByb3RvdHlwZS5lbnRyaWVzKXtlLiQkaXRlcmF0b3I9dTticmVha319ZWxzZSBlLiQkaXRlcmF0b3I9XCJAQGl0ZXJhdG9yXCI7cmV0dXJuIHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9Jbm5lclN1YnNjcmliZXJcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzKSx0aGlzLnBhcmVudD10LHRoaXMub3V0ZXJWYWx1ZT1yLHRoaXMub3V0ZXJJbmRleD1zLHRoaXMuaW5kZXg9MH1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Lm5vdGlmeU5leHQodGhpcy5vdXRlclZhbHVlLGUsdGhpcy5vdXRlckluZGV4LHRoaXMuaW5kZXgrKyx0aGlzKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMucGFyZW50Lm5vdGlmeUVycm9yKGUsdGhpcyksdGhpcy51bnN1YnNjcmliZSgpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLnBhcmVudC5ub3RpZnlDb21wbGV0ZSh0aGlzKSx0aGlzLnVuc3Vic2NyaWJlKCl9LHR9KG8uU3Vic2NyaWJlcik7cmV0dXJuIGUuSW5uZXJTdWJzY3JpYmVyPW4sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL21lcmdlQWxsXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSx0aGlzLmxpZnQobmV3IHUoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtlLm1lcmdlQWxsPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY29uY3VycmVudD1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMuY29uY3VycmVudCkpfSxlfSgpO2UuTWVyZ2VBbGxPcGVyYXRvcj11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmNvbmN1cnJlbnQ9cix0aGlzLmhhc0NvbXBsZXRlZD0hMSx0aGlzLmJ1ZmZlcj1bXSx0aGlzLmFjdGl2ZT0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5hY3RpdmU8dGhpcy5jb25jdXJyZW50Pyh0aGlzLmFjdGl2ZSsrLHRoaXMuYWRkKGEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlKSkpOnRoaXMuYnVmZmVyLnB1c2goZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkPSEwLDA9PT10aGlzLmFjdGl2ZSYmMD09PXRoaXMuYnVmZmVyLmxlbmd0aCYmdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJ1ZmZlcjt0aGlzLnJlbW92ZShlKSx0aGlzLmFjdGl2ZS0tLHQubGVuZ3RoPjA/dGhpcy5fbmV4dCh0LnNoaWZ0KCkpOjA9PT10aGlzLmFjdGl2ZSYmdGhpcy5oYXNDb21wbGV0ZWQmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBlLk1lcmdlQWxsU3Vic2NyaWJlcj1jLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0RlZmVyT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxhPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7ZS5jYWxsKHRoaXMpLHRoaXMub2JzZXJ2YWJsZUZhY3Rvcnk9dH1yZXR1cm4gaSh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IGMoZSx0aGlzLm9ic2VydmFibGVGYWN0b3J5KX0sdH0oby5PYnNlcnZhYmxlKTtlLkRlZmVyT2JzZXJ2YWJsZT11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmZhY3Rvcnk9cix0aGlzLnRyeURlZmVyKCl9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS50cnlEZWZlcj1mdW5jdGlvbigpe3RyeXt0aGlzLl9jYWxsRmFjdG9yeSgpfWNhdGNoKGUpe3RoaXMuX2Vycm9yKGUpfX0sdC5wcm90b3R5cGUuX2NhbGxGYWN0b3J5PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5mYWN0b3J5KCk7ZSYmdGhpcy5hZGQobi5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUpKX0sdH0oYS5PdXRlclN1YnNjcmliZXIpO3JldHVybiByLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9lbXB0eVwiLFtcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIik7cmV0dXJuIGUuZW1wdHk9aS5FbXB0eU9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0ZvcmtKb2luT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL2lzQXJyYXlcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiLFwicnhqcy9PdXRlclN1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9pc0FycmF5XCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxjPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyksdGhpcy5zb3VyY2VzPXQsdGhpcy5yZXN1bHRTZWxlY3Rvcj1yfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspZVtyLTBdPWFyZ3VtZW50c1tyXTtpZihudWxsPT09ZXx8MD09PWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG5ldyBuLkVtcHR5T2JzZXJ2YWJsZTt2YXIgcz1udWxsO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbZS5sZW5ndGgtMV0mJihzPWUucG9wKCkpLDE9PT1lLmxlbmd0aCYmYS5pc0FycmF5KGVbMF0pJiYoZT1lWzBdKSwwPT09ZS5sZW5ndGg/bmV3IG4uRW1wdHlPYnNlcnZhYmxlOm5ldyB0KGUscyl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBiKGUsdGhpcy5zb3VyY2VzLHRoaXMucmVzdWx0U2VsZWN0b3IpfSx0fShvLk9ic2VydmFibGUpO2UuRm9ya0pvaW5PYnNlcnZhYmxlPWw7dmFyIGI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5zb3VyY2VzPXIsdGhpcy5yZXN1bHRTZWxlY3Rvcj1zLHRoaXMuY29tcGxldGVkPTAsdGhpcy5oYXZlVmFsdWVzPTA7dmFyIGk9ci5sZW5ndGg7dGhpcy50b3RhbD1pLHRoaXMudmFsdWVzPW5ldyBBcnJheShpKTtmb3IodmFyIG89MDtpPm87bysrKXt2YXIgbj1yW29dLGE9dS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLG4sbnVsbCxvKTthJiYoYS5vdXRlckluZGV4PW8sdGhpcy5hZGQoYSkpfX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLnZhbHVlc1tyXT10LGkuX2hhc1ZhbHVlfHwoaS5faGFzVmFsdWU9ITAsdGhpcy5oYXZlVmFsdWVzKyspfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uLHI9dGhpcyxzPXIuaGF2ZVZhbHVlcyxpPXIucmVzdWx0U2VsZWN0b3Isbz1yLnZhbHVlcyxuPW8ubGVuZ3RoO2lmKCFlLl9oYXNWYWx1ZSlyZXR1cm4gdm9pZCB0LmNvbXBsZXRlKCk7aWYodGhpcy5jb21wbGV0ZWQrKyx0aGlzLmNvbXBsZXRlZD09PW4pe2lmKHM9PT1uKXt2YXIgYT1pP2kuYXBwbHkodGhpcyxvKTpvO3QubmV4dChhKX10LmNvbXBsZXRlKCl9fSx0fShjLk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL1Byb21pc2VPYnNlcnZhYmxlXCIsW1wicnhqcy91dGlsL3Jvb3RcIixcInJ4anMvT2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1lLnZhbHVlLHI9ZS5zdWJzY3JpYmVyO3IuaXNVbnN1YnNjcmliZWR8fChyLm5leHQodCksci5jb21wbGV0ZSgpKX1mdW5jdGlvbiBzKGUpe3ZhciB0PWUuZXJyLHI9ZS5zdWJzY3JpYmVyO3IuaXNVbnN1YnNjcmliZWR8fHIuZXJyb3IodCl9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sYT1yZXF1aXJlKFwicnhqcy91dGlsL3Jvb3RcIiksdT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZvaWQgMD09PXImJihyPW51bGwpLGUuY2FsbCh0aGlzKSx0aGlzLnByb21pc2U9dCx0aGlzLnNjaGVkdWxlcj1yfXJldHVybiBuKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9bnVsbCksbmV3IHQoZSxyKX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLGk9dGhpcy5wcm9taXNlLG89dGhpcy5zY2hlZHVsZXI7aWYobnVsbD09byl0aGlzLl9pc1NjYWxhcj9lLmlzVW5zdWJzY3JpYmVkfHwoZS5uZXh0KHRoaXMudmFsdWUpLGUuY29tcGxldGUoKSk6aS50aGVuKGZ1bmN0aW9uKHIpe3QudmFsdWU9cix0Ll9pc1NjYWxhcj0hMCxlLmlzVW5zdWJzY3JpYmVkfHwoZS5uZXh0KHIpLGUuY29tcGxldGUoKSl9LGZ1bmN0aW9uKHQpe2UuaXNVbnN1YnNjcmliZWR8fGUuZXJyb3IodCl9KS50aGVuKG51bGwsZnVuY3Rpb24oZSl7YS5yb290LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlfSl9KTtlbHNlIGlmKHRoaXMuX2lzU2NhbGFyKXtpZighZS5pc1Vuc3Vic2NyaWJlZClyZXR1cm4gby5zY2hlZHVsZShyLDAse3ZhbHVlOnRoaXMudmFsdWUsc3Vic2NyaWJlcjplfSl9ZWxzZSBpLnRoZW4oZnVuY3Rpb24ocyl7dC52YWx1ZT1zLHQuX2lzU2NhbGFyPSEwLGUuaXNVbnN1YnNjcmliZWR8fGUuYWRkKG8uc2NoZWR1bGUociwwLHt2YWx1ZTpzLHN1YnNjcmliZXI6ZX0pKX0sZnVuY3Rpb24odCl7ZS5pc1Vuc3Vic2NyaWJlZHx8ZS5hZGQoby5zY2hlZHVsZShzLDAse2Vycjp0LHN1YnNjcmliZXI6ZX0pKX0pLnRoZW4obnVsbCxmdW5jdGlvbihlKXthLnJvb3Quc2V0VGltZW91dChmdW5jdGlvbigpe3Rocm93IGV9KX0pfSx0fSh1Lk9ic2VydmFibGUpO3JldHVybiBlLlByb21pc2VPYnNlcnZhYmxlPWMsaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvSXRlcmF0b3JPYnNlcnZhYmxlXCIsW1wicnhqcy91dGlsL3Jvb3RcIixcInJ4anMvdXRpbC9pc09iamVjdFwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvdXRpbC9pc0Z1bmN0aW9uXCIsXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PWVbZC4kJGl0ZXJhdG9yXTtpZighdCYmXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIG5ldyB4KGUpO2lmKCF0JiZ2b2lkIDAhPT1lLmxlbmd0aClyZXR1cm4gbmV3IHkoZSk7aWYoIXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBpcyBub3QgaXRlcmFibGVcIik7cmV0dXJuIGVbZC4kJGl0ZXJhdG9yXSgpfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9K2UubGVuZ3RoO3JldHVybiBpc05hTih0KT8wOjAhPT10JiZpKHQpPyh0PW8odCkqTWF0aC5mbG9vcihNYXRoLmFicyh0KSksMD49dD8wOnQ+aj9qOnQpOnR9ZnVuY3Rpb24gaShlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmYy5yb290LmlzRmluaXRlKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9K2U7cmV0dXJuIDA9PT10P3Q6aXNOYU4odCk/dDowPnQ/LTE6MX12YXIgbj1TeXN0ZW0uZ2xvYmFsLGE9bi5kZWZpbmU7bi5kZWZpbmU9dm9pZCAwO3ZhciB1PXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvcm9vdFwiKSxsPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNPYmplY3RcIiksYj1yZXF1aXJlKFwicnhqcy91dGlsL3RyeUNhdGNoXCIpLHA9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxoPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNGdW5jdGlvblwiKSxkPXJlcXVpcmUoXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiKSxmPXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscyxpLG8pe2lmKGUuY2FsbCh0aGlzKSxudWxsPT10KXRocm93IG5ldyBFcnJvcihcIml0ZXJhdG9yIGNhbm5vdCBiZSBudWxsLlwiKTtpZihsLmlzT2JqZWN0KHMpKXRoaXMudGhpc0FyZz1zLHRoaXMuc2NoZWR1bGVyPWk7ZWxzZSBpZihoLmlzRnVuY3Rpb24ocykpdGhpcy5wcm9qZWN0PXMsdGhpcy50aGlzQXJnPWksdGhpcy5zY2hlZHVsZXI9bztlbHNlIGlmKG51bGwhPXMpdGhyb3cgbmV3IEVycm9yKFwiV2hlbiBwcm92aWRlZCwgYHByb2plY3RgIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7dGhpcy5pdGVyYXRvcj1yKHQpfXJldHVybiB1KHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyLHMsaSl7cmV0dXJuIG5ldyB0KGUscixzLGkpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXgscj1lLmhhc0Vycm9yLHM9ZS50aGlzQXJnLGk9ZS5wcm9qZWN0LG89ZS5pdGVyYXRvcixuPWUuc3Vic2NyaWJlcjtpZihyKXJldHVybiB2b2lkIG4uZXJyb3IoZS5lcnJvcik7dmFyIGE9by5uZXh0KCk7cmV0dXJuIGEuZG9uZT92b2lkIG4uY29tcGxldGUoKTooaT8oYT1iLnRyeUNhdGNoKGkpLmNhbGwocyxhLnZhbHVlLHQpLGE9PT1mLmVycm9yT2JqZWN0PyhlLmVycm9yPWYuZXJyb3JPYmplY3QuZSxlLmhhc0Vycm9yPSEwKToobi5uZXh0KGEpLGUuaW5kZXg9dCsxKSk6KG4ubmV4dChhLnZhbHVlKSxlLmluZGV4PXQrMSksdm9pZChuLmlzVW5zdWJzY3JpYmVkfHx0aGlzLnNjaGVkdWxlKGUpKSl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHI9MCxzPXRoaXMsaT1zLml0ZXJhdG9yLG89cy5wcm9qZWN0LG49cy50aGlzQXJnLGE9cy5zY2hlZHVsZXI7aWYoYSlyZXR1cm4gYS5zY2hlZHVsZSh0LmRpc3BhdGNoLDAse2luZGV4OnIsdGhpc0FyZzpuLHByb2plY3Q6byxpdGVyYXRvcjppLHN1YnNjcmliZXI6ZX0pO2Zvcig7Oyl7dmFyIHU9aS5uZXh0KCk7aWYodS5kb25lKXtlLmNvbXBsZXRlKCk7YnJlYWt9aWYobyl7aWYodT1iLnRyeUNhdGNoKG8pLmNhbGwobix1LnZhbHVlLHIrKyksdT09PWYuZXJyb3JPYmplY3Qpe2UuZXJyb3IoZi5lcnJvck9iamVjdC5lKTticmVha31lLm5leHQodSl9ZWxzZSBlLm5leHQodS52YWx1ZSk7aWYoZS5pc1Vuc3Vic2NyaWJlZClicmVha319LHR9KHAuT2JzZXJ2YWJsZSk7ZS5JdGVyYXRvck9ic2VydmFibGU9djt2YXIgeD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3ZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PXImJihyPWUubGVuZ3RoKSx0aGlzLnN0cj1lLHRoaXMuaWR4PXQsdGhpcy5sZW49cn1yZXR1cm4gZS5wcm90b3R5cGVbZC4kJGl0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWR4PHRoaXMubGVuP3tkb25lOiExLHZhbHVlOnRoaXMuc3RyLmNoYXJBdCh0aGlzLmlkeCsrKX06e2RvbmU6ITAsdmFsdWU6dm9pZCAwfX0sZX0oKSx5PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ciYmKHI9cyhlKSksdGhpcy5hcnI9ZSx0aGlzLmlkeD10LHRoaXMubGVuPXJ9cmV0dXJuIGUucHJvdG90eXBlW2QuJCRpdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlkeDx0aGlzLmxlbj97ZG9uZTohMSx2YWx1ZTp0aGlzLmFyclt0aGlzLmlkeCsrXX06e2RvbmU6ITAsdmFsdWU6dm9pZCAwfX0sZX0oKSxqPU1hdGgucG93KDIsNTMpLTE7cmV0dXJuIG4uZGVmaW5lPWEsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL1NjYWxhck9ic2VydmFibGVcIiksYT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZVwiKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7ZS5jYWxsKHRoaXMpLHRoaXMuYXJyYXlMaWtlPXQsdGhpcy5zY2hlZHVsZXI9aSxyfHxpfHwxIT09dC5sZW5ndGh8fCh0aGlzLl9pc1NjYWxhcj0hMCx0aGlzLnZhbHVlPXRbMF0pLHImJih0aGlzLm1hcEZuPXIuYmluZChzKSl9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIscyxpKXt2YXIgbz1lLmxlbmd0aDtyZXR1cm4gMD09PW8/bmV3IGEuRW1wdHlPYnNlcnZhYmxlOjEhPT1vfHxyP25ldyB0KGUscixzLGkpOm5ldyBuLlNjYWxhck9ic2VydmFibGUoZVswXSxpKX0sdC5kaXNwYXRjaD1mdW5jdGlvbihlKXt2YXIgdD1lLmFycmF5TGlrZSxyPWUuaW5kZXgscz1lLmxlbmd0aCxpPWUubWFwRm4sbz1lLnN1YnNjcmliZXI7aWYoIW8uaXNVbnN1YnNjcmliZWQpe2lmKHI+PXMpcmV0dXJuIHZvaWQgby5jb21wbGV0ZSgpO3ZhciBuPWk/aSh0W3JdLHIpOnRbcl07by5uZXh0KG4pLGUuaW5kZXg9cisxLHRoaXMuc2NoZWR1bGUoZSl9fSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciByPTAscz10aGlzLGk9cy5hcnJheUxpa2Usbz1zLm1hcEZuLG49cy5zY2hlZHVsZXIsYT1pLmxlbmd0aDtpZihuKXJldHVybiBuLnNjaGVkdWxlKHQuZGlzcGF0Y2gsMCx7YXJyYXlMaWtlOmksaW5kZXg6cixsZW5ndGg6YSxtYXBGbjpvLHN1YnNjcmliZXI6ZX0pO2Zvcih2YXIgdT0wO2E+dSYmIWUuaXNVbnN1YnNjcmliZWQ7dSsrKXt2YXIgYz1vP28oaVt1XSx1KTppW3VdO2UubmV4dChjKX1lLmNvbXBsZXRlKCl9LHR9KG8uT2JzZXJ2YWJsZSk7cmV0dXJuIGUuQXJyYXlMaWtlT2JzZXJ2YWJsZT11LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9Ob3RpZmljYXRpb25cIixbXCJyeGpzL09ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5raW5kPWUsdGhpcy52YWx1ZT10LHRoaXMuZXhjZXB0aW9uPXIsdGhpcy5oYXNWYWx1ZT1cIk5cIj09PWV9cmV0dXJuIGUucHJvdG90eXBlLm9ic2VydmU9ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMua2luZCl7Y2FzZVwiTlwiOnJldHVybiBlLm5leHQmJmUubmV4dCh0aGlzLnZhbHVlKTtjYXNlXCJFXCI6cmV0dXJuIGUuZXJyb3ImJmUuZXJyb3IodGhpcy5leGNlcHRpb24pO2Nhc2VcIkNcIjpyZXR1cm4gZS5jb21wbGV0ZSYmZS5jb21wbGV0ZSgpfX0sZS5wcm90b3R5cGVbXCJkb1wiXT1mdW5jdGlvbihlLHQscil7dmFyIHM9dGhpcy5raW5kO3N3aXRjaChzKXtjYXNlXCJOXCI6cmV0dXJuIGUmJmUodGhpcy52YWx1ZSk7Y2FzZVwiRVwiOnJldHVybiB0JiZ0KHRoaXMuZXhjZXB0aW9uKTtjYXNlXCJDXCI6cmV0dXJuIHImJnIoKX19LGUucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihlLHQscil7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUubmV4dD90aGlzLm9ic2VydmUoZSk6dGhpc1tcImRvXCJdKGUsdCxyKX0sZS5wcm90b3R5cGUudG9PYnNlcnZhYmxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5raW5kO3N3aXRjaChlKXtjYXNlXCJOXCI6cmV0dXJuIGkuT2JzZXJ2YWJsZS5vZih0aGlzLnZhbHVlKTtjYXNlXCJFXCI6cmV0dXJuIGkuT2JzZXJ2YWJsZVtcInRocm93XCJdKHRoaXMuZXhjZXB0aW9uKTtjYXNlXCJDXCI6cmV0dXJuIGkuT2JzZXJ2YWJsZS5lbXB0eSgpfX0sZS5jcmVhdGVOZXh0PWZ1bmN0aW9uKHQpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB0P25ldyBlKFwiTlwiLHQpOnRoaXMudW5kZWZpbmVkVmFsdWVOb3RpZmljYXRpb259LGUuY3JlYXRlRXJyb3I9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKFwiRVwiLHZvaWQgMCx0KX0sZS5jcmVhdGVDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbXBsZXRlTm90aWZpY2F0aW9ufSxlLmNvbXBsZXRlTm90aWZpY2F0aW9uPW5ldyBlKFwiQ1wiKSxlLnVuZGVmaW5lZFZhbHVlTm90aWZpY2F0aW9uPW5ldyBlKFwiTlwiLHZvaWQgMCksZX0oKTtyZXR1cm4gZS5Ob3RpZmljYXRpb249byxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRPYnNlcnZhYmxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL3V0aWwvdHJ5Q2F0Y2hcIixcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiLFwicnhqcy9TdWJzY3JpcHRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuISFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmFkZExpc3RlbmVyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlbW92ZUxpc3RlbmVyfWZ1bmN0aW9uIHMoZSl7cmV0dXJuISFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9uJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLm9mZn1mdW5jdGlvbiBpKGUpe3JldHVybiEhZSYmXCJbb2JqZWN0IE5vZGVMaXN0XVwiPT09ZS50b1N0cmluZygpfWZ1bmN0aW9uIG8oZSl7cmV0dXJuISFlJiZcIltvYmplY3QgSFRNTENvbGxlY3Rpb25dXCI9PT1lLnRvU3RyaW5nKCl9ZnVuY3Rpb24gbihlKXtyZXR1cm4hIWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuYWRkRXZlbnRMaXN0ZW5lciYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5yZW1vdmVFdmVudExpc3RlbmVyfXZhciBhPVN5c3RlbS5nbG9iYWwsdT1hLmRlZmluZTthLmRlZmluZT12b2lkIDA7dmFyIGM9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGw9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxiPXJlcXVpcmUoXCJyeGpzL3V0aWwvdHJ5Q2F0Y2hcIikscD1yZXF1aXJlKFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIpLGg9cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMpLHRoaXMuc291cmNlT2JqPXQsdGhpcy5ldmVudE5hbWU9cix0aGlzLnNlbGVjdG9yPXN9cmV0dXJuIGModCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIscyl7cmV0dXJuIG5ldyB0KGUscixzKX0sdC5zZXR1cFN1YnNjcmlwdGlvbj1mdW5jdGlvbihlLGEsdSxjKXt2YXIgbDtpZihpKGUpfHxvKGUpKWZvcih2YXIgYj0wLHA9ZS5sZW5ndGg7cD5iO2IrKyl0LnNldHVwU3Vic2NyaXB0aW9uKGVbYl0sYSx1LGMpO2Vsc2UgaWYobihlKSl7dmFyIGQ9ZTtlLmFkZEV2ZW50TGlzdGVuZXIoYSx1KSxsPWZ1bmN0aW9uKCl7cmV0dXJuIGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLHUpfX1lbHNlIGlmKHMoZSkpe3ZhciBmPWU7ZS5vbihhLHUpLGw9ZnVuY3Rpb24oKXtyZXR1cm4gZi5vZmYoYSx1KX19ZWxzZSBpZihyKGUpKXt2YXIgdj1lO2UuYWRkTGlzdGVuZXIoYSx1KSxsPWZ1bmN0aW9uKCl7cmV0dXJuIHYucmVtb3ZlTGlzdGVuZXIoYSx1KX19Yy5hZGQobmV3IGguU3Vic2NyaXB0aW9uKGwpKX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgcj10aGlzLnNvdXJjZU9iaixzPXRoaXMuZXZlbnROYW1lLGk9dGhpcy5zZWxlY3RvcixvPWk/ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10scj0wO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTBdPWFyZ3VtZW50c1tyXTt2YXIgcz1iLnRyeUNhdGNoKGkpLmFwcGx5KHZvaWQgMCx0KTtzPT09cC5lcnJvck9iamVjdD9lLmVycm9yKHAuZXJyb3JPYmplY3QuZSk6ZS5uZXh0KHMpfTpmdW5jdGlvbih0KXtyZXR1cm4gZS5uZXh0KHQpfTt0LnNldHVwU3Vic2NyaXB0aW9uKHIscyxvLGUpfSx0fShsLk9ic2VydmFibGUpO3JldHVybiBlLkZyb21FdmVudE9ic2VydmFibGU9ZCxhLmRlZmluZT11LHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9TdWJzY3JpcHRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmlwdGlvblwiKSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzKSx0aGlzLmFkZEhhbmRsZXI9dCx0aGlzLnJlbW92ZUhhbmRsZXI9cix0aGlzLnNlbGVjdG9yPXN9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIscyl7cmV0dXJuIG5ldyB0KGUscixzKX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcy5yZW1vdmVIYW5kbGVyLHM9dGhpcy5zZWxlY3Rvcj9mdW5jdGlvbigpe2Zvcih2YXIgcj1bXSxzPTA7czxhcmd1bWVudHMubGVuZ3RoO3MrKylyW3MtMF09YXJndW1lbnRzW3NdO3QuX2NhbGxTZWxlY3RvcihlLHIpfTpmdW5jdGlvbih0KXtlLm5leHQodCl9O3RoaXMuX2NhbGxBZGRIYW5kbGVyKHMsZSksZS5hZGQobmV3IG4uU3Vic2NyaXB0aW9uKGZ1bmN0aW9uKCl7cihzKX0pKX0sdC5wcm90b3R5cGUuX2NhbGxTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe3RyeXt2YXIgcj10aGlzLnNlbGVjdG9yLmFwcGx5KHRoaXMsdCk7ZS5uZXh0KHIpfWNhdGNoKHMpe2UuZXJyb3Iocyl9fSx0LnByb3RvdHlwZS5fY2FsbEFkZEhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt0cnl7dGhpcy5hZGRIYW5kbGVyKGUpfWNhdGNoKHIpe3QuZXJyb3Iocil9fSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLkZyb21FdmVudFBhdHRlcm5PYnNlcnZhYmxlPWEsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZnJvbVByb21pc2VcIixbXCJyeGpzL29ic2VydmFibGUvUHJvbWlzZU9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Qcm9taXNlT2JzZXJ2YWJsZVwiKTtyZXR1cm4gZS5mcm9tUHJvbWlzZT1pLlByb21pc2VPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9HZW5lcmF0ZU9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiKSxhPWZ1bmN0aW9uKGUpe3JldHVybiBlfSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSxvKXtlLmNhbGwodGhpcyksdGhpcy5pbml0aWFsU3RhdGU9dCx0aGlzLmNvbmRpdGlvbj1yLHRoaXMuaXRlcmF0ZT1zLHRoaXMucmVzdWx0U2VsZWN0b3I9aSx0aGlzLnNjaGVkdWxlcj1vfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyLHMsaSxvKXtyZXR1cm4gMT09YXJndW1lbnRzLmxlbmd0aD9uZXcgdChlLmluaXRpYWxTdGF0ZSxlLmNvbmRpdGlvbixlLml0ZXJhdGUsZS5yZXN1bHRTZWxlY3Rvcnx8YSxlLnNjaGVkdWxlcik6dm9pZCAwPT09aXx8bi5pc1NjaGVkdWxlcihpKT9uZXcgdChlLHIscyxhLGkpOm5ldyB0KGUscixzLGksbyl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5pbml0aWFsU3RhdGU7aWYodGhpcy5zY2hlZHVsZXIpcmV0dXJuIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHQuZGlzcGF0Y2gsMCx7c3Vic2NyaWJlcjplLGl0ZXJhdGU6dGhpcy5pdGVyYXRlLGNvbmRpdGlvbjp0aGlzLmNvbmRpdGlvbixyZXN1bHRTZWxlY3Rvcjp0aGlzLnJlc3VsdFNlbGVjdG9yLHN0YXRlOnJ9KTtmb3IodmFyIHM9dGhpcyxpPXMuY29uZGl0aW9uLG89cy5yZXN1bHRTZWxlY3RvcixuPXMuaXRlcmF0ZTs7KXtpZihpKXt2YXIgYT12b2lkIDA7dHJ5e2E9aShyKX1jYXRjaCh1KXtyZXR1cm4gdm9pZCBlLmVycm9yKHUpfWlmKCFhKXtlLmNvbXBsZXRlKCk7YnJlYWt9fXZhciBjPXZvaWQgMDt0cnl7Yz1vKHIpfWNhdGNoKHUpe3JldHVybiB2b2lkIGUuZXJyb3IodSl9aWYoZS5uZXh0KGMpLGUuaXNVbnN1YnNjcmliZWQpYnJlYWs7dHJ5e3I9bihyKX1jYXRjaCh1KXtyZXR1cm4gdm9pZCBlLmVycm9yKHUpfX19LHQuZGlzcGF0Y2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5jb25kaXRpb247aWYoIXQuaXNVbnN1YnNjcmliZWQpe2lmKGUubmVlZEl0ZXJhdGUpdHJ5e2Uuc3RhdGU9ZS5pdGVyYXRlKGUuc3RhdGUpfWNhdGNoKHMpe3JldHVybiB2b2lkIHQuZXJyb3Iocyl9ZWxzZSBlLm5lZWRJdGVyYXRlPSEwO2lmKHIpe3ZhciBpPXZvaWQgMDt0cnl7aT1yKGUuc3RhdGUpfWNhdGNoKHMpe3JldHVybiB2b2lkIHQuZXJyb3Iocyl9aWYoIWkpcmV0dXJuIHZvaWQgdC5jb21wbGV0ZSgpO2lmKHQuaXNVbnN1YnNjcmliZWQpcmV0dXJufXZhciBvO3RyeXtvPWUucmVzdWx0U2VsZWN0b3IoZS5zdGF0ZSl9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgdC5lcnJvcihzKX1pZighdC5pc1Vuc3Vic2NyaWJlZCYmKHQubmV4dChvKSwhdC5pc1Vuc3Vic2NyaWJlZCkpcmV0dXJuIHRoaXMuc2NoZWR1bGUoZSl9fSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLkdlbmVyYXRlT2JzZXJ2YWJsZT11LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0lmT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxhPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzKSx0aGlzLmNvbmRpdGlvbj10LHRoaXMudGhlblNvdXJjZT1yLHRoaXMuZWxzZVNvdXJjZT1zfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyLHMpe3JldHVybiBuZXcgdChlLHIscyl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQuY29uZGl0aW9uLHM9dC50aGVuU291cmNlLGk9dC5lbHNlU291cmNlO3JldHVybiBuZXcgYyhlLHIscyxpKX0sdH0oby5PYnNlcnZhYmxlKTtlLklmT2JzZXJ2YWJsZT11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7ZS5jYWxsKHRoaXMsdCksdGhpcy5jb25kaXRpb249cix0aGlzLnRoZW5Tb3VyY2U9cyx0aGlzLmVsc2VTb3VyY2U9aSx0aGlzLnRyeUlmKCl9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS50cnlJZj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxyPXQuY29uZGl0aW9uLHM9dC50aGVuU291cmNlLGk9dC5lbHNlU291cmNlO3RyeXtlPXIoKTt2YXIgbz1lP3M6aTtvP3RoaXMuYWRkKG4uc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxvKSk6dGhpcy5fY29tcGxldGUoKX1jYXRjaChhKXt0aGlzLl9lcnJvcihhKX19LHR9KGEuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvaXNOdW1lcmljXCIsW1wicnhqcy91dGlsL2lzQXJyYXlcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIW8uaXNBcnJheShlKSYmZS1wYXJzZUZsb2F0KGUpKzE+PTB9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIik7cmV0dXJuIGUuaXNOdW1lcmljPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb25cIixbXCJyeGpzL3V0aWwvcm9vdFwiLFwicnhqcy9TdWJzY3JpcHRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvdXRpbC9yb290XCIpLG49cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzKSx0aGlzLnNjaGVkdWxlcj10LHRoaXMud29yaz1yLHRoaXMucGVuZGluZz0hMX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLmV4ZWN1dGU9ZnVuY3Rpb24oKXtpZih0aGlzLmlzVW5zdWJzY3JpYmVkKXRoaXMuZXJyb3I9bmV3IEVycm9yKFwiZXhlY3V0aW5nIGEgY2FuY2VsbGVkIGFjdGlvblwiKTtlbHNlIHRyeXt0aGlzLndvcmsodGhpcy5zdGF0ZSl9Y2F0Y2goZSl7dGhpcy51bnN1YnNjcmliZSgpLHRoaXMuZXJyb3I9ZX19LHQucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHRoaXMuaXNVbnN1YnNjcmliZWQ/dGhpczp0aGlzLl9zY2hlZHVsZShlLHQpfSx0LnByb3RvdHlwZS5fc2NoZWR1bGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZvaWQgMD09PXQmJih0PTApLHRoaXMuc3RhdGU9ZSx0aGlzLnBlbmRpbmc9ITA7dmFyIHM9dGhpcy5pZDtyZXR1cm4gbnVsbCE9cyYmdGhpcy5kZWxheT09PXQ/dGhpczoodGhpcy5kZWxheT10LG51bGwhPXMmJih0aGlzLmlkPW51bGwsby5yb290LmNsZWFySW50ZXJ2YWwocykpLHRoaXMuaWQ9by5yb290LnNldEludGVydmFsKGZ1bmN0aW9uKCl7ci5wZW5kaW5nPSExO3ZhciBlPXIsdD1lLmlkLHM9ZS5zY2hlZHVsZXI7cy5hY3Rpb25zLnB1c2gocikscy5mbHVzaCgpLHIucGVuZGluZz09PSExJiZudWxsIT10JiYoci5pZD1udWxsLG8ucm9vdC5jbGVhckludGVydmFsKHQpKX0sdCksdGhpcyl9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMucGVuZGluZz0hMTt2YXIgZT10aGlzLHQ9ZS5pZCxyPWUuc2NoZWR1bGVyLHM9ci5hY3Rpb25zLGk9cy5pbmRleE9mKHRoaXMpO251bGwhPXQmJih0aGlzLmlkPW51bGwsby5yb290LmNsZWFySW50ZXJ2YWwodCkpLC0xIT09aSYmcy5zcGxpY2UoaSwxKSx0aGlzLndvcms9bnVsbCx0aGlzLnN0YXRlPW51bGwsdGhpcy5zY2hlZHVsZXI9bnVsbH0sdH0obi5TdWJzY3JpcHRpb24pO3JldHVybiBlLkZ1dHVyZUFjdGlvbj1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zY2hlZHVsZXIvUXVldWVBY3Rpb25cIixbXCJyeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL0Z1dHVyZUFjdGlvblwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl9zY2hlZHVsZT1mdW5jdGlvbih0LHIpe2lmKHZvaWQgMD09PXImJihyPTApLHI+MClyZXR1cm4gZS5wcm90b3R5cGUuX3NjaGVkdWxlLmNhbGwodGhpcyx0LHIpO3RoaXMuZGVsYXk9cix0aGlzLnN0YXRlPXQ7dmFyIHM9dGhpcy5zY2hlZHVsZXI7cmV0dXJuIHMuYWN0aW9ucy5wdXNoKHRoaXMpLHMuZmx1c2goKSx0aGlzfSx0fShvLkZ1dHVyZUFjdGlvbik7cmV0dXJuIGUuUXVldWVBY3Rpb249bixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbWVyZ2VcIixbXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL21lcmdlQWxsXCIsXCJyeGpzL3V0aWwvaXNTY2hlZHVsZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe1xuZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllW3QtMF09YXJndW1lbnRzW3RdO3JldHVybiBlLnVuc2hpZnQodGhpcykscy5hcHBseSh0aGlzLGUpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTt2YXIgcj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkscz1udWxsLGk9ZVtlLmxlbmd0aC0xXTtyZXR1cm4gdS5pc1NjaGVkdWxlcihpKT8ocz1lLnBvcCgpLGUubGVuZ3RoPjEmJlwibnVtYmVyXCI9PXR5cGVvZiBlW2UubGVuZ3RoLTFdJiYocj1lLnBvcCgpKSk6XCJudW1iZXJcIj09dHlwZW9mIGkmJihyPWUucG9wKCkpLDE9PT1lLmxlbmd0aD9lWzBdOm5ldyBuLkFycmF5T2JzZXJ2YWJsZShlLHMpLmxpZnQobmV3IGEuTWVyZ2VBbGxPcGVyYXRvcihyKSl9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiKSxhPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21lcmdlQWxsXCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiKTtyZXR1cm4gZS5tZXJnZT1yLGUubWVyZ2VTdGF0aWM9cyxpLmRlZmluZT1vLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvcmFjZVwiLFtcInJ4anMvdXRpbC9pc0FycmF5XCIsXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdC0wXT1hcmd1bWVudHNbdF07cmV0dXJuIDE9PT1lLmxlbmd0aCYmYS5pc0FycmF5KGVbMF0pJiYoZT1lWzBdKSxlLnVuc2hpZnQodGhpcykscy5hcHBseSh0aGlzLGUpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTtpZigxPT09ZS5sZW5ndGgpe2lmKCFhLmlzQXJyYXkoZVswXSkpcmV0dXJuIGVbMF07ZT1lWzBdfXJldHVybiBuZXcgdS5BcnJheU9ic2VydmFibGUoZSkubGlmdChuZXcgYil9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sYT1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIiksdT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiKSxjPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxsPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5yYWNlPXIsZS5yYWNlU3RhdGljPXM7dmFyIGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgcChlKSl9LGV9KCk7ZS5SYWNlT3BlcmF0b3I9Yjt2YXIgcD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzLHQpLHRoaXMuaGFzRmlyc3Q9ITEsdGhpcy5vYnNlcnZhYmxlcz1bXSx0aGlzLnN1YnNjcmlwdGlvbnM9W119cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLm9ic2VydmFibGVzLnB1c2goZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMub2JzZXJ2YWJsZXMsdD1lLmxlbmd0aDtpZigwPT09dCl0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7ZWxzZXtmb3IodmFyIHI9MDt0PnI7cisrKXt2YXIgcz1lW3JdLGk9bC5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHMscyxyKTt0aGlzLnN1YnNjcmlwdGlvbnMmJih0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChpKSx0aGlzLmFkZChpKSl9dGhpcy5vYnNlcnZhYmxlcz1udWxsfX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe2lmKCF0aGlzLmhhc0ZpcnN0KXt0aGlzLmhhc0ZpcnN0PSEwO2Zvcih2YXIgbz0wO288dGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aDtvKyspaWYobyE9PXIpe3ZhciBuPXRoaXMuc3Vic2NyaXB0aW9uc1tvXTtuLnVuc3Vic2NyaWJlKCksdGhpcy5yZW1vdmUobil9dGhpcy5zdWJzY3JpcHRpb25zPW51bGx9dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfSx0fShjLk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIGUuUmFjZVN1YnNjcmliZXI9cCxpLmRlZmluZT1vLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9ub29wXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXt9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3JldHVybiBzLmRlZmluZT12b2lkIDAsZS5ub29wPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvb2ZcIixbXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIpO3JldHVybiBlLm9mPWkuQXJyYXlPYnNlcnZhYmxlLm9mLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9vbkVycm9yUmVzdW1lTmV4dFwiLFtcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL2lzQXJyYXlcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTtyZXR1cm4gMT09PWUubGVuZ3RoJiZ1LmlzQXJyYXkoZVswXSkmJihlPWVbMF0pLHRoaXMubGlmdChuZXcgYihlKSl9ZnVuY3Rpb24gcygpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllW3QtMF09YXJndW1lbnRzW3RdO3ZhciByPW51bGw7cmV0dXJuIDE9PT1lLmxlbmd0aCYmdS5pc0FycmF5KGVbMF0pJiYoZT1lWzBdKSxyPWUuc2hpZnQoKSxuZXcgYS5Gcm9tT2JzZXJ2YWJsZShyLG51bGwpLmxpZnQobmV3IGIoZSkpfXZhciBpPVN5c3RlbS5nbG9iYWwsbz1pLmRlZmluZTtpLmRlZmluZT12b2lkIDA7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGE9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tT2JzZXJ2YWJsZVwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNBcnJheVwiKSxjPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxsPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5vbkVycm9yUmVzdW1lTmV4dD1yLGUub25FcnJvclJlc3VtZU5leHRTdGF0aWM9czt2YXIgYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5uZXh0U291cmNlcz1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgcChlLHRoaXMubmV4dFNvdXJjZXMpKX0sZX0oKSxwPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmRlc3RpbmF0aW9uPXQsdGhpcy5uZXh0U291cmNlcz1yfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLnN1YnNjcmliZVRvTmV4dFNvdXJjZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt0aGlzLnN1YnNjcmliZVRvTmV4dFNvdXJjZSgpfSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5zdWJzY3JpYmVUb05leHRTb3VyY2UoKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5zdWJzY3JpYmVUb05leHRTb3VyY2UoKX0sdC5wcm90b3R5cGUuc3Vic2NyaWJlVG9OZXh0U291cmNlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5uZXh0U291cmNlcy5zaGlmdCgpO2U/dGhpcy5hZGQobC5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUpKTp0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHR9KGMuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvUmFuZ2VPYnNlcnZhYmxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyksdGhpcy5zdGFydD10LHRoaXMuX2NvdW50PXIsdGhpcy5zY2hlZHVsZXI9c31yZXR1cm4gaSh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGUscixzKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09ciYmKHI9MCksbmV3IHQoZSxyLHMpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhcnQscj1lLmluZGV4LHM9ZS5jb3VudCxpPWUuc3Vic2NyaWJlcjtyZXR1cm4gcj49cz92b2lkIGkuY29tcGxldGUoKTooaS5uZXh0KHQpLHZvaWQoaS5pc1Vuc3Vic2NyaWJlZHx8KGUuaW5kZXg9cisxLGUuc3RhcnQ9dCsxLHRoaXMuc2NoZWR1bGUoZSkpKSl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHI9MCxzPXRoaXMuc3RhcnQsaT10aGlzLl9jb3VudCxvPXRoaXMuc2NoZWR1bGVyO2lmKG8pcmV0dXJuIG8uc2NoZWR1bGUodC5kaXNwYXRjaCwwLHtpbmRleDpyLGNvdW50Omksc3RhcnQ6cyxzdWJzY3JpYmVyOmV9KTtmb3IoOzspe2lmKHIrKz49aSl7ZS5jb21wbGV0ZSgpO2JyZWFrfWlmKGUubmV4dChzKyspLGUuaXNVbnN1YnNjcmliZWQpYnJlYWt9fSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLlJhbmdlT2JzZXJ2YWJsZT1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL1VzaW5nT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxhPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyksdGhpcy5yZXNvdXJjZUZhY3Rvcnk9dCx0aGlzLm9ic2VydmFibGVGYWN0b3J5PXJ9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIpe3JldHVybiBuZXcgdChlLHIpfSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcyxzPXIucmVzb3VyY2VGYWN0b3J5LGk9ci5vYnNlcnZhYmxlRmFjdG9yeTt0cnl7cmV0dXJuIHQ9cygpLG5ldyBjKGUsdCxpKX1jYXRjaChvKXtlLmVycm9yKG8pfX0sdH0oby5PYnNlcnZhYmxlKTtlLlVzaW5nT2JzZXJ2YWJsZT11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMucmVzb3VyY2U9cix0aGlzLm9ic2VydmFibGVGYWN0b3J5PXMsdC5hZGQociksdGhpcy50cnlVc2UoKX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLnRyeVVzZT1mdW5jdGlvbigpe3RyeXt2YXIgZT10aGlzLm9ic2VydmFibGVGYWN0b3J5LmNhbGwodGhpcyx0aGlzLnJlc291cmNlKTtlJiZ0aGlzLmFkZChuLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSkpfWNhdGNoKHQpe3RoaXMuX2Vycm9yKHQpfX0sdH0oYS5PdXRlclN1YnNjcmliZXIpO3JldHVybiByLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyksdGhpcy5lcnJvcj10LHRoaXMuc2NoZWR1bGVyPXJ9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIpe3JldHVybiBuZXcgdChlLHIpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZXJyb3Iscj1lLnN1YnNjcmliZXI7ci5lcnJvcih0KX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgcj10aGlzLmVycm9yLHM9dGhpcy5zY2hlZHVsZXI7cmV0dXJuIHM/cy5zY2hlZHVsZSh0LmRpc3BhdGNoLDAse2Vycm9yOnIsc3Vic2NyaWJlcjplfSk6dm9pZCBlLmVycm9yKHIpfSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLkVycm9yT2JzZXJ2YWJsZT1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL2lzRGF0ZVwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRGF0ZSYmIWlzTmFOKCtlKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cmV0dXJuIHMuZGVmaW5lPXZvaWQgMCxlLmlzRGF0ZT1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci96aXBcIixbXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIsXCJyeGpzL3V0aWwvaXNBcnJheVwiLFwicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIsXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllW3QtMF09YXJndW1lbnRzW3RdO3JldHVybiBlLnVuc2hpZnQodGhpcykscy5hcHBseSh0aGlzLGUpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTt2YXIgcj1lW2UubGVuZ3RoLTFdO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHImJmUucG9wKCksbmV3IGEuQXJyYXlPYnNlcnZhYmxlKGUpLmxpZnQobmV3IGgocikpfXZhciBpPVN5c3RlbS5nbG9iYWwsbz1pLmRlZmluZTtpLmRlZmluZT12b2lkIDA7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGE9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGVcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIiksYz1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGw9cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGI9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxwPXJlcXVpcmUoXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiKTtlLnppcFByb3RvPXIsZS56aXBTdGF0aWM9czt2YXIgaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5wcm9qZWN0PWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBkKGUsdGhpcy5wcm9qZWN0KSl9LGV9KCk7ZS5aaXBPcGVyYXRvcj1oO3ZhciBkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe3ZvaWQgMD09PXMmJihzPU9iamVjdC5jcmVhdGUobnVsbCkpLGUuY2FsbCh0aGlzLHQpLHRoaXMuaW5kZXg9MCx0aGlzLml0ZXJhdG9ycz1bXSx0aGlzLmFjdGl2ZT0wLHRoaXMucHJvamVjdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiByP3I6bnVsbCx0aGlzLnZhbHVlcz1zfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pdGVyYXRvcnMscj10aGlzLmluZGV4Kys7dS5pc0FycmF5KGUpP3QucHVzaChuZXcgdihlKSk6XCJmdW5jdGlvblwiPT10eXBlb2YgZVtwLiQkaXRlcmF0b3JdP3QucHVzaChuZXcgZihlW3AuJCRpdGVyYXRvcl0oKSkpOnQucHVzaChuZXcgeCh0aGlzLmRlc3RpbmF0aW9uLHRoaXMsZSxyKSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaXRlcmF0b3JzLHQ9ZS5sZW5ndGg7dGhpcy5hY3RpdmU9dDtmb3IodmFyIHI9MDt0PnI7cisrKXt2YXIgcz1lW3JdO3Muc3RpbGxVbnN1YnNjcmliZWQ/dGhpcy5hZGQocy5zdWJzY3JpYmUocyxyKSk6dGhpcy5hY3RpdmUtLX19LHQucHJvdG90eXBlLm5vdGlmeUluYWN0aXZlPWZ1bmN0aW9uKCl7dGhpcy5hY3RpdmUtLSwwPT09dGhpcy5hY3RpdmUmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUuY2hlY2tJdGVyYXRvcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5pdGVyYXRvcnMsdD1lLmxlbmd0aCxyPXRoaXMuZGVzdGluYXRpb24scz0wO3Q+cztzKyspe3ZhciBpPWVbc107aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaS5oYXNWYWx1ZSYmIWkuaGFzVmFsdWUoKSlyZXR1cm59Zm9yKHZhciBvPSExLG49W10scz0wO3Q+cztzKyspe3ZhciBpPWVbc10sYT1pLm5leHQoKTtpZihpLmhhc0NvbXBsZXRlZCgpJiYobz0hMCksYS5kb25lKXJldHVybiB2b2lkIHIuY29tcGxldGUoKTtuLnB1c2goYS52YWx1ZSl9dGhpcy5wcm9qZWN0P3RoaXMuX3RyeVByb2plY3Qobik6ci5uZXh0KG4pLG8mJnIuY29tcGxldGUoKX0sdC5wcm90b3R5cGUuX3RyeVByb2plY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsZSl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihyKX10aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9LHR9KGMuU3Vic2NyaWJlcik7ZS5aaXBTdWJzY3JpYmVyPWQ7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuaXRlcmF0b3I9ZSx0aGlzLm5leHRSZXN1bHQ9ZS5uZXh0KCl9cmV0dXJuIGUucHJvdG90eXBlLmhhc1ZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuITB9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRSZXN1bHQ7cmV0dXJuIHRoaXMubmV4dFJlc3VsdD10aGlzLml0ZXJhdG9yLm5leHQoKSxlfSxlLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRSZXN1bHQ7cmV0dXJuIGUmJmUuZG9uZX0sZX0oKSx2PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmFycmF5PWUsdGhpcy5pbmRleD0wLHRoaXMubGVuZ3RoPTAsdGhpcy5sZW5ndGg9ZS5sZW5ndGh9cmV0dXJuIGUucHJvdG90eXBlW3AuJCRpdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmluZGV4Kysscj10aGlzLmFycmF5O3JldHVybiB0PHRoaXMubGVuZ3RoP3t2YWx1ZTpyW3RdLGRvbmU6ITF9Ont2YWx1ZTpudWxsLGRvbmU6ITB9fSxlLnByb3RvdHlwZS5oYXNWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFycmF5Lmxlbmd0aD50aGlzLmluZGV4fSxlLnByb3RvdHlwZS5oYXNDb21wbGV0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcnJheS5sZW5ndGg9PT10aGlzLmluZGV4fSxlfSgpLHg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpKXtlLmNhbGwodGhpcyx0KSx0aGlzLnBhcmVudD1yLHRoaXMub2JzZXJ2YWJsZT1zLHRoaXMuaW5kZXg9aSx0aGlzLnN0aWxsVW5zdWJzY3JpYmVkPSEwLHRoaXMuYnVmZmVyPVtdLHRoaXMuaXNDb21wbGV0ZT0hMX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlW3AuJCRpdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuYnVmZmVyO3JldHVybiAwPT09ZS5sZW5ndGgmJnRoaXMuaXNDb21wbGV0ZT97dmFsdWU6bnVsbCxkb25lOiEwfTp7dmFsdWU6ZS5zaGlmdCgpLGRvbmU6ITF9fSx0LnByb3RvdHlwZS5oYXNWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5sZW5ndGg+MH0sdC5wcm90b3R5cGUuaGFzQ29tcGxldGVkPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmJ1ZmZlci5sZW5ndGgmJnRoaXMuaXNDb21wbGV0ZX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlci5sZW5ndGg+MD8odGhpcy5pc0NvbXBsZXRlPSEwLHRoaXMucGFyZW50Lm5vdGlmeUluYWN0aXZlKCkpOnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3RoaXMuYnVmZmVyLnB1c2godCksdGhpcy5wYXJlbnQuY2hlY2tJdGVyYXRvcnMoKX0sdC5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyx0aGlzLm9ic2VydmFibGUsdGhpcyx0KX0sdH0obC5PdXRlclN1YnNjcmliZXIpO3JldHVybiBpLmRlZmluZT1vLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9kb20vQWpheE9ic2VydmFibGVcIixbXCJyeGpzL3V0aWwvcm9vdFwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7dmFyIGU9bmV3IHAucm9vdC5YTUxIdHRwUmVxdWVzdDtpZih0aGlzLmNyb3NzRG9tYWluKXtpZihcIndpdGhDcmVkZW50aWFsc1wiaW4gZSlyZXR1cm4gZS53aXRoQ3JlZGVudGlhbHM9ITAsZTtpZihwLnJvb3QuWERvbWFpblJlcXVlc3QpcmV0dXJuIG5ldyBwLnJvb3QuWERvbWFpblJlcXVlc3Q7dGhyb3cgbmV3IEVycm9yKFwiQ09SUyBpcyBub3Qgc3VwcG9ydGVkIGJ5IHlvdXIgYnJvd3NlclwiKX1yZXR1cm4gZX1mdW5jdGlvbiBzKGUpe3JldHVybiBlLnJlc3BvbnNlfWZ1bmN0aW9uIGkoZSx0LHIpe3JldHVybiB2b2lkIDA9PT10JiYodD1zKSx2b2lkIDA9PT1yJiYocj1udWxsKSxuZXcgeCh7bWV0aG9kOlwiR0VUXCIsdXJsOmUscmVzdWx0U2VsZWN0b3I6dCxoZWFkZXJzOnJ9KX1mdW5jdGlvbiBvKGUsdCxyKXtyZXR1cm4gbmV3IHgoe21ldGhvZDpcIlBPU1RcIix1cmw6ZSxib2R5OnQsaGVhZGVyczpyfSl9ZnVuY3Rpb24gbihlLHQpe3JldHVybiBuZXcgeCh7bWV0aG9kOlwiREVMRVRFXCIsdXJsOmUsaGVhZGVyczp0fSl9ZnVuY3Rpb24gYShlLHQscil7cmV0dXJuIG5ldyB4KHttZXRob2Q6XCJQVVRcIix1cmw6ZSxib2R5OnQsaGVhZGVyczpyfSl9ZnVuY3Rpb24gdShlLHQscil7dmFyIHM9dD9mdW5jdGlvbihlKXtyZXR1cm4gdChlLnJlc3BvbnNlKX06ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVzcG9uc2V9O3JldHVybiBuZXcgeCh7bWV0aG9kOlwiR0VUXCIsdXJsOmUscmVzcG9uc2VUeXBlOlwianNvblwiLHJlc3VsdFNlbGVjdG9yOnMsaGVhZGVyczpyfSl9dmFyIGM9U3lzdGVtLmdsb2JhbCxsPWMuZGVmaW5lO2MuZGVmaW5lPXZvaWQgMDt2YXIgYj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0scD1yZXF1aXJlKFwicnhqcy91dGlsL3Jvb3RcIiksaD1yZXF1aXJlKFwicnhqcy91dGlsL3RyeUNhdGNoXCIpLGQ9cmVxdWlyZShcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiKSxmPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksdj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuYWpheEdldD1pLGUuYWpheFBvc3Q9byxlLmFqYXhEZWxldGU9bixlLmFqYXhQdXQ9YSxlLmFqYXhHZXRKU09OPXU7dmFyIHg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyk7dmFyIHM9e2FzeW5jOiEwLGNyZWF0ZVhIUjpyLGNyb3NzRG9tYWluOiExLGhlYWRlcnM6e30sbWV0aG9kOlwiR0VUXCIscmVzcG9uc2VUeXBlOlwianNvblwiLHRpbWVvdXQ6MH07aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpcy51cmw9dDtlbHNlIGZvcih2YXIgaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihzW2ldPXRbaV0pO3RoaXMucmVxdWVzdD1zfXJldHVybiBiKHQsZSksdC5fY3JlYXRlX3N0dWI9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHkoZSx0aGlzLnJlcXVlc3QpfSx0LmNyZWF0ZT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChlKX07cmV0dXJuIGUuZ2V0PWksZS5wb3N0PW8sZVtcImRlbGV0ZVwiXT1uLGUucHV0PWEsZS5nZXRKU09OPXUsZX0oKSx0fShmLk9ic2VydmFibGUpO2UuQWpheE9ic2VydmFibGU9eDt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5yZXF1ZXN0PXIsdGhpcy5kb25lPSExO3ZhciBzPXIuaGVhZGVycz1yLmhlYWRlcnN8fHt9O3IuY3Jvc3NEb21haW58fHNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdfHwoc1tcIlgtUmVxdWVzdGVkLVdpdGhcIl09XCJYTUxIdHRwUmVxdWVzdFwiKSxcIkNvbnRlbnQtVHlwZVwiaW4gc3x8KHNbXCJDb250ZW50LVR5cGVcIl09XCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIiksci5ib2R5PXRoaXMuc2VyaWFsaXplQm9keShyLmJvZHksci5oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdKSx0aGlzLnJlc3VsdFNlbGVjdG9yPXIucmVzdWx0U2VsZWN0b3IsdGhpcy5zZW5kKCl9cmV0dXJuIGIodCxlKSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZG9uZT0hMDt2YXIgdD10aGlzLHI9dC5yZXN1bHRTZWxlY3RvcixzPXQueGhyLGk9dC5yZXF1ZXN0LG89dC5kZXN0aW5hdGlvbixuPW5ldyBqKGUscyxpKTtpZihyKXt2YXIgYT1oLnRyeUNhdGNoKHIpKG4pO2E9PT1kLmVycm9yT2JqZWN0P3RoaXMuZXJyb3IoZC5lcnJvck9iamVjdC5lKTpvLm5leHQoYSl9ZWxzZSBvLm5leHQobil9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZS5yZXF1ZXN0LHI9ZS5yZXF1ZXN0LHM9ci51c2VyLGk9ci5tZXRob2Qsbz1yLnVybCxuPXIuYXN5bmMsYT1yLnBhc3N3b3JkLHU9ci5oZWFkZXJzLGM9ci5ib2R5LGw9dC5jcmVhdGVYSFIsYj1oLnRyeUNhdGNoKGwpLmNhbGwodCk7aWYoYj09PWQuZXJyb3JPYmplY3QpdGhpcy5lcnJvcihkLmVycm9yT2JqZWN0LmUpO2Vsc2V7dGhpcy54aHI9Yjt2YXIgcD12b2lkIDA7aWYocD1zP2gudHJ5Q2F0Y2goYi5vcGVuKS5jYWxsKGIsaSxvLG4scyxhKTpoLnRyeUNhdGNoKGIub3BlbikuY2FsbChiLGksbyxuKSxwPT09ZC5lcnJvck9iamVjdClyZXR1cm4gdm9pZCB0aGlzLmVycm9yKGQuZXJyb3JPYmplY3QuZSk7Yi50aW1lb3V0PXQudGltZW91dCxiLnJlc3BvbnNlVHlwZT10LnJlc3BvbnNlVHlwZSx0aGlzLnNldEhlYWRlcnMoYix1KSx0aGlzLnNldHVwRXZlbnRzKGIsdCksYz9iLnNlbmQoYyk6Yi5zZW5kKCl9fSx0LnByb3RvdHlwZS5zZXJpYWxpemVCb2R5PWZ1bmN0aW9uKGUsdCl7aWYoIWV8fFwic3RyaW5nXCI9PXR5cGVvZiBlKXJldHVybiBlO2lmKHAucm9vdC5Gb3JtRGF0YSYmZSBpbnN0YW5jZW9mIHAucm9vdC5Gb3JtRGF0YSlyZXR1cm4gZTt2YXIgcj10LmluZGV4T2YoXCI7XCIpO3N3aXRjaCgtMSE9PXImJih0PXQuc3Vic3RyaW5nKDAscikpLHQpe2Nhc2VcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiOnJldHVybiBPYmplY3Qua2V5cyhlKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIGVuY29kZVVSSSh0KStcIj1cIitlbmNvZGVVUkkoZVt0XSl9KS5qb2luKFwiJlwiKTtjYXNlXCJhcHBsaWNhdGlvbi9qc29uXCI6cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfX0sdC5wcm90b3R5cGUuc2V0SGVhZGVycz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KXQuaGFzT3duUHJvcGVydHkocikmJmUuc2V0UmVxdWVzdEhlYWRlcihyLHRbcl0pfSx0LnByb3RvdHlwZS5zZXR1cEV2ZW50cz1mdW5jdGlvbihlLHQpe3ZhciByPXQucHJvZ3Jlc3NTdWJzY3JpYmVyO2Uub250aW1lb3V0PWZ1bmN0aW9uIHMoZSl7dmFyIHQ9cyxyPXQuc3Vic2NyaWJlcixpPXQucHJvZ3Jlc3NTdWJzY3JpYmVyLG89dC5yZXF1ZXN0O2kmJmkuZXJyb3IoZSksci5lcnJvcihuZXcgUyh0aGlzLG8pKX0sZS5vbnRpbWVvdXQucmVxdWVzdD10LGUub250aW1lb3V0LnN1YnNjcmliZXI9dGhpcyxlLm9udGltZW91dC5wcm9ncmVzc1N1YnNjcmliZXI9cixlLnVwbG9hZCYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIGUmJnAucm9vdC5YRG9tYWluUmVxdWVzdCYmKHImJihlLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24gaShlKXt2YXIgdD1pLnByb2dyZXNzU3Vic2NyaWJlcjt0Lm5leHQoZSl9LGUub25wcm9ncmVzcy5wcm9ncmVzc1N1YnNjcmliZXI9ciksZS5vbmVycm9yPWZ1bmN0aW9uIG8oZSl7dmFyIHQ9byxyPXQucHJvZ3Jlc3NTdWJzY3JpYmVyLHM9dC5zdWJzY3JpYmVyLGk9dC5yZXF1ZXN0O3ImJnIuZXJyb3IoZSkscy5lcnJvcihuZXcgbShcImFqYXggZXJyb3JcIix0aGlzLGkpKX0sZS5vbmVycm9yLnJlcXVlc3Q9dCxlLm9uZXJyb3Iuc3Vic2NyaWJlcj10aGlzLGUub25lcnJvci5wcm9ncmVzc1N1YnNjcmliZXI9ciksZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24gbihlKXt2YXIgdD1uLHI9dC5zdWJzY3JpYmVyLHM9dC5wcm9ncmVzc1N1YnNjcmliZXIsaT10LnJlcXVlc3Q7aWYoND09PXRoaXMucmVhZHlTdGF0ZSl7dmFyIG89MTIyMz09PXRoaXMuc3RhdHVzPzIwNDp0aGlzLnN0YXR1cyxhPVwidGV4dFwiPT09dGhpcy5yZXNwb25zZVR5cGU/dGhpcy5yZXNwb25zZXx8dGhpcy5yZXNwb25zZVRleHQ6dGhpcy5yZXNwb25zZTswPT09byYmKG89YT8yMDA6MCksbz49MjAwJiYzMDA+bz8ocyYmcy5jb21wbGV0ZSgpLHIubmV4dChlKSxyLmNvbXBsZXRlKCkpOihzJiZzLmVycm9yKGUpLHIuZXJyb3IobmV3IG0oXCJhamF4IGVycm9yIFwiK28sdGhpcyxpKSkpfX0sZS5vbnJlYWR5c3RhdGVjaGFuZ2Uuc3Vic2NyaWJlcj10aGlzLGUub25yZWFkeXN0YXRlY2hhbmdlLnByb2dyZXNzU3Vic2NyaWJlcj1yLGUub25yZWFkeXN0YXRlY2hhbmdlLnJlcXVlc3Q9dH0sdC5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9dC5kb25lLHM9dC54aHI7IXImJnMmJjQhPT1zLnJlYWR5U3RhdGUmJnMuYWJvcnQoKSxlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpfSx0fSh2LlN1YnNjcmliZXIpO2UuQWpheFN1YnNjcmliZXI9eTt2YXIgaj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3N3aXRjaCh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnhocj10LHRoaXMucmVxdWVzdD1yLHRoaXMuc3RhdHVzPXQuc3RhdHVzLHRoaXMucmVzcG9uc2VUeXBlPXQucmVzcG9uc2VUeXBlfHxyLnJlc3BvbnNlVHlwZSx0aGlzLnJlc3BvbnNlVHlwZSl7Y2FzZVwianNvblwiOlwicmVzcG9uc2VcImluIHQ/dGhpcy5yZXNwb25zZT10LnJlc3BvbnNlVHlwZT90LnJlc3BvbnNlOkpTT04ucGFyc2UodC5yZXNwb25zZXx8dC5yZXNwb25zZVRleHR8fFwiXCIpOnRoaXMucmVzcG9uc2U9SlNPTi5wYXJzZSh0LnJlc3BvbnNlVGV4dHx8XCJcIik7YnJlYWs7Y2FzZVwieG1sXCI6dGhpcy5yZXNwb25zZT10LnJlc3BvbnNlWE1MO2JyZWFrO2Nhc2VcInRleHRcIjpkZWZhdWx0OnRoaXMucmVzcG9uc2U9XCJyZXNwb25zZVwiaW4gdD90LnJlc3BvbnNlOnQucmVzcG9uc2VUZXh0fX1yZXR1cm4gZX0oKTtlLkFqYXhSZXNwb25zZT1qO3ZhciBtPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMubWVzc2FnZT10LHRoaXMueGhyPXIsdGhpcy5yZXF1ZXN0PXMsdGhpcy5zdGF0dXM9ci5zdGF0dXN9cmV0dXJuIGIodCxlKSx0fShFcnJvcik7ZS5BamF4RXJyb3I9bTt2YXIgUz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsXCJhamF4IHRpbWVvdXRcIix0LHIpfXJldHVybiBiKHQsZSksdH0obSk7cmV0dXJuIGUuQWpheFRpbWVvdXRFcnJvcj1TLGMuZGVmaW5lPWwsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zY2hlZHVsZXIvcXVldWVcIixbXCJyeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXJcIik7cmV0dXJuIGUucXVldWU9bmV3IGkuUXVldWVTY2hlZHVsZXIsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvYXNzaWduXCIsW1wicnhqcy91dGlsL3Jvb3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvdXRpbC9yb290XCIpLG89aS5yb290Lk9iamVjdDtyZXR1cm5cImZ1bmN0aW9uXCIhPXR5cGVvZiBvLmFzc2lnbiYmIWZ1bmN0aW9uKCl7by5hc3NpZ249ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07aWYodm9pZCAwPT09ZXx8bnVsbD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdFwiKTtmb3IodmFyIHM9byhlKSxpPXQubGVuZ3RoLG49MDtpPm47bisrKXt2YXIgYT10W25dO2lmKHZvaWQgMCE9PWEmJm51bGwhPT1hKWZvcih2YXIgdSBpbiBhKWEuaGFzT3duUHJvcGVydHkodSkmJihzW3VdPWFbdV0pfXJldHVybiBzfX0oKSxlLmFzc2lnbj1vLmFzc2lnbixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvYnVmZmVyXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5idWZmZXI9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5jbG9zaW5nTm90aWZpZXI9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLmNsb3NpbmdOb3RpZmllcikpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMuYnVmZmVyPVtdLHRoaXMuYWRkKGEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxyKSl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmJ1ZmZlci5wdXNoKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dmFyIG89dGhpcy5idWZmZXI7dGhpcy5idWZmZXI9W10sdGhpcy5kZXN0aW5hdGlvbi5uZXh0KG8pfSx0fShuLk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9idWZmZXJDb3VudFwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1udWxsKSx0aGlzLmxpZnQobmV3IGEoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuYnVmZmVyQ291bnQ9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmJ1ZmZlclNpemU9ZSx0aGlzLnN0YXJ0QnVmZmVyRXZlcnk9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLmJ1ZmZlclNpemUsdGhpcy5zdGFydEJ1ZmZlckV2ZXJ5KSl9LGV9KCksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLmJ1ZmZlclNpemU9cix0aGlzLnN0YXJ0QnVmZmVyRXZlcnk9cyx0aGlzLmJ1ZmZlcnM9W1tdXSx0aGlzLmNvdW50PTB9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvdW50Kz0xLHI9dGhpcy5kZXN0aW5hdGlvbixzPXRoaXMuYnVmZmVyU2l6ZSxpPW51bGw9PXRoaXMuc3RhcnRCdWZmZXJFdmVyeT9zOnRoaXMuc3RhcnRCdWZmZXJFdmVyeSxvPXRoaXMuYnVmZmVycyxuPW8ubGVuZ3RoLGE9LTE7dCVpPT09MCYmby5wdXNoKFtdKTtmb3IodmFyIHU9MDtuPnU7dSsrKXt2YXIgYz1vW3VdO2MucHVzaChlKSxjLmxlbmd0aD09PXMmJihhPXUsci5uZXh0KGMpKX0tMSE9PWEmJm8uc3BsaWNlKGEsMSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmRlc3RpbmF0aW9uLHI9dGhpcy5idWZmZXJzO3IubGVuZ3RoPjA7KXt2YXIgcz1yLnNoaWZ0KCk7cy5sZW5ndGg+MCYmdC5uZXh0KHMpfWUucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpfSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvYnVmZmVyVGltZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIixcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoLHI9bC5hc3luYztiLmlzU2NoZWR1bGVyKGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoLTFdKSYmKHI9YXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGgtMV0sdC0tKTt2YXIgcz1udWxsO3Q+PTImJihzPWFyZ3VtZW50c1sxXSk7dmFyIGk9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZO3JldHVybiB0Pj0zJiYoaT1hcmd1bWVudHNbMl0pLHRoaXMubGlmdChuZXcgcChlLHMsaSxyKSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1lLnN1YnNjcmliZXIscj1lLmNvbnRleHQ7ciYmdC5jbG9zZUNvbnRleHQociksZS5jb250ZXh0PXQub3BlbkNvbnRleHQoKSx0LmlzVW5zdWJzY3JpYmVkfHwoZS5jb250ZXh0LmNsb3NlQWN0aW9uPXRoaXMuc2NoZWR1bGUoZSxlLmJ1ZmZlclRpbWVTcGFuKSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwscj1lLmJ1ZmZlclRpbWVTcGFuLHM9ZS5zdWJzY3JpYmVyLGk9ZS5zY2hlZHVsZXIsbj1zLm9wZW5Db250ZXh0KCksYT10aGlzO3MuaXNVbnN1YnNjcmliZWR8fChzLmFkZChuLmNsb3NlQWN0aW9uPWkuc2NoZWR1bGUobyxyLHtzdWJzY3JpYmVyOnMsY29udGV4dDpufSkpLGEuc2NoZWR1bGUoZSx0KSl9ZnVuY3Rpb24gbyhlKXt2YXIgdD1lLnN1YnNjcmliZXIscj1lLmNvbnRleHQ7dC5jbG9zZUNvbnRleHQocil9dmFyIG49U3lzdGVtLmdsb2JhbCxhPW4uZGVmaW5lO24uZGVmaW5lPXZvaWQgMDt2YXIgdT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sYz1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGw9cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIpLGI9cmVxdWlyZShcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiKTtlLmJ1ZmZlclRpbWU9cjt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy5idWZmZXJUaW1lU3Bhbj1lLHRoaXMuYnVmZmVyQ3JlYXRpb25JbnRlcnZhbD10LHRoaXMubWF4QnVmZmVyU2l6ZT1yLHRoaXMuc2NoZWR1bGVyPXN9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBkKGUsdGhpcy5idWZmZXJUaW1lU3Bhbix0aGlzLmJ1ZmZlckNyZWF0aW9uSW50ZXJ2YWwsdGhpcy5tYXhCdWZmZXJTaXplLHRoaXMuc2NoZWR1bGVyKSl9LGV9KCksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmJ1ZmZlcj1bXX1yZXR1cm4gZX0oKSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLG4sYSx1KXtlLmNhbGwodGhpcyx0KSx0aGlzLmJ1ZmZlclRpbWVTcGFuPXIsdGhpcy5idWZmZXJDcmVhdGlvbkludGVydmFsPW4sdGhpcy5tYXhCdWZmZXJTaXplPWEsdGhpcy5zY2hlZHVsZXI9dSx0aGlzLmNvbnRleHRzPVtdO3ZhciBjPXRoaXMub3BlbkNvbnRleHQoKTtpZih0aGlzLnRpbWVzcGFuT25seT1udWxsPT1ufHwwPm4sdGhpcy50aW1lc3Bhbk9ubHkpe3ZhciBsPXtzdWJzY3JpYmVyOnRoaXMsY29udGV4dDpjLGJ1ZmZlclRpbWVTcGFuOnJ9O3RoaXMuYWRkKGMuY2xvc2VBY3Rpb249dS5zY2hlZHVsZShzLHIsbCkpfWVsc2V7dmFyIGI9e3N1YnNjcmliZXI6dGhpcyxjb250ZXh0OmN9LHA9e2J1ZmZlclRpbWVTcGFuOnIsYnVmZmVyQ3JlYXRpb25JbnRlcnZhbDpuLHN1YnNjcmliZXI6dGhpcyxzY2hlZHVsZXI6dX07dGhpcy5hZGQoYy5jbG9zZUFjdGlvbj11LnNjaGVkdWxlKG8scixiKSksdGhpcy5hZGQodS5zY2hlZHVsZShpLG4scCkpfX1yZXR1cm4gdSh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXRoaXMuY29udGV4dHMscz1yLmxlbmd0aCxpPTA7cz5pO2krKyl7dmFyIG89cltpXSxuPW8uYnVmZmVyO24ucHVzaChlKSxuLmxlbmd0aD09dGhpcy5tYXhCdWZmZXJTaXplJiYodD1vKX10JiZ0aGlzLm9uQnVmZmVyRnVsbCh0KX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dHMubGVuZ3RoPTAsZS5wcm90b3R5cGUuX2Vycm9yLmNhbGwodGhpcyx0KX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMscj10LmNvbnRleHRzLHM9dC5kZXN0aW5hdGlvbjtyLmxlbmd0aD4wOyl7dmFyIGk9ci5zaGlmdCgpO3MubmV4dChpLmJ1ZmZlcil9ZS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMuY29udGV4dHM9bnVsbH0sdC5wcm90b3R5cGUub25CdWZmZXJGdWxsPWZ1bmN0aW9uKGUpe3RoaXMuY2xvc2VDb250ZXh0KGUpO3ZhciB0PWUuY2xvc2VBY3Rpb247aWYodC51bnN1YnNjcmliZSgpLHRoaXMucmVtb3ZlKHQpLHRoaXMudGltZXNwYW5Pbmx5KXtlPXRoaXMub3BlbkNvbnRleHQoKTt2YXIgcj10aGlzLmJ1ZmZlclRpbWVTcGFuLGk9e3N1YnNjcmliZXI6dGhpcyxjb250ZXh0OmUsYnVmZmVyVGltZVNwYW46cn07dGhpcy5hZGQoZS5jbG9zZUFjdGlvbj10aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzLHIsaSkpfX0sdC5wcm90b3R5cGUub3BlbkNvbnRleHQ9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgaDtyZXR1cm4gdGhpcy5jb250ZXh0cy5wdXNoKGUpLGV9LHQucHJvdG90eXBlLmNsb3NlQ29udGV4dD1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZS5idWZmZXIpO3ZhciB0PXRoaXMuY29udGV4dHM7dC5zcGxpY2UodC5pbmRleE9mKGUpLDEpfSx0fShjLlN1YnNjcmliZXIpO3JldHVybiBuLmRlZmluZT1hLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlXCIsW1wicnhqcy9TdWJzY3JpcHRpb25cIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiLFwicnhqcy9PdXRlclN1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBjKGUsdCkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSx1PXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKTtlLmJ1ZmZlclRvZ2dsZT1yO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub3BlbmluZ3M9ZSx0aGlzLmNsb3NpbmdTZWxlY3Rvcj10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMub3BlbmluZ3MsdGhpcy5jbG9zaW5nU2VsZWN0b3IpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMub3BlbmluZ3M9cix0aGlzLmNsb3NpbmdTZWxlY3Rvcj1zLHRoaXMuY29udGV4dHM9W10sdGhpcy5hZGQoYS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHIpKX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLmNvbnRleHRzLHI9dC5sZW5ndGgscz0wO3I+cztzKyspdFtzXS5idWZmZXIucHVzaChlKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10aGlzLmNvbnRleHRzO3IubGVuZ3RoPjA7KXt2YXIgcz1yLnNoaWZ0KCk7cy5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKSxzLmJ1ZmZlcj1udWxsLHMuc3Vic2NyaXB0aW9uPW51bGx9dGhpcy5jb250ZXh0cz1udWxsLGUucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmNvbnRleHRzO3QubGVuZ3RoPjA7KXt2YXIgcj10LnNoaWZ0KCk7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHIuYnVmZmVyKSxyLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpLHIuYnVmZmVyPW51bGwsci5zdWJzY3JpcHRpb249bnVsbH10aGlzLmNvbnRleHRzPW51bGwsZS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXtlP3RoaXMuY2xvc2VCdWZmZXIoZSk6dGhpcy5vcGVuQnVmZmVyKHQpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt0aGlzLmNsb3NlQnVmZmVyKGUuY29udGV4dCl9LHQucHJvdG90eXBlLm9wZW5CdWZmZXI9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PXRoaXMuY2xvc2luZ1NlbGVjdG9yLHI9dC5jYWxsKHRoaXMsZSk7ciYmdGhpcy50cnlTdWJzY3JpYmUocil9Y2F0Y2gocyl7dGhpcy5fZXJyb3Iocyl9fSx0LnByb3RvdHlwZS5jbG9zZUJ1ZmZlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRleHRzO2lmKHQmJmUpe3ZhciByPWUuYnVmZmVyLHM9ZS5zdWJzY3JpcHRpb247dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHIpLHQuc3BsaWNlKHQuaW5kZXhPZihlKSwxKSx0aGlzLnJlbW92ZShzKSxzLnVuc3Vic2NyaWJlKCl9fSx0LnByb3RvdHlwZS50cnlTdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jb250ZXh0cyxyPVtdLHM9bmV3IG4uU3Vic2NyaXB0aW9uLGk9e2J1ZmZlcjpyLHN1YnNjcmlwdGlvbjpzfTt0LnB1c2goaSk7dmFyIG89YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsaSk7IW98fG8uaXNVbnN1YnNjcmliZWQ/dGhpcy5jbG9zZUJ1ZmZlcihpKTooby5jb250ZXh0PWksdGhpcy5hZGQobykscy5hZGQobykpfSx0fSh1Lk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9idWZmZXJXaGVuXCIsW1wicnhqcy9TdWJzY3JpcHRpb25cIixcInJ4anMvdXRpbC90cnlDYXRjaFwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGIoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksYz1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksbD1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2UuYnVmZmVyV2hlbj1yO3ZhciBiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNsb3NpbmdTZWxlY3Rvcj1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgcChlLHRoaXMuY2xvc2luZ1NlbGVjdG9yKSl9LGV9KCkscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5jbG9zaW5nU2VsZWN0b3I9cix0aGlzLnN1YnNjcmliaW5nPSExLHRoaXMub3BlbkJ1ZmZlcigpfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5idWZmZXIucHVzaChlKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5idWZmZXI7dCYmdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpLGUucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuc3Vic2NyaWJpbmc9ITF9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLm9wZW5CdWZmZXIoKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLnN1YnNjcmliaW5nP3RoaXMuY29tcGxldGUoKTp0aGlzLm9wZW5CdWZmZXIoKX0sdC5wcm90b3R5cGUub3BlbkJ1ZmZlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY2xvc2luZ1N1YnNjcmlwdGlvbjtlJiYodGhpcy5yZW1vdmUoZSksZS51bnN1YnNjcmliZSgpKTt2YXIgdD10aGlzLmJ1ZmZlcjt0aGlzLmJ1ZmZlciYmdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpLHRoaXMuYnVmZmVyPVtdO3ZhciByPWEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7cj09PXUuZXJyb3JPYmplY3Q/dGhpcy5lcnJvcih1LmVycm9yT2JqZWN0LmUpOihlPW5ldyBuLlN1YnNjcmlwdGlvbix0aGlzLmNsb3NpbmdTdWJzY3JpcHRpb249ZSx0aGlzLmFkZChlKSx0aGlzLnN1YnNjcmliaW5nPSEwLGUuYWRkKGwuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxyKSksdGhpcy5zdWJzY3JpYmluZz0hMSl9LHR9KGMuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2NhY2hlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL1JlcGxheVN1YmplY3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0LHIpe3ZvaWQgMD09PWUmJihlPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSksdm9pZCAwPT09dCYmKHQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTt2YXIgcyxpLGE9dGhpcyx1PTAsYz1mdW5jdGlvbigpe3JldHVybiBzPW5ldyBuLlJlcGxheVN1YmplY3QoZSx0LHIpfTtyZXR1cm4gbmV3IG8uT2JzZXJ2YWJsZShmdW5jdGlvbihlKXtzfHwocz1jKCksaT1hLnN1YnNjcmliZShmdW5jdGlvbihlKXtyZXR1cm4gcy5uZXh0KGUpfSxmdW5jdGlvbihlKXt2YXIgdD1zO3M9bnVsbCx0LmVycm9yKGUpfSxmdW5jdGlvbigpe3JldHVybiBzLmNvbXBsZXRlKCl9KSksdSsrLHN8fChzPWMoKSk7dmFyIHQ9cy5zdWJzY3JpYmUoZSk7cmV0dXJuIGZ1bmN0aW9uKCl7dS0tLHQmJnQudW5zdWJzY3JpYmUoKSwwPT09dSYmaS51bnN1YnNjcmliZSgpfX0pfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPXJlcXVpcmUoXCJyeGpzL1JlcGxheVN1YmplY3RcIik7cmV0dXJuIGUuY2FjaGU9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvY2F0Y2hcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7dmFyIHQ9bmV3IGEoZSkscj10aGlzLmxpZnQodCk7cmV0dXJuIHQuY2F1Z2h0PXJ9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuX2NhdGNoPXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuc2VsZWN0b3I9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnNlbGVjdG9yLHRoaXMuY2F1Z2h0KSl9LGV9KCksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLnNlbGVjdG9yPXIsdGhpcy5jYXVnaHQ9c31yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzU3RvcHBlZCl7dmFyIHQ9dm9pZCAwO3RyeXt0PXRoaXMuc2VsZWN0b3IoZSx0aGlzLmNhdWdodCl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX10aGlzLl9pbm5lclN1Yih0KX19LHQucHJvdG90eXBlLl9pbm5lclN1Yj1mdW5jdGlvbihlKXt0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5kZXN0aW5hdGlvbi5yZW1vdmUodGhpcyksZS5zdWJzY3JpYmUodGhpcy5kZXN0aW5hdGlvbil9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9jb21iaW5lQWxsXCIsW1wicnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IG8uQ29tYmluZUxhdGVzdE9wZXJhdG9yKGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2NvbWJpbmVMYXRlc3RcIik7cmV0dXJuIGUuY29tYmluZUFsbD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUxhdGVzdFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmNvbWJpbmVMYXRlc3Q9by5jb21iaW5lTGF0ZXN0LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2NvbmNhdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY29uY2F0XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmNvbmNhdD1vLmNvbmNhdCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvY29uY2F0QWxsXCIsW1wicnhqcy9vcGVyYXRvci9tZXJnZUFsbFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe3JldHVybiB0aGlzLmxpZnQobmV3IG8uTWVyZ2VBbGxPcGVyYXRvcigxKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZUFsbFwiKTtyZXR1cm4gZS5jb25jYXRBbGw9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbWVyZ2VNYXBcIixbXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxcIm51bWJlclwiPT10eXBlb2YgdCYmKHI9dCx0PW51bGwpLHRoaXMubGlmdChuZXcgdShlLHQscikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKSxhPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKTtlLm1lcmdlTWFwPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2b2lkIDA9PT1yJiYocj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHRoaXMucHJvamVjdD1lLHRoaXMucmVzdWx0U2VsZWN0b3I9dCx0aGlzLmNvbmN1cnJlbnQ9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLnByb2plY3QsdGhpcy5yZXN1bHRTZWxlY3Rvcix0aGlzLmNvbmN1cnJlbnQpKX0sZX0oKTtlLk1lcmdlTWFwT3BlcmF0b3I9dTt2YXIgYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzLGkpe3ZvaWQgMD09PWkmJihpPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSksZS5jYWxsKHRoaXMsdCksdGhpcy5wcm9qZWN0PXIsdGhpcy5yZXN1bHRTZWxlY3Rvcj1zLHRoaXMuY29uY3VycmVudD1pLHRoaXMuaGFzQ29tcGxldGVkPSExLHRoaXMuYnVmZmVyPVtdLHRoaXMuYWN0aXZlPTAsdGhpcy5pbmRleD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5hY3RpdmU8dGhpcy5jb25jdXJyZW50P3RoaXMuX3RyeU5leHQoZSk6dGhpcy5idWZmZXIucHVzaChlKX0sdC5wcm90b3R5cGUuX3RyeU5leHQ9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmluZGV4Kys7dHJ5e3Q9dGhpcy5wcm9qZWN0KGUscil9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzKX10aGlzLmFjdGl2ZSsrLHRoaXMuX2lubmVyU3ViKHQsZSxyKX0sdC5wcm90b3R5cGUuX2lubmVyU3ViPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLmFkZChuLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSx0LHIpKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9ITAsMD09PXRoaXMuYWN0aXZlJiYwPT09dGhpcy5idWZmZXIubGVuZ3RoJiZ0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLnJlc3VsdFNlbGVjdG9yP3RoaXMuX25vdGlmeVJlc3VsdFNlbGVjdG9yKGUsdCxyLHMpOnRoaXMuZGVzdGluYXRpb24ubmV4dCh0KX0sdC5wcm90b3R5cGUuX25vdGlmeVJlc3VsdFNlbGVjdG9yPWZ1bmN0aW9uKGUsdCxyLHMpe3ZhciBpO3RyeXtpPXRoaXMucmVzdWx0U2VsZWN0b3IoZSx0LHIscyl9Y2F0Y2gobyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihvKX10aGlzLmRlc3RpbmF0aW9uLm5leHQoaSl9LHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyO3RoaXMucmVtb3ZlKGUpLHRoaXMuYWN0aXZlLS0sdC5sZW5ndGg+MD90aGlzLl9uZXh0KHQuc2hpZnQoKSk6MD09PXRoaXMuYWN0aXZlJiZ0aGlzLmhhc0NvbXBsZXRlZCYmdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xufSx0fShhLk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIGUuTWVyZ2VNYXBTdWJzY3JpYmVyPWMscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL21lcmdlTWFwVG9cIixbXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxcIm51bWJlclwiPT10eXBlb2YgdCYmKHI9dCx0PW51bGwpLHRoaXMubGlmdChuZXcgdShlLHQscikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtlLm1lcmdlTWFwVG89cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3ZvaWQgMD09PXImJihyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSksdGhpcy5pc2g9ZSx0aGlzLnJlc3VsdFNlbGVjdG9yPXQsdGhpcy5jb25jdXJyZW50PXJ9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5pc2gsdGhpcy5yZXN1bHRTZWxlY3Rvcix0aGlzLmNvbmN1cnJlbnQpKX0sZX0oKTtlLk1lcmdlTWFwVG9PcGVyYXRvcj11O3ZhciBjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7dm9pZCAwPT09aSYmKGk9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSxlLmNhbGwodGhpcyx0KSx0aGlzLmlzaD1yLHRoaXMucmVzdWx0U2VsZWN0b3I9cyx0aGlzLmNvbmN1cnJlbnQ9aSx0aGlzLmhhc0NvbXBsZXRlZD0hMSx0aGlzLmJ1ZmZlcj1bXSx0aGlzLmFjdGl2ZT0wLHRoaXMuaW5kZXg9MH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuYWN0aXZlPHRoaXMuY29uY3VycmVudCl7dmFyIHQ9dGhpcy5yZXN1bHRTZWxlY3RvcixyPXRoaXMuaW5kZXgrKyxzPXRoaXMuaXNoLGk9dGhpcy5kZXN0aW5hdGlvbjt0aGlzLmFjdGl2ZSsrLHRoaXMuX2lubmVyU3ViKHMsaSx0LGUscil9ZWxzZSB0aGlzLmJ1ZmZlci5wdXNoKGUpfSx0LnByb3RvdHlwZS5faW5uZXJTdWI9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLmFkZChhLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSxzLGkpKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9ITAsMD09PXRoaXMuYWN0aXZlJiYwPT09dGhpcy5idWZmZXIubGVuZ3RoJiZ0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt2YXIgbz10aGlzLG49by5yZXN1bHRTZWxlY3RvcixhPW8uZGVzdGluYXRpb247bj90aGlzLnRyeVNlbGVjdFJlc3VsdChlLHQscixzKTphLm5leHQodCl9LHQucHJvdG90eXBlLnRyeVNlbGVjdFJlc3VsdD1mdW5jdGlvbihlLHQscixzKXt2YXIgaSxvPXRoaXMsbj1vLnJlc3VsdFNlbGVjdG9yLGE9by5kZXN0aW5hdGlvbjt0cnl7aT1uKGUsdCxyLHMpfWNhdGNoKHUpe3JldHVybiB2b2lkIGEuZXJyb3IodSl9YS5uZXh0KGkpfSx0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJ1ZmZlcjt0aGlzLnJlbW92ZShlKSx0aGlzLmFjdGl2ZS0tLHQubGVuZ3RoPjA/dGhpcy5fbmV4dCh0LnNoaWZ0KCkpOjA9PT10aGlzLmFjdGl2ZSYmdGhpcy5oYXNDb21wbGV0ZWQmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBlLk1lcmdlTWFwVG9TdWJzY3JpYmVyPWMscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2NvdW50XCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGEoZSx0aGlzKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuY291bnQ9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByZWRpY2F0ZT1lLHRoaXMuc291cmNlPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5wcmVkaWNhdGUsdGhpcy5zb3VyY2UpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJlZGljYXRlPXIsdGhpcy5zb3VyY2U9cyx0aGlzLmNvdW50PTAsdGhpcy5pbmRleD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5wcmVkaWNhdGU/dGhpcy5fdHJ5UHJlZGljYXRlKGUpOnRoaXMuY291bnQrK30sdC5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZT1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnByZWRpY2F0ZShlLHRoaXMuaW5kZXgrKyx0aGlzLnNvdXJjZSl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihyKX10JiZ0aGlzLmNvdW50Kyt9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmNvdW50KSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9kZW1hdGVyaWFsaXplXCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7cmV0dXJuIHRoaXMubGlmdChuZXcgYSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuZGVtYXRlcmlhbGl6ZT1yO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSkpfSxlfSgpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyx0KX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2Uub2JzZXJ2ZSh0aGlzLmRlc3RpbmF0aW9uKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2RlYm91bmNlXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5kZWJvdW5jZT1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmR1cmF0aW9uU2VsZWN0b3I9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmR1cmF0aW9uU2VsZWN0b3I9cix0aGlzLmhhc1ZhbHVlPSExLHRoaXMuZHVyYXRpb25TdWJzY3JpcHRpb249bnVsbH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RyeXt2YXIgdD10aGlzLmR1cmF0aW9uU2VsZWN0b3IuY2FsbCh0aGlzLGUpO3QmJnRoaXMuX3RyeU5leHQoZSx0KX1jYXRjaChyKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHIpfX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0VmFsdWUoKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl90cnlOZXh0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbjt0aGlzLnZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMCxyJiYoci51bnN1YnNjcmliZSgpLHRoaXMucmVtb3ZlKHIpKSxyPWEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyx0KSxyLmlzVW5zdWJzY3JpYmVkfHx0aGlzLmFkZCh0aGlzLmR1cmF0aW9uU3Vic2NyaXB0aW9uPXIpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dGhpcy5lbWl0VmFsdWUoKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXRWYWx1ZSgpfSx0LnByb3RvdHlwZS5lbWl0VmFsdWU9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc1ZhbHVlKXt2YXIgdD10aGlzLnZhbHVlLHI9dGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbjtyJiYodGhpcy5kdXJhdGlvblN1YnNjcmlwdGlvbj1udWxsLHIudW5zdWJzY3JpYmUoKSx0aGlzLnJlbW92ZShyKSksdGhpcy52YWx1ZT1udWxsLHRoaXMuaGFzVmFsdWU9ITEsZS5wcm90b3R5cGUuX25leHQuY2FsbCh0aGlzLHQpfX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZGVib3VuY2VUaW1lXCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD11LmFzeW5jKSx0aGlzLmxpZnQobmV3IGMoZSx0KSl9ZnVuY3Rpb24gcyhlKXtlLmRlYm91bmNlZE5leHQoKX12YXIgaT1TeXN0ZW0uZ2xvYmFsLG89aS5kZWZpbmU7aS5kZWZpbmU9dm9pZCAwO3ZhciBuPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxhPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksdT1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIik7ZS5kZWJvdW5jZVRpbWU9cjt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmR1ZVRpbWU9ZSx0aGlzLnNjaGVkdWxlcj10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMuZHVlVGltZSx0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5kdWVUaW1lPXIsdGhpcy5zY2hlZHVsZXI9cyx0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbj1udWxsLHRoaXMubGFzdFZhbHVlPW51bGwsdGhpcy5oYXNWYWx1ZT0hMX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuY2xlYXJEZWJvdW5jZSgpLHRoaXMubGFzdFZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMCx0aGlzLmFkZCh0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbj10aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzLHRoaXMuZHVlVGltZSx0aGlzKSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuZGVib3VuY2VkTmV4dCgpLHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUuZGVib3VuY2VkTmV4dD1mdW5jdGlvbigpe3RoaXMuY2xlYXJEZWJvdW5jZSgpLHRoaXMuaGFzVmFsdWUmJih0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpLHRoaXMubGFzdFZhbHVlPW51bGwsdGhpcy5oYXNWYWx1ZT0hMSl9LHQucHJvdG90eXBlLmNsZWFyRGVib3VuY2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbjtudWxsIT09ZSYmKHRoaXMucmVtb3ZlKGUpLGUudW5zdWJzY3JpYmUoKSx0aGlzLmRlYm91bmNlZFN1YnNjcmlwdGlvbj1udWxsKX0sdH0oYS5TdWJzY3JpYmVyKTtyZXR1cm4gaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5XCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1udWxsKSx0aGlzLmxpZnQobmV3IGEoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLmRlZmF1bHRJZkVtcHR5PXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuZGVmYXVsdFZhbHVlPWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5kZWZhdWx0VmFsdWUpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmRlZmF1bHRWYWx1ZT1yLHRoaXMuaXNFbXB0eT0hMH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuaXNFbXB0eT0hMSx0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaXNFbXB0eSYmdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuZGVmYXVsdFZhbHVlKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9kZWxheVwiLFtcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIsXCJyeGpzL3V0aWwvaXNEYXRlXCIsXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvTm90aWZpY2F0aW9uXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7dm9pZCAwPT09dCYmKHQ9bi5hc3luYyk7dmFyIHI9YS5pc0RhdGUoZSkscz1yPytlLXQubm93KCk6TWF0aC5hYnMoZSk7cmV0dXJuIHRoaXMubGlmdChuZXcgbChzLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNEYXRlXCIpLHU9cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxjPXJlcXVpcmUoXCJyeGpzL05vdGlmaWNhdGlvblwiKTtlLmRlbGF5PXI7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5kZWxheT1lLHRoaXMuc2NoZWR1bGVyPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBiKGUsdGhpcy5kZWxheSx0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5kZWxheT1yLHRoaXMuc2NoZWR1bGVyPXMsdGhpcy5xdWV1ZT1bXSx0aGlzLmFjdGl2ZT0hMSx0aGlzLmVycm9yZWQ9ITF9cmV0dXJuIG8odCxlKSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnNvdXJjZSxyPXQucXVldWUscz1lLnNjaGVkdWxlcixpPWUuZGVzdGluYXRpb247ci5sZW5ndGg+MCYmclswXS50aW1lLXMubm93KCk8PTA7KXIuc2hpZnQoKS5ub3RpZmljYXRpb24ub2JzZXJ2ZShpKTtpZihyLmxlbmd0aD4wKXt2YXIgbz1NYXRoLm1heCgwLHJbMF0udGltZS1zLm5vdygpKTt0aGlzLnNjaGVkdWxlKGUsbyl9ZWxzZSB0LmFjdGl2ZT0hMX0sdC5wcm90b3R5cGUuX3NjaGVkdWxlPWZ1bmN0aW9uKGUpe3RoaXMuYWN0aXZlPSEwLHRoaXMuYWRkKGUuc2NoZWR1bGUodC5kaXNwYXRjaCx0aGlzLmRlbGF5LHtzb3VyY2U6dGhpcyxkZXN0aW5hdGlvbjp0aGlzLmRlc3RpbmF0aW9uLHNjaGVkdWxlcjplfSkpfSx0LnByb3RvdHlwZS5zY2hlZHVsZU5vdGlmaWNhdGlvbj1mdW5jdGlvbihlKXtpZih0aGlzLmVycm9yZWQhPT0hMCl7dmFyIHQ9dGhpcy5zY2hlZHVsZXIscj1uZXcgcCh0Lm5vdygpK3RoaXMuZGVsYXksZSk7dGhpcy5xdWV1ZS5wdXNoKHIpLHRoaXMuYWN0aXZlPT09ITEmJnRoaXMuX3NjaGVkdWxlKHQpfX0sdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5zY2hlZHVsZU5vdGlmaWNhdGlvbihjLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KGUpKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZXJyb3JlZD0hMCx0aGlzLnF1ZXVlPVtdLHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuc2NoZWR1bGVOb3RpZmljYXRpb24oYy5Ob3RpZmljYXRpb24uY3JlYXRlQ29tcGxldGUoKSl9LHR9KHUuU3Vic2NyaWJlcikscD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnRpbWU9ZSx0aGlzLm5vdGlmaWNhdGlvbj10fXJldHVybiBlfSgpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZGVsYXlXaGVuXCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdD9uZXcgcCh0aGlzLHQpLmxpZnQobmV3IGwoZSkpOnRoaXMubGlmdChuZXcgbChlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSx1PXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5kZWxheVdoZW49cjt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3I9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGIoZSx0aGlzLmRlbGF5RHVyYXRpb25TZWxlY3RvcikpfSxlfSgpLGI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMuZGVsYXlEdXJhdGlvblNlbGVjdG9yPXIsdGhpcy5jb21wbGV0ZWQ9ITEsdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucz1bXSx0aGlzLnZhbHVlcz1bXX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSksdGhpcy5yZW1vdmVTdWJzY3JpcHRpb24oaSksdGhpcy50cnlDb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlLHQpe3RoaXMuX2Vycm9yKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlbW92ZVN1YnNjcmlwdGlvbihlKTt0JiZ0aGlzLmRlc3RpbmF0aW9uLm5leHQodCksdGhpcy50cnlDb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9dGhpcy5kZWxheUR1cmF0aW9uU2VsZWN0b3IoZSk7dCYmdGhpcy50cnlEZWxheSh0LGUpfWNhdGNoKHIpe3RoaXMuZGVzdGluYXRpb24uZXJyb3Iocil9fSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmNvbXBsZXRlZD0hMCx0aGlzLnRyeUNvbXBsZXRlKCl9LHQucHJvdG90eXBlLnJlbW92ZVN1YnNjcmlwdGlvbj1mdW5jdGlvbihlKXtlLnVuc3Vic2NyaWJlKCk7dmFyIHQ9dGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5pbmRleE9mKGUpLHI9bnVsbDtyZXR1cm4tMSE9PXQmJihyPXRoaXMudmFsdWVzW3RdLHRoaXMuZGVsYXlOb3RpZmllclN1YnNjcmlwdGlvbnMuc3BsaWNlKHQsMSksdGhpcy52YWx1ZXMuc3BsaWNlKHQsMSkpLHJ9LHQucHJvdG90eXBlLnRyeURlbGF5PWZ1bmN0aW9uKGUsdCl7dmFyIHI9Yy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdCk7dGhpcy5hZGQociksdGhpcy5kZWxheU5vdGlmaWVyU3Vic2NyaXB0aW9ucy5wdXNoKHIpLHRoaXMudmFsdWVzLnB1c2godCl9LHQucHJvdG90eXBlLnRyeUNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZWQmJjA9PT10aGlzLmRlbGF5Tm90aWZpZXJTdWJzY3JpcHRpb25zLmxlbmd0aCYmdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0fSh1Lk91dGVyU3Vic2NyaWJlcikscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMpLHRoaXMuc291cmNlPXQsdGhpcy5zdWJzY3JpcHRpb25EZWxheT1yfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt0aGlzLnN1YnNjcmlwdGlvbkRlbGF5LnN1YnNjcmliZShuZXcgaChlLHRoaXMuc291cmNlKSl9LHR9KGEuT2JzZXJ2YWJsZSksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMpLHRoaXMucGFyZW50PXQsdGhpcy5zb3VyY2U9cix0aGlzLnNvdXJjZVN1YnNjcmliZWQ9ITF9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnN1YnNjcmliZVRvU291cmNlKCl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5wYXJlbnQuZXJyb3IoZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuc3Vic2NyaWJlVG9Tb3VyY2UoKX0sdC5wcm90b3R5cGUuc3Vic2NyaWJlVG9Tb3VyY2U9ZnVuY3Rpb24oKXt0aGlzLnNvdXJjZVN1YnNjcmliZWR8fCh0aGlzLnNvdXJjZVN1YnNjcmliZWQ9ITAsdGhpcy51bnN1YnNjcmliZSgpLHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzLnBhcmVudCkpfSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RcIixbXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIHRoaXMubGlmdChuZXcgdShlLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5kaXN0aW5jdD1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY29tcGFyZT1lLHRoaXMuZmx1c2hlcz10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMuY29tcGFyZSx0aGlzLmZsdXNoZXMpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMudmFsdWVzPVtdLFwiZnVuY3Rpb25cIj09dHlwZW9mIHImJih0aGlzLmNvbXBhcmU9cikscyYmdGhpcy5hZGQoYS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHMpKX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLnZhbHVlcy5sZW5ndGg9MH0sdC5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLl9lcnJvcihlKX0sdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ITEscj10aGlzLnZhbHVlcyxzPXIubGVuZ3RoO3RyeXtmb3IodmFyIGk9MDtzPmk7aSsrKWlmKHRoaXMuY29tcGFyZShyW2ldLGUpKXJldHVybiB2b2lkKHQ9ITApfWNhdGNoKG8pe3JldHVybiB2b2lkIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iobyl9dGhpcy52YWx1ZXMucHVzaChlKSx0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9LHQucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gZS5EaXN0aW5jdFN1YnNjcmliZXI9YyxzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RLZXlcIixbXCJyeGpzL29wZXJhdG9yL2Rpc3RpbmN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gby5kaXN0aW5jdC5jYWxsKHRoaXMsZnVuY3Rpb24ocixzKXtyZXR1cm4gdD90KHJbZV0sc1tlXSk6cltlXT09PXNbZV19LHIpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RcIik7cmV0dXJuIGUuZGlzdGluY3RLZXk9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWRcIixbXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvdXRpbC90cnlDYXRjaFwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIHRoaXMubGlmdChuZXcgYyhlLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL3RyeUNhdGNoXCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiKTtlLmRpc3RpbmN0VW50aWxDaGFuZ2VkPXI7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5jb21wYXJlPWUsdGhpcy5rZXlTZWxlY3Rvcj10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMuY29tcGFyZSx0aGlzLmtleVNlbGVjdG9yKSl9LGV9KCksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLmtleVNlbGVjdG9yPXMsdGhpcy5oYXNLZXk9ITEsXCJmdW5jdGlvblwiPT10eXBlb2YgciYmKHRoaXMuY29tcGFyZT1yKX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT09PXR9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMua2V5U2VsZWN0b3Iscj1lO2lmKHQmJihyPWEudHJ5Q2F0Y2godGhpcy5rZXlTZWxlY3RvcikoZSkscj09PXUuZXJyb3JPYmplY3QpKXJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHUuZXJyb3JPYmplY3QuZSk7dmFyIHM9ITE7aWYodGhpcy5oYXNLZXkpe2lmKHM9YS50cnlDYXRjaCh0aGlzLmNvbXBhcmUpKHRoaXMua2V5LHIpLHM9PT11LmVycm9yT2JqZWN0KXJldHVybiB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHUuZXJyb3JPYmplY3QuZSl9ZWxzZSB0aGlzLmhhc0tleT0hMDtCb29sZWFuKHMpPT09ITEmJih0aGlzLmtleT1yLHRoaXMuZGVzdGluYXRpb24ubmV4dChlKSl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsS2V5Q2hhbmdlZFwiLFtcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RVbnRpbENoYW5nZWRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gby5kaXN0aW5jdFVudGlsQ2hhbmdlZC5jYWxsKHRoaXMsZnVuY3Rpb24ocixzKXtyZXR1cm4gdD90KHJbZV0sc1tlXSk6cltlXT09PXNbZV19KX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkXCIpO3JldHVybiBlLmRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2RvXCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKGUsdCxyKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuX2RvPXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLm5leHRPck9ic2VydmVyPWUsdGhpcy5lcnJvcj10LHRoaXMuY29tcGxldGU9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLm5leHRPck9ic2VydmVyLHRoaXMuZXJyb3IsdGhpcy5jb21wbGV0ZSkpfSxlfSgpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpKXtlLmNhbGwodGhpcyx0KTt2YXIgbz1uZXcgbi5TdWJzY3JpYmVyKHIscyxpKTtvLnN5bmNFcnJvclRocm93YWJsZT0hMCx0aGlzLmFkZChvKSx0aGlzLnNhZmVTdWJzY3JpYmVyPW99cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnNhZmVTdWJzY3JpYmVyO3QubmV4dChlKSx0LnN5bmNFcnJvclRocm93bj90aGlzLmRlc3RpbmF0aW9uLmVycm9yKHQuc3luY0Vycm9yVmFsdWUpOnRoaXMuZGVzdGluYXRpb24ubmV4dChlKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuc2FmZVN1YnNjcmliZXI7dC5lcnJvcihlKSx0LnN5bmNFcnJvclRocm93bj90aGlzLmRlc3RpbmF0aW9uLmVycm9yKHQuc3luY0Vycm9yVmFsdWUpOnRoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc2FmZVN1YnNjcmliZXI7ZS5jb21wbGV0ZSgpLGUuc3luY0Vycm9yVGhyb3duP3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZS5zeW5jRXJyb3JWYWx1ZSk6dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZXhoYXVzdFwiLFtcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5leGhhdXN0PXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlKSl9LGV9KCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzLHQpLHRoaXMuaGFzQ29tcGxldGVkPSExLHRoaXMuaGFzU3Vic2NyaXB0aW9uPSExfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5oYXNTdWJzY3JpcHRpb258fCh0aGlzLmhhc1N1YnNjcmlwdGlvbj0hMCx0aGlzLmFkZChhLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSkpKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9ITAsdGhpcy5oYXNTdWJzY3JpcHRpb258fHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmUoZSksdGhpcy5oYXNTdWJzY3JpcHRpb249ITEsdGhpcy5oYXNDb21wbGV0ZWQmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZXhoYXVzdE1hcFwiLFtcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUsdCkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtlLmV4aGF1c3RNYXA9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByb2plY3Q9ZSx0aGlzLnJlc3VsdFNlbGVjdG9yPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5wcm9qZWN0LHRoaXMucmVzdWx0U2VsZWN0b3IpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJvamVjdD1yLHRoaXMucmVzdWx0U2VsZWN0b3I9cyx0aGlzLmhhc1N1YnNjcmlwdGlvbj0hMSx0aGlzLmhhc0NvbXBsZXRlZD0hMSx0aGlzLmluZGV4PTB9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmhhc1N1YnNjcmlwdGlvbnx8dGhpcy50cnlOZXh0KGUpfSx0LnByb3RvdHlwZS50cnlOZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaW5kZXgrKyxyPXRoaXMuZGVzdGluYXRpb247dHJ5e3ZhciBzPXRoaXMucHJvamVjdChlLHQpO3RoaXMuaGFzU3Vic2NyaXB0aW9uPSEwLHRoaXMuYWRkKGEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxzLGUsdCkpfWNhdGNoKGkpe3IuZXJyb3IoaSl9fSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmhhc0NvbXBsZXRlZD0hMCx0aGlzLmhhc1N1YnNjcmlwdGlvbnx8dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dmFyIG89dGhpcyxuPW8ucmVzdWx0U2VsZWN0b3IsYT1vLmRlc3RpbmF0aW9uO24/dGhpcy50cnlTZWxlY3RSZXN1bHQoZSx0LHIscyk6YS5uZXh0KHQpfSx0LnByb3RvdHlwZS50cnlTZWxlY3RSZXN1bHQ9ZnVuY3Rpb24oZSx0LHIscyl7dmFyIGk9dGhpcyxvPWkucmVzdWx0U2VsZWN0b3Isbj1pLmRlc3RpbmF0aW9uO3RyeXt2YXIgYT1vKGUsdCxyLHMpO24ubmV4dChhKX1jYXRjaCh1KXtuLmVycm9yKHUpfX0sdC5wcm90b3R5cGUubm90aWZ5RXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmUoZSksdGhpcy5oYXNTdWJzY3JpcHRpb249ITEsdGhpcy5oYXNDb21wbGV0ZWQmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZXhwYW5kXCIsW1wicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0LHIpe3JldHVybiB2b2lkIDA9PT10JiYodD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHZvaWQgMD09PXImJihyPXZvaWQgMCksdD0xPih0fHwwKT9OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk6dCx0aGlzLmxpZnQobmV3IGwoZSx0LHIpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL3V0aWwvdHJ5Q2F0Y2hcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIpLHU9cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGM9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtlLmV4cGFuZD1yO3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5wcm9qZWN0PWUsdGhpcy5jb25jdXJyZW50PXQsdGhpcy5zY2hlZHVsZXI9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGIoZSx0aGlzLnByb2plY3QsdGhpcy5jb25jdXJyZW50LHRoaXMuc2NoZWR1bGVyKSl9LGV9KCk7ZS5FeHBhbmRPcGVyYXRvcj1sO3ZhciBiPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7ZS5jYWxsKHRoaXMsdCksdGhpcy5wcm9qZWN0PXIsdGhpcy5jb25jdXJyZW50PXMsdGhpcy5zY2hlZHVsZXI9aSx0aGlzLmluZGV4PTAsdGhpcy5hY3RpdmU9MCx0aGlzLmhhc0NvbXBsZXRlZD0hMSxzPE51bWJlci5QT1NJVElWRV9JTkZJTklUWSYmKHRoaXMuYnVmZmVyPVtdKX1yZXR1cm4gbyh0LGUpLHQuZGlzcGF0Y2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5yZXN1bHQscz1lLnZhbHVlLGk9ZS5pbmRleDt0LnN1YnNjcmliZVRvUHJvamVjdGlvbihyLHMsaSl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciByPXRoaXMuZGVzdGluYXRpb247aWYoci5pc1Vuc3Vic2NyaWJlZClyZXR1cm4gdm9pZCB0aGlzLl9jb21wbGV0ZSgpO3ZhciBzPXRoaXMuaW5kZXgrKztpZih0aGlzLmFjdGl2ZTx0aGlzLmNvbmN1cnJlbnQpe3IubmV4dChlKTt2YXIgaT1uLnRyeUNhdGNoKHRoaXMucHJvamVjdCkoZSxzKTtpZihpPT09YS5lcnJvck9iamVjdClyLmVycm9yKGEuZXJyb3JPYmplY3QuZSk7ZWxzZSBpZih0aGlzLnNjaGVkdWxlcil7dmFyIG89e3N1YnNjcmliZXI6dGhpcyxyZXN1bHQ6aSx2YWx1ZTplLGluZGV4OnN9O3RoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHQuZGlzcGF0Y2gsMCxvKSl9ZWxzZSB0aGlzLnN1YnNjcmliZVRvUHJvamVjdGlvbihpLGUscyl9ZWxzZSB0aGlzLmJ1ZmZlci5wdXNoKGUpfSx0LnByb3RvdHlwZS5zdWJzY3JpYmVUb1Byb2plY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3RoaXMuYWN0aXZlKyssdGhpcy5hZGQoYy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdCxyKSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkPSEwLHRoaXMuaGFzQ29tcGxldGVkJiYwPT09dGhpcy5hY3RpdmUmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3RoaXMuX25leHQodCl9LHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyO3RoaXMucmVtb3ZlKGUpLHRoaXMuYWN0aXZlLS0sdCYmdC5sZW5ndGg+MCYmdGhpcy5fbmV4dCh0LnNoaWZ0KCkpLHRoaXMuaGFzQ29tcGxldGVkJiYwPT09dGhpcy5hY3RpdmUmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0odS5PdXRlclN1YnNjcmliZXIpO3JldHVybiBlLkV4cGFuZFN1YnNjcmliZXI9YixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmNhbGwodGhpcyxcImFyZ3VtZW50IG91dCBvZiByYW5nZVwiKSx0aGlzLm5hbWU9XCJBcmd1bWVudE91dE9mUmFuZ2VFcnJvclwifXJldHVybiBpKHQsZSksdH0oRXJyb3IpO3JldHVybiBlLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yPW8sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2ZpbHRlclwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0aGlzLmxpZnQobmV3IGEoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuZmlsdGVyPXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5wcmVkaWNhdGU9ZSx0aGlzLnRoaXNBcmc9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnByZWRpY2F0ZSx0aGlzLnRoaXNBcmcpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJlZGljYXRlPXIsdGhpcy50aGlzQXJnPXMsdGhpcy5jb3VudD0wLHRoaXMucHJlZGljYXRlPXJ9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnByZWRpY2F0ZS5jYWxsKHRoaXMudGhpc0FyZyxlLHRoaXMuY291bnQrKyl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihyKX10JiZ0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9maW5hbGx5XCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL1N1YnNjcmlwdGlvblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpcHRpb25cIik7ZS5fZmluYWxseT1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNhbGxiYWNrPWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5jYWxsYmFjaykpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMuYWRkKG5ldyBhLlN1YnNjcmlwdGlvbihyKSl9cmV0dXJuIG8odCxlKSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZmluZFwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcInByZWRpY2F0ZSBpcyBub3QgYSBmdW5jdGlvblwiKTtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKGUsdGhpcywhMSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuZmluZD1yO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixzKXt0aGlzLnByZWRpY2F0ZT1lLHRoaXMuc291cmNlPXQsdGhpcy55aWVsZEluZGV4PXIsdGhpcy50aGlzQXJnPXN9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5wcmVkaWNhdGUsdGhpcy5zb3VyY2UsdGhpcy55aWVsZEluZGV4LHRoaXMudGhpc0FyZykpfSxlfSgpO2UuRmluZFZhbHVlT3BlcmF0b3I9YTt2YXIgdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzLGksbyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5wcmVkaWNhdGU9cix0aGlzLnNvdXJjZT1zLHRoaXMueWllbGRJbmRleD1pLHRoaXMudGhpc0FyZz1vLHRoaXMuaW5kZXg9MH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVzdGluYXRpb247dC5uZXh0KGUpLHQuY29tcGxldGUoKX0sdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXQucHJlZGljYXRlLHM9dC50aGlzQXJnLGk9dGhpcy5pbmRleCsrO3RyeXt2YXIgbz1yLmNhbGwoc3x8dGhpcyxlLGksdGhpcy5zb3VyY2UpO28mJnRoaXMubm90aWZ5Q29tcGxldGUodGhpcy55aWVsZEluZGV4P2k6ZSl9Y2F0Y2gobil7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihuKX19LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMubm90aWZ5Q29tcGxldGUodGhpcy55aWVsZEluZGV4Py0xOnZvaWQgMCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIGUuRmluZFZhbHVlU3Vic2NyaWJlcj11LHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9maW5kSW5kZXhcIixbXCJyeGpzL29wZXJhdG9yL2ZpbmRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBvLkZpbmRWYWx1ZU9wZXJhdG9yKGUsdGhpcywhMCx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9maW5kXCIpO3JldHVybiBlLmZpbmRJbmRleD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL0VtcHR5RXJyb3JcIixbXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZS5jYWxsKHRoaXMsXCJubyBlbGVtZW50cyBpbiBzZXF1ZW5jZVwiKSx0aGlzLm5hbWU9XCJFbXB0eUVycm9yXCJ9cmV0dXJuIGkodCxlKSx0fShFcnJvcik7cmV0dXJuIGUuRW1wdHlFcnJvcj1vLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL01hcFBvbHlmaWxsXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zaXplPTAsdGhpcy5fdmFsdWVzPVtdLHRoaXMuX2tleXM9W119cmV0dXJuIGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9rZXlzLmluZGV4T2YoZSk7cmV0dXJuLTE9PT10P3ZvaWQgMDp0aGlzLl92YWx1ZXNbdF19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2tleXMuaW5kZXhPZihlKTtyZXR1cm4tMT09PXI/KHRoaXMuX2tleXMucHVzaChlKSx0aGlzLl92YWx1ZXMucHVzaCh0KSx0aGlzLnNpemUrKyk6dGhpcy5fdmFsdWVzW3JdPXQsdGhpc30sZS5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fa2V5cy5pbmRleE9mKGUpO3JldHVybi0xPT09dD8hMToodGhpcy5fdmFsdWVzLnNwbGljZSh0LDEpLHRoaXMuX2tleXMuc3BsaWNlKHQsMSksdGhpcy5zaXplLS0sITApfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2tleXMubGVuZ3RoPTAsdGhpcy5fdmFsdWVzLmxlbmd0aD0wLHRoaXMuc2l6ZT0wfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTA7cjx0aGlzLnNpemU7cisrKWUuY2FsbCh0LHRoaXMuX3ZhbHVlc1tyXSx0aGlzLl9rZXlzW3JdKX0sZX0oKTtyZXR1cm4gZS5NYXBQb2x5ZmlsbD1pLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL0Zhc3RNYXBcIixbXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLnZhbHVlcz17fX1yZXR1cm4gZS5wcm90b3R5cGVbXCJkZWxldGVcIl09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMudmFsdWVzW2VdPW51bGwsITB9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnZhbHVlc1tlXT10LHRoaXN9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy52YWx1ZXNbZV19LGUucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLnZhbHVlcztmb3IodmFyIHMgaW4gcilyLmhhc093blByb3BlcnR5KHMpJiZudWxsIT09cltzXSYmZS5jYWxsKHQscltzXSxzKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnZhbHVlcz17fX0sZX0oKTtyZXR1cm4gZS5GYXN0TWFwPWksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzXCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvbm9vcFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe3JldHVybiB0aGlzLmxpZnQobmV3IHUpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvbm9vcFwiKTtlLmlnbm9yZUVsZW1lbnRzPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlKSl9LGV9KCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXthLm5vb3AoKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2lzRW1wdHlcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIik7ZS5pc0VtcHR5PXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlKSl9LGV9KCksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzLHQpfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0Lm5leHQoZSksdC5jb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLm5vdGlmeUNvbXBsZXRlKCExKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5ub3RpZnlDb21wbGV0ZSghMCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9hdWRpdFwiLFtcInJ4anMvdXRpbC90cnlDYXRjaFwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGwoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksdT1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYz1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2UuYXVkaXQ9cjt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5kdXJhdGlvblNlbGVjdG9yPWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBiKGUsdGhpcy5kdXJhdGlvblNlbGVjdG9yKSl9LGV9KCksYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5kdXJhdGlvblNlbGVjdG9yPXIsdGhpcy5oYXNWYWx1ZT0hMX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMudmFsdWU9ZSx0aGlzLmhhc1ZhbHVlPSEwLCF0aGlzLnRocm90dGxlZCl7dmFyIHQ9bi50cnlDYXRjaCh0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKGUpO3Q9PT1hLmVycm9yT2JqZWN0P3RoaXMuZGVzdGluYXRpb24uZXJyb3IoYS5lcnJvck9iamVjdC5lKTp0aGlzLmFkZCh0aGlzLnRocm90dGxlZD1jLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsdCkpfX0sdC5wcm90b3R5cGUuY2xlYXJUaHJvdHRsZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1lLnZhbHVlLHI9ZS5oYXNWYWx1ZSxzPWUudGhyb3R0bGVkO3MmJih0aGlzLnJlbW92ZShzKSx0aGlzLnRocm90dGxlZD1udWxsLHMudW5zdWJzY3JpYmUoKSksciYmKHRoaXMudmFsdWU9bnVsbCx0aGlzLmhhc1ZhbHVlPSExLHRoaXMuZGVzdGluYXRpb24ubmV4dCh0KSl9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyl7dGhpcy5jbGVhclRocm90dGxlKCl9LHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5jbGVhclRocm90dGxlKCl9LHR9KHUuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2F1ZGl0VGltZVwiLFtcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIsXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9YS5hc3luYyksdGhpcy5saWZ0KG5ldyBjKGUsdCkpfWZ1bmN0aW9uIHMoZSl7ZS5jbGVhclRocm90dGxlKCl9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sYT1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIiksdT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuYXVkaXRUaW1lPXI7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5kdXJhdGlvbj1lLHRoaXMuc2NoZWR1bGVyPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBsKGUsdGhpcy5kdXJhdGlvbix0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5kdXJhdGlvbj1yLHRoaXMuc2NoZWR1bGVyPXMsdGhpcy5oYXNWYWx1ZT0hMX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWU9ZSx0aGlzLmhhc1ZhbHVlPSEwLHRoaXMudGhyb3R0bGVkfHx0aGlzLmFkZCh0aGlzLnRocm90dGxlZD10aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzLHRoaXMuZHVyYXRpb24sdGhpcykpfSx0LnByb3RvdHlwZS5jbGVhclRocm90dGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUudmFsdWUscj1lLmhhc1ZhbHVlLHM9ZS50aHJvdHRsZWQ7cyYmKHRoaXMucmVtb3ZlKHMpLHRoaXMudGhyb3R0bGVkPW51bGwscy51bnN1YnNjcmliZSgpKSxyJiYodGhpcy52YWx1ZT1udWxsLHRoaXMuaGFzVmFsdWU9ITEsdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpKX0sdH0odS5TdWJzY3JpYmVyKTtyZXR1cm4gaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2xhc3RcIixbXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvdXRpbC9FbXB0eUVycm9yXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUsdCxyLHRoaXMpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO1xudmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvRW1wdHlFcnJvclwiKTtlLmxhc3Q9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy5wcmVkaWNhdGU9ZSx0aGlzLnJlc3VsdFNlbGVjdG9yPXQsdGhpcy5kZWZhdWx0VmFsdWU9cix0aGlzLnNvdXJjZT1zfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMucHJlZGljYXRlLHRoaXMucmVzdWx0U2VsZWN0b3IsdGhpcy5kZWZhdWx0VmFsdWUsdGhpcy5zb3VyY2UpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSxvKXtlLmNhbGwodGhpcyx0KSx0aGlzLnByZWRpY2F0ZT1yLHRoaXMucmVzdWx0U2VsZWN0b3I9cyx0aGlzLmRlZmF1bHRWYWx1ZT1pLHRoaXMuc291cmNlPW8sdGhpcy5oYXNWYWx1ZT0hMSx0aGlzLmluZGV4PTAsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGkmJih0aGlzLmxhc3RWYWx1ZT1pLHRoaXMuaGFzVmFsdWU9ITApfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbmRleCsrO2lmKHRoaXMucHJlZGljYXRlKXRoaXMuX3RyeVByZWRpY2F0ZShlLHQpO2Vsc2V7aWYodGhpcy5yZXN1bHRTZWxlY3RvcilyZXR1cm4gdm9pZCB0aGlzLl90cnlSZXN1bHRTZWxlY3RvcihlLHQpO3RoaXMubGFzdFZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMH19LHQucHJvdG90eXBlLl90cnlQcmVkaWNhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcjt0cnl7cj10aGlzLnByZWRpY2F0ZShlLHQsdGhpcy5zb3VyY2UpfWNhdGNoKHMpe3JldHVybiB2b2lkIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iocyl9aWYocil7aWYodGhpcy5yZXN1bHRTZWxlY3RvcilyZXR1cm4gdm9pZCB0aGlzLl90cnlSZXN1bHRTZWxlY3RvcihlLHQpO3RoaXMubGFzdFZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMH19LHQucHJvdG90eXBlLl90cnlSZXN1bHRTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe3ZhciByO3RyeXtyPXRoaXMucmVzdWx0U2VsZWN0b3IoZSx0KX1jYXRjaChzKXtyZXR1cm4gdm9pZCB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHMpfXRoaXMubGFzdFZhbHVlPXIsdGhpcy5oYXNWYWx1ZT0hMH0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZXN0aW5hdGlvbjt0aGlzLmhhc1ZhbHVlPyhlLm5leHQodGhpcy5sYXN0VmFsdWUpLGUuY29tcGxldGUoKSk6ZS5lcnJvcihuZXcgYS5FbXB0eUVycm9yKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2xldFwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiBlKHRoaXMpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtyZXR1cm4gcy5kZWZpbmU9dm9pZCAwLGUubGV0UHJvdG89cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZXZlcnlcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKGUsdCx0aGlzKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuZXZlcnk9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMucHJlZGljYXRlPWUsdGhpcy50aGlzQXJnPXQsdGhpcy5zb3VyY2U9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnByZWRpY2F0ZSx0aGlzLnRoaXNBcmcsdGhpcy5zb3VyY2UpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7ZS5jYWxsKHRoaXMsdCksdGhpcy5wcmVkaWNhdGU9cix0aGlzLnRoaXNBcmc9cyx0aGlzLnNvdXJjZT1pLHRoaXMuaW5kZXg9MCx0aGlzLnRoaXNBcmc9c3x8dGhpc31yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChlKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PSExO3RyeXt0PXRoaXMucHJlZGljYXRlLmNhbGwodGhpcy50aGlzQXJnLGUsdGhpcy5pbmRleCsrLHRoaXMuc291cmNlKX1jYXRjaChyKXtyZXR1cm4gdm9pZCB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHIpfXR8fHRoaXMubm90aWZ5Q29tcGxldGUoITEpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLm5vdGlmeUNvbXBsZXRlKCEwKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL21hcFwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcImFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uLiBBcmUgeW91IGxvb2tpbmcgZm9yIGBtYXBUbygpYD9cIik7cmV0dXJuIHRoaXMubGlmdChuZXcgYShlLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIik7ZS5tYXA9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByb2plY3Q9ZSx0aGlzLnRoaXNBcmc9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnByb2plY3QsdGhpcy50aGlzQXJnKSl9LGV9KCksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLnByb2plY3Q9cix0aGlzLmNvdW50PTAsdGhpcy50aGlzQXJnPXN8fHRoaXN9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnByb2plY3QuY2FsbCh0aGlzLnRoaXNBcmcsZSx0aGlzLmNvdW50KyspfWNhdGNoKHIpe3JldHVybiB2b2lkIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iocil9dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbWFwVG9cIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHRoaXMubGlmdChuZXcgYShlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UubWFwVG89cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy52YWx1ZT1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlLHRoaXMudmFsdWUpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLnZhbHVlPXJ9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy52YWx1ZSl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9Ob3RpZmljYXRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy9Ob3RpZmljYXRpb25cIik7ZS5tYXRlcmlhbGl6ZT1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSkpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyx0KX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChhLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KGUpKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVzdGluYXRpb247dC5uZXh0KGEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKGUpKSx0LmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGVzdGluYXRpb247ZS5uZXh0KGEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCkpLGUuY29tcGxldGUoKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3JlZHVjZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0aGlzLmxpZnQobmV3IGEoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UucmVkdWNlPXI7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5hY2N1bXVsYXRvcj1lLHRoaXMuc2VlZD10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlLHRoaXMuYWNjdW11bGF0b3IsdGhpcy5zZWVkKSl9LGV9KCk7ZS5SZWR1Y2VPcGVyYXRvcj1hO3ZhciB1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuYWNjdW11bGF0b3I9cix0aGlzLmhhc1ZhbHVlPSExLHRoaXMuYWNjPXMsdGhpcy5hY2N1bXVsYXRvcj1yLHRoaXMuaGFzU2VlZD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygc31yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuaGFzVmFsdWV8fCh0aGlzLmhhc1ZhbHVlPXRoaXMuaGFzU2VlZCk/dGhpcy5fdHJ5UmVkdWNlKGUpOih0aGlzLmFjYz1lLHRoaXMuaGFzVmFsdWU9ITApfSx0LnByb3RvdHlwZS5fdHJ5UmVkdWNlPWZ1bmN0aW9uKGUpe3ZhciB0O3RyeXt0PXRoaXMuYWNjdW11bGF0b3IodGhpcy5hY2MsZSl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihyKX10aGlzLmFjYz10fSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXsodGhpcy5oYXNWYWx1ZXx8dGhpcy5oYXNTZWVkKSYmdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIGUuUmVkdWNlU3Vic2NyaWJlcj11LHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvbWVyZ2VcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21lcmdlXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLm1lcmdlPW8ubWVyZ2Usci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZUFsbFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9tZXJnZUFsbFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvbWVyZ2VBbGxcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VBbGw9by5tZXJnZUFsbCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL21lcmdlTWFwXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZU1hcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcD1vLm1lcmdlTWFwLGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcD1vLm1lcmdlTWFwLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXBUb1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9tZXJnZU1hcFRvXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZU1hcFRvXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmZsYXRNYXBUbz1vLm1lcmdlTWFwVG8saS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZU1hcFRvPW8ubWVyZ2VNYXBUbyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbWVyZ2VTY2FuXCIsW1wicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiLFwicnhqcy9PdXRlclN1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHRoaXMubGlmdChuZXcgbChlLHQscikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpLGM9cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpO2UubWVyZ2VTY2FuPXI7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLnByb2plY3Q9ZSx0aGlzLnNlZWQ9dCx0aGlzLmNvbmN1cnJlbnQ9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGIoZSx0aGlzLnByb2plY3QsdGhpcy5zZWVkLHRoaXMuY29uY3VycmVudCkpfSxlfSgpO2UuTWVyZ2VTY2FuT3BlcmF0b3I9bDt2YXIgYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzLGkpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJvamVjdD1yLHRoaXMuYWNjPXMsdGhpcy5jb25jdXJyZW50PWksdGhpcy5oYXNWYWx1ZT0hMSx0aGlzLmhhc0NvbXBsZXRlZD0hMSx0aGlzLmJ1ZmZlcj1bXSx0aGlzLmFjdGl2ZT0wLHRoaXMuaW5kZXg9MH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuYWN0aXZlPHRoaXMuY29uY3VycmVudCl7dmFyIHQ9dGhpcy5pbmRleCsrLHI9bi50cnlDYXRjaCh0aGlzLnByb2plY3QpKHRoaXMuYWNjLGUpLHM9dGhpcy5kZXN0aW5hdGlvbjtyPT09YS5lcnJvck9iamVjdD9zLmVycm9yKGEuZXJyb3JPYmplY3QuZSk6KHRoaXMuYWN0aXZlKyssdGhpcy5faW5uZXJTdWIocixlLHQpKX1lbHNlIHRoaXMuYnVmZmVyLnB1c2goZSl9LHQucHJvdG90eXBlLl9pbm5lclN1Yj1mdW5jdGlvbihlLHQscil7dGhpcy5hZGQodS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUsdCxyKSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaGFzQ29tcGxldGVkPSEwLDA9PT10aGlzLmFjdGl2ZSYmMD09PXRoaXMuYnVmZmVyLmxlbmd0aCYmKHRoaXMuaGFzVmFsdWU9PT0hMSYmdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYWNjKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCkpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dmFyIG89dGhpcy5kZXN0aW5hdGlvbjt0aGlzLmFjYz10LHRoaXMuaGFzVmFsdWU9ITAsby5uZXh0KHQpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmJ1ZmZlcjt0aGlzLnJlbW92ZShlKSx0aGlzLmFjdGl2ZS0tLHQubGVuZ3RoPjA/dGhpcy5fbmV4dCh0LnNoaWZ0KCkpOjA9PT10aGlzLmFjdGl2ZSYmdGhpcy5oYXNDb21wbGV0ZWQmJih0aGlzLmhhc1ZhbHVlPT09ITEmJnRoaXMuZGVzdGluYXRpb24ubmV4dCh0aGlzLmFjYyksdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpKX0sdH0oYy5PdXRlclN1YnNjcmliZXIpO3JldHVybiBlLk1lcmdlU2NhblN1YnNjcmliZXI9YixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbWluXCIsW1wicnhqcy9vcGVyYXRvci9yZWR1Y2VcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7dmFyIHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgZT9lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ+ZT9lOnR9O3JldHVybiB0aGlzLmxpZnQobmV3IG8uUmVkdWNlT3BlcmF0b3IodCkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvcmVkdWNlXCIpO3JldHVybiBlLm1pbj1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL011bHRpY2FzdE9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzKSx0aGlzLnNvdXJjZT10LHRoaXMuY29ubmVjdGFibGU9cix0aGlzLnNlbGVjdG9yPXN9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LnNlbGVjdG9yLHM9dC5jb25uZWN0YWJsZSxpPXIocykuc3Vic2NyaWJlKGUpO3JldHVybiBpLmFkZChzLmNvbm5lY3QoKSksaX0sdH0oby5PYnNlcnZhYmxlKTtyZXR1cm4gZS5NdWx0aWNhc3RPYnNlcnZhYmxlPW4sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvQ29ubmVjdGFibGVPYnNlcnZhYmxlXCIsW1wicnhqcy9TdWJqZWN0XCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9TdWJzY3JpcHRpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksYT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLHU9cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzKSx0aGlzLnNvdXJjZT10LHRoaXMuc3ViamVjdEZhY3Rvcnk9cix0aGlzLl9yZWZDb3VudD0wfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRTdWJqZWN0KCkuc3Vic2NyaWJlKGUpfSx0LnByb3RvdHlwZS5nZXRTdWJqZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3ViamVjdDtyZXR1cm4gZSYmIWUuaXNTdG9wcGVkfHwodGhpcy5fc3ViamVjdD10aGlzLnN1YmplY3RGYWN0b3J5KCkpLHRoaXMuX3N1YmplY3R9LHQucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb25uZWN0aW9uO3JldHVybiBlfHwoZT10aGlzLl9jb25uZWN0aW9uPW5ldyB1LlN1YnNjcmlwdGlvbixlLmFkZCh0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IGwodGhpcy5nZXRTdWJqZWN0KCksdGhpcykpKSxlLmlzVW5zdWJzY3JpYmVkPyh0aGlzLl9jb25uZWN0aW9uPW51bGwsZT11LlN1YnNjcmlwdGlvbi5FTVBUWSk6dGhpcy5fY29ubmVjdGlvbj1lKSxlfSx0LnByb3RvdHlwZS5yZWZDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpZnQobmV3IGIodGhpcykpfSx0fShuLk9ic2VydmFibGUpO2UuQ29ubmVjdGFibGVPYnNlcnZhYmxlPWM7dmFyIGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMuY29ubmVjdGFibGU9cn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbih0KXt0aGlzLl91bnN1YnNjcmliZSgpLGUucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuX3Vuc3Vic2NyaWJlKCksZS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29ubmVjdGFibGU7aWYoZSl7dGhpcy5jb25uZWN0YWJsZT1udWxsO3ZhciB0PWUuX2Nvbm5lY3Rpb247ZS5fcmVmQ291bnQ9MCxlLl9zdWJqZWN0PW51bGwsZS5fY29ubmVjdGlvbj1udWxsLHQmJnQudW5zdWJzY3JpYmUoKX19LHR9KG8uU3ViamVjdFN1YnNjcmliZXIpLGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY29ubmVjdGFibGU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuY29ubmVjdGFibGU7ci5fcmVmQ291bnQrKzt2YXIgcz1uZXcgcChlLHIpLGk9dC5fc3Vic2NyaWJlKHMpO3JldHVybiBzLmlzVW5zdWJzY3JpYmVkfHwocy5jb25uZWN0aW9uPXIuY29ubmVjdCgpKSxpfSxlfSgpLHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMuY29ubmVjdGFibGU9cn1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuY29ubmVjdGFibGU7aWYoIWUpcmV0dXJuIHZvaWQodGhpcy5jb25uZWN0aW9uPW51bGwpO3RoaXMuY29ubmVjdGFibGU9bnVsbDt2YXIgdD1lLl9yZWZDb3VudDtpZigwPj10KXJldHVybiB2b2lkKHRoaXMuY29ubmVjdGlvbj1udWxsKTtpZihlLl9yZWZDb3VudD10LTEsdD4xKXJldHVybiB2b2lkKHRoaXMuY29ubmVjdGlvbj1udWxsKTt2YXIgcj10aGlzLmNvbm5lY3Rpb24scz1lLl9jb25uZWN0aW9uO3RoaXMuY29ubmVjdGlvbj1udWxsLCFzfHxyJiZzIT09cnx8cy51bnN1YnNjcmliZSgpfSx0fShhLlN1YnNjcmliZXIpO3JldHVybiByLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL29ic2VydmVPblwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9vYnNlcnZlT25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL29ic2VydmVPblwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5vYnNlcnZlT249by5vYnNlcnZlT24sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9vbkVycm9yUmVzdW1lTmV4dFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9vbkVycm9yUmVzdW1lTmV4dFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivb25FcnJvclJlc3VtZU5leHRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUub25FcnJvclJlc3VtZU5leHQ9by5vbkVycm9yUmVzdW1lTmV4dCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvcGFpcndpc2VcIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIik7ZS5wYWlyd2lzZT1yO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSkpfSxlfSgpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyx0KSx0aGlzLmhhc1ByZXY9ITF9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmhhc1ByZXY/dGhpcy5kZXN0aW5hdGlvbi5uZXh0KFt0aGlzLnByZXYsZV0pOnRoaXMuaGFzUHJldj0hMCx0aGlzLnByZXY9ZX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvbm90XCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtmdW5jdGlvbiByKCl7cmV0dXJuIXIucHJlZC5hcHBseShyLnRoaXNBcmcsYXJndW1lbnRzKX1yZXR1cm4gci5wcmVkPWUsci50aGlzQXJnPXQscn12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cmV0dXJuIHMuZGVmaW5lPXZvaWQgMCxlLm5vdD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9wbHVja1wiLFtcInJ4anMvb3BlcmF0b3IvbWFwXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdC0wXT1hcmd1bWVudHNbdF07dmFyIHI9ZS5sZW5ndGg7aWYoMD09PXIpdGhyb3cgbmV3IEVycm9yKFwiTGlzdCBvZiBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBlbXB0eS5cIik7cmV0dXJuIG4ubWFwLmNhbGwodGhpcyxzKGUscikpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgcj1mdW5jdGlvbihyKXtmb3IodmFyIHM9cixpPTA7dD5pO2krKyl7dmFyIG89c1tlW2ldXTtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgbylyZXR1cm47cz1vfXJldHVybiBzfTtyZXR1cm4gcn12YXIgaT1TeXN0ZW0uZ2xvYmFsLG89aS5kZWZpbmU7aS5kZWZpbmU9dm9pZCAwO3ZhciBuPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21hcFwiKTtyZXR1cm4gZS5wbHVjaz1yLGkuZGVmaW5lPW8sdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9wdWJsaXNoXCIsW1wicnhqcy9TdWJqZWN0XCIsXCJyeGpzL29wZXJhdG9yL211bHRpY2FzdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZT9uLm11bHRpY2FzdC5jYWxsKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uU3ViamVjdH0sZSk6bi5tdWx0aWNhc3QuY2FsbCh0aGlzLG5ldyBvLlN1YmplY3QpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL211bHRpY2FzdFwiKTtyZXR1cm4gZS5wdWJsaXNoPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvdGhyb3dFcnJvclwiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3Rocm93IGV9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3JldHVybiBzLmRlZmluZT12b2lkIDAsZS50aHJvd0Vycm9yPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3B1Ymxpc2hSZXBsYXlcIixbXCJyeGpzL1JlcGxheVN1YmplY3RcIixcInJ4anMvb3BlcmF0b3IvbXVsdGljYXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSx2b2lkIDA9PT10JiYodD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLG4ubXVsdGljYXN0LmNhbGwodGhpcyxuZXcgby5SZXBsYXlTdWJqZWN0KGUsdCxyKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9SZXBsYXlTdWJqZWN0XCIpLG49cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvbXVsdGljYXN0XCIpO3JldHVybiBlLnB1Ymxpc2hSZXBsYXk9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvcHVibGlzaExhc3RcIixbXCJyeGpzL0FzeW5jU3ViamVjdFwiLFwicnhqcy9vcGVyYXRvci9tdWx0aWNhc3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbi5tdWx0aWNhc3QuY2FsbCh0aGlzLG5ldyBvLkFzeW5jU3ViamVjdCl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9Bc3luY1N1YmplY3RcIiksbj1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tdWx0aWNhc3RcIik7cmV0dXJuIGUucHVibGlzaExhc3Q9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3JhY2VcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvcmFjZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvcmFjZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yYWNlPW8ucmFjZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3JlZHVjZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9yZWR1Y2VcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3JlZHVjZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2U9by5yZWR1Y2Usci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3JlcGVhdFwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9LTEpLDA9PT1lP25ldyBhLkVtcHR5T2JzZXJ2YWJsZTowPmU/dGhpcy5saWZ0KG5ldyB1KC0xLHRoaXMpKTp0aGlzLmxpZnQobmV3IHUoZS0xLHRoaXMpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZVwiKTtlLnJlcGVhdD1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY291bnQ9ZSx0aGlzLnNvdXJjZT10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMuY291bnQsdGhpcy5zb3VyY2UpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuY291bnQ9cix0aGlzLnNvdXJjZT1zfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuY29tcGxldGU9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1N0b3BwZWQpe3ZhciB0PXRoaXMscj10LnNvdXJjZSxzPXQuY291bnQ7aWYoMD09PXMpcmV0dXJuIGUucHJvdG90eXBlLmNvbXBsZXRlLmNhbGwodGhpcyk7cz4tMSYmKHRoaXMuY291bnQ9cy0xKSx0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5pc1N0b3BwZWQ9ITEsdGhpcy5pc1Vuc3Vic2NyaWJlZD0hMSxyLnN1YnNjcmliZSh0aGlzKX19LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9yZXRyeVwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9LTEpLHRoaXMubGlmdChuZXcgYShlLHRoaXMpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIik7ZS5yZXRyeT1yO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuY291bnQ9ZSx0aGlzLnNvdXJjZT10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlLHRoaXMuY291bnQsdGhpcy5zb3VyY2UpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuY291bnQ9cix0aGlzLnNvdXJjZT1zfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgcj10aGlzLHM9ci5zb3VyY2UsaT1yLmNvdW50O2lmKDA9PT1pKXJldHVybiBlLnByb3RvdHlwZS5lcnJvci5jYWxsKHRoaXMsdCk7aT4tMSYmKHRoaXMuY291bnQ9aS0xKSx0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5pc1N0b3BwZWQ9ITEsdGhpcy5pc1Vuc3Vic2NyaWJlZD0hMSxzLnN1YnNjcmliZSh0aGlzKX19LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9yZXRyeVdoZW5cIixbXCJyeGpzL1N1YmplY3RcIixcInJ4anMvdXRpbC90cnlDYXRjaFwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGIoZSx0aGlzKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksYz1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksbD1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2UucmV0cnlXaGVuPXI7dmFyIGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5ub3RpZmllcj1lLHRoaXMuc291cmNlPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBwKGUsdGhpcy5ub3RpZmllcix0aGlzLnNvdXJjZSkpfSxlfSgpLHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5ub3RpZmllcj1yLHRoaXMuc291cmNlPXN9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbih0KXtpZighdGhpcy5pc1N0b3BwZWQpe3ZhciByPXRoaXMuZXJyb3JzLHM9dGhpcy5yZXRyaWVzLGk9dGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uO2lmKHMpdGhpcy5lcnJvcnM9bnVsbCx0aGlzLnJldHJpZXNTdWJzY3JpcHRpb249bnVsbDtlbHNle2lmKHI9bmV3IG4uU3ViamVjdCxzPWEudHJ5Q2F0Y2godGhpcy5ub3RpZmllcikocikscz09PXUuZXJyb3JPYmplY3QpcmV0dXJuIGUucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcyx1LmVycm9yT2JqZWN0LmUpO2k9bC5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHMpfXRoaXMudW5zdWJzY3JpYmUoKSx0aGlzLmlzVW5zdWJzY3JpYmVkPSExLHRoaXMuZXJyb3JzPXIsdGhpcy5yZXRyaWVzPXMsdGhpcy5yZXRyaWVzU3Vic2NyaXB0aW9uPWksci5uZXh0KHQpfX0sdC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWUuZXJyb3JzLHI9ZS5yZXRyaWVzU3Vic2NyaXB0aW9uO3QmJih0LnVuc3Vic2NyaWJlKCksdGhpcy5lcnJvcnM9bnVsbCksciYmKHIudW5zdWJzY3JpYmUoKSx0aGlzLnJldHJpZXNTdWJzY3JpcHRpb249bnVsbCksdGhpcy5yZXRyaWVzPW51bGx9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt2YXIgbz10aGlzLG49by5lcnJvcnMsYT1vLnJldHJpZXMsdT1vLnJldHJpZXNTdWJzY3JpcHRpb247dGhpcy5lcnJvcnM9bnVsbCx0aGlzLnJldHJpZXM9bnVsbCx0aGlzLnJldHJpZXNTdWJzY3JpcHRpb249bnVsbCx0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5pc1N0b3BwZWQ9ITEsdGhpcy5pc1Vuc3Vic2NyaWJlZD0hMSx0aGlzLmVycm9ycz1uLHRoaXMucmV0cmllcz1hLHRoaXMucmV0cmllc1N1YnNjcmlwdGlvbj11LHRoaXMuc291cmNlLnN1YnNjcmliZSh0aGlzKX0sdH0oYy5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivc2FtcGxlXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5zYW1wbGU9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5ub3RpZmllcj1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMubm90aWZpZXIpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmhhc1ZhbHVlPSExLHRoaXMuYWRkKGEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxyKSl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnZhbHVlPWUsdGhpcy5oYXNWYWx1ZT0hMH0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3RoaXMuZW1pdFZhbHVlKCl9LHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5lbWl0VmFsdWUoKX0sdC5wcm90b3R5cGUuZW1pdFZhbHVlPWZ1bmN0aW9uKCl7dGhpcy5oYXNWYWx1ZSYmKHRoaXMuaGFzVmFsdWU9ITEsdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMudmFsdWUpKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivc2FtcGxlVGltZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9dS5hc3luYyksdGhpcy5saWZ0KG5ldyBjKGUsdCkpfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5wZXJpb2Q7dC5ub3RpZnlOZXh0KCksdGhpcy5zY2hlZHVsZShlLHIpfXZhciBpPVN5c3RlbS5nbG9iYWwsbz1pLmRlZmluZTtpLmRlZmluZT12b2lkIDA7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGE9cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSx1PXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKTtlLnNhbXBsZVRpbWU9cjt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnBlcmlvZD1lLHRoaXMuc2NoZWR1bGVyPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBsKGUsdGhpcy5wZXJpb2QsdGhpcy5zY2hlZHVsZXIpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGkpe2UuY2FsbCh0aGlzLHQpLHRoaXMucGVyaW9kPXIsdGhpcy5zY2hlZHVsZXI9aSx0aGlzLmhhc1ZhbHVlPSExLHRoaXMuYWRkKGkuc2NoZWR1bGUocyxyLHtzdWJzY3JpYmVyOnRoaXMscGVyaW9kOnJ9KSl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmxhc3RWYWx1ZT1lLHRoaXMuaGFzVmFsdWU9ITB9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oKXt0aGlzLmhhc1ZhbHVlJiYodGhpcy5oYXNWYWx1ZT0hMSx0aGlzLmRlc3RpbmF0aW9uLm5leHQodGhpcy5sYXN0VmFsdWUpKX0sdH0oYS5TdWJzY3JpYmVyKTtyZXR1cm4gaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3NjYW5cIixbXCJyeGpzL1N1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKGUsdCkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLnNjYW49cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLmFjY3VtdWxhdG9yPWUsdGhpcy5zZWVkPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyB1KGUsdGhpcy5hY2N1bXVsYXRvcix0aGlzLnNlZWQpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuYWNjdW11bGF0b3I9cix0aGlzLmluZGV4PTAsdGhpcy5hY2N1bXVsYXRvclNldD0hMSx0aGlzLnNlZWQ9cyx0aGlzLmFjY3VtdWxhdG9yU2V0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiBzfXJldHVybiBvKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic2VlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VlZH0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuYWNjdW11bGF0b3JTZXQ9ITAsdGhpcy5fc2VlZD1lfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFjY3VtdWxhdG9yU2V0P3RoaXMuX3RyeU5leHQoZSk6KHRoaXMuc2VlZD1lLHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpKX0sdC5wcm90b3R5cGUuX3RyeU5leHQ9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmluZGV4Kys7dHJ5e3Q9dGhpcy5hY2N1bXVsYXRvcih0aGlzLnNlZWQsZSxyKX1jYXRjaChzKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHMpfXRoaXMuc2VlZD10LHRoaXMuZGVzdGluYXRpb24ubmV4dCh0KX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3NoYXJlXCIsW1wicnhqcy9vcGVyYXRvci9tdWx0aWNhc3RcIixcInJ4anMvU3ViamVjdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe3JldHVybiBuZXcgYS5TdWJqZWN0fWZ1bmN0aW9uIHMoKXtyZXR1cm4gbi5tdWx0aWNhc3QuY2FsbCh0aGlzLHIpLnJlZkNvdW50KCl9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tdWx0aWNhc3RcIiksYT1yZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpO3JldHVybiBlLnNoYXJlPXMsaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3NpbmdsZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL0VtcHR5RXJyb3JcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHRoaXMubGlmdChuZXcgdShlLHRoaXMpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL0VtcHR5RXJyb3JcIik7ZS5zaW5nbGU9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLnByZWRpY2F0ZT1lLHRoaXMuc291cmNlPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5wcmVkaWNhdGUsdGhpcy5zb3VyY2UpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJlZGljYXRlPXIsdGhpcy5zb3VyY2U9cyx0aGlzLnNlZW5WYWx1ZT0hMSx0aGlzLmluZGV4PTB9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5hcHBseVNpbmdsZVZhbHVlPWZ1bmN0aW9uKGUpe3RoaXMuc2VlblZhbHVlP3RoaXMuZGVzdGluYXRpb24uZXJyb3IoXCJTZXF1ZW5jZSBjb250YWlucyBtb3JlIHRoYW4gb25lIGVsZW1lbnRcIik6KHRoaXMuc2VlblZhbHVlPSEwLHRoaXMuc2luZ2xlVmFsdWU9ZSl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucHJlZGljYXRlO3RoaXMuaW5kZXgrKyx0P3RoaXMudHJ5TmV4dChlKTp0aGlzLmFwcGx5U2luZ2xlVmFsdWUoZSl9LHQucHJvdG90eXBlLnRyeU5leHQ9ZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PXRoaXMucHJlZGljYXRlKGUsdGhpcy5pbmRleCx0aGlzLnNvdXJjZSk7dCYmdGhpcy5hcHBseVNpbmdsZVZhbHVlKGUpfWNhdGNoKHIpe3RoaXMuZGVzdGluYXRpb24uZXJyb3Iocil9fSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlc3RpbmF0aW9uO3RoaXMuaW5kZXg+MD8oZS5uZXh0KHRoaXMuc2VlblZhbHVlP3RoaXMuc2luZ2xlVmFsdWU6dm9pZCAwKSxlLmNvbXBsZXRlKCkpOmUuZXJyb3IobmV3IGEuRW1wdHlFcnJvcil9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9za2lwXCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGEoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLnNraXA9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy50b3RhbD1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlLHRoaXMudG90YWwpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLnRvdGFsPXIsdGhpcy5jb3VudD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7Kyt0aGlzLmNvdW50PnRoaXMudG90YWwmJnRoaXMuZGVzdGluYXRpb24ubmV4dChlKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3NraXBVbnRpbFwiLFtcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHRoaXMubGlmdChuZXcgdShlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Uuc2tpcFVudGlsPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMubm90aWZpZXI9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm5vdGlmaWVyKSl9LGV9KCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5oYXNWYWx1ZT0hMSx0aGlzLmlzSW5uZXJTdG9wcGVkPSExLHRoaXMuYWRkKGEuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxyKSl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbih0KXt0aGlzLmhhc1ZhbHVlJiZlLnByb3RvdHlwZS5fbmV4dC5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaXNJbm5lclN0b3BwZWQ/ZS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyk6dGhpcy51bnN1YnNjcmliZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dGhpcy5oYXNWYWx1ZT0hMH0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmlzSW5uZXJTdG9wcGVkPSEwLHRoaXMuaXNTdG9wcGVkJiZlLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivc2tpcFdoaWxlXCIsW1wicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IGEoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLnNraXBXaGlsZT1yO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnByZWRpY2F0ZT1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgdShlLHRoaXMucHJlZGljYXRlKSl9LGV9KCksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5wcmVkaWNhdGU9cix0aGlzLnNraXBwaW5nPSEwLHRoaXMuaW5kZXg9MH1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZGVzdGluYXRpb247dGhpcy5za2lwcGluZyYmdGhpcy50cnlDYWxsUHJlZGljYXRlKGUpLHRoaXMuc2tpcHBpbmd8fHQubmV4dChlKX0sdC5wcm90b3R5cGUudHJ5Q2FsbFByZWRpY2F0ZT1mdW5jdGlvbihlKXt0cnl7dmFyIHQ9dGhpcy5wcmVkaWNhdGUoZSx0aGlzLmluZGV4KyspO3RoaXMuc2tpcHBpbmc9Qm9vbGVhbih0KX1jYXRjaChyKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHIpfX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3N0YXJ0V2l0aFwiLFtcInJ4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2NvbmNhdFwiLFwicnhqcy91dGlsL2lzU2NoZWR1bGVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdC0wXT1hcmd1bWVudHNbdF07dmFyIHI9ZVtlLmxlbmd0aC0xXTtjLmlzU2NoZWR1bGVyKHIpP2UucG9wKCk6cj1udWxsO3ZhciBzPWUubGVuZ3RoO3JldHVybiAxPT09cz91LmNvbmNhdFN0YXRpYyhuZXcgbi5TY2FsYXJPYnNlcnZhYmxlKGVbMF0sciksdGhpcyk6cz4xP3UuY29uY2F0U3RhdGljKG5ldyBvLkFycmF5T2JzZXJ2YWJsZShlLHIpLHRoaXMpOnUuY29uY2F0U3RhdGljKG5ldyBhLkVtcHR5T2JzZXJ2YWJsZShyKSx0aGlzKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlXCIpLGE9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIiksdT1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9jb25jYXRcIiksYz1yZXF1aXJlKFwicnhqcy91dGlsL2lzU2NoZWR1bGVyXCIpO3JldHVybiBlLnN0YXJ0V2l0aD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL0ltbWVkaWF0ZVwiLFtcInJ4anMvdXRpbC9yb290XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3V0aWwvcm9vdFwiKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLnJvb3Q9ZSxlLnNldEltbWVkaWF0ZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5zZXRJbW1lZGlhdGUpdGhpcy5zZXRJbW1lZGlhdGU9ZS5zZXRJbW1lZGlhdGUuYmluZChlKSx0aGlzLmNsZWFySW1tZWRpYXRlPWUuY2xlYXJJbW1lZGlhdGUuYmluZChlKTtlbHNle3RoaXMubmV4dEhhbmRsZT0xLHRoaXMudGFza3NCeUhhbmRsZT17fSx0aGlzLmN1cnJlbnRseVJ1bm5pbmdBVGFzaz0hMSx0aGlzLmNhblVzZVByb2Nlc3NOZXh0VGljaygpP3RoaXMuc2V0SW1tZWRpYXRlPXRoaXMuY3JlYXRlUHJvY2Vzc05leHRUaWNrU2V0SW1tZWRpYXRlKCk6dGhpcy5jYW5Vc2VQb3N0TWVzc2FnZSgpP3RoaXMuc2V0SW1tZWRpYXRlPXRoaXMuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGUoKTp0aGlzLmNhblVzZU1lc3NhZ2VDaGFubmVsKCk/dGhpcy5zZXRJbW1lZGlhdGU9dGhpcy5jcmVhdGVNZXNzYWdlQ2hhbm5lbFNldEltbWVkaWF0ZSgpOnRoaXMuY2FuVXNlUmVhZHlTdGF0ZUNoYW5nZSgpP3RoaXMuc2V0SW1tZWRpYXRlPXRoaXMuY3JlYXRlUmVhZHlTdGF0ZUNoYW5nZVNldEltbWVkaWF0ZSgpOnRoaXMuc2V0SW1tZWRpYXRlPXRoaXMuY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZSgpO3ZhciB0PWZ1bmN0aW9uIHIoZSl7ZGVsZXRlIHIuaW5zdGFuY2UudGFza3NCeUhhbmRsZVtlXX07dC5pbnN0YW5jZT10aGlzLHRoaXMuY2xlYXJJbW1lZGlhdGU9dH19cmV0dXJuIGUucHJvdG90eXBlLmlkZW50aWZ5PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJvb3QuT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxlLnByb3RvdHlwZS5jYW5Vc2VQcm9jZXNzTmV4dFRpY2s9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgcHJvY2Vzc11cIj09PXRoaXMuaWRlbnRpZnkodGhpcy5yb290LnByb2Nlc3MpfSxlLnByb3RvdHlwZS5jYW5Vc2VNZXNzYWdlQ2hhbm5lbD1mdW5jdGlvbigpe3JldHVybiBCb29sZWFuKHRoaXMucm9vdC5NZXNzYWdlQ2hhbm5lbCl9LGUucHJvdG90eXBlLmNhblVzZVJlYWR5U3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvb3QuZG9jdW1lbnQ7cmV0dXJuIEJvb2xlYW4oZSYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGUuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSl9LGUucHJvdG90eXBlLmNhblVzZVBvc3RNZXNzYWdlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yb290O2lmKGUucG9zdE1lc3NhZ2UmJiFlLmltcG9ydFNjcmlwdHMpe3ZhciB0PSEwLHI9ZS5vbm1lc3NhZ2U7cmV0dXJuIGUub25tZXNzYWdlPWZ1bmN0aW9uKCl7dD0hMX0sZS5wb3N0TWVzc2FnZShcIlwiLFwiKlwiKSxlLm9ubWVzc2FnZT1yLHR9cmV0dXJuITF9LGUucHJvdG90eXBlLnBhcnRpYWxseUFwcGxpZWQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dmFyIHM9ZnVuY3Rpb24gaSgpe3ZhciBlPWksdD1lLmhhbmRsZXIscj1lLmFyZ3M7XCJmdW5jdGlvblwiPT10eXBlb2YgdD90LmFwcGx5KHZvaWQgMCxyKTpuZXcgRnVuY3Rpb24oXCJcIit0KSgpfTtyZXR1cm4gcy5oYW5kbGVyPWUscy5hcmdzPXQsc30sZS5wcm90b3R5cGUuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy50YXNrc0J5SGFuZGxlW3RoaXMubmV4dEhhbmRsZV09dGhpcy5wYXJ0aWFsbHlBcHBsaWVkLmFwcGx5KHZvaWQgMCxlKSxcbnRoaXMubmV4dEhhbmRsZSsrfSxlLnByb3RvdHlwZS5jcmVhdGVQcm9jZXNzTmV4dFRpY2tTZXRJbW1lZGlhdGU9ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbiB0KCl7dmFyIGU9dC5pbnN0YW5jZSxyPWUuYWRkRnJvbVNldEltbWVkaWF0ZUFyZ3VtZW50cyhhcmd1bWVudHMpO3JldHVybiBlLnJvb3QucHJvY2Vzcy5uZXh0VGljayhlLnBhcnRpYWxseUFwcGxpZWQoZS5ydW5JZlByZXNlbnQscikpLHJ9O3JldHVybiBlLmluc3RhbmNlPXRoaXMsZX0sZS5wcm90b3R5cGUuY3JlYXRlUG9zdE1lc3NhZ2VTZXRJbW1lZGlhdGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJvb3QsdD1cInNldEltbWVkaWF0ZSRcIitlLk1hdGgucmFuZG9tKCkrXCIkXCIscj1mdW5jdGlvbiBpKHIpe3ZhciBzPWkuaW5zdGFuY2U7ci5zb3VyY2U9PT1lJiZcInN0cmluZ1wiPT10eXBlb2Ygci5kYXRhJiYwPT09ci5kYXRhLmluZGV4T2YodCkmJnMucnVuSWZQcmVzZW50KCtyLmRhdGEuc2xpY2UodC5sZW5ndGgpKX07ci5pbnN0YW5jZT10aGlzLGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixyLCExKTt2YXIgcz1mdW5jdGlvbiBvKCl7dmFyIGU9byx0PWUubWVzc2FnZVByZWZpeCxyPWUuaW5zdGFuY2Uscz1yLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKTtyZXR1cm4gci5yb290LnBvc3RNZXNzYWdlKHQrcyxcIipcIiksc307cmV0dXJuIHMuaW5zdGFuY2U9dGhpcyxzLm1lc3NhZ2VQcmVmaXg9dCxzfSxlLnByb3RvdHlwZS5ydW5JZlByZXNlbnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5jdXJyZW50bHlSdW5uaW5nQVRhc2spdGhpcy5yb290LnNldFRpbWVvdXQodGhpcy5wYXJ0aWFsbHlBcHBsaWVkKHRoaXMucnVuSWZQcmVzZW50LGUpLDApO2Vsc2V7dmFyIHQ9dGhpcy50YXNrc0J5SGFuZGxlW2VdO2lmKHQpe3RoaXMuY3VycmVudGx5UnVubmluZ0FUYXNrPSEwO3RyeXt0KCl9ZmluYWxseXt0aGlzLmNsZWFySW1tZWRpYXRlKGUpLHRoaXMuY3VycmVudGx5UnVubmluZ0FUYXNrPSExfX19fSxlLnByb3RvdHlwZS5jcmVhdGVNZXNzYWdlQ2hhbm5lbFNldEltbWVkaWF0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgdGhpcy5yb290Lk1lc3NhZ2VDaGFubmVsO3QucG9ydDEub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciByPXQuZGF0YTtlLnJ1bklmUHJlc2VudChyKX07dmFyIHI9ZnVuY3Rpb24gcygpe3ZhciBlPXMsdD1lLmNoYW5uZWwscj1lLmluc3RhbmNlLGk9ci5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7cmV0dXJuIHQucG9ydDIucG9zdE1lc3NhZ2UoaSksaX07cmV0dXJuIHIuY2hhbm5lbD10LHIuaW5zdGFuY2U9dGhpcyxyfSxlLnByb3RvdHlwZS5jcmVhdGVSZWFkeVN0YXRlQ2hhbmdlU2V0SW1tZWRpYXRlPWZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24gdCgpe3ZhciBlPXQuaW5zdGFuY2Uscj1lLnJvb3Qscz1yLmRvY3VtZW50LGk9cy5kb2N1bWVudEVsZW1lbnQsbz1lLmFkZEZyb21TZXRJbW1lZGlhdGVBcmd1bWVudHMoYXJndW1lbnRzKSxuPXMuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtyZXR1cm4gbi5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtlLnJ1bklmUHJlc2VudChvKSxuLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLGkucmVtb3ZlQ2hpbGQobiksbj1udWxsfSxpLmFwcGVuZENoaWxkKG4pLG99O3JldHVybiBlLmluc3RhbmNlPXRoaXMsZX0sZS5wcm90b3R5cGUuY3JlYXRlU2V0VGltZW91dFNldEltbWVkaWF0ZT1mdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uIHQoKXt2YXIgZT10Lmluc3RhbmNlLHI9ZS5hZGRGcm9tU2V0SW1tZWRpYXRlQXJndW1lbnRzKGFyZ3VtZW50cyk7cmV0dXJuIGUucm9vdC5zZXRUaW1lb3V0KGUucGFydGlhbGx5QXBwbGllZChlLnJ1bklmUHJlc2VudCxyKSwwKSxyfTtyZXR1cm4gZS5pbnN0YW5jZT10aGlzLGV9LGV9KCk7cmV0dXJuIGUuSW1tZWRpYXRlRGVmaW5pdGlvbj1vLGUuSW1tZWRpYXRlPW5ldyBvKGkucm9vdCksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3N3aXRjaFwiLFtcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS5fc3dpdGNoPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlKSl9LGV9KCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzLHQpLHRoaXMuYWN0aXZlPTAsdGhpcy5oYXNDb21wbGV0ZWQ9ITF9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnVuc3Vic2NyaWJlSW5uZXIoKSx0aGlzLmFjdGl2ZSsrLHRoaXMuYWRkKHRoaXMuaW5uZXJTdWJzY3JpcHRpb249YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGUpKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5oYXNDb21wbGV0ZWQ9ITAsMD09PXRoaXMuYWN0aXZlJiZ0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLnVuc3Vic2NyaWJlSW5uZXI9ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZT10aGlzLmFjdGl2ZT4wP3RoaXMuYWN0aXZlLTE6MDt2YXIgZT10aGlzLmlubmVyU3Vic2NyaXB0aW9uO2UmJihlLnVuc3Vic2NyaWJlKCksdGhpcy5yZW1vdmUoZSkpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfSx0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMudW5zdWJzY3JpYmVJbm5lcigpLHRoaXMuaGFzQ29tcGxldGVkJiYwPT09dGhpcy5hY3RpdmUmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivc3dpdGNoTWFwXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0aGlzLmxpZnQobmV3IHUoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Uuc3dpdGNoTWFwPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5wcm9qZWN0PWUsdGhpcy5yZXN1bHRTZWxlY3Rvcj10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMucHJvamVjdCx0aGlzLnJlc3VsdFNlbGVjdG9yKSl9LGV9KCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLnByb2plY3Q9cix0aGlzLnJlc3VsdFNlbGVjdG9yPXMsdGhpcy5pbmRleD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmluZGV4Kys7dHJ5e3Q9dGhpcy5wcm9qZWN0KGUscil9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzKX10aGlzLl9pbm5lclN1Yih0LGUscil9LHQucHJvdG90eXBlLl9pbm5lclN1Yj1mdW5jdGlvbihlLHQscil7dmFyIHM9dGhpcy5pbm5lclN1YnNjcmlwdGlvbjtzJiZzLnVuc3Vic2NyaWJlKCksdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbj1hLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsZSx0LHIpKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pbm5lclN1YnNjcmlwdGlvbjt0JiYhdC5pc1Vuc3Vic2NyaWJlZHx8ZS5wcm90b3R5cGUuX2NvbXBsZXRlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMuaW5uZXJTdWJzY3JpcHRpb249bnVsbH0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUodCksdGhpcy5pbm5lclN1YnNjcmlwdGlvbj1udWxsLHRoaXMuaXNTdG9wcGVkJiZlLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3RoaXMucmVzdWx0U2VsZWN0b3I/dGhpcy5fdHJ5Tm90aWZ5TmV4dChlLHQscixzKTp0aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9LHQucHJvdG90eXBlLl90cnlOb3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMpe3ZhciBpO3RyeXtpPXRoaXMucmVzdWx0U2VsZWN0b3IoZSx0LHIscyl9Y2F0Y2gobyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihvKX10aGlzLmRlc3RpbmF0aW9uLm5leHQoaSl9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3N3aXRjaE1hcFRvXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0aGlzLmxpZnQobmV3IHUoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Uuc3dpdGNoTWFwVG89cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm9ic2VydmFibGU9ZSx0aGlzLnJlc3VsdFNlbGVjdG9yPXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5vYnNlcnZhYmxlLHRoaXMucmVzdWx0U2VsZWN0b3IpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuaW5uZXI9cix0aGlzLnJlc3VsdFNlbGVjdG9yPXMsdGhpcy5pbmRleD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbm5lclN1YnNjcmlwdGlvbjt0JiZ0LnVuc3Vic2NyaWJlKCksdGhpcy5hZGQodGhpcy5pbm5lclN1YnNjcmlwdGlvbj1hLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsdGhpcy5pbm5lcixlLHRoaXMuaW5kZXgrKykpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmlubmVyU3Vic2NyaXB0aW9uO3QmJiF0LmlzVW5zdWJzY3JpYmVkfHxlLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5pbm5lclN1YnNjcmlwdGlvbj1udWxsfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbih0KXt0aGlzLnJlbW92ZSh0KSx0aGlzLmlubmVyU3Vic2NyaXB0aW9uPW51bGwsdGhpcy5pc1N0b3BwZWQmJmUucHJvdG90eXBlLl9jb21wbGV0ZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dmFyIG89dGhpcyxuPW8ucmVzdWx0U2VsZWN0b3IsYT1vLmRlc3RpbmF0aW9uO24/dGhpcy50cnlSZXN1bHRTZWxlY3RvcihlLHQscixzKTphLm5leHQodCl9LHQucHJvdG90eXBlLnRyeVJlc3VsdFNlbGVjdG9yPWZ1bmN0aW9uKGUsdCxyLHMpe3ZhciBpLG89dGhpcyxuPW8ucmVzdWx0U2VsZWN0b3IsYT1vLmRlc3RpbmF0aW9uO3RyeXtpPW4oZSx0LHIscyl9Y2F0Y2godSl7cmV0dXJuIHZvaWQgYS5lcnJvcih1KX1hLm5leHQoaSl9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3Rha2VcIixbXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiLFwicnhqcy9vYnNlcnZhYmxlL0VtcHR5T2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gMD09PWU/bmV3IHUuRW1wdHlPYnNlcnZhYmxlOnRoaXMubGlmdChuZXcgYyhlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9Bcmd1bWVudE91dE9mUmFuZ2VFcnJvclwiKSx1PXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCIpO2UudGFrZT1yO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLnRvdGFsPWUsdGhpcy50b3RhbDwwKXRocm93IG5ldyBhLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMudG90YWwpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLnRvdGFsPXIsdGhpcy5jb3VudD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy50b3RhbDsrK3RoaXMuY291bnQ8PXQmJih0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSksdGhpcy5jb3VudD09PXQmJih0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCksdGhpcy51bnN1YnNjcmliZSgpKSl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci90YWtlTGFzdFwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCIsXCJyeGpzL29ic2VydmFibGUvRW1wdHlPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiAwPT09ZT9uZXcgdS5FbXB0eU9ic2VydmFibGU6dGhpcy5saWZ0KG5ldyBjKGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCIpLHU9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIik7ZS50YWtlTGFzdD1yO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtpZih0aGlzLnRvdGFsPWUsdGhpcy50b3RhbDwwKXRocm93IG5ldyBhLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMudG90YWwpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLnRvdGFsPXIsdGhpcy5yaW5nPW5ldyBBcnJheSx0aGlzLmNvdW50PTB9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnJpbmcscj10aGlzLnRvdGFsLHM9dGhpcy5jb3VudCsrO2lmKHQubGVuZ3RoPHIpdC5wdXNoKGUpO2Vsc2V7dmFyIGk9cyVyO3RbaV09ZX19LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGVzdGluYXRpb24sdD10aGlzLmNvdW50O2lmKHQ+MClmb3IodmFyIHI9dGhpcy5jb3VudD49dGhpcy50b3RhbD90aGlzLnRvdGFsOnRoaXMuY291bnQscz10aGlzLnJpbmcsaT0wO3I+aTtpKyspe3ZhciBvPXQrKyVyO2UubmV4dChzW29dKX1lLmNvbXBsZXRlKCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci90YWtlVW50aWxcIixbXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IHUoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiKTtlLnRha2VVbnRpbD1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLm5vdGlmaWVyPWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5ub3RpZmllcikpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMubm90aWZpZXI9cix0aGlzLmFkZChhLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMscikpfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3RoaXMuY29tcGxldGUoKX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oKXt9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3Rha2VXaGlsZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBhKGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIik7ZS50YWtlV2hpbGU9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5wcmVkaWNhdGU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IHUoZSx0aGlzLnByZWRpY2F0ZSkpfSxlfSgpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJlZGljYXRlPXIsdGhpcy5pbmRleD0wfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmRlc3RpbmF0aW9uO3RyeXt0PXRoaXMucHJlZGljYXRlKGUsdGhpcy5pbmRleCsrKX1jYXRjaChzKXtyZXR1cm4gdm9pZCByLmVycm9yKHMpfXRoaXMubmV4dE9yQ29tcGxldGUoZSx0KX0sdC5wcm90b3R5cGUubmV4dE9yQ29tcGxldGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmRlc3RpbmF0aW9uO0Jvb2xlYW4odCk/ci5uZXh0KGUpOnIuY29tcGxldGUoKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3Rocm90dGxlXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyB1KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS50aHJvdHRsZT1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmR1cmF0aW9uU2VsZWN0b3I9ZX1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLmR1cmF0aW9uU2VsZWN0b3IpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLmRlc3RpbmF0aW9uPXQsdGhpcy5kdXJhdGlvblNlbGVjdG9yPXJ9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLnRocm90dGxlZHx8dGhpcy50cnlEdXJhdGlvblNlbGVjdG9yKGUpfSx0LnByb3RvdHlwZS50cnlEdXJhdGlvblNlbGVjdG9yPWZ1bmN0aW9uKGUpe3ZhciB0PW51bGw7dHJ5e3Q9dGhpcy5kdXJhdGlvblNlbGVjdG9yKGUpfWNhdGNoKHIpe3JldHVybiB2b2lkIHRoaXMuZGVzdGluYXRpb24uZXJyb3Iocil9dGhpcy5lbWl0QW5kVGhyb3R0bGUoZSx0KX0sdC5wcm90b3R5cGUuZW1pdEFuZFRocm90dGxlPWZ1bmN0aW9uKGUsdCl7dGhpcy5hZGQodGhpcy50aHJvdHRsZWQ9YS5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHQpKSx0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudGhyb3R0bGVkO2UmJih0aGlzLnJlbW92ZShlKSx0aGlzLnRocm90dGxlZD1udWxsLGUudW5zdWJzY3JpYmUoKSl9LHQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLl91bnN1YnNjcmliZSgpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuX3Vuc3Vic2NyaWJlKCl9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3Rocm90dGxlVGltZVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9dS5hc3luYyksdGhpcy5saWZ0KG5ldyBjKGUsdCkpfWZ1bmN0aW9uIHMoZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyO3QuY2xlYXJUaHJvdHRsZSgpfXZhciBpPVN5c3RlbS5nbG9iYWwsbz1pLmRlZmluZTtpLmRlZmluZT12b2lkIDA7dmFyIG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGE9cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSx1PXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKTtlLnRocm90dGxlVGltZT1yO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuZHVyYXRpb249ZSx0aGlzLnNjaGVkdWxlcj10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMuZHVyYXRpb24sdGhpcy5zY2hlZHVsZXIpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuZHVyYXRpb249cix0aGlzLnNjaGVkdWxlcj1zfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy50aHJvdHRsZWR8fCh0aGlzLmFkZCh0aGlzLnRocm90dGxlZD10aGlzLnNjaGVkdWxlci5zY2hlZHVsZShzLHRoaXMuZHVyYXRpb24se3N1YnNjcmliZXI6dGhpc30pKSx0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSkpfSx0LnByb3RvdHlwZS5jbGVhclRocm90dGxlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50aHJvdHRsZWQ7ZSYmKGUudW5zdWJzY3JpYmUoKSx0aGlzLnJlbW92ZShlKSx0aGlzLnRocm90dGxlZD1udWxsKX0sdH0oYS5TdWJzY3JpYmVyKTtyZXR1cm4gaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3RpbWVJbnRlcnZhbFwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPWEuYXN5bmMpLHRoaXMubGlmdChuZXcgYyhlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIpO2UudGltZUludGVydmFsPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy52YWx1ZT1lLHRoaXMuaW50ZXJ2YWw9dH1yZXR1cm4gZX0oKTtlLlRpbWVJbnRlcnZhbD11O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnNjaGVkdWxlcj1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgbChlLHRoaXMuc2NoZWR1bGVyKSl9LGV9KCksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5zY2hlZHVsZXI9cix0aGlzLmxhc3RUaW1lPTAsdGhpcy5sYXN0VGltZT1yLm5vdygpfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zY2hlZHVsZXIubm93KCkscj10LXRoaXMubGFzdFRpbWU7dGhpcy5sYXN0VGltZT10LHRoaXMuZGVzdGluYXRpb24ubmV4dChuZXcgdShlLHIpKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3RpbWVvdXRcIixbXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiLFwicnhqcy91dGlsL2lzRGF0ZVwiLFwicnhqcy9TdWJzY3JpYmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXt2b2lkIDA9PT10JiYodD1udWxsKSx2b2lkIDA9PT1yJiYocj1uLmFzeW5jKTt2YXIgcz1hLmlzRGF0ZShlKSxpPXM/K2Utci5ub3coKTpNYXRoLmFicyhlKTtyZXR1cm4gdGhpcy5saWZ0KG5ldyBjKGkscyx0LHIpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNEYXRlXCIpLHU9cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLnRpbWVvdXQ9cjt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy53YWl0Rm9yPWUsdGhpcy5hYnNvbHV0ZVRpbWVvdXQ9dCx0aGlzLmVycm9yVG9TZW5kPXIsdGhpcy5zY2hlZHVsZXI9c31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGwoZSx0aGlzLmFic29sdXRlVGltZW91dCx0aGlzLndhaXRGb3IsdGhpcy5lcnJvclRvU2VuZCx0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpLG8pe2UuY2FsbCh0aGlzLHQpLHRoaXMuYWJzb2x1dGVUaW1lb3V0PXIsdGhpcy53YWl0Rm9yPXMsdGhpcy5lcnJvclRvU2VuZD1pLHRoaXMuc2NoZWR1bGVyPW8sdGhpcy5pbmRleD0wLHRoaXMuX3ByZXZpb3VzSW5kZXg9MCx0aGlzLl9oYXNDb21wbGV0ZWQ9ITEsdGhpcy5zY2hlZHVsZVRpbWVvdXQoKX1yZXR1cm4gbyh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInByZXZpb3VzSW5kZXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ByZXZpb3VzSW5kZXh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaGFzQ29tcGxldGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNDb21wbGV0ZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5kaXNwYXRjaFRpbWVvdXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzY3JpYmVyLHI9ZS5pbmRleDt0Lmhhc0NvbXBsZXRlZHx8dC5wcmV2aW91c0luZGV4IT09cnx8dC5ub3RpZnlUaW1lb3V0KCl9LHQucHJvdG90eXBlLnNjaGVkdWxlVGltZW91dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaW5kZXg7dGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUodC5kaXNwYXRjaFRpbWVvdXQsdGhpcy53YWl0Rm9yLHtzdWJzY3JpYmVyOnRoaXMsaW5kZXg6ZX0pLHRoaXMuaW5kZXgrKyx0aGlzLl9wcmV2aW91c0luZGV4PWV9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24ubmV4dChlKSx0aGlzLmFic29sdXRlVGltZW91dHx8dGhpcy5zY2hlZHVsZVRpbWVvdXQoKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3RoaXMuZGVzdGluYXRpb24uZXJyb3IoZSksdGhpcy5faGFzQ29tcGxldGVkPSEwfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCksdGhpcy5faGFzQ29tcGxldGVkPSEwfSx0LnByb3RvdHlwZS5ub3RpZnlUaW1lb3V0PWZ1bmN0aW9uKCl7dGhpcy5lcnJvcih0aGlzLmVycm9yVG9TZW5kfHxuZXcgRXJyb3IoXCJ0aW1lb3V0XCIpKX0sdH0odS5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3RpbWVvdXRXaXRoXCIsW1wicnhqcy9zY2hlZHVsZXIvYXN5bmNcIixcInJ4anMvdXRpbC9pc0RhdGVcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0LHIpe3ZvaWQgMD09PXImJihyPW4uYXN5bmMpO3ZhciBzPWEuaXNEYXRlKGUpLGk9cz8rZS1yLm5vdygpOk1hdGguYWJzKGUpO3JldHVybiB0aGlzLmxpZnQobmV3IGwoaSxzLHQscikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9pc0RhdGVcIiksdT1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYz1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2UudGltZW91dFdpdGg9cjt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy53YWl0Rm9yPWUsdGhpcy5hYnNvbHV0ZVRpbWVvdXQ9dCx0aGlzLndpdGhPYnNlcnZhYmxlPXIsdGhpcy5zY2hlZHVsZXI9c31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGIoZSx0aGlzLmFic29sdXRlVGltZW91dCx0aGlzLndhaXRGb3IsdGhpcy53aXRoT2JzZXJ2YWJsZSx0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpLG8pe2UuY2FsbCh0aGlzKSx0aGlzLmRlc3RpbmF0aW9uPXQsdGhpcy5hYnNvbHV0ZVRpbWVvdXQ9cix0aGlzLndhaXRGb3I9cyx0aGlzLndpdGhPYnNlcnZhYmxlPWksdGhpcy5zY2hlZHVsZXI9byx0aGlzLnRpbWVvdXRTdWJzY3JpcHRpb249dm9pZCAwLHRoaXMuaW5kZXg9MCx0aGlzLl9wcmV2aW91c0luZGV4PTAsdGhpcy5faGFzQ29tcGxldGVkPSExLHQuYWRkKHRoaXMpLHRoaXMuc2NoZWR1bGVUaW1lb3V0KCl9cmV0dXJuIG8odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwcmV2aW91c0luZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcmV2aW91c0luZGV4fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImhhc0NvbXBsZXRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzQ29tcGxldGVkfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQuZGlzcGF0Y2hUaW1lb3V0PWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic2NyaWJlcixyPWUuaW5kZXg7dC5oYXNDb21wbGV0ZWR8fHQucHJldmlvdXNJbmRleCE9PXJ8fHQuaGFuZGxlVGltZW91dCgpfSx0LnByb3RvdHlwZS5zY2hlZHVsZVRpbWVvdXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmluZGV4LHI9e3N1YnNjcmliZXI6dGhpcyxpbmRleDplfTt0aGlzLnNjaGVkdWxlci5zY2hlZHVsZSh0LmRpc3BhdGNoVGltZW91dCx0aGlzLndhaXRGb3IsciksdGhpcy5pbmRleCsrLHRoaXMuX3ByZXZpb3VzSW5kZXg9ZX0sdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpLHRoaXMuYWJzb2x1dGVUaW1lb3V0fHx0aGlzLnNjaGVkdWxlVGltZW91dCgpfSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKSx0aGlzLl9oYXNDb21wbGV0ZWQ9ITB9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKSx0aGlzLl9oYXNDb21wbGV0ZWQ9ITB9LHQucHJvdG90eXBlLmhhbmRsZVRpbWVvdXQ9ZnVuY3Rpb24oKXtpZighdGhpcy5pc1Vuc3Vic2NyaWJlZCl7dmFyIGU9dGhpcy53aXRoT2JzZXJ2YWJsZTt0aGlzLnVuc3Vic2NyaWJlKCksdGhpcy5kZXN0aW5hdGlvbi5hZGQodGhpcy50aW1lb3V0U3Vic2NyaXB0aW9uPWMuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxlKSl9fSx0fSh1Lk91dGVyU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci90aW1lc3RhbXBcIixbXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT1hLmFzeW5jKSx0aGlzLmxpZnQobmV3IGMoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKTtlLnRpbWVzdGFtcD1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMudmFsdWU9ZSx0aGlzLnRpbWVzdGFtcD10fXJldHVybiBlfSgpO2UuVGltZXN0YW1wPXU7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuc2NoZWR1bGVyPWV9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBsKGUsdGhpcy5zY2hlZHVsZXIpKX0sZX0oKSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyx0KSx0aGlzLnNjaGVkdWxlcj1yfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zY2hlZHVsZXIubm93KCk7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KG5ldyB1KGUsdCkpfSx0fShuLlN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvdG9BcnJheVwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe3JldHVybiB0aGlzLmxpZnQobmV3IGEpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKTtlLnRvQXJyYXk9cjt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyB1KGUpKX0sZX0oKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7ZS5jYWxsKHRoaXMsdCksdGhpcy5hcnJheT1bXX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuYXJyYXkucHVzaChlKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHRoaXMuYXJyYXkpLHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3RvUHJvbWlzZVwiLFtcInJ4anMvdXRpbC9yb290XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PXRoaXM7aWYoZXx8KG8ucm9vdC5SeCYmby5yb290LlJ4LmNvbmZpZyYmby5yb290LlJ4LmNvbmZpZy5Qcm9taXNlP2U9by5yb290LlJ4LmNvbmZpZy5Qcm9taXNlOm8ucm9vdC5Qcm9taXNlJiYoZT1vLnJvb3QuUHJvbWlzZSkpLCFlKXRocm93IG5ldyBFcnJvcihcIm5vIFByb21pc2UgaW1wbCBmb3VuZFwiKTtyZXR1cm4gbmV3IGUoZnVuY3Rpb24oZSxyKXt2YXIgczt0LnN1YnNjcmliZShmdW5jdGlvbihlKXtyZXR1cm4gcz1lfSxmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0sZnVuY3Rpb24oKXtyZXR1cm4gZShzKX0pfSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy91dGlsL3Jvb3RcIik7cmV0dXJuIGUudG9Qcm9taXNlPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3dpbmRvd1wiLFtcInJ4anMvU3ViamVjdFwiLFwicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBjKGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksYT1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Uud2luZG93PXI7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMud2luZG93Qm91bmRhcmllcz1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGwoZSkscz10Ll9zdWJzY3JpYmUocik7cmV0dXJuIHMuaXNVbnN1YnNjcmliZWR8fHIuYWRkKHUuc3Vic2NyaWJlVG9SZXN1bHQocix0aGlzLndpbmRvd0JvdW5kYXJpZXMpKSxzfSxlfSgpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyx0KSx0aGlzLndpbmRvdz1uZXcgbi5TdWJqZWN0LHQubmV4dCh0aGlzLndpbmRvdyl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dGhpcy5vcGVuV2luZG93KCl9LHQucHJvdG90eXBlLm5vdGlmeUVycm9yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXJyb3IoZSl9LHQucHJvdG90eXBlLm5vdGlmeUNvbXBsZXRlPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMud2luZG93Lm5leHQoZSl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLndpbmRvdy5lcnJvcihlKSx0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLndpbmRvdy5jb21wbGV0ZSgpLHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy53aW5kb3c9bnVsbH0sdC5wcm90b3R5cGUub3BlbldpbmRvdz1mdW5jdGlvbigpe3ZhciBlPXRoaXMud2luZG93O2UmJmUuY29tcGxldGUoKTt2YXIgdD10aGlzLmRlc3RpbmF0aW9uLHI9dGhpcy53aW5kb3c9bmV3IG4uU3ViamVjdDt0Lm5leHQocil9LHR9KGEuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3dpbmRvd0NvdW50XCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL1N1YmplY3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdGhpcy5saWZ0KG5ldyB1KGUsdCkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIik7ZS53aW5kb3dDb3VudD1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMud2luZG93U2l6ZT1lLHRoaXMuc3RhcnRXaW5kb3dFdmVyeT10fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMud2luZG93U2l6ZSx0aGlzLnN0YXJ0V2luZG93RXZlcnkpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMpe2UuY2FsbCh0aGlzLHQpLHRoaXMuZGVzdGluYXRpb249dCx0aGlzLndpbmRvd1NpemU9cix0aGlzLnN0YXJ0V2luZG93RXZlcnk9cyx0aGlzLndpbmRvd3M9W25ldyBhLlN1YmplY3RdLHRoaXMuY291bnQ9MCx0Lm5leHQodGhpcy53aW5kb3dzWzBdKX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnN0YXJ0V2luZG93RXZlcnk+MD90aGlzLnN0YXJ0V2luZG93RXZlcnk6dGhpcy53aW5kb3dTaXplLHI9dGhpcy5kZXN0aW5hdGlvbixzPXRoaXMud2luZG93U2l6ZSxpPXRoaXMud2luZG93cyxvPWkubGVuZ3RoLG49MDtvPm4mJiF0aGlzLmlzVW5zdWJzY3JpYmVkO24rKylpW25dLm5leHQoZSk7dmFyIHU9dGhpcy5jb3VudC1zKzE7aWYodT49MCYmdSV0PT09MCYmIXRoaXMuaXNVbnN1YnNjcmliZWQmJmkuc2hpZnQoKS5jb21wbGV0ZSgpLCsrdGhpcy5jb3VudCV0PT09MCYmIXRoaXMuaXNVbnN1YnNjcmliZWQpe3ZhciBjPW5ldyBhLlN1YmplY3Q7aS5wdXNoKGMpLHIubmV4dChjKX19LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLndpbmRvd3M7aWYodClmb3IoO3QubGVuZ3RoPjAmJiF0aGlzLmlzVW5zdWJzY3JpYmVkOyl0LnNoaWZ0KCkuZXJyb3IoZSk7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy53aW5kb3dzO2lmKGUpZm9yKDtlLmxlbmd0aD4wJiYhdGhpcy5pc1Vuc3Vic2NyaWJlZDspZS5zaGlmdCgpLmNvbXBsZXRlKCk7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpfSx0LnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt0aGlzLmNvdW50PTAsdGhpcy53aW5kb3dzPW51bGx9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci93aW5kb3dUaW1lXCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL1N1YmplY3RcIixcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9bnVsbCksdm9pZCAwPT09ciYmKHI9Yi5hc3luYyksdGhpcy5saWZ0KG5ldyBwKGUsdCxyKSl9ZnVuY3Rpb24gcyhlKXt2YXIgdD1lLnN1YnNjcmliZXIscj1lLndpbmRvd1RpbWVTcGFuLHM9ZS53aW5kb3c7cyYmcy5jb21wbGV0ZSgpLGUud2luZG93PXQub3BlbldpbmRvdygpLHRoaXMuc2NoZWR1bGUoZSxyKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWUud2luZG93VGltZVNwYW4scj1lLnN1YnNjcmliZXIscz1lLnNjaGVkdWxlcixpPWUud2luZG93Q3JlYXRpb25JbnRlcnZhbCxuPXIub3BlbldpbmRvdygpLGE9dGhpcyx1PXthY3Rpb246YSxzdWJzY3JpcHRpb246bnVsbH0sYz17c3Vic2NyaWJlcjpyLHdpbmRvdzpuLGNvbnRleHQ6dX07dS5zdWJzY3JpcHRpb249cy5zY2hlZHVsZShvLHQsYyksYS5hZGQodS5zdWJzY3JpcHRpb24pLGEuc2NoZWR1bGUoZSxpKX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUuc3Vic2NyaWJlcixyPWUud2luZG93LHM9ZS5jb250ZXh0O3MmJnMuYWN0aW9uJiZzLnN1YnNjcmlwdGlvbiYmcy5hY3Rpb24ucmVtb3ZlKHMuc3Vic2NyaXB0aW9uKSx0LmNsb3NlV2luZG93KHIpfXZhciBuPVN5c3RlbS5nbG9iYWwsYT1uLmRlZmluZTtuLmRlZmluZT12b2lkIDA7dmFyIHU9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LGM9cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxsPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksYj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIik7ZS53aW5kb3dUaW1lPXI7dmFyIHA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLndpbmRvd1RpbWVTcGFuPWUsdGhpcy53aW5kb3dDcmVhdGlvbkludGVydmFsPXQsdGhpcy5zY2hlZHVsZXI9cn1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGgoZSx0aGlzLndpbmRvd1RpbWVTcGFuLHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbCx0aGlzLnNjaGVkdWxlcikpfSxlfSgpLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsbixhKXtpZihlLmNhbGwodGhpcyx0KSx0aGlzLmRlc3RpbmF0aW9uPXQsdGhpcy53aW5kb3dUaW1lU3Bhbj1yLHRoaXMud2luZG93Q3JlYXRpb25JbnRlcnZhbD1uLHRoaXMuc2NoZWR1bGVyPWEsdGhpcy53aW5kb3dzPVtdLG51bGwhPT1uJiZuPj0wKXt2YXIgdT10aGlzLm9wZW5XaW5kb3coKSxjPXtzdWJzY3JpYmVyOnRoaXMsd2luZG93OnUsY29udGV4dDpudWxsfSxsPXt3aW5kb3dUaW1lU3BhbjpyLHdpbmRvd0NyZWF0aW9uSW50ZXJ2YWw6bixzdWJzY3JpYmVyOnRoaXMsc2NoZWR1bGVyOmF9O3RoaXMuYWRkKGEuc2NoZWR1bGUobyxyLGMpKSx0aGlzLmFkZChhLnNjaGVkdWxlKGksbixsKSl9ZWxzZXt2YXIgYj10aGlzLm9wZW5XaW5kb3coKSxwPXtzdWJzY3JpYmVyOnRoaXMsd2luZG93OmIsd2luZG93VGltZVNwYW46cn07dGhpcy5hZGQoYS5zY2hlZHVsZShzLHIscCkpfX1yZXR1cm4gdSh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLndpbmRvd3Mscj10Lmxlbmd0aCxzPTA7cj5zO3MrKyl7dmFyIGk9dFtzXTtpLmlzVW5zdWJzY3JpYmVkfHxpLm5leHQoZSl9fSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMud2luZG93czt0Lmxlbmd0aD4wOyl0LnNoaWZ0KCkuZXJyb3IoZSk7dGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMud2luZG93cztlLmxlbmd0aD4wOyl7dmFyIHQ9ZS5zaGlmdCgpO3QuaXNVbnN1YnNjcmliZWR8fHQuY29tcGxldGUoKX10aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLm9wZW5XaW5kb3c9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgbC5TdWJqZWN0O3RoaXMud2luZG93cy5wdXNoKGUpO3ZhciB0PXRoaXMuZGVzdGluYXRpb247cmV0dXJuIHQubmV4dChlKSxlfSx0LnByb3RvdHlwZS5jbG9zZVdpbmRvdz1mdW5jdGlvbihlKXtlLmNvbXBsZXRlKCk7dmFyIHQ9dGhpcy53aW5kb3dzO3Quc3BsaWNlKHQuaW5kZXhPZihlKSwxKX0sdH0oYy5TdWJzY3JpYmVyKTtyZXR1cm4gbi5kZWZpbmU9YSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3dpbmRvd1RvZ2dsZVwiLFtcInJ4anMvU3ViamVjdFwiLFwicnhqcy9TdWJzY3JpcHRpb25cIixcInJ4anMvdXRpbC90cnlDYXRjaFwiLFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIsXCJyeGpzL091dGVyU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIHRoaXMubGlmdChuZXcgcChlLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksYT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpcHRpb25cIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL3RyeUNhdGNoXCIpLGM9cmVxdWlyZShcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiKSxsPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxiPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS53aW5kb3dUb2dnbGU9cjt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm9wZW5pbmdzPWUsdGhpcy5jbG9zaW5nU2VsZWN0b3I9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGgoZSx0aGlzLm9wZW5pbmdzLHRoaXMuY2xvc2luZ1NlbGVjdG9yKSl9LGV9KCksaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyx0KSx0aGlzLm9wZW5pbmdzPXIsdGhpcy5jbG9zaW5nU2VsZWN0b3I9cyx0aGlzLmNvbnRleHRzPVtdLHRoaXMuYWRkKHRoaXMub3BlblN1YnNjcmlwdGlvbj1iLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMscixyKSl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmNvbnRleHRzO2lmKHQpZm9yKHZhciByPXQubGVuZ3RoLHM9MDtyPnM7cysrKXRbc10ud2luZG93Lm5leHQoZSl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbih0KXt2YXIgcj10aGlzLmNvbnRleHRzO2lmKHRoaXMuY29udGV4dHM9bnVsbCxyKWZvcih2YXIgcz1yLmxlbmd0aCxpPS0xOysraTxzOyl7dmFyIG89cltpXTtvLndpbmRvdy5lcnJvcih0KSxvLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfWUucHJvdG90eXBlLl9lcnJvci5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuY29udGV4dHM7aWYodGhpcy5jb250ZXh0cz1udWxsLHQpZm9yKHZhciByPXQubGVuZ3RoLHM9LTE7KytzPHI7KXt2YXIgaT10W3NdO2kud2luZG93LmNvbXBsZXRlKCksaS5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKX1lLnByb3RvdHlwZS5fY29tcGxldGUuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5jb250ZXh0cztpZih0aGlzLmNvbnRleHRzPW51bGwsZSlmb3IodmFyIHQ9ZS5sZW5ndGgscj0tMTsrK3I8dDspe3ZhciBzPWVbcl07cy53aW5kb3cudW5zdWJzY3JpYmUoKSxzLnN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpfX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe2lmKGU9PT10aGlzLm9wZW5pbmdzKXt2YXIgbz10aGlzLmNsb3NpbmdTZWxlY3RvcixsPXUudHJ5Q2F0Y2gobykodCk7aWYobD09PWMuZXJyb3JPYmplY3QpcmV0dXJuIHRoaXMuZXJyb3IoYy5lcnJvck9iamVjdC5lKTt2YXIgcD1uZXcgbi5TdWJqZWN0LGg9bmV3IGEuU3Vic2NyaXB0aW9uLGQ9e3dpbmRvdzpwLHN1YnNjcmlwdGlvbjpofTt0aGlzLmNvbnRleHRzLnB1c2goZCk7dmFyIGY9Yi5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLGwsZCk7Zi5pc1Vuc3Vic2NyaWJlZD90aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMubGVuZ3RoLTEpOihmLmNvbnRleHQ9ZCxoLmFkZChmKSksdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHApfWVsc2UgdGhpcy5jbG9zZVdpbmRvdyh0aGlzLmNvbnRleHRzLmluZGV4T2YoZSkpfSx0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlKXt0aGlzLmVycm9yKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXtlIT09dGhpcy5vcGVuU3Vic2NyaXB0aW9uJiZ0aGlzLmNsb3NlV2luZG93KHRoaXMuY29udGV4dHMuaW5kZXhPZihlLmNvbnRleHQpKX0sdC5wcm90b3R5cGUuY2xvc2VXaW5kb3c9ZnVuY3Rpb24oZSl7aWYoLTEhPT1lKXt2YXIgdD10aGlzLmNvbnRleHRzLHI9dFtlXSxzPXIud2luZG93LGk9ci5zdWJzY3JpcHRpb247dC5zcGxpY2UoZSwxKSxzLmNvbXBsZXRlKCksaS51bnN1YnNjcmliZSgpfX0sdH0obC5PdXRlclN1YnNjcmliZXIpO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivd2luZG93V2hlblwiLFtcInJ4anMvU3ViamVjdFwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHRoaXMubGlmdChuZXcgYihlKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJqZWN0XCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksYz1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksbD1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpO2Uud2luZG93V2hlbj1yO3ZhciBiPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNsb3NpbmdTZWxlY3Rvcj1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgcChlLHRoaXMuY2xvc2luZ1NlbGVjdG9yKSl9LGV9KCkscD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMsdCksdGhpcy5kZXN0aW5hdGlvbj10LHRoaXMuY2xvc2luZ1NlbGVjdG9yPXIsdGhpcy5vcGVuV2luZG93KCl9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5ub3RpZnlOZXh0PWZ1bmN0aW9uKGUsdCxyLHMsaSl7dGhpcy5vcGVuV2luZG93KGkpfSx0LnByb3RvdHlwZS5ub3RpZnlFcnJvcj1mdW5jdGlvbihlLHQpe3RoaXMuX2Vycm9yKGUpfSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbihlKXt0aGlzLm9wZW5XaW5kb3coZSl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMud2luZG93Lm5leHQoZSl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLndpbmRvdy5lcnJvcihlKSx0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpLHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMud2luZG93LmNvbXBsZXRlKCksdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpLHRoaXMudW5zdWJzY3JpYmVDbG9zaW5nTm90aWZpY2F0aW9uKCl9LHQucHJvdG90eXBlLnVuc3Vic2NyaWJlQ2xvc2luZ05vdGlmaWNhdGlvbj1mdW5jdGlvbigpe3RoaXMuY2xvc2luZ05vdGlmaWNhdGlvbiYmdGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uLnVuc3Vic2NyaWJlKCl9LHQucHJvdG90eXBlLm9wZW5XaW5kb3c9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9bnVsbCksZSYmKHRoaXMucmVtb3ZlKGUpLGUudW5zdWJzY3JpYmUoKSk7dmFyIHQ9dGhpcy53aW5kb3c7dCYmdC5jb21wbGV0ZSgpO3ZhciByPXRoaXMud2luZG93PW5ldyBuLlN1YmplY3Q7dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHIpO3ZhciBzPWEudHJ5Q2F0Y2godGhpcy5jbG9zaW5nU2VsZWN0b3IpKCk7aWYocz09PXUuZXJyb3JPYmplY3Qpe3ZhciBpPXUuZXJyb3JPYmplY3QuZTt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGkpLHRoaXMud2luZG93LmVycm9yKGkpfWVsc2UgdGhpcy5hZGQodGhpcy5jbG9zaW5nTm90aWZpY2F0aW9uPWwuc3Vic2NyaWJlVG9SZXN1bHQodGhpcyxzKSl9LHR9KGMuT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3dpdGhMYXRlc3RGcm9tXCIsW1wicnhqcy9PdXRlclN1YnNjcmliZXJcIixcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllW3QtMF09YXJndW1lbnRzW3RdO3ZhciByO1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbZS5sZW5ndGgtMV0mJihyPWUucG9wKCkpO3ZhciBzPWU7cmV0dXJuIHRoaXMubGlmdChuZXcgdShzLHIpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL091dGVyU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIik7ZS53aXRoTGF0ZXN0RnJvbT1yO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMub2JzZXJ2YWJsZXM9ZSx0aGlzLnByb2plY3Q9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGMoZSx0aGlzLm9ic2VydmFibGVzLHRoaXMucHJvamVjdCkpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5vYnNlcnZhYmxlcz1yLHRoaXMucHJvamVjdD1zLHRoaXMudG9SZXNwb25kPVtdO3ZhciBpPXIubGVuZ3RoO3RoaXMudmFsdWVzPW5ldyBBcnJheShpKTtmb3IodmFyIG89MDtpPm87bysrKXRoaXMudG9SZXNwb25kLnB1c2gobyk7Zm9yKHZhciBvPTA7aT5vO28rKyl7dmFyIG49cltvXTt0aGlzLmFkZChhLnN1YnNjcmliZVRvUmVzdWx0KHRoaXMsbixuLG8pKX19cmV0dXJuIG8odCxlKSxcbnQucHJvdG90eXBlLm5vdGlmeU5leHQ9ZnVuY3Rpb24oZSx0LHIscyxpKXt0aGlzLnZhbHVlc1tyXT10O3ZhciBvPXRoaXMudG9SZXNwb25kO2lmKG8ubGVuZ3RoPjApe3ZhciBuPW8uaW5kZXhPZihyKTstMSE9PW4mJm8uc3BsaWNlKG4sMSl9fSx0LnByb3RvdHlwZS5ub3RpZnlDb21wbGV0ZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7aWYoMD09PXRoaXMudG9SZXNwb25kLmxlbmd0aCl7dmFyIHQ9W2VdLmNvbmNhdCh0aGlzLnZhbHVlcyk7dGhpcy5wcm9qZWN0P3RoaXMuX3RyeVByb2plY3QodCk6dGhpcy5kZXN0aW5hdGlvbi5uZXh0KHQpfX0sdC5wcm90b3R5cGUuX3RyeVByb2plY3Q9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9dGhpcy5wcm9qZWN0LmFwcGx5KHRoaXMsZSl9Y2F0Y2gocil7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihyKX10aGlzLmRlc3RpbmF0aW9uLm5leHQodCl9LHR9KG4uT3V0ZXJTdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci96aXBcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvemlwXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci96aXBcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwPW8uemlwUHJvdG8sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL3ppcEFsbFwiLFtcInJ4anMvb3BlcmF0b3IvemlwXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiB0aGlzLmxpZnQobmV3IG8uWmlwT3BlcmF0b3IoZSkpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvemlwXCIpO3JldHVybiBlLnppcEFsbD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9PcGVyYXRvclwiLFtcInJ4anMvU3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgaS5TdWJzY3JpYmVyKGUpKX0sZX0oKTtyZXR1cm4gZS5PcGVyYXRvcj1vLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zY2hlZHVsZXIvVmlydHVhbFRpbWVTY2hlZHVsZXJcIixbXCJyeGpzL1N1YnNjcmlwdGlvblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9TdWJzY3JpcHRpb25cIiksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmFjdGlvbnM9W10sdGhpcy5hY3RpdmU9ITEsdGhpcy5zY2hlZHVsZWRJZD1udWxsLHRoaXMuaW5kZXg9MCx0aGlzLnNvcnRlZD0hMSx0aGlzLmZyYW1lPTAsdGhpcy5tYXhGcmFtZXM9NzUwfXJldHVybiBlLnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mcmFtZX0sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5hY3Rpb25zLHQ9dGhpcy5tYXhGcmFtZXM7ZS5sZW5ndGg+MDspe3ZhciByPWUuc2hpZnQoKTtpZih0aGlzLmZyYW1lPXIuZGVsYXksISh0aGlzLmZyYW1lPD10KSlicmVhaztpZihyLmV4ZWN1dGUoKSxyLmVycm9yKXRocm93IGUubGVuZ3RoPTAsdGhpcy5mcmFtZT0wLHIuZXJyb3J9ZS5sZW5ndGg9MCx0aGlzLmZyYW1lPTB9LGUucHJvdG90eXBlLmFkZEFjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmFjdGlvbnM7dC5wdXNoKGUpLHQuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLmRlbGF5PT09dC5kZWxheT9lLmluZGV4PT09dC5pbmRleD8wOmUuaW5kZXg+dC5pbmRleD8xOi0xOmUuZGVsYXk+dC5kZWxheT8xOi0xfSl9LGUucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksdGhpcy5zb3J0ZWQ9ITEsbmV3IGEodGhpcyxlLHRoaXMuaW5kZXgrKykuc2NoZWR1bGUocix0KX0sZS5mcmFtZVRpbWVGYWN0b3I9MTAsZX0oKTtlLlZpcnR1YWxUaW1lU2NoZWR1bGVyPW47dmFyIGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMpLHRoaXMuc2NoZWR1bGVyPXQsdGhpcy53b3JrPXIsdGhpcy5pbmRleD1zLHRoaXMuY2FsbHM9MH1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLnNjaGVkdWxlPWZ1bmN0aW9uKGUscil7aWYodm9pZCAwPT09ciYmKHI9MCksdGhpcy5pc1Vuc3Vic2NyaWJlZClyZXR1cm4gdGhpczt2YXIgcz10aGlzLnNjaGVkdWxlcixpPW51bGw7cmV0dXJuIDA9PT10aGlzLmNhbGxzKys/aT10aGlzOihpPW5ldyB0KHMsdGhpcy53b3JrLHMuaW5kZXgrPTEpLHRoaXMuYWRkKGkpKSxpLnN0YXRlPWUsaS5kZWxheT1zLmZyYW1lK3Iscy5hZGRBY3Rpb24oaSksdGhpc30sdC5wcm90b3R5cGUuZXhlY3V0ZT1mdW5jdGlvbigpe2lmKHRoaXMuaXNVbnN1YnNjcmliZWQpdGhyb3cgbmV3IEVycm9yKFwiSG93IGRpZCBkaWQgd2UgZXhlY3V0ZSBhIGNhbmNlbGVkIEFjdGlvbj9cIik7dGhpcy53b3JrKHRoaXMuc3RhdGUpfSx0LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc2NoZWR1bGVyLmFjdGlvbnMscj10LmluZGV4T2YodGhpcyk7dGhpcy53b3JrPXZvaWQgMCx0aGlzLnN0YXRlPXZvaWQgMCx0aGlzLnNjaGVkdWxlcj12b2lkIDAsLTEhPT1yJiZ0LnNwbGljZShyLDEpLGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyl9LHR9KG8uU3Vic2NyaXB0aW9uKTtyZXR1cm4gci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nXCIsW10sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09dCYmKHQ9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSx0aGlzLnN1YnNjcmliZWRGcmFtZT1lLHRoaXMudW5zdWJzY3JpYmVkRnJhbWU9dH1yZXR1cm4gZX0oKTtyZXR1cm4gZS5TdWJzY3JpcHRpb25Mb2c9aSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9hcHBseU1peGluc1wiLFtdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7Zm9yKHZhciByPTAscz10Lmxlbmd0aDtzPnI7cisrKWZvcih2YXIgaT10W3JdLG89T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaS5wcm90b3R5cGUpLG49MCxhPW8ubGVuZ3RoO2E+bjtuKyspe3ZhciB1PW9bbl07ZS5wcm90b3R5cGVbdV09aS5wcm90b3R5cGVbdV19fXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtyZXR1cm4gcy5kZWZpbmU9dm9pZCAwLGUuYXBwbHlNaXhpbnM9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdGVzdGluZy9Ib3RPYnNlcnZhYmxlXCIsW1wicnhqcy9TdWJqZWN0XCIsXCJyeGpzL1N1YnNjcmlwdGlvblwiLFwicnhqcy90ZXN0aW5nL1N1YnNjcmlwdGlvbkxvZ2dhYmxlXCIsXCJyeGpzL3V0aWwvYXBwbHlNaXhpbnNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmlwdGlvblwiKSxhPXJlcXVpcmUoXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nZ2FibGVcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL2FwcGx5TWl4aW5zXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzKSx0aGlzLm1lc3NhZ2VzPXQsdGhpcy5zdWJzY3JpcHRpb25zPVtdLHRoaXMuc2NoZWR1bGVyPXJ9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMscz1yLmxvZ1N1YnNjcmliZWRGcmFtZSgpO3JldHVybiB0LmFkZChuZXcgbi5TdWJzY3JpcHRpb24oZnVuY3Rpb24oKXtyLmxvZ1Vuc3Vic2NyaWJlZEZyYW1lKHMpfSkpLGUucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLHQpfSx0LnByb3RvdHlwZS5zZXR1cD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLHQ9ZS5tZXNzYWdlcy5sZW5ndGgscj0wO3Q+cjtyKyspIWZ1bmN0aW9uKCl7dmFyIHQ9ZS5tZXNzYWdlc1tyXTtlLnNjaGVkdWxlci5zY2hlZHVsZShmdW5jdGlvbigpe3Qubm90aWZpY2F0aW9uLm9ic2VydmUoZSl9LHQuZnJhbWUpfSgpfSx0fShvLlN1YmplY3QpO3JldHVybiBlLkhvdE9ic2VydmFibGU9Yyx1LmFwcGx5TWl4aW5zKGMsW2EuU3Vic2NyaXB0aW9uTG9nZ2FibGVdKSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9BbmltYXRpb25GcmFtZVwiLFtcInJ4anMvdXRpbC9yb290XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3V0aWwvcm9vdFwiKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtlLnJlcXVlc3RBbmltYXRpb25GcmFtZT8odGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZT1lLmNhbmNlbEFuaW1hdGlvbkZyYW1lLmJpbmQoZSksdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZS5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZChlKSk6ZS5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU/KHRoaXMuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZS5tb3pDYW5jZWxBbmltYXRpb25GcmFtZS5iaW5kKGUpLHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWUubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQoZSkpOmUud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lPyh0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWUud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUuYmluZChlKSx0aGlzLnJlcXVlc3RBbmltYXRpb25GcmFtZT1lLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZS5iaW5kKGUpKTplLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lPyh0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWUubXNDYW5jZWxBbmltYXRpb25GcmFtZS5iaW5kKGUpLHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWUubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYmluZChlKSk6ZS5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lPyh0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWUub0NhbmNlbEFuaW1hdGlvbkZyYW1lLmJpbmQoZSksdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZS5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lLmJpbmQoZSkpOih0aGlzLmNhbmNlbEFuaW1hdGlvbkZyYW1lPWUuY2xlYXJUaW1lb3V0LmJpbmQoZSksdGhpcy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGUuc2V0VGltZW91dCh0LDFlMy82MCl9KX1yZXR1cm4gZX0oKTtyZXR1cm4gZS5SZXF1ZXN0QW5pbWF0aW9uRnJhbWVEZWZpbml0aW9uPW8sZS5BbmltYXRpb25GcmFtZT1uZXcgbyhpLnJvb3QpLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy91dGlsL3RyeUNhdGNoXCIsW1wicnhqcy91dGlsL2Vycm9yT2JqZWN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7dHJ5e3JldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1jYXRjaChlKXtyZXR1cm4gYS5lcnJvck9iamVjdC5lPWUsYS5lcnJvck9iamVjdH19ZnVuY3Rpb24gcyhlKXtyZXR1cm4gbj1lLHJ9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbixhPXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIik7cmV0dXJuIGUudHJ5Q2F0Y2g9cyxpLmRlZmluZT1vLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInN5bWJvbC1vYnNlcnZhYmxlXCIsW1wicG9ueWZpbGxcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyZXR1cm4gci5kZWZpbmU9dm9pZCAwLHQuZXhwb3J0cz1yZXF1aXJlKFwicG9ueWZpbGxcIikocnx8d2luZG93fHx0aGlzKSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvQXN5bmNTdWJqZWN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3ZhciB0PWUudmFsdWUscj1lLnN1YmplY3Q7ci5uZXh0KHQpLHIuY29tcGxldGUoKX1mdW5jdGlvbiBzKGUpe3ZhciB0PWUuZXJyLHI9ZS5zdWJqZWN0O3IuZXJyb3IodCl9dmFyIGk9U3lzdGVtLmdsb2JhbCxvPWkuZGVmaW5lO2kuZGVmaW5lPXZvaWQgMDt2YXIgbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sYT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC90cnlDYXRjaFwiKSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIiksbD1yZXF1aXJlKFwicnhqcy9Bc3luY1N1YmplY3RcIiksYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzLGkpe2UuY2FsbCh0aGlzKSx0aGlzLmNhbGxiYWNrRnVuYz10LHRoaXMuc2VsZWN0b3I9cix0aGlzLmFyZ3M9cyx0aGlzLnNjaGVkdWxlcj1pfXJldHVybiBuKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyLHMpe3JldHVybiB2b2lkIDA9PT1yJiYocj12b2lkIDApLGZ1bmN0aW9uKCl7Zm9yKHZhciBpPVtdLG89MDtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKWlbby0wXT1hcmd1bWVudHNbb107cmV0dXJuIG5ldyB0KGUscixpLHMpfX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgcj10aGlzLmNhbGxiYWNrRnVuYyxzPXRoaXMuYXJncyxpPXRoaXMuc2NoZWR1bGVyLG89dGhpcy5zdWJqZWN0O2lmKGkpcmV0dXJuIGkuc2NoZWR1bGUodC5kaXNwYXRjaCwwLHtzb3VyY2U6dGhpcyxzdWJzY3JpYmVyOmV9KTtpZighbyl7bz10aGlzLnN1YmplY3Q9bmV3IGwuQXN5bmNTdWJqZWN0O3ZhciBuPWZ1bmN0aW9uIGIoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTt2YXIgcj1iLnNvdXJjZSxzPXIuc2VsZWN0b3IsaT1yLnN1YmplY3Q7aWYocyl7dmFyIG89dS50cnlDYXRjaChzKS5hcHBseSh0aGlzLGUpO289PT1jLmVycm9yT2JqZWN0P2kuZXJyb3IoYy5lcnJvck9iamVjdC5lKTooaS5uZXh0KG8pLGkuY29tcGxldGUoKSl9ZWxzZSBpLm5leHQoMT09PWUubGVuZ3RoP2VbMF06ZSksaS5jb21wbGV0ZSgpfTtuLnNvdXJjZT10aGlzO3ZhciBhPXUudHJ5Q2F0Y2gocikuYXBwbHkodGhpcyxzLmNvbmNhdChuKSk7YT09PWMuZXJyb3JPYmplY3QmJm8uZXJyb3IoYy5lcnJvck9iamVjdC5lKX1yZXR1cm4gby5zdWJzY3JpYmUoZSl9LHQuZGlzcGF0Y2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxpPWUuc291cmNlLG89ZS5zdWJzY3JpYmVyLG49aS5jYWxsYmFja0Z1bmMsYT1pLmFyZ3MsYj1pLnNjaGVkdWxlcixwPWkuc3ViamVjdDtpZighcCl7cD1pLnN1YmplY3Q9bmV3IGwuQXN5bmNTdWJqZWN0O3ZhciBoPWZ1bmN0aW9uIGYoKXtmb3IodmFyIGU9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspZVtpLTBdPWFyZ3VtZW50c1tpXTt2YXIgbz1mLnNvdXJjZSxuPW8uc2VsZWN0b3IsYT1vLnN1YmplY3Q7aWYobil7dmFyIGw9dS50cnlDYXRjaChuKS5hcHBseSh0aGlzLGUpO2w9PT1jLmVycm9yT2JqZWN0P3QuYWRkKGIuc2NoZWR1bGUocywwLHtlcnI6Yy5lcnJvck9iamVjdC5lLHN1YmplY3Q6YX0pKTp0LmFkZChiLnNjaGVkdWxlKHIsMCx7dmFsdWU6bCxzdWJqZWN0OmF9KSl9ZWxzZXt2YXIgcD0xPT09ZS5sZW5ndGg/ZVswXTplO3QuYWRkKGIuc2NoZWR1bGUociwwLHt2YWx1ZTpwLHN1YmplY3Q6YX0pKX19O2guc291cmNlPWk7dmFyIGQ9dS50cnlDYXRjaChuKS5hcHBseSh0aGlzLGEuY29uY2F0KGgpKTtkPT09Yy5lcnJvck9iamVjdCYmcC5lcnJvcihjLmVycm9yT2JqZWN0LmUpfXQuYWRkKHAuc3Vic2NyaWJlKG8pKX0sdH0oYS5PYnNlcnZhYmxlKTtyZXR1cm4gZS5Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZT1iLGkuZGVmaW5lPW8sdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2tcIixbXCJyeGpzL29ic2VydmFibGUvQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvQm91bmROb2RlQ2FsbGJhY2tPYnNlcnZhYmxlXCIpO3JldHVybiBlLmJpbmROb2RlQ2FsbGJhY2s9aS5Cb3VuZE5vZGVDYWxsYmFja09ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL1NjYWxhck9ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIixcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9TY2FsYXJPYnNlcnZhYmxlXCIpLGE9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9FbXB0eU9ic2VydmFibGVcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL2lzU2NoZWR1bGVyXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzKSx0aGlzLmFycmF5PXQsdGhpcy5zY2hlZHVsZXI9cixyfHwxIT09dC5sZW5ndGh8fCh0aGlzLl9pc1NjYWxhcj0hMCx0aGlzLnZhbHVlPXRbMF0pfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbmV3IHQoZSxyKX0sdC5vZj1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSxyPTA7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyllW3ItMF09YXJndW1lbnRzW3JdO3ZhciBzPWVbZS5sZW5ndGgtMV07dS5pc1NjaGVkdWxlcihzKT9lLnBvcCgpOnM9bnVsbDt2YXIgaT1lLmxlbmd0aDtyZXR1cm4gaT4xP25ldyB0KGUscyk6MT09PWk/bmV3IG4uU2NhbGFyT2JzZXJ2YWJsZShlWzBdLHMpOm5ldyBhLkVtcHR5T2JzZXJ2YWJsZShzKX0sdC5kaXNwYXRjaD1mdW5jdGlvbihlKXt2YXIgdD1lLmFycmF5LHI9ZS5pbmRleCxzPWUuY291bnQsaT1lLnN1YnNjcmliZXI7cmV0dXJuIHI+PXM/dm9pZCBpLmNvbXBsZXRlKCk6KGkubmV4dCh0W3JdKSx2b2lkKGkuaXNVbnN1YnNjcmliZWR8fChlLmluZGV4PXIrMSx0aGlzLnNjaGVkdWxlKGUpKSkpfSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciByPTAscz10aGlzLmFycmF5LGk9cy5sZW5ndGgsbz10aGlzLnNjaGVkdWxlcjtpZihvKXJldHVybiBvLnNjaGVkdWxlKHQuZGlzcGF0Y2gsMCx7YXJyYXk6cyxpbmRleDpyLGNvdW50Omksc3Vic2NyaWJlcjplfSk7Zm9yKHZhciBuPTA7aT5uJiYhZS5pc1Vuc3Vic2NyaWJlZDtuKyspZS5uZXh0KHNbbl0pO2UuY29tcGxldGUoKX0sdH0oby5PYnNlcnZhYmxlKTtyZXR1cm4gZS5BcnJheU9ic2VydmFibGU9YyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC9zdWJzY3JpYmVUb1Jlc3VsdFwiLFtcInJ4anMvdXRpbC9yb290XCIsXCJyeGpzL3V0aWwvaXNBcnJheVwiLFwicnhqcy91dGlsL2lzUHJvbWlzZVwiLFwicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiLFwicnhqcy9Jbm5lclN1YnNjcmliZXJcIixcInN5bWJvbC1vYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCxyLHMpe3ZhciBpPW5ldyBsLklubmVyU3Vic2NyaWJlcihlLHIscyk7aWYoIWkuaXNVbnN1YnNjcmliZWQpe2lmKHQgaW5zdGFuY2VvZiB1Lk9ic2VydmFibGUpcmV0dXJuIHQuX2lzU2NhbGFyPyhpLm5leHQodC52YWx1ZSksdm9pZCBpLmNvbXBsZXRlKCkpOnQuc3Vic2NyaWJlKGkpO2lmKG4uaXNBcnJheSh0KSl7Zm9yKHZhciBwPTAsaD10Lmxlbmd0aDtoPnAmJiFpLmlzVW5zdWJzY3JpYmVkO3ArKylpLm5leHQodFtwXSk7aS5pc1Vuc3Vic2NyaWJlZHx8aS5jb21wbGV0ZSgpfWVsc2V7aWYoYS5pc1Byb21pc2UodCkpcmV0dXJuIHQudGhlbihmdW5jdGlvbihlKXtpLmlzVW5zdWJzY3JpYmVkfHwoaS5uZXh0KGUpLGkuY29tcGxldGUoKSl9LGZ1bmN0aW9uKGUpe3JldHVybiBpLmVycm9yKGUpfSkudGhlbihudWxsLGZ1bmN0aW9uKGUpe28ucm9vdC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0pfSksaTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2MuJCRpdGVyYXRvcl0pe2Zvcih2YXIgZD0wLGY9dDtkPGYubGVuZ3RoO2QrKyl7dmFyIHY9ZltkXTtpZihpLm5leHQodiksaS5pc1Vuc3Vic2NyaWJlZClicmVha31pLmlzVW5zdWJzY3JpYmVkfHxpLmNvbXBsZXRlKCl9ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0W2JdKXt2YXIgeD10W2JdKCk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgeC5zdWJzY3JpYmUpcmV0dXJuIHguc3Vic2NyaWJlKG5ldyBsLklubmVyU3Vic2NyaWJlcihlLHIscykpO2kuZXJyb3IoXCJpbnZhbGlkIG9ic2VydmFibGVcIil9ZWxzZSBpLmVycm9yKG5ldyBUeXBlRXJyb3IoXCJ1bmtub3duIHR5cGUgcmV0dXJuZWRcIikpfX19dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy91dGlsL3Jvb3RcIiksbj1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL2lzUHJvbWlzZVwiKSx1PXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksYz1yZXF1aXJlKFwicnhqcy9zeW1ib2wvaXRlcmF0b3JcIiksbD1yZXF1aXJlKFwicnhqcy9Jbm5lclN1YnNjcmliZXJcIiksYj1yZXF1aXJlKFwic3ltYm9sLW9ic2VydmFibGVcIik7cmV0dXJuIGUuc3Vic2NyaWJlVG9SZXN1bHQ9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvY29uY2F0XCIsW1wicnhqcy91dGlsL2lzU2NoZWR1bGVyXCIsXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL21lcmdlQWxsXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdC0wXT1hcmd1bWVudHNbdF07cmV0dXJuIHMuYXBwbHkodm9pZCAwLFt0aGlzXS5jb25jYXQoZSkpfWZ1bmN0aW9uIHMoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTt2YXIgcj1udWxsLHM9ZTtyZXR1cm4gbi5pc1NjaGVkdWxlcihzW2UubGVuZ3RoLTFdKSYmKHI9cy5wb3AoKSksbmV3IGEuQXJyYXlPYnNlcnZhYmxlKGUscikubGlmdChuZXcgdS5NZXJnZUFsbE9wZXJhdG9yKDEpKX12YXIgaT1TeXN0ZW0uZ2xvYmFsLG89aS5kZWZpbmU7aS5kZWZpbmU9dm9pZCAwO3ZhciBuPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNTY2hlZHVsZXJcIiksYT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiKSx1PXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21lcmdlQWxsXCIpO3JldHVybiBlLmNvbmNhdD1yLGUuY29uY2F0U3RhdGljPXMsaS5kZWZpbmU9byx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZGVmZXJcIixbXCJyeGpzL29ic2VydmFibGUvRGVmZXJPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvRGVmZXJPYnNlcnZhYmxlXCIpO3JldHVybiBlLmRlZmVyPWkuRGVmZXJPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvZW1wdHlcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9lbXB0eVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9lbXB0eVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLmVtcHR5PW8uZW1wdHksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZm9ya0pvaW5cIixbXCJyeGpzL29ic2VydmFibGUvRm9ya0pvaW5PYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvRm9ya0pvaW5PYnNlcnZhYmxlXCIpO3JldHVybiBlLmZvcmtKb2luPWkuRm9ya0pvaW5PYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uXCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL05vdGlmaWNhdGlvblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx0aGlzLmxpZnQobmV3IHUoZSx0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvTm90aWZpY2F0aW9uXCIpO2Uub2JzZXJ2ZU9uPXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09dCYmKHQ9MCksdGhpcy5zY2hlZHVsZXI9ZSx0aGlzLmRlbGF5PXR9cmV0dXJuIGUucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5zY2hlZHVsZXIsdGhpcy5kZWxheSkpfSxlfSgpO2UuT2JzZXJ2ZU9uT3BlcmF0b3I9dTt2YXIgYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXt2b2lkIDA9PT1zJiYocz0wKSxlLmNhbGwodGhpcyx0KSx0aGlzLnNjaGVkdWxlcj1yLHRoaXMuZGVsYXk9c31yZXR1cm4gbyh0LGUpLHQuZGlzcGF0Y2g9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub3RpZmljYXRpb24scj1lLmRlc3RpbmF0aW9uO3Qub2JzZXJ2ZShyKX0sdC5wcm90b3R5cGUuc2NoZWR1bGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3RoaXMuYWRkKHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHQuZGlzcGF0Y2gsdGhpcy5kZWxheSxuZXcgbChlLHRoaXMuZGVzdGluYXRpb24pKSl9LHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuc2NoZWR1bGVNZXNzYWdlKGEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQoZSkpfSx0LnByb3RvdHlwZS5fZXJyb3I9ZnVuY3Rpb24oZSl7dGhpcy5zY2hlZHVsZU1lc3NhZ2UoYS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZSkpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt0aGlzLnNjaGVkdWxlTWVzc2FnZShhLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpKX0sdH0obi5TdWJzY3JpYmVyKTtlLk9ic2VydmVPblN1YnNjcmliZXI9Yzt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLm5vdGlmaWNhdGlvbj1lLHRoaXMuZGVzdGluYXRpb249dH1yZXR1cm4gZX0oKTtyZXR1cm4gZS5PYnNlcnZlT25NZXNzYWdlPWwscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZnJvbUV2ZW50XCIsW1wicnhqcy9vYnNlcnZhYmxlL0Zyb21FdmVudE9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRPYnNlcnZhYmxlXCIpO3JldHVybiBlLmZyb21FdmVudD1pLkZyb21FdmVudE9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm5cIixbXCJyeGpzL29ic2VydmFibGUvRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZVwiKTtyZXR1cm4gZS5mcm9tRXZlbnRQYXR0ZXJuPWkuRnJvbUV2ZW50UGF0dGVybk9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlXCIpO3JldHVybiBpLk9ic2VydmFibGUuZnJvbVByb21pc2U9by5mcm9tUHJvbWlzZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvZ2VuZXJhdGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9HZW5lcmF0ZU9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvR2VuZXJhdGVPYnNlcnZhYmxlXCIpO3JldHVybiBpLk9ic2VydmFibGUuZ2VuZXJhdGU9by5HZW5lcmF0ZU9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL2lmXCIsW1wicnhqcy9vYnNlcnZhYmxlL0lmT2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0lmT2JzZXJ2YWJsZVwiKTtyZXR1cm4gZS5faWY9aS5JZk9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXJcIixbXCJyeGpzL3NjaGVkdWxlci9RdWV1ZUFjdGlvblwiLFwicnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9RdWV1ZUFjdGlvblwiKSxvPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb25cIiksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmFjdGl2ZT0hMSx0aGlzLmFjdGlvbnM9W10sdGhpcy5zY2hlZHVsZWRJZD1udWxsfXJldHVybiBlLnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKX0sZS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtpZighdGhpcy5hY3RpdmUmJiF0aGlzLnNjaGVkdWxlZElkKXt0aGlzLmFjdGl2ZT0hMDtmb3IodmFyIGU9dGhpcy5hY3Rpb25zLHQ9bnVsbDt0PWUuc2hpZnQoKTspaWYodC5leGVjdXRlKCksdC5lcnJvcil0aHJvdyB0aGlzLmFjdGl2ZT0hMSx0LmVycm9yO3RoaXMuYWN0aXZlPSExfX0sZS5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSwwPj10P3RoaXMuc2NoZWR1bGVOb3coZSxyKTp0aGlzLnNjaGVkdWxlTGF0ZXIoZSx0LHIpfSxlLnByb3RvdHlwZS5zY2hlZHVsZU5vdz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgaS5RdWV1ZUFjdGlvbih0aGlzLGUpLnNjaGVkdWxlKHQpfSxlLnByb3RvdHlwZS5zY2hlZHVsZUxhdGVyPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gbmV3IG8uRnV0dXJlQWN0aW9uKHRoaXMsZSkuc2NoZWR1bGUocix0KX0sZX0oKTtyZXR1cm4gZS5RdWV1ZVNjaGVkdWxlcj1uLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL21lcmdlXCIsW1wicnhqcy9vcGVyYXRvci9tZXJnZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZVwiKTtyZXR1cm4gZS5tZXJnZT1pLm1lcmdlU3RhdGljLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9yYWNlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3JhY2VcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3JhY2VcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5yYWNlPW8ucmFjZVN0YXRpYyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9OZXZlck9ic2VydmFibGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvdXRpbC9ub29wXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1yZXF1aXJlKFwicnhqcy91dGlsL25vb3BcIiksYT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZS5jYWxsKHRoaXMpfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHR9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7bi5ub29wKCl9LHR9KG8uT2JzZXJ2YWJsZSk7cmV0dXJuIGUuTmV2ZXJPYnNlcnZhYmxlPWEsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL29mXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvb2ZcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvb2ZcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5vZj1vLm9mLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9vbkVycm9yUmVzdW1lTmV4dFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9vbkVycm9yUmVzdW1lTmV4dFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivb25FcnJvclJlc3VtZU5leHRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5vbkVycm9yUmVzdW1lTmV4dD1vLm9uRXJyb3JSZXN1bWVOZXh0U3RhdGljLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL3JhbmdlXCIsW1wicnhqcy9vYnNlcnZhYmxlL1JhbmdlT2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL1JhbmdlT2JzZXJ2YWJsZVwiKTtyZXR1cm4gZS5yYW5nZT1pLlJhbmdlT2JzZXJ2YWJsZS5jcmVhdGUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvdXNpbmdcIixbXCJyeGpzL29ic2VydmFibGUvVXNpbmdPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvVXNpbmdPYnNlcnZhYmxlXCIpO3JldHVybiBlLnVzaW5nPWkuVXNpbmdPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS90aHJvd1wiLFtcInJ4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9FcnJvck9ic2VydmFibGVcIik7cmV0dXJuIGUuX3Rocm93PWkuRXJyb3JPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9UaW1lck9ic2VydmFibGVcIixbXCJyeGpzL3V0aWwvaXNOdW1lcmljXCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIsXCJyeGpzL3V0aWwvaXNTY2hlZHVsZXJcIixcInJ4anMvdXRpbC9pc0RhdGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvdXRpbC9pc051bWVyaWNcIiksbj1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLGE9cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiKSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNEYXRlXCIpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7dm9pZCAwPT09dCYmKHQ9MCksZS5jYWxsKHRoaXMpLHRoaXMucGVyaW9kPS0xLHRoaXMuZHVlVGltZT0wLG8uaXNOdW1lcmljKHIpP3RoaXMucGVyaW9kPU51bWJlcihyKTwxJiYxfHxOdW1iZXIocik6dS5pc1NjaGVkdWxlcihyKSYmKHM9ciksdS5pc1NjaGVkdWxlcihzKXx8KHM9YS5hc3luYyksdGhpcy5zY2hlZHVsZXI9cyx0aGlzLmR1ZVRpbWU9Yy5pc0RhdGUodCk/K3QtdGhpcy5zY2hlZHVsZXIubm93KCk6dH1yZXR1cm4gaSh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGUscixzKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksbmV3IHQoZSxyLHMpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXgscj1lLnBlcmlvZCxzPWUuc3Vic2NyaWJlcixpPXRoaXM7aWYocy5uZXh0KHQpLCFzLmlzVW5zdWJzY3JpYmVkKXtpZigtMT09PXIpcmV0dXJuIHMuY29tcGxldGUoKTtlLmluZGV4PXQrMSxpLnNjaGVkdWxlKGUscil9fSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3ZhciByPTAscz10aGlzLGk9cy5wZXJpb2Qsbz1zLmR1ZVRpbWUsbj1zLnNjaGVkdWxlcjtyZXR1cm4gbi5zY2hlZHVsZSh0LmRpc3BhdGNoLG8se2luZGV4OnIscGVyaW9kOmksc3Vic2NyaWJlcjplfSl9LHR9KG4uT2JzZXJ2YWJsZSk7cmV0dXJuIGUuVGltZXJPYnNlcnZhYmxlPWwsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvemlwXCIsW1wicnhqcy9vcGVyYXRvci96aXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvemlwXCIpO3JldHVybiBlLnppcD1pLnppcFN0YXRpYyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9kb20vYWpheFwiLFtcInJ4anMvb2JzZXJ2YWJsZS9kb20vQWpheE9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9kb20vQWpheE9ic2VydmFibGVcIik7cmV0dXJuIGUuYWpheD1pLkFqYXhPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvUmVwbGF5U3ViamVjdFwiLFtcInJ4anMvU3ViamVjdFwiLFwicnhqcy9zY2hlZHVsZXIvcXVldWVcIixcInJ4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksbj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvcXVldWVcIiksYT1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9vYnNlcnZlT25cIiksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXt2b2lkIDA9PT10JiYodD1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLHZvaWQgMD09PXImJihyPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSksZS5jYWxsKHRoaXMpLHRoaXMuc2NoZWR1bGVyPXMsdGhpcy5fZXZlbnRzPVtdLHRoaXMuX2J1ZmZlclNpemU9MT50PzE6dCx0aGlzLl93aW5kb3dUaW1lPTE+cj8xOnJ9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuX2dldE5vdygpO3RoaXMuX2V2ZW50cy5wdXNoKG5ldyBjKHIsdCkpLHRoaXMuX3RyaW1CdWZmZXJUaGVuR2V0RXZlbnRzKCksZS5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24odCl7dmFyIHI9dGhpcy5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHMoKSxzPXRoaXMuc2NoZWR1bGVyO3MmJnQuYWRkKHQ9bmV3IGEuT2JzZXJ2ZU9uU3Vic2NyaWJlcih0LHMpKTtmb3IodmFyIGk9ci5sZW5ndGgsbz0wO2k+byYmIXQuaXNVbnN1YnNjcmliZWQ7bysrKXQubmV4dChyW29dLnZhbHVlKTtyZXR1cm4gZS5wcm90b3R5cGUuX3N1YnNjcmliZS5jYWxsKHRoaXMsdCl9LHQucHJvdG90eXBlLl9nZXROb3c9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5zY2hlZHVsZXJ8fG4ucXVldWUpLm5vdygpfSx0LnByb3RvdHlwZS5fdHJpbUJ1ZmZlclRoZW5HZXRFdmVudHM9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fZ2V0Tm93KCksdD10aGlzLl9idWZmZXJTaXplLHI9dGhpcy5fd2luZG93VGltZSxzPXRoaXMuX2V2ZW50cyxpPXMubGVuZ3RoLG89MDtpPm8mJiEoZS1zW29dLnRpbWU8cik7KW8rKztyZXR1cm4gaT50JiYobz1NYXRoLm1heChvLGktdCkpLG8+MCYmcy5zcGxpY2UoMCxvKSxzfSx0fShvLlN1YmplY3QpO2UuUmVwbGF5U3ViamVjdD11O3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMudGltZT1lLHRoaXMudmFsdWU9dH1yZXR1cm4gZX0oKTtyZXR1cm4gci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvYnVmZmVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9idWZmZXJcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyPW8uYnVmZmVyLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyQ291bnRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvYnVmZmVyQ291bnRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2J1ZmZlckNvdW50XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlckNvdW50PW8uYnVmZmVyQ291bnQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUaW1lXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2J1ZmZlclRpbWVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2J1ZmZlclRpbWVcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVGltZT1vLmJ1ZmZlclRpbWUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvYnVmZmVyVG9nZ2xlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9idWZmZXJUb2dnbGVcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyVG9nZ2xlPW8uYnVmZmVyVG9nZ2xlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyV2hlblwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9idWZmZXJXaGVuXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9idWZmZXJXaGVuXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmJ1ZmZlcldoZW49by5idWZmZXJXaGVuLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvY2FjaGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvY2FjaGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2NhY2hlXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmNhY2hlPW8uY2FjaGUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9jYXRjaFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jYXRjaFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY2F0Y2hcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGVbXCJjYXRjaFwiXT1vLl9jYXRjaCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2NvbWJpbmVBbGxcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvY29tYmluZUFsbFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY29tYmluZUFsbFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lQWxsPW8uY29tYmluZUFsbCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2NvbmNhdEFsbFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jb25jYXRBbGxcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2NvbmNhdEFsbFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRBbGw9by5jb25jYXRBbGwsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2NvbmNhdE1hcFwiLFtcInJ4anMvb3BlcmF0b3IvbWVyZ2VNYXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdGhpcy5saWZ0KG5ldyBvLk1lcmdlTWFwT3BlcmF0b3IoZSx0LDEpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21lcmdlTWFwXCIpO3JldHVybiBlLmNvbmNhdE1hcD1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9jb25jYXRNYXBUb1wiLFtcInJ4anMvb3BlcmF0b3IvbWVyZ2VNYXBUb1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQpe3JldHVybiB0aGlzLmxpZnQobmV3IG8uTWVyZ2VNYXBUb09wZXJhdG9yKGUsdCwxKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZU1hcFRvXCIpO3JldHVybiBlLmNvbmNhdE1hcFRvPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9jb3VudFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jb3VudFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY291bnRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY291bnQ9by5jb3VudCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2RlbWF0ZXJpYWxpemVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZGVtYXRlcmlhbGl6ZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZW1hdGVyaWFsaXplPW8uZGVtYXRlcmlhbGl6ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2RlYm91bmNlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2RlYm91bmNlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9kZWJvdW5jZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWJvdW5jZT1vLmRlYm91bmNlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2RlYm91bmNlVGltZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZGVib3VuY2VUaW1lXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmRlYm91bmNlVGltZT1vLmRlYm91bmNlVGltZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWZhdWx0SWZFbXB0eT1vLmRlZmF1bHRJZkVtcHR5LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvZGVsYXlcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZGVsYXlcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2RlbGF5XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmRlbGF5PW8uZGVsYXksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9kZWxheVdoZW5cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZGVsYXlXaGVuXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9kZWxheVdoZW5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGVsYXlXaGVuPW8uZGVsYXlXaGVuLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2Rpc3RpbmN0XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0PW8uZGlzdGluY3Qsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9kaXN0aW5jdEtleVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9kaXN0aW5jdEtleVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RLZXlcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGlzdGluY3RLZXk9by5kaXN0aW5jdEtleSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5kaXN0aW5jdFVudGlsQ2hhbmdlZD1vLmRpc3RpbmN0VW50aWxDaGFuZ2VkLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RVbnRpbEtleUNoYW5nZWRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZGlzdGluY3RVbnRpbEtleUNoYW5nZWRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxLZXlDaGFuZ2VkXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmRpc3RpbmN0VW50aWxLZXlDaGFuZ2VkPW8uZGlzdGluY3RVbnRpbEtleUNoYW5nZWQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9kb1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9kb1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZG9cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGVbXCJkb1wiXT1vLl9kbyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2V4aGF1c3RcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZXhoYXVzdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZXhoYXVzdFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5leGhhdXN0PW8uZXhoYXVzdCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2V4aGF1c3RNYXBcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZXhoYXVzdE1hcFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZXhoYXVzdE1hcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5leGhhdXN0TWFwPW8uZXhoYXVzdE1hcCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2V4cGFuZFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9leHBhbmRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2V4cGFuZFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5leHBhbmQ9by5leHBhbmQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2VsZW1lbnRBdFwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUsdCl7cmV0dXJuIHRoaXMubGlmdChuZXcgdShlLHQpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCIpO2UuZWxlbWVudEF0PXI7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7aWYodGhpcy5pbmRleD1lLHRoaXMuZGVmYXVsdFZhbHVlPXQsMD5lKXRocm93IG5ldyBhLkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7XG5yZXR1cm4gdC5fc3Vic2NyaWJlKG5ldyBjKGUsdGhpcy5pbmRleCx0aGlzLmRlZmF1bHRWYWx1ZSkpfSxlfSgpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7ZS5jYWxsKHRoaXMsdCksdGhpcy5pbmRleD1yLHRoaXMuZGVmYXVsdFZhbHVlPXN9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXswPT09dGhpcy5pbmRleC0tJiYodGhpcy5kZXN0aW5hdGlvbi5uZXh0KGUpLHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKSl9LHQucHJvdG90eXBlLl9jb21wbGV0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGVzdGluYXRpb247dGhpcy5pbmRleD49MCYmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiB0aGlzLmRlZmF1bHRWYWx1ZT9lLm5leHQodGhpcy5kZWZhdWx0VmFsdWUpOmUuZXJyb3IobmV3IGEuQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IpKSxlLmNvbXBsZXRlKCl9LHR9KG4uU3Vic2NyaWJlcik7cmV0dXJuIHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvZmlsdGVyXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2ZpbHRlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZmlsdGVyXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmZpbHRlcj1vLmZpbHRlcixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmFsbHlcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZmluYWxseVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZmluYWxseVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZVtcImZpbmFsbHlcIl09by5fZmluYWxseSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZmluZFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZmluZFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maW5kPW8uZmluZCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmRJbmRleFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9maW5kSW5kZXhcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2ZpbmRJbmRleFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5maW5kSW5kZXg9by5maW5kSW5kZXgsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29wZXJhdG9yL2ZpcnN0XCIsW1wicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvRW1wdHlFcnJvclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQscil7cmV0dXJuIHRoaXMubGlmdChuZXcgdShlLHQscix0aGlzKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvdXRpbC9FbXB0eUVycm9yXCIpO2UuZmlyc3Q9cjt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy5wcmVkaWNhdGU9ZSx0aGlzLnJlc3VsdFNlbGVjdG9yPXQsdGhpcy5kZWZhdWx0VmFsdWU9cix0aGlzLnNvdXJjZT1zfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgYyhlLHRoaXMucHJlZGljYXRlLHRoaXMucmVzdWx0U2VsZWN0b3IsdGhpcy5kZWZhdWx0VmFsdWUsdGhpcy5zb3VyY2UpKX0sZX0oKSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSxvKXtlLmNhbGwodGhpcyx0KSx0aGlzLnByZWRpY2F0ZT1yLHRoaXMucmVzdWx0U2VsZWN0b3I9cyx0aGlzLmRlZmF1bHRWYWx1ZT1pLHRoaXMuc291cmNlPW8sdGhpcy5pbmRleD0wLHRoaXMuaGFzQ29tcGxldGVkPSExfXJldHVybiBvKHQsZSksdC5wcm90b3R5cGUuX25leHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pbmRleCsrO3RoaXMucHJlZGljYXRlP3RoaXMuX3RyeVByZWRpY2F0ZShlLHQpOnRoaXMuX2VtaXQoZSx0KX0sdC5wcm90b3R5cGUuX3RyeVByZWRpY2F0ZT1mdW5jdGlvbihlLHQpe3ZhciByO3RyeXtyPXRoaXMucHJlZGljYXRlKGUsdCx0aGlzLnNvdXJjZSl9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzKX1yJiZ0aGlzLl9lbWl0KGUsdCl9LHQucHJvdG90eXBlLl9lbWl0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3I/dm9pZCB0aGlzLl90cnlSZXN1bHRTZWxlY3RvcihlLHQpOnZvaWQgdGhpcy5fZW1pdEZpbmFsKGUpfSx0LnByb3RvdHlwZS5fdHJ5UmVzdWx0U2VsZWN0b3I9ZnVuY3Rpb24oZSx0KXt2YXIgcjt0cnl7cj10aGlzLnJlc3VsdFNlbGVjdG9yKGUsdCl9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihzKX10aGlzLl9lbWl0RmluYWwocil9LHQucHJvdG90eXBlLl9lbWl0RmluYWw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5kZXN0aW5hdGlvbjt0Lm5leHQoZSksdC5jb21wbGV0ZSgpLHRoaXMuaGFzQ29tcGxldGVkPSEwfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRlc3RpbmF0aW9uO3RoaXMuaGFzQ29tcGxldGVkfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgdGhpcy5kZWZhdWx0VmFsdWU/dGhpcy5oYXNDb21wbGV0ZWR8fGUuZXJyb3IobmV3IGEuRW1wdHlFcnJvcik6KGUubmV4dCh0aGlzLmRlZmF1bHRWYWx1ZSksZS5jb21wbGV0ZSgpKX0sdH0obi5TdWJzY3JpYmVyKTtyZXR1cm4gcy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3V0aWwvTWFwXCIsW1wicnhqcy91dGlsL3Jvb3RcIixcInJ4anMvdXRpbC9NYXBQb2x5ZmlsbFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy91dGlsL3Jvb3RcIiksbz1yZXF1aXJlKFwicnhqcy91dGlsL01hcFBvbHlmaWxsXCIpO3JldHVybiBlLk1hcD1pLnJvb3QuTWFwfHxmdW5jdGlvbigpe3JldHVybiBvLk1hcFBvbHlmaWxsfSgpLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvaWdub3JlRWxlbWVudHNcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvaWdub3JlRWxlbWVudHNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLmlnbm9yZUVsZW1lbnRzPW8uaWdub3JlRWxlbWVudHMsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9pc0VtcHR5XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2lzRW1wdHlcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2lzRW1wdHlcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuaXNFbXB0eT1vLmlzRW1wdHksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9hdWRpdFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9hdWRpdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvYXVkaXRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuYXVkaXQ9by5hdWRpdCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2F1ZGl0VGltZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9hdWRpdFRpbWVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2F1ZGl0VGltZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5hdWRpdFRpbWU9by5hdWRpdFRpbWUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9sYXN0XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL2xhc3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2xhc3RcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGFzdD1vLmxhc3Qsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9sZXRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvbGV0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9sZXRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubGV0PW8ubGV0UHJvdG8saS5PYnNlcnZhYmxlLnByb3RvdHlwZS5sZXRCaW5kPW8ubGV0UHJvdG8sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9ldmVyeVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9ldmVyeVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZXZlcnlcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZXZlcnk9by5ldmVyeSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL21hcFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9tYXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21hcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXA9by5tYXAsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9tYXBUb1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9tYXBUb1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvbWFwVG9cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwVG89by5tYXBUbyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL21hdGVyaWFsaXplXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL21hdGVyaWFsaXplXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tYXRlcmlhbGl6ZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXRlcmlhbGl6ZT1vLm1hdGVyaWFsaXplLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9tYXhcIixbXCJyeGpzL29wZXJhdG9yL3JlZHVjZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2U6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT50P2U6dH07cmV0dXJuIHRoaXMubGlmdChuZXcgby5SZWR1Y2VPcGVyYXRvcih0KSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9yZWR1Y2VcIik7cmV0dXJuIGUubWF4PXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZVNjYW5cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvbWVyZ2VTY2FuXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tZXJnZVNjYW5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubWVyZ2VTY2FuPW8ubWVyZ2VTY2FuLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvbWluXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL21pblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvbWluXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLm1pbj1vLm1pbixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvbXVsdGljYXN0XCIsW1wicnhqcy9vYnNlcnZhYmxlL011bHRpY2FzdE9ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXt2YXIgcjtyPVwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZTpmdW5jdGlvbigpe3JldHVybiBlfTt2YXIgcz1uZXcgbi5Db25uZWN0YWJsZU9ic2VydmFibGUodGhpcyxyKTtyZXR1cm4gdD9uZXcgby5NdWx0aWNhc3RPYnNlcnZhYmxlKHRoaXMscyx0KTpzfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9NdWx0aWNhc3RPYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIik7cmV0dXJuIGUubXVsdGljYXN0PXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9wYWlyd2lzZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9wYWlyd2lzZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvcGFpcndpc2VcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUucGFpcndpc2U9by5wYWlyd2lzZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvcGFydGl0aW9uXCIsW1wicnhqcy91dGlsL25vdFwiLFwicnhqcy9vcGVyYXRvci9maWx0ZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm5bbi5maWx0ZXIuY2FsbCh0aGlzLGUpLG4uZmlsdGVyLmNhbGwodGhpcyxvLm5vdChlLHQpKV19dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz1yZXF1aXJlKFwicnhqcy91dGlsL25vdFwiKSxuPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2ZpbHRlclwiKTtyZXR1cm4gZS5wYXJ0aXRpb249cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3BsdWNrXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3BsdWNrXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9wbHVja1wiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wbHVjaz1vLnBsdWNrLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9wdWJsaXNoXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9wdWJsaXNoXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2g9by5wdWJsaXNoLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9CZWhhdmlvclN1YmplY3RcIixbXCJyeGpzL1N1YmplY3RcIixcInJ4anMvdXRpbC90aHJvd0Vycm9yXCIsXCJyeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL3V0aWwvdGhyb3dFcnJvclwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIiksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzKSx0aGlzLl92YWx1ZT10fXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oKXtpZih0aGlzLmhhc0Vycm9yKW4udGhyb3dFcnJvcih0aGlzLnRocm93bkVycm9yKTtlbHNle2lmKCF0aGlzLmlzVW5zdWJzY3JpYmVkKXJldHVybiB0aGlzLl92YWx1ZTtuLnRocm93RXJyb3IobmV3IGEuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VmFsdWUoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKHQpe3ZhciByPWUucHJvdG90eXBlLl9zdWJzY3JpYmUuY2FsbCh0aGlzLHQpO3JldHVybiByJiYhci5pc1Vuc3Vic2NyaWJlZCYmdC5uZXh0KHRoaXMuX3ZhbHVlKSxyfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLm5leHQuY2FsbCh0aGlzLHRoaXMuX3ZhbHVlPXQpfSx0fShvLlN1YmplY3QpO3JldHVybiBlLkJlaGF2aW9yU3ViamVjdD11LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9wdWJsaXNoUmVwbGF5XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9wdWJsaXNoUmVwbGF5XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hSZXBsYXk9by5wdWJsaXNoUmVwbGF5LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaExhc3RcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvcHVibGlzaExhc3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3B1Ymxpc2hMYXN0XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnB1Ymxpc2hMYXN0PW8ucHVibGlzaExhc3Qsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9yZXBlYXRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvcmVwZWF0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9yZXBlYXRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVwZWF0PW8ucmVwZWF0LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvcmV0cnlcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvcmV0cnlcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3JldHJ5XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnJldHJ5PW8ucmV0cnksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9yZXRyeVdoZW5cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvcmV0cnlXaGVuXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9yZXRyeVdoZW5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUucmV0cnlXaGVuPW8ucmV0cnlXaGVuLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3NhbXBsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc2FtcGxlXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnNhbXBsZT1vLnNhbXBsZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3NhbXBsZVRpbWVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivc2FtcGxlVGltZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc2FtcGxlVGltZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zYW1wbGVUaW1lPW8uc2FtcGxlVGltZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3NjYW5cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivc2NhblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc2NhblwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zY2FuPW8uc2NhbixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3NoYXJlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3NoYXJlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9zaGFyZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zaGFyZT1vLnNoYXJlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2luZ2xlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3NpbmdsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc2luZ2xlXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnNpbmdsZT1vLnNpbmdsZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3NraXBcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivc2tpcFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc2tpcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwPW8uc2tpcCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9za2lwVW50aWxcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3NraXBVbnRpbFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwVW50aWw9by5za2lwVW50aWwsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9za2lwV2hpbGVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivc2tpcFdoaWxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9za2lwV2hpbGVcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcFdoaWxlPW8uc2tpcFdoaWxlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3Ivc3RhcnRXaXRoXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3N0YXJ0V2l0aFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc3RhcnRXaXRoXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnN0YXJ0V2l0aD1vLnN0YXJ0V2l0aCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvc2NoZWR1bGVyL0FzYXBBY3Rpb25cIixbXCJyeGpzL3V0aWwvSW1tZWRpYXRlXCIsXCJyeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvdXRpbC9JbW1lZGlhdGVcIiksbj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uXCIpLGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuX3NjaGVkdWxlPWZ1bmN0aW9uKHQscil7aWYodm9pZCAwPT09ciYmKHI9MCkscj4wKXJldHVybiBlLnByb3RvdHlwZS5fc2NoZWR1bGUuY2FsbCh0aGlzLHQscik7dGhpcy5kZWxheT1yLHRoaXMuc3RhdGU9dDt2YXIgcz10aGlzLnNjaGVkdWxlcjtyZXR1cm4gcy5hY3Rpb25zLnB1c2godGhpcykscy5zY2hlZHVsZWRJZHx8KHMuc2NoZWR1bGVkSWQ9by5JbW1lZGlhdGUuc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cy5zY2hlZHVsZWRJZD1udWxsLHMuZmx1c2goKX0pKSx0aGlzfSx0LnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNjaGVkdWxlcixyPXQuc2NoZWR1bGVkSWQscz10LmFjdGlvbnM7ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyksMD09PXMubGVuZ3RoJiYodC5hY3RpdmU9ITEsbnVsbCE9ciYmKHQuc2NoZWR1bGVkSWQ9bnVsbCxvLkltbWVkaWF0ZS5jbGVhckltbWVkaWF0ZShyKSkpfSx0fShuLkZ1dHVyZUFjdGlvbik7cmV0dXJuIGUuQXNhcEFjdGlvbj1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3N3aXRjaFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc3dpdGNoXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlW1wic3dpdGNoXCJdPW8uX3N3aXRjaCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9zd2l0Y2hNYXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3N3aXRjaE1hcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5zd2l0Y2hNYXA9by5zd2l0Y2hNYXAsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXBUb1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9zd2l0Y2hNYXBUb1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivc3dpdGNoTWFwVG9cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3dpdGNoTWFwVG89by5zd2l0Y2hNYXBUbyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvdGFrZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvdGFrZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlPW8udGFrZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VMYXN0XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3Rha2VMYXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90YWtlTGFzdFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlTGFzdD1vLnRha2VMYXN0LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvdGFrZVVudGlsXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3Rha2VVbnRpbFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvdGFrZVVudGlsXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnRha2VVbnRpbD1vLnRha2VVbnRpbCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VXaGlsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci90YWtlV2hpbGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3Rha2VXaGlsZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlV2hpbGU9by50YWtlV2hpbGUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci90aHJvdHRsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvdGhyb3R0bGVcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGhyb3R0bGU9by50aHJvdHRsZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci90aHJvdHRsZVRpbWVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3Rocm90dGxlVGltZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS50aHJvdHRsZVRpbWU9by50aHJvdHRsZVRpbWUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lSW50ZXJ2YWxcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvdGltZUludGVydmFsXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90aW1lSW50ZXJ2YWxcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZUludGVydmFsPW8udGltZUludGVydmFsLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvdGltZW91dFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci90aW1lb3V0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90aW1lb3V0XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXQ9by50aW1lb3V0LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvdGltZW91dFdpdGhcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvdGltZW91dFdpdGhcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3RpbWVvdXRXaXRoXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnRpbWVvdXRXaXRoPW8udGltZW91dFdpdGgsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lc3RhbXBcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvdGltZXN0YW1wXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90aW1lc3RhbXBcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUudGltZXN0YW1wPW8udGltZXN0YW1wLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvdG9BcnJheVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci90b0FycmF5XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90b0FycmF5XCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnRvQXJyYXk9by50b0FycmF5LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvdG9Qcm9taXNlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3RvUHJvbWlzZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvdG9Qcm9taXNlXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZT1vLnRvUHJvbWlzZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci93aW5kb3dcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3dpbmRvd1wiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3c9by53aW5kb3csci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci93aW5kb3dDb3VudFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivd2luZG93Q291bnRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93Q291bnQ9by53aW5kb3dDb3VudCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RpbWVcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivd2luZG93VGltZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivd2luZG93VGltZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUaW1lPW8ud2luZG93VGltZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RvZ2dsZVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci93aW5kb3dUb2dnbGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3dpbmRvd1RvZ2dsZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS53aW5kb3dUb2dnbGU9by53aW5kb3dUb2dnbGUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3dpbmRvd1doZW5cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3dpbmRvd1doZW5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2luZG93V2hlbj1vLndpbmRvd1doZW4sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbVwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb21cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUud2l0aExhdGVzdEZyb209by53aXRoTGF0ZXN0RnJvbSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3ppcEFsbFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci96aXBBbGxcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3ppcEFsbFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS56aXBBbGw9by56aXBBbGwsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nZ2FibGVcIixbXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nXCIpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5zdWJzY3JpcHRpb25zPVtdfXJldHVybiBlLnByb3RvdHlwZS5sb2dTdWJzY3JpYmVkRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLnB1c2gobmV3IGkuU3Vic2NyaXB0aW9uTG9nKHRoaXMuc2NoZWR1bGVyLm5vdygpKSksdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aC0xfSxlLnByb3RvdHlwZS5sb2dVbnN1YnNjcmliZWRGcmFtZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnN1YnNjcmlwdGlvbnMscj10W2VdO3RbZV09bmV3IGkuU3Vic2NyaXB0aW9uTG9nKHIuc3Vic2NyaWJlZEZyYW1lLHRoaXMuc2NoZWR1bGVyLm5vdygpKX0sZX0oKTtyZXR1cm4gZS5TdWJzY3JpcHRpb25Mb2dnYWJsZT1vLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9zY2hlZHVsZXIvQW5pbWF0aW9uRnJhbWVBY3Rpb25cIixbXCJyeGpzL3NjaGVkdWxlci9GdXR1cmVBY3Rpb25cIixcInJ4anMvdXRpbC9BbmltYXRpb25GcmFtZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uXCIpLG49cmVxdWlyZShcInJ4anMvdXRpbC9BbmltYXRpb25GcmFtZVwiKSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLl9zY2hlZHVsZT1mdW5jdGlvbih0LHIpe2lmKHZvaWQgMD09PXImJihyPTApLHI+MClyZXR1cm4gZS5wcm90b3R5cGUuX3NjaGVkdWxlLmNhbGwodGhpcyx0LHIpO3RoaXMuZGVsYXk9cix0aGlzLnN0YXRlPXQ7dmFyIHM9dGhpcy5zY2hlZHVsZXI7cmV0dXJuIHMuYWN0aW9ucy5wdXNoKHRoaXMpLHMuc2NoZWR1bGVkSWR8fChzLnNjaGVkdWxlZElkPW4uQW5pbWF0aW9uRnJhbWUucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKCl7cy5zY2hlZHVsZWRJZD1udWxsLHMuZmx1c2goKX0pKSx0aGlzfSx0LnByb3RvdHlwZS5fdW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNjaGVkdWxlcixyPXQuc2NoZWR1bGVkSWQscz10LmFjdGlvbnM7ZS5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyksMD09PXMubGVuZ3RoJiYodC5hY3RpdmU9ITEsbnVsbCE9ciYmKHQuc2NoZWR1bGVkSWQ9bnVsbCxuLkFuaW1hdGlvbkZyYW1lLmNhbmNlbEFuaW1hdGlvbkZyYW1lKHIpKSl9LHR9KG8uRnV0dXJlQWN0aW9uKTtyZXR1cm4gZS5BbmltYXRpb25GcmFtZUFjdGlvbj1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9TdWJzY3JpcHRpb25cIixbXCJyeGpzL3V0aWwvaXNBcnJheVwiLFwicnhqcy91dGlsL2lzT2JqZWN0XCIsXCJyeGpzL3V0aWwvaXNGdW5jdGlvblwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNBcnJheVwiKSxvPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNPYmplY3RcIiksbj1yZXF1aXJlKFwicnhqcy91dGlsL2lzRnVuY3Rpb25cIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL3RyeUNhdGNoXCIpLHU9cmVxdWlyZShcInJ4anMvdXRpbC9lcnJvck9iamVjdFwiKSxjPXJlcXVpcmUoXCJyeGpzL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvclwiKSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmlzVW5zdWJzY3JpYmVkPSExLGUmJih0aGlzLl91bnN1YnNjcmliZT1lKX1yZXR1cm4gZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgZSx0PSExO2lmKCF0aGlzLmlzVW5zdWJzY3JpYmVkKXt0aGlzLmlzVW5zdWJzY3JpYmVkPSEwO3ZhciByPXRoaXMscz1yLl91bnN1YnNjcmliZSxsPXIuX3N1YnNjcmlwdGlvbnM7aWYodGhpcy5fc3Vic2NyaXB0aW9ucz1udWxsLG4uaXNGdW5jdGlvbihzKSl7dmFyIGI9YS50cnlDYXRjaChzKS5jYWxsKHRoaXMpO2I9PT11LmVycm9yT2JqZWN0JiYodD0hMCwoZT1lfHxbXSkucHVzaCh1LmVycm9yT2JqZWN0LmUpKX1pZihpLmlzQXJyYXkobCkpZm9yKHZhciBwPS0xLGg9bC5sZW5ndGg7KytwPGg7KXt2YXIgZD1sW3BdO2lmKG8uaXNPYmplY3QoZCkpe3ZhciBiPWEudHJ5Q2F0Y2goZC51bnN1YnNjcmliZSkuY2FsbChkKTtpZihiPT09dS5lcnJvck9iamVjdCl7dD0hMCxlPWV8fFtdO3ZhciBmPXUuZXJyb3JPYmplY3QuZTtmIGluc3RhbmNlb2YgYy5VbnN1YnNjcmlwdGlvbkVycm9yP2U9ZS5jb25jYXQoZi5lcnJvcnMpOmUucHVzaChmKX19fWlmKHQpdGhyb3cgbmV3IGMuVW5zdWJzY3JpcHRpb25FcnJvcihlKX19LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtpZih0JiZ0IT09dGhpcyYmdCE9PWUuRU1QVFkpe3ZhciByPXQ7c3dpdGNoKHR5cGVvZiB0KXtjYXNlXCJmdW5jdGlvblwiOnI9bmV3IGUodCk7Y2FzZVwib2JqZWN0XCI6aWYoci5pc1Vuc3Vic2NyaWJlZHx8XCJmdW5jdGlvblwiIT10eXBlb2Ygci51bnN1YnNjcmliZSlicmVhazt0aGlzLmlzVW5zdWJzY3JpYmVkP3IudW5zdWJzY3JpYmUoKToodGhpcy5fc3Vic2NyaXB0aW9uc3x8KHRoaXMuX3N1YnNjcmlwdGlvbnM9W10pKS5wdXNoKHIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHRlYXJkb3duIFwiK3QrXCIgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLlwiKX1yZXR1cm4gcn19LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtpZihudWxsIT10JiZ0IT09dGhpcyYmdCE9PWUuRU1QVFkpe3ZhciByPXRoaXMuX3N1YnNjcmlwdGlvbnM7aWYocil7dmFyIHM9ci5pbmRleE9mKHQpOy0xIT09cyYmci5zcGxpY2UocywxKX19fSxlLkVNUFRZPWZ1bmN0aW9uKGUpe3JldHVybiBlLmlzVW5zdWJzY3JpYmVkPSEwLGV9KG5ldyBlKSxlfSgpO3JldHVybiBlLlN1YnNjcmlwdGlvbj1sLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja1wiLFtcInJ4anMvb2JzZXJ2YWJsZS9Cb3VuZENhbGxiYWNrT2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0JvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlXCIpO3JldHVybiBlLmJpbmRDYWxsYmFjaz1pLkJvdW5kQ2FsbGJhY2tPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFja1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2tcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFja1wiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLmJpbmROb2RlQ2FsbGJhY2s9by5iaW5kTm9kZUNhbGxiYWNrLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9jb21iaW5lTGF0ZXN0XCIsW1wicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiLFwicnhqcy91dGlsL2lzQXJyYXlcIixcInJ4anMvT3V0ZXJTdWJzY3JpYmVyXCIsXCJyeGpzL3V0aWwvc3Vic2NyaWJlVG9SZXN1bHRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoKXtmb3IodmFyIGU9W10sdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspZVt0LTBdPWFyZ3VtZW50c1t0XTt2YXIgcj1udWxsO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbZS5sZW5ndGgtMV0mJihyPWUucG9wKCkpLDE9PT1lLmxlbmd0aCYmYS5pc0FycmF5KGVbMF0pJiYoZT1lWzBdKSxlLnVuc2hpZnQodGhpcyksbmV3IG4uQXJyYXlPYnNlcnZhYmxlKGUpLmxpZnQobmV3IGIocikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG49cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGVcIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIiksdT1yZXF1aXJlKFwicnhqcy9PdXRlclN1YnNjcmliZXJcIiksYz1yZXF1aXJlKFwicnhqcy91dGlsL3N1YnNjcmliZVRvUmVzdWx0XCIpLGw9e307ZS5jb21iaW5lTGF0ZXN0PXI7dmFyIGI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMucHJvamVjdD1lfXJldHVybiBlLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuX3N1YnNjcmliZShuZXcgcChlLHRoaXMucHJvamVjdCkpfSxlfSgpO2UuQ29tYmluZUxhdGVzdE9wZXJhdG9yPWI7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLHQpLHRoaXMucHJvamVjdD1yLHRoaXMuYWN0aXZlPTAsdGhpcy52YWx1ZXM9W10sdGhpcy5vYnNlcnZhYmxlcz1bXX1yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMudmFsdWVzLnB1c2gobCksdGhpcy5vYnNlcnZhYmxlcy5wdXNoKGUpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9ic2VydmFibGVzLHQ9ZS5sZW5ndGg7aWYoMD09PXQpdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO2Vsc2V7dGhpcy5hY3RpdmU9dCx0aGlzLnRvUmVzcG9uZD10O2Zvcih2YXIgcj0wO3Q+cjtyKyspe3ZhciBzPWVbcl07dGhpcy5hZGQoYy5zdWJzY3JpYmVUb1Jlc3VsdCh0aGlzLHMscyxyKSl9fX0sdC5wcm90b3R5cGUubm90aWZ5Q29tcGxldGU9ZnVuY3Rpb24oZSl7MD09PSh0aGlzLmFjdGl2ZS09MSkmJnRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKX0sdC5wcm90b3R5cGUubm90aWZ5TmV4dD1mdW5jdGlvbihlLHQscixzLGkpe3ZhciBvPXRoaXMudmFsdWVzLG49b1tyXSxhPXRoaXMudG9SZXNwb25kP249PT1sPy0tdGhpcy50b1Jlc3BvbmQ6dGhpcy50b1Jlc3BvbmQ6MDtvW3JdPXQsMD09PWEmJih0aGlzLnByb2plY3Q/dGhpcy5fdHJ5UHJvamVjdChvKTp0aGlzLmRlc3RpbmF0aW9uLm5leHQobykpfSx0LnByb3RvdHlwZS5fdHJ5UHJvamVjdD1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLnByb2plY3QuYXBwbHkodGhpcyxlKX1jYXRjaChyKXtyZXR1cm4gdm9pZCB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKHIpfXRoaXMuZGVzdGluYXRpb24ubmV4dCh0KX0sdH0odS5PdXRlclN1YnNjcmliZXIpO3JldHVybiBlLkNvbWJpbmVMYXRlc3RTdWJzY3JpYmVyPXAscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvY29uY2F0XCIsW1wicnhqcy9vcGVyYXRvci9jb25jYXRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY29uY2F0XCIpO3JldHVybiBlLmNvbmNhdD1pLmNvbmNhdFN0YXRpYyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvZGVmZXJcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9kZWZlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9kZWZlclwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLmRlZmVyPW8uZGVmZXIsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2ZvcmtKb2luXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvZm9ya0pvaW5cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvZm9ya0pvaW5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5mb3JrSm9pbj1vLmZvcmtKb2luLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlXCIsW1wicnhqcy91dGlsL2lzQXJyYXlcIixcInJ4anMvdXRpbC9pc0Z1bmN0aW9uXCIsXCJyeGpzL3V0aWwvaXNQcm9taXNlXCIsXCJyeGpzL3V0aWwvaXNTY2hlZHVsZXJcIixcInJ4anMvb2JzZXJ2YWJsZS9Qcm9taXNlT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL0l0ZXJhdG9yT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL0FycmF5TGlrZU9ic2VydmFibGVcIixcInJ4anMvc3ltYm9sL2l0ZXJhdG9yXCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivb2JzZXJ2ZU9uXCIsXCJzeW1ib2wtb2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy91dGlsL2lzQXJyYXlcIiksbj1yZXF1aXJlKFwicnhqcy91dGlsL2lzRnVuY3Rpb25cIiksYT1yZXF1aXJlKFwicnhqcy91dGlsL2lzUHJvbWlzZVwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNTY2hlZHVsZXJcIiksYz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL1Byb21pc2VPYnNlcnZhYmxlXCIpLGw9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9JdGVyYXRvck9ic2VydmFibGVcIiksYj1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0FycmF5T2JzZXJ2YWJsZVwiKSxwPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvQXJyYXlMaWtlT2JzZXJ2YWJsZVwiKSxoPXJlcXVpcmUoXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiKSxkPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksZj1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9vYnNlcnZlT25cIiksdj1yZXF1aXJlKFwic3ltYm9sLW9ic2VydmFibGVcIikseD1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubGVuZ3RofSx5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtlLmNhbGwodGhpcyxudWxsKSx0aGlzLmlzaD10LHRoaXMuc2NoZWR1bGVyPXJ9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIscyxpKXt2YXIgZj1udWxsLHk9bnVsbDtpZihuLmlzRnVuY3Rpb24ocik/KGY9aXx8bnVsbCx5PXIpOnUuaXNTY2hlZHVsZXIoZikmJihmPXIpLG51bGwhPWUpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbdl0pcmV0dXJuIGUgaW5zdGFuY2VvZiBkLk9ic2VydmFibGUmJiFmP2U6bmV3IHQoZSxmKTtpZihvLmlzQXJyYXkoZSkpcmV0dXJuIG5ldyBiLkFycmF5T2JzZXJ2YWJsZShlLGYpO2lmKGEuaXNQcm9taXNlKGUpKXJldHVybiBuZXcgYy5Qcm9taXNlT2JzZXJ2YWJsZShlLGYpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbaC4kJGl0ZXJhdG9yXXx8XCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIG5ldyBsLkl0ZXJhdG9yT2JzZXJ2YWJsZShlLG51bGwsbnVsbCxmKTtpZih4KGUpKXJldHVybiBuZXcgcC5BcnJheUxpa2VPYnNlcnZhYmxlKGUseSxzLGYpfXRocm93IG5ldyBUeXBlRXJyb3IoKG51bGwhPT1lJiZ0eXBlb2YgZXx8ZSkrXCIgaXMgbm90IG9ic2VydmFibGVcIil9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5pc2gscj10aGlzLnNjaGVkdWxlcjtyZXR1cm4gbnVsbD09cj90W3ZdKCkuc3Vic2NyaWJlKGUpOnRbdl0oKS5zdWJzY3JpYmUobmV3IGYuT2JzZXJ2ZU9uU3Vic2NyaWJlcihlLHIsMCkpfSx0fShkLk9ic2VydmFibGUpO3JldHVybiBlLkZyb21PYnNlcnZhYmxlPXksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5mcm9tRXZlbnQ9by5mcm9tRXZlbnQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm5cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2Zyb21FdmVudFBhdHRlcm5cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5mcm9tRXZlbnRQYXR0ZXJuPW8uZnJvbUV2ZW50UGF0dGVybixcbnIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9pZlwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2lmXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2lmXCIpO3JldHVybiBpLk9ic2VydmFibGVbXCJpZlwiXT1vLl9pZixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyXCIsW1wicnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uXCIsXCJyeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvRnV0dXJlQWN0aW9uXCIpLG49cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL1F1ZXVlU2NoZWR1bGVyXCIpLGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuc2NoZWR1bGVOb3c9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IG8uRnV0dXJlQWN0aW9uKHRoaXMsZSkuc2NoZWR1bGUodCwwKX0sdH0obi5RdWV1ZVNjaGVkdWxlcik7cmV0dXJuIGUuQXN5bmNTY2hlZHVsZXI9YSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvbWVyZ2VcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9tZXJnZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9tZXJnZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLm1lcmdlPW8ubWVyZ2Usci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvbmV2ZXJcIixbXCJyeGpzL29ic2VydmFibGUvTmV2ZXJPYnNlcnZhYmxlXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvTmV2ZXJPYnNlcnZhYmxlXCIpO3JldHVybiBlLm5ldmVyPWkuTmV2ZXJPYnNlcnZhYmxlLmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvcmFuZ2VcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9yYW5nZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9yYW5nZVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnJhbmdlPW8ucmFuZ2Usci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3VzaW5nXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvdXNpbmdcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvdXNpbmdcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS51c2luZz1vLnVzaW5nLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS90aHJvd1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL3Rocm93XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL3Rocm93XCIpO3JldHVybiBpLk9ic2VydmFibGVbXCJ0aHJvd1wiXT1vLl90aHJvdyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS90aW1lclwiLFtcInJ4anMvb2JzZXJ2YWJsZS9UaW1lck9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9UaW1lck9ic2VydmFibGVcIik7cmV0dXJuIGUudGltZXI9aS5UaW1lck9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS96aXBcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS96aXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvemlwXCIpO3JldHVybiBpLk9ic2VydmFibGUuemlwPW8uemlwLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9kb20vYWpheFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2RvbS9hamF4XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2RvbS9hamF4XCIpO3JldHVybiBpLk9ic2VydmFibGUuYWpheD1vLmFqYXgsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZG9tL1dlYlNvY2tldFN1YmplY3RcIixbXCJyeGpzL1N1YmplY3RcIixcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL1N1YnNjcmlwdGlvblwiLFwicnhqcy91dGlsL3Jvb3RcIixcInJ4anMvUmVwbGF5U3ViamVjdFwiLFwicnhqcy91dGlsL3RyeUNhdGNoXCIsXCJyeGpzL3V0aWwvZXJyb3JPYmplY3RcIixcInJ4anMvdXRpbC9hc3NpZ25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksYT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLHU9cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGM9cmVxdWlyZShcInJ4anMvdXRpbC9yb290XCIpLGw9cmVxdWlyZShcInJ4anMvUmVwbGF5U3ViamVjdFwiKSxiPXJlcXVpcmUoXCJyeGpzL3V0aWwvdHJ5Q2F0Y2hcIikscD1yZXF1aXJlKFwicnhqcy91dGlsL2Vycm9yT2JqZWN0XCIpLGg9cmVxdWlyZShcInJ4anMvdXRpbC9hc3NpZ25cIiksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7aWYoZS5jYWxsKHRoaXMpLHRoaXMuX291dHB1dD1uZXcgby5TdWJqZWN0LHRoaXMuV2ViU29ja2V0Q3Rvcj1jLnJvb3QuV2ViU29ja2V0LFwic3RyaW5nXCI9PXR5cGVvZiB0P3RoaXMudXJsPXQ6aC5hc3NpZ24odGhpcyx0KSwhdGhpcy5XZWJTb2NrZXRDdG9yKXRocm93IG5ldyBFcnJvcihcIm5vIFdlYlNvY2tldCBjb25zdHJ1Y3RvciBjYW4gYmUgZm91bmRcIik7dGhpcy5kZXN0aW5hdGlvbj1uZXcgbC5SZXBsYXlTdWJqZWN0fXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUucmVzdWx0U2VsZWN0b3I9ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04ucGFyc2UoZS5kYXRhKX0sdC5jcmVhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KGUpfSx0LnByb3RvdHlwZS5tdWx0aXBsZXg9ZnVuY3Rpb24oZSx0LHIpe3ZhciBzPXRoaXM7cmV0dXJuIG5ldyBhLk9ic2VydmFibGUoZnVuY3Rpb24oaSl7dmFyIG89Yi50cnlDYXRjaChlKSgpO289PT1wLmVycm9yT2JqZWN0P2kuZXJyb3IocC5lcnJvck9iamVjdC5lKTpzLm5leHQobyk7dmFyIG49cy5zdWJzY3JpYmUoZnVuY3Rpb24oZSl7dmFyIHQ9Yi50cnlDYXRjaChyKShlKTt0PT09cC5lcnJvck9iamVjdD9pLmVycm9yKHAuZXJyb3JPYmplY3QuZSk6dCYmaS5uZXh0KGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gaS5lcnJvcihlKX0sZnVuY3Rpb24oKXtyZXR1cm4gaS5jb21wbGV0ZSgpfSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9Yi50cnlDYXRjaCh0KSgpO2U9PT1wLmVycm9yT2JqZWN0P2kuZXJyb3IocC5lcnJvck9iamVjdC5lKTpzLm5leHQoZSksbi51bnN1YnNjcmliZSgpfX0pfSx0LnByb3RvdHlwZS5fY29ubmVjdFNvY2tldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLnByb3RvY29sP25ldyBXZWJTb2NrZXQodGhpcy51cmwsdGhpcy5wcm90b2NvbCk6bmV3IFdlYlNvY2tldCh0aGlzLnVybCk7dGhpcy5zb2NrZXQ9dDt2YXIgcj1uZXcgdS5TdWJzY3JpcHRpb24oZnVuY3Rpb24oKXtlLnNvY2tldD1udWxsLHQmJjE9PT10LnJlYWR5U3RhdGUmJnQuY2xvc2UoKX0pLHM9dGhpcy5fb3V0cHV0O3Qub25vcGVuPWZ1bmN0aW9uKGkpe3ZhciBvPWUub3Blbk9ic2VydmVyO28mJm8ubmV4dChpKTt2YXIgYT1lLmRlc3RpbmF0aW9uO2UuZGVzdGluYXRpb249bi5TdWJzY3JpYmVyLmNyZWF0ZShmdW5jdGlvbihlKXtyZXR1cm4gMT09PXQucmVhZHlTdGF0ZSYmdC5zZW5kKGUpfSxmdW5jdGlvbihyKXt2YXIgaT1lLmNsb3NpbmdPYnNlcnZlcjtpJiZpLm5leHQodm9pZCAwKSxyJiZyLmNvZGU/dC5jbG9zZShyLmNvZGUsci5yZWFzb24pOnMuZXJyb3IobmV3IFR5cGVFcnJvcihcIldlYlNvY2tldFN1YmplY3QuZXJyb3IgbXVzdCBiZSBjYWxsZWQgd2l0aCBhbiBvYmplY3Qgd2l0aCBhbiBlcnJvciBjb2RlLCBhbmQgYW4gb3B0aW9uYWwgcmVhc29uOiB7IGNvZGU6IG51bWJlciwgcmVhc29uOiBzdHJpbmcgfVwiKSksZS5kZXN0aW5hdGlvbj1uZXcgbC5SZXBsYXlTdWJqZWN0LGUuc29ja2V0PW51bGx9LGZ1bmN0aW9uKCl7dmFyIHI9ZS5jbG9zaW5nT2JzZXJ2ZXI7ciYmci5uZXh0KHZvaWQgMCksdC5jbG9zZSgpLGUuZGVzdGluYXRpb249bmV3IGwuUmVwbGF5U3ViamVjdCxlLnNvY2tldD1udWxsfSksYSYmYSBpbnN0YW5jZW9mIGwuUmVwbGF5U3ViamVjdCYmci5hZGQoYS5zdWJzY3JpYmUoZS5kZXN0aW5hdGlvbikpfSx0Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHMuZXJyb3IoZSl9LHQub25jbG9zZT1mdW5jdGlvbih0KXt2YXIgcj1lLmNsb3NlT2JzZXJ2ZXI7ciYmci5uZXh0KHQpLHQud2FzQ2xlYW4/cy5jb21wbGV0ZSgpOnMuZXJyb3IodCl9LHQub25tZXNzYWdlPWZ1bmN0aW9uKHQpe3ZhciByPWIudHJ5Q2F0Y2goZS5yZXN1bHRTZWxlY3RvcikodCk7cj09PXAuZXJyb3JPYmplY3Q/cy5lcnJvcihwLmVycm9yT2JqZWN0LmUpOnMubmV4dChyKX19LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLnNvY2tldHx8dGhpcy5fY29ubmVjdFNvY2tldCgpO3ZhciByPW5ldyB1LlN1YnNjcmlwdGlvbjtyZXR1cm4gci5hZGQodGhpcy5fb3V0cHV0LnN1YnNjcmliZShlKSksci5hZGQoZnVuY3Rpb24oKXt2YXIgZT10LnNvY2tldDtlJiYxPT09ZS5yZWFkeVN0YXRlJiYoZS5jbG9zZSgpLHQuc29ja2V0PW51bGwpfSkscn0sdC5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNvY2tldDt0JiYxPT09dC5yZWFkeVN0YXRlJiYodC5jbG9zZSgpLHRoaXMuc29ja2V0PW51bGwpLGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyksdGhpcy5kZXN0aW5hdGlvbj1uZXcgbC5SZXBsYXlTdWJqZWN0fSx0fShvLkFub255bW91c1N1YmplY3QpO3JldHVybiBlLldlYlNvY2tldFN1YmplY3Q9ZCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jb25jYXRNYXBcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2NvbmNhdE1hcFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb25jYXRNYXA9by5jb25jYXRNYXAsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXBUb1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9jb25jYXRNYXBUb1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY29uY2F0TWFwVG9cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuY29uY2F0TWFwVG89by5jb25jYXRNYXBUbyxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2VsZW1lbnRBdFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9lbGVtZW50QXRcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL2VsZW1lbnRBdFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5lbGVtZW50QXQ9by5lbGVtZW50QXQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9maXJzdFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9maXJzdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZmlyc3RcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmlyc3Q9by5maXJzdCxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvZ3JvdXBCeVwiLFtcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9TdWJzY3JpcHRpb25cIixcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9TdWJqZWN0XCIsXCJyeGpzL3V0aWwvTWFwXCIsXCJyeGpzL3V0aWwvRmFzdE1hcFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQscil7cmV0dXJuIHRoaXMubGlmdChuZXcgcCh0aGlzLGUsdCxyKSl9dmFyIHM9U3lzdGVtLmdsb2JhbCxpPXMuZGVmaW5lO3MuZGVmaW5lPXZvaWQgMDt2YXIgbz10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbj1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpLGE9cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLHU9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxjPXJlcXVpcmUoXCJyeGpzL1N1YmplY3RcIiksbD1yZXF1aXJlKFwicnhqcy91dGlsL01hcFwiKSxiPXJlcXVpcmUoXCJyeGpzL3V0aWwvRmFzdE1hcFwiKTtlLmdyb3VwQnk9cjt2YXIgcD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIscyl7dGhpcy5zb3VyY2U9ZSx0aGlzLmtleVNlbGVjdG9yPXQsdGhpcy5lbGVtZW50U2VsZWN0b3I9cix0aGlzLmR1cmF0aW9uU2VsZWN0b3I9c31yZXR1cm4gZS5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe3JldHVybiB0Ll9zdWJzY3JpYmUobmV3IGgoZSx0aGlzLmtleVNlbGVjdG9yLHRoaXMuZWxlbWVudFNlbGVjdG9yLHRoaXMuZHVyYXRpb25TZWxlY3RvcikpfSxlfSgpLGg9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyxpKXtlLmNhbGwodGhpcyx0KSx0aGlzLmtleVNlbGVjdG9yPXIsdGhpcy5lbGVtZW50U2VsZWN0b3I9cyx0aGlzLmR1cmF0aW9uU2VsZWN0b3I9aSx0aGlzLmdyb3Vwcz1udWxsLHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZT0hMSx0aGlzLmNvdW50PTB9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD10aGlzLmtleVNlbGVjdG9yKGUpfWNhdGNoKHIpe3JldHVybiB2b2lkIHRoaXMuZXJyb3Iocil9dGhpcy5fZ3JvdXAoZSx0KX0sdC5wcm90b3R5cGUuX2dyb3VwPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5ncm91cHM7cnx8KHI9dGhpcy5ncm91cHM9XCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IGIuRmFzdE1hcDpuZXcgbC5NYXApO3ZhciBzLGk9ci5nZXQodCk7aWYodGhpcy5lbGVtZW50U2VsZWN0b3IpdHJ5e3M9dGhpcy5lbGVtZW50U2VsZWN0b3IoZSl9Y2F0Y2gobyl7dGhpcy5lcnJvcihvKX1lbHNlIHM9ZTtpZighaSl7ci5zZXQodCxpPW5ldyBjLlN1YmplY3QpO3ZhciBuPW5ldyBmKHQsaSx0aGlzKTtpZih0aGlzLmRlc3RpbmF0aW9uLm5leHQobiksdGhpcy5kdXJhdGlvblNlbGVjdG9yKXt2YXIgYT12b2lkIDA7dHJ5e2E9dGhpcy5kdXJhdGlvblNlbGVjdG9yKG5ldyBmKHQsaSkpfWNhdGNoKG8pe3JldHVybiB2b2lkIHRoaXMuZXJyb3Iobyl9dGhpcy5hZGQoYS5zdWJzY3JpYmUobmV3IGQodCxpLHRoaXMpKSl9fWkuaXNVbnN1YnNjcmliZWR8fGkubmV4dChzKX0sdC5wcm90b3R5cGUuX2Vycm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ3JvdXBzO3QmJih0LmZvckVhY2goZnVuY3Rpb24odCxyKXt0LmVycm9yKGUpfSksdC5jbGVhcigpKSx0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwcztlJiYoZS5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZS5jb21wbGV0ZSgpfSksZS5jbGVhcigpKSx0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLnJlbW92ZUdyb3VwPWZ1bmN0aW9uKGUpe3RoaXMuZ3JvdXBzW1wiZGVsZXRlXCJdKGUpfSx0LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMuaXNVbnN1YnNjcmliZWR8fHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZXx8KHRoaXMuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZT0hMCwwPT09dGhpcy5jb3VudCYmZS5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKSl9LHR9KG4uU3Vic2NyaWJlciksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyksdGhpcy5rZXk9dCx0aGlzLmdyb3VwPXIsdGhpcy5wYXJlbnQ9c31yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9uZXh0PWZ1bmN0aW9uKGUpe3RoaXMuX2NvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdyb3VwO3QuaXNVbnN1YnNjcmliZWR8fHQuZXJyb3IoZSksdGhpcy5wYXJlbnQucmVtb3ZlR3JvdXAodGhpcy5rZXkpfSx0LnByb3RvdHlwZS5fY29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdyb3VwO2UuaXNVbnN1YnNjcmliZWR8fGUuY29tcGxldGUoKSx0aGlzLnBhcmVudC5yZW1vdmVHcm91cCh0aGlzLmtleSl9LHR9KG4uU3Vic2NyaWJlciksZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixzKXtlLmNhbGwodGhpcyksdGhpcy5rZXk9dCx0aGlzLmdyb3VwU3ViamVjdD1yLHRoaXMucmVmQ291bnRTdWJzY3JpcHRpb249c31yZXR1cm4gbyh0LGUpLHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGEuU3Vic2NyaXB0aW9uLHI9dGhpcyxzPXIucmVmQ291bnRTdWJzY3JpcHRpb24saT1yLmdyb3VwU3ViamVjdDtyZXR1cm4gcyYmIXMuaXNVbnN1YnNjcmliZWQmJnQuYWRkKG5ldyB2KHMpKSx0LmFkZChpLnN1YnNjcmliZShlKSksdH0sdH0odS5PYnNlcnZhYmxlKTtlLkdyb3VwZWRPYnNlcnZhYmxlPWY7dmFyIHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtlLmNhbGwodGhpcyksdGhpcy5wYXJlbnQ9dCx0LmNvdW50Kyt9cmV0dXJuIG8odCxlKSx0LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMucGFyZW50O3QuaXNVbnN1YnNjcmliZWR8fHRoaXMuaXNVbnN1YnNjcmliZWR8fChlLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpLHQuY291bnQtPTEsMD09PXQuY291bnQmJnQuYXR0ZW1wdGVkVG9VbnN1YnNjcmliZSYmdC51bnN1YnNjcmliZSgpKX0sdH0oYS5TdWJzY3JpcHRpb24pO3JldHVybiBzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL21heFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9tYXhcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL21heFwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5tYXg9by5tYXgsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vcGVyYXRvci9tdWx0aWNhc3RcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvbXVsdGljYXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci9tdWx0aWNhc3RcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5wcm90b3R5cGUubXVsdGljYXN0PW8ubXVsdGljYXN0LHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3IvcGFydGl0aW9uXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29wZXJhdG9yL3BhcnRpdGlvblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvcGFydGl0aW9uXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnBhcnRpdGlvbj1vLnBhcnRpdGlvbixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yXCIsW1wicnhqcy9CZWhhdmlvclN1YmplY3RcIixcInJ4anMvb3BlcmF0b3IvbXVsdGljYXN0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXtmdW5jdGlvbiByKGUpe3JldHVybiBuLm11bHRpY2FzdC5jYWxsKHRoaXMsbmV3IG8uQmVoYXZpb3JTdWJqZWN0KGUpKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL0JlaGF2aW9yU3ViamVjdFwiKSxuPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL211bHRpY2FzdFwiKTtyZXR1cm4gZS5wdWJsaXNoQmVoYXZpb3I9cixzLmRlZmluZT1pLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvc2NoZWR1bGVyL0FzYXBTY2hlZHVsZXJcIixbXCJyeGpzL3NjaGVkdWxlci9Bc2FwQWN0aW9uXCIsXCJyeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvQXNhcEFjdGlvblwiKSxuPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9RdWV1ZVNjaGVkdWxlclwiKSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlLnNjaGVkdWxlTm93PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBvLkFzYXBBY3Rpb24odGhpcyxlKS5zY2hlZHVsZSh0KX0sdH0obi5RdWV1ZVNjaGVkdWxlcik7cmV0dXJuIGUuQXNhcFNjaGVkdWxlcj1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy90ZXN0aW5nL0NvbGRPYnNlcnZhYmxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL1N1YnNjcmlwdGlvblwiLFwicnhqcy90ZXN0aW5nL1N1YnNjcmlwdGlvbkxvZ2dhYmxlXCIsXCJyeGpzL3V0aWwvYXBwbHlNaXhpbnNcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxuPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmlwdGlvblwiKSxhPXJlcXVpcmUoXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nZ2FibGVcIiksdT1yZXF1aXJlKFwicnhqcy91dGlsL2FwcGx5TWl4aW5zXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe2UuY2FsbCh0aGlzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10LmxvZ1N1YnNjcmliZWRGcmFtZSgpO3JldHVybiBlLmFkZChuZXcgbi5TdWJzY3JpcHRpb24oZnVuY3Rpb24oKXt0LmxvZ1Vuc3Vic2NyaWJlZEZyYW1lKHIpfSkpLHQuc2NoZWR1bGVNZXNzYWdlcyhlKSxlfSksdGhpcy5tZXNzYWdlcz10LHRoaXMuc3Vic2NyaXB0aW9ucz1bXSx0aGlzLnNjaGVkdWxlcj1yfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuc2NoZWR1bGVNZXNzYWdlcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5tZXNzYWdlcy5sZW5ndGgscj0wO3Q+cjtyKyspe3ZhciBzPXRoaXMubWVzc2FnZXNbcl07ZS5hZGQodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXNzYWdlLHI9ZS5zdWJzY3JpYmVyO3Qubm90aWZpY2F0aW9uLm9ic2VydmUocil9LHMuZnJhbWUse21lc3NhZ2U6cyxzdWJzY3JpYmVyOmV9KSl9fSx0fShvLk9ic2VydmFibGUpO3JldHVybiBlLkNvbGRPYnNlcnZhYmxlPWMsdS5hcHBseU1peGlucyhjLFthLlN1YnNjcmlwdGlvbkxvZ2dhYmxlXSksci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3NjaGVkdWxlci9BbmltYXRpb25GcmFtZVNjaGVkdWxlclwiLFtcInJ4anMvc2NoZWR1bGVyL1F1ZXVlU2NoZWR1bGVyXCIsXCJyeGpzL3NjaGVkdWxlci9BbmltYXRpb25GcmFtZUFjdGlvblwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvUXVldWVTY2hlZHVsZXJcIiksbj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvQW5pbWF0aW9uRnJhbWVBY3Rpb25cIiksYT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9cmV0dXJuIGkodCxlKSx0LnByb3RvdHlwZS5zY2hlZHVsZU5vdz1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgbi5BbmltYXRpb25GcmFtZUFjdGlvbih0aGlzLGUpLnNjaGVkdWxlKHQpfSx0fShvLlF1ZXVlU2NoZWR1bGVyKTtyZXR1cm4gZS5BbmltYXRpb25GcmFtZVNjaGVkdWxlcj1hLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9TdWJzY3JpYmVyXCIsW1wicnhqcy91dGlsL2lzRnVuY3Rpb25cIixcInJ4anMvU3Vic2NyaXB0aW9uXCIsXCJyeGpzL09ic2VydmVyXCIsXCJyeGpzL3N5bWJvbC9yeFN1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1mb3IodmFyIHMgaW4gdCl0Lmhhc093blByb3BlcnR5KHMpJiYoZVtzXT10W3NdKTtlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9LG89cmVxdWlyZShcInJ4anMvdXRpbC9pc0Z1bmN0aW9uXCIpLG49cmVxdWlyZShcInJ4anMvU3Vic2NyaXB0aW9uXCIpLGE9cmVxdWlyZShcInJ4anMvT2JzZXJ2ZXJcIiksdT1yZXF1aXJlKFwicnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyXCIpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChyLHMsaSl7c3dpdGNoKGUuY2FsbCh0aGlzKSx0aGlzLnN5bmNFcnJvclZhbHVlPW51bGwsdGhpcy5zeW5jRXJyb3JUaHJvd249ITEsdGhpcy5zeW5jRXJyb3JUaHJvd2FibGU9ITEsdGhpcy5pc1N0b3BwZWQ9ITEsYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAwOnRoaXMuZGVzdGluYXRpb249YS5lbXB0eTticmVhaztjYXNlIDE6aWYoIXIpe3RoaXMuZGVzdGluYXRpb249YS5lbXB0eTticmVha31pZihcIm9iamVjdFwiPT10eXBlb2Ygcil7ciBpbnN0YW5jZW9mIHQ/KHRoaXMuZGVzdGluYXRpb249cix0aGlzLmRlc3RpbmF0aW9uLmFkZCh0aGlzKSk6KHRoaXMuc3luY0Vycm9yVGhyb3dhYmxlPSEwLHRoaXMuZGVzdGluYXRpb249bmV3IGwodGhpcyxyKSk7YnJlYWt9ZGVmYXVsdDp0aGlzLnN5bmNFcnJvclRocm93YWJsZT0hMCx0aGlzLmRlc3RpbmF0aW9uPW5ldyBsKHRoaXMscixzLGkpfX1yZXR1cm4gaSh0LGUpLHQucHJvdG90eXBlW3UuJCRyeFN1YnNjcmliZXJdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHQuY3JlYXRlPWZ1bmN0aW9uKGUscixzKXt2YXIgaT1uZXcgdChlLHIscyk7cmV0dXJuIGkuc3luY0Vycm9yVGhyb3dhYmxlPSExLGl9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSl7dGhpcy5pc1N0b3BwZWR8fHRoaXMuX25leHQoZSl9LHQucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5fZXJyb3IoZSkpfSx0LnByb3RvdHlwZS5jb21wbGV0ZT1mdW5jdGlvbigpe3RoaXMuaXNTdG9wcGVkfHwodGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5fY29tcGxldGUoKSl9LHQucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5pc1Vuc3Vic2NyaWJlZHx8KHRoaXMuaXNTdG9wcGVkPSEwLGUucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcykpfSx0LnByb3RvdHlwZS5fbmV4dD1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLm5leHQoZSl9LHQucHJvdG90eXBlLl9lcnJvcj1mdW5jdGlvbihlKXt0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGUpLHRoaXMudW5zdWJzY3JpYmUoKX0sdC5wcm90b3R5cGUuX2NvbXBsZXRlPWZ1bmN0aW9uKCl7dGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpLHRoaXMudW5zdWJzY3JpYmUoKX0sdH0obi5TdWJzY3JpcHRpb24pO2UuU3Vic2NyaWJlcj1jO3ZhciBsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLHMsaSl7ZS5jYWxsKHRoaXMpLHRoaXMuX3BhcmVudD10O3ZhciBuLGE9dGhpcztvLmlzRnVuY3Rpb24ocik/bj1yOnImJihhPXIsbj1yLm5leHQscz1yLmVycm9yLGk9ci5jb21wbGV0ZSxvLmlzRnVuY3Rpb24oYS51bnN1YnNjcmliZSkmJnRoaXMuYWRkKGEudW5zdWJzY3JpYmUuYmluZChhKSksYS51bnN1YnNjcmliZT10aGlzLnVuc3Vic2NyaWJlLmJpbmQodGhpcykpLHRoaXMuX2NvbnRleHQ9YSx0aGlzLl9uZXh0PW4sdGhpcy5fZXJyb3I9cyx0aGlzLl9jb21wbGV0ZT1pfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXtpZighdGhpcy5pc1N0b3BwZWQmJnRoaXMuX25leHQpe3ZhciB0PXRoaXMuX3BhcmVudDt0LnN5bmNFcnJvclRocm93YWJsZT90aGlzLl9fdHJ5T3JTZXRFcnJvcih0LHRoaXMuX25leHQsZSkmJnRoaXMudW5zdWJzY3JpYmUoKTp0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LGUpfX0sdC5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgdD10aGlzLl9wYXJlbnQ7aWYodGhpcy5fZXJyb3IpdC5zeW5jRXJyb3JUaHJvd2FibGU/KHRoaXMuX190cnlPclNldEVycm9yKHQsdGhpcy5fZXJyb3IsZSksdGhpcy51bnN1YnNjcmliZSgpKToodGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsZSksdGhpcy51bnN1YnNjcmliZSgpKTtlbHNle2lmKCF0LnN5bmNFcnJvclRocm93YWJsZSl0aHJvdyB0aGlzLnVuc3Vic2NyaWJlKCksZTt0LnN5bmNFcnJvclZhbHVlPWUsdC5zeW5jRXJyb3JUaHJvd249ITAsdGhpcy51bnN1YnNjcmliZSgpfX19LHQucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNTdG9wcGVkKXt2YXIgZT10aGlzLl9wYXJlbnQ7dGhpcy5fY29tcGxldGU/ZS5zeW5jRXJyb3JUaHJvd2FibGU/KHRoaXMuX190cnlPclNldEVycm9yKGUsdGhpcy5fY29tcGxldGUpLHRoaXMudW5zdWJzY3JpYmUoKSk6KHRoaXMuX190cnlPclVuc3ViKHRoaXMuX2NvbXBsZXRlKSx0aGlzLnVuc3Vic2NyaWJlKCkpOnRoaXMudW5zdWJzY3JpYmUoKX19LHQucHJvdG90eXBlLl9fdHJ5T3JVbnN1Yj1mdW5jdGlvbihlLHQpe3RyeXtlLmNhbGwodGhpcy5fY29udGV4dCx0KX1jYXRjaChyKXt0aHJvdyB0aGlzLnVuc3Vic2NyaWJlKCkscn19LHQucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvcj1mdW5jdGlvbihlLHQscil7dHJ5e3QuY2FsbCh0aGlzLl9jb250ZXh0LHIpfWNhdGNoKHMpe3JldHVybiBlLnN5bmNFcnJvclZhbHVlPXMsZS5zeW5jRXJyb3JUaHJvd249ITAsITB9cmV0dXJuITF9LHQucHJvdG90eXBlLl91bnN1YnNjcmliZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3BhcmVudDt0aGlzLl9jb250ZXh0PW51bGwsdGhpcy5fcGFyZW50PW51bGwsZS51bnN1YnNjcmliZSgpfSx0fShjKTtyZXR1cm4gci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja1wiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2JpbmRDYWxsYmFja1wiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2tcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5iaW5kQ2FsbGJhY2s9by5iaW5kQ2FsbGJhY2ssci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvY29tYmluZUxhdGVzdFwiLFtcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiLFwicnhqcy91dGlsL2lzQXJyYXlcIixcInJ4anMvb2JzZXJ2YWJsZS9BcnJheU9ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvY29tYmluZUxhdGVzdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcigpe2Zvcih2YXIgZT1bXSx0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyllW3QtMF09YXJndW1lbnRzW3RdO3ZhciByPW51bGwscz1udWxsO3JldHVybiBvLmlzU2NoZWR1bGVyKGVbZS5sZW5ndGgtMV0pJiYocz1lLnBvcCgpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlW2UubGVuZ3RoLTFdJiYocj1lLnBvcCgpKSwxPT09ZS5sZW5ndGgmJm4uaXNBcnJheShlWzBdKSYmKGU9ZVswXSksbmV3IGEuQXJyYXlPYnNlcnZhYmxlKGUscykubGlmdChuZXcgdS5Db21iaW5lTGF0ZXN0T3BlcmF0b3IocikpfXZhciBzPVN5c3RlbS5nbG9iYWwsaT1zLmRlZmluZTtzLmRlZmluZT12b2lkIDA7dmFyIG89cmVxdWlyZShcInJ4anMvdXRpbC9pc1NjaGVkdWxlclwiKSxuPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNBcnJheVwiKSxhPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvQXJyYXlPYnNlcnZhYmxlXCIpLHU9cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvY29tYmluZUxhdGVzdFwiKTtyZXR1cm4gZS5jb21iaW5lTGF0ZXN0PXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2NvbmNhdFwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vYnNlcnZhYmxlL2NvbmNhdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9jb25jYXRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5jb25jYXQ9by5jb25jYXQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvZnJvbVwiLFtcInJ4anMvb2JzZXJ2YWJsZS9Gcm9tT2JzZXJ2YWJsZVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL0Zyb21PYnNlcnZhYmxlXCIpO3JldHVybiBlLmZyb209aS5Gcm9tT2JzZXJ2YWJsZS5jcmVhdGUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiLFtcInJ4anMvc2NoZWR1bGVyL0FzeW5jU2NoZWR1bGVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9Bc3luY1NjaGVkdWxlclwiKTtyZXR1cm4gZS5hc3luYz1uZXcgaS5Bc3luY1NjaGVkdWxlcixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29ic2VydmFibGUvbmV2ZXJcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9uZXZlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9uZXZlclwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLm5ldmVyPW8ubmV2ZXIsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3RpbWVyXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvdGltZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvdGltZXJcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS50aW1lcj1vLnRpbWVyLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vYnNlcnZhYmxlL2RvbS93ZWJTb2NrZXRcIixbXCJyeGpzL29ic2VydmFibGUvZG9tL1dlYlNvY2tldFN1YmplY3RcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9kb20vV2ViU29ja2V0U3ViamVjdFwiKTtyZXR1cm4gZS53ZWJTb2NrZXQ9aS5XZWJTb2NrZXRTdWJqZWN0LmNyZWF0ZSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL2dyb3VwQnlcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3IvZ3JvdXBCeVwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb3BlcmF0b3IvZ3JvdXBCeVwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5ncm91cEJ5PW8uZ3JvdXBCeSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvclwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9vcGVyYXRvci9wdWJsaXNoQmVoYXZpb3JcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvclwiKTtyZXR1cm4gaS5PYnNlcnZhYmxlLnByb3RvdHlwZS5wdWJsaXNoQmVoYXZpb3I9by5wdWJsaXNoQmVoYXZpb3Isci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3NjaGVkdWxlci9hc2FwXCIsW1wicnhqcy9zY2hlZHVsZXIvQXNhcFNjaGVkdWxlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvQXNhcFNjaGVkdWxlclwiKTtyZXR1cm4gZS5hc2FwPW5ldyBpLkFzYXBTY2hlZHVsZXIsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3Rlc3RpbmcvVGVzdFNjaGVkdWxlclwiLFtcInJ4anMvT2JzZXJ2YWJsZVwiLFwicnhqcy9zY2hlZHVsZXIvVmlydHVhbFRpbWVTY2hlZHVsZXJcIixcInJ4anMvTm90aWZpY2F0aW9uXCIsXCJyeGpzL3Rlc3RpbmcvQ29sZE9ic2VydmFibGVcIixcInJ4anMvdGVzdGluZy9Ib3RPYnNlcnZhYmxlXCIsXCJyeGpzL3Rlc3RpbmcvU3Vic2NyaXB0aW9uTG9nXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvVmlydHVhbFRpbWVTY2hlZHVsZXJcIiksYT1yZXF1aXJlKFwicnhqcy9Ob3RpZmljYXRpb25cIiksdT1yZXF1aXJlKFwicnhqcy90ZXN0aW5nL0NvbGRPYnNlcnZhYmxlXCIpLGM9cmVxdWlyZShcInJ4anMvdGVzdGluZy9Ib3RPYnNlcnZhYmxlXCIpLGw9cmVxdWlyZShcInJ4anMvdGVzdGluZy9TdWJzY3JpcHRpb25Mb2dcIiksYj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzKSx0aGlzLmFzc2VydERlZXBFcXVhbD10LHRoaXMuaG90T2JzZXJ2YWJsZXM9W10sdGhpcy5jb2xkT2JzZXJ2YWJsZXM9W10sdGhpcy5mbHVzaFRlc3RzPVtdfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUuY3JlYXRlVGltZT1mdW5jdGlvbihlKXt2YXIgcj1lLmluZGV4T2YoXCJ8XCIpO2lmKC0xPT09cil0aHJvdyBuZXcgRXJyb3IoJ01hcmJsZSBkaWFncmFtIGZvciB0aW1lIHNob3VsZCBoYXZlIGEgY29tcGxldGlvbiBtYXJrZXIgXCJ8XCInKTtyZXR1cm4gcip0LmZyYW1lVGltZUZhY3Rvcn0sdC5wcm90b3R5cGUuY3JlYXRlQ29sZE9ic2VydmFibGU9ZnVuY3Rpb24oZSxyLHMpe2lmKC0xIT09ZS5pbmRleE9mKFwiXlwiKSl0aHJvdyBuZXcgRXJyb3IoJ0NvbGQgb2JzZXJ2YWJsZSBjYW5ub3QgaGF2ZSBzdWJzY3JpcHRpb24gb2Zmc2V0IFwiXlwiJyk7aWYoLTEhPT1lLmluZGV4T2YoXCIhXCIpKXRocm93IG5ldyBFcnJvcignQ29sZCBvYnNlcnZhYmxlIGNhbm5vdCBoYXZlIHVuc3Vic2NyaXB0aW9uIG1hcmtlciBcIiFcIicpO3ZhciBpPXQucGFyc2VNYXJibGVzKGUscixzKSxvPW5ldyB1LkNvbGRPYnNlcnZhYmxlKGksdGhpcyk7cmV0dXJuIHRoaXMuY29sZE9ic2VydmFibGVzLnB1c2gobyksb30sdC5wcm90b3R5cGUuY3JlYXRlSG90T2JzZXJ2YWJsZT1mdW5jdGlvbihlLHIscyl7aWYoLTEhPT1lLmluZGV4T2YoXCIhXCIpKXRocm93IG5ldyBFcnJvcignSG90IG9ic2VydmFibGUgY2Fubm90IGhhdmUgdW5zdWJzY3JpcHRpb24gbWFya2VyIFwiIVwiJyk7dmFyIGk9dC5wYXJzZU1hcmJsZXMoZSxyLHMpLG89bmV3IGMuSG90T2JzZXJ2YWJsZShpLHRoaXMpO3JldHVybiB0aGlzLmhvdE9ic2VydmFibGVzLnB1c2gobyksb30sdC5wcm90b3R5cGUubWF0ZXJpYWxpemVJbm5lck9ic2VydmFibGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLHM9W107cmV0dXJuIGUuc3Vic2NyaWJlKGZ1bmN0aW9uKGUpe3MucHVzaCh7ZnJhbWU6ci5mcmFtZS10LG5vdGlmaWNhdGlvbjphLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KGUpfSl9LGZ1bmN0aW9uKGUpe3MucHVzaCh7ZnJhbWU6ci5mcmFtZS10LG5vdGlmaWNhdGlvbjphLk5vdGlmaWNhdGlvbi5jcmVhdGVFcnJvcihlKX0pfSxmdW5jdGlvbigpe3MucHVzaCh7ZnJhbWU6ci5mcmFtZS10LG5vdGlmaWNhdGlvbjphLk5vdGlmaWNhdGlvbi5jcmVhdGVDb21wbGV0ZSgpfSl9KSxzfSx0LnByb3RvdHlwZS5leHBlY3RPYnNlcnZhYmxlPWZ1bmN0aW9uKGUscil7dmFyIHM9dGhpczt2b2lkIDA9PT1yJiYocj1udWxsKTt2YXIgaSxuPVtdLHU9e2FjdHVhbDpuLHJlYWR5OiExfSxjPXQucGFyc2VNYXJibGVzQXNTdWJzY3JpcHRpb25zKHIpLnVuc3Vic2NyaWJlZEZyYW1lO3JldHVybiB0aGlzLnNjaGVkdWxlKGZ1bmN0aW9uKCl7aT1lLnN1YnNjcmliZShmdW5jdGlvbihlKXt2YXIgdD1lO2UgaW5zdGFuY2VvZiBvLk9ic2VydmFibGUmJih0PXMubWF0ZXJpYWxpemVJbm5lck9ic2VydmFibGUodCxzLmZyYW1lKSksbi5wdXNoKHtmcmFtZTpzLmZyYW1lLG5vdGlmaWNhdGlvbjphLk5vdGlmaWNhdGlvbi5jcmVhdGVOZXh0KHQpfSl9LGZ1bmN0aW9uKGUpe24ucHVzaCh7ZnJhbWU6cy5mcmFtZSxub3RpZmljYXRpb246YS5Ob3RpZmljYXRpb24uY3JlYXRlRXJyb3IoZSl9KX0sZnVuY3Rpb24oKXtuLnB1c2goe2ZyYW1lOnMuZnJhbWUsbm90aWZpY2F0aW9uOmEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCl9KX0pfSwwKSxjIT09TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZJiZ0aGlzLnNjaGVkdWxlKGZ1bmN0aW9uKCl7cmV0dXJuIGkudW5zdWJzY3JpYmUoKX0sYyksdGhpcy5mbHVzaFRlc3RzLnB1c2godSkse3RvQmU6ZnVuY3Rpb24oZSxyLHMpe3UucmVhZHk9ITAsdS5leHBlY3RlZD10LnBhcnNlTWFyYmxlcyhlLHIscywhMCl9fX0sdC5wcm90b3R5cGUuZXhwZWN0U3Vic2NyaXB0aW9ucz1mdW5jdGlvbihlKXt2YXIgcj17YWN0dWFsOmUscmVhZHk6ITF9O3JldHVybiB0aGlzLmZsdXNoVGVzdHMucHVzaChyKSx7dG9CZTpmdW5jdGlvbihlKXt2YXIgcz1cInN0cmluZ1wiPT10eXBlb2YgZT9bZV06ZTtyLnJlYWR5PSEwLHIuZXhwZWN0ZWQ9cy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIHQucGFyc2VNYXJibGVzQXNTdWJzY3JpcHRpb25zKGUpfSl9fX0sdC5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5ob3RPYnNlcnZhYmxlczt0Lmxlbmd0aD4wOyl0LnNoaWZ0KCkuc2V0dXAoKTtlLnByb3RvdHlwZS5mbHVzaC5jYWxsKHRoaXMpO2Zvcih2YXIgcj10aGlzLmZsdXNoVGVzdHMuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlYWR5fSk7ci5sZW5ndGg+MDspe3ZhciBzPXIuc2hpZnQoKTt0aGlzLmFzc2VydERlZXBFcXVhbChzLmFjdHVhbCxzLmV4cGVjdGVkKX19LHQucGFyc2VNYXJibGVzQXNTdWJzY3JpcHRpb25zPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXJldHVybiBuZXcgbC5TdWJzY3JpcHRpb25Mb2coTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtmb3IodmFyIHQ9ZS5sZW5ndGgscj0tMSxzPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxpPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxvPTA7dD5vO28rKyl7dmFyIG49byp0aGlzLmZyYW1lVGltZUZhY3RvcixhPWVbb107c3dpdGNoKGEpe2Nhc2VcIi1cIjpjYXNlXCIgXCI6YnJlYWs7Y2FzZVwiKFwiOnI9bjticmVhaztjYXNlXCIpXCI6cj0tMTticmVhaztjYXNlXCJeXCI6aWYocyE9PU51bWJlci5QT1NJVElWRV9JTkZJTklUWSl0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBhIHNlY29uZCBzdWJzY3JpcHRpb24gcG9pbnQgJ14nIGluIGEgc3Vic2NyaXB0aW9uIG1hcmJsZSBkaWFncmFtLiBUaGVyZSBjYW4gb25seSBiZSBvbmUuXCIpO3M9cj4tMT9yOm47YnJlYWs7Y2FzZVwiIVwiOmlmKGkhPT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpdGhyb3cgbmV3IEVycm9yKFwiRm91bmQgYSBzZWNvbmQgc3Vic2NyaXB0aW9uIHBvaW50ICdeJyBpbiBhIHN1YnNjcmlwdGlvbiBtYXJibGUgZGlhZ3JhbS4gVGhlcmUgY2FuIG9ubHkgYmUgb25lLlwiKTtpPXI+LTE/cjpuO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgY2FuIG9ubHkgYmUgJ14nIGFuZCAnIScgbWFya2VycyBpbiBhIHN1YnNjcmlwdGlvbiBtYXJibGUgZGlhZ3JhbS4gRm91bmQgaW5zdGVhZCAnXCIrYStcIicuXCIpfX1yZXR1cm4gMD5pP25ldyBsLlN1YnNjcmlwdGlvbkxvZyhzKTpuZXcgbC5TdWJzY3JpcHRpb25Mb2cocyxpKX0sdC5wYXJzZU1hcmJsZXM9ZnVuY3Rpb24oZSx0LHIscyl7aWYodm9pZCAwPT09cyYmKHM9ITEpLC0xIT09ZS5pbmRleE9mKFwiIVwiKSl0aHJvdyBuZXcgRXJyb3IoJ0NvbnZlbnRpb25hbCBtYXJibGUgZGlhZ3JhbXMgY2Fubm90IGhhdmUgdGhlIHVuc3Vic2NyaXB0aW9uIG1hcmtlciBcIiFcIicpO2Zvcih2YXIgaT1lLmxlbmd0aCxvPVtdLG49ZS5pbmRleE9mKFwiXlwiKSxjPS0xPT09bj8wOm4qLXRoaXMuZnJhbWVUaW1lRmFjdG9yLGw9XCJvYmplY3RcIiE9dHlwZW9mIHQ/ZnVuY3Rpb24oZSl7cmV0dXJuIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBzJiZ0W2VdaW5zdGFuY2VvZiB1LkNvbGRPYnNlcnZhYmxlP3RbZV0ubWVzc2FnZXM6dFtlXX0sYj0tMSxwPTA7aT5wO3ArKyl7dmFyIGg9cCp0aGlzLmZyYW1lVGltZUZhY3RvcitjLGQ9dm9pZCAwLGY9ZVtwXTtzd2l0Y2goZil7Y2FzZVwiLVwiOmNhc2VcIiBcIjpicmVhaztjYXNlXCIoXCI6Yj1oO2JyZWFrO2Nhc2VcIilcIjpiPS0xO2JyZWFrO2Nhc2VcInxcIjpkPWEuTm90aWZpY2F0aW9uLmNyZWF0ZUNvbXBsZXRlKCk7YnJlYWs7Y2FzZVwiXlwiOmJyZWFrO2Nhc2VcIiNcIjpkPWEuTm90aWZpY2F0aW9uLmNyZWF0ZUVycm9yKHJ8fFwiZXJyb3JcIik7YnJlYWs7ZGVmYXVsdDpkPWEuTm90aWZpY2F0aW9uLmNyZWF0ZU5leHQobChmKSl9ZCYmby5wdXNoKHtmcmFtZTpiPi0xP2I6aCxub3RpZmljYXRpb246ZH0pfXJldHVybiBvfSx0fShuLlZpcnR1YWxUaW1lU2NoZWR1bGVyKTtyZXR1cm4gZS5UZXN0U2NoZWR1bGVyPWIsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZVwiLFtcInJ4anMvc2NoZWR1bGVyL0FuaW1hdGlvbkZyYW1lU2NoZWR1bGVyXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9BbmltYXRpb25GcmFtZVNjaGVkdWxlclwiKTtyZXR1cm4gZS5hbmltYXRpb25GcmFtZT1uZXcgaS5BbmltYXRpb25GcmFtZVNjaGVkdWxlcixyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvdXRpbC90b1N1YnNjcmliZXJcIixbXCJyeGpzL1N1YnNjcmliZXJcIixcInJ4anMvc3ltYm9sL3J4U3Vic2NyaWJlclwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7ZnVuY3Rpb24gcihlLHQscil7aWYoZSl7aWYoZSBpbnN0YW5jZW9mIG8uU3Vic2NyaWJlcilyZXR1cm4gZTtpZihlW24uJCRyeFN1YnNjcmliZXJdKXJldHVybiBlW24uJCRyeFN1YnNjcmliZXJdKCl9cmV0dXJuIGV8fHR8fHI/bmV3IG8uU3Vic2NyaWJlcihlLHQscik6bmV3IG8uU3Vic2NyaWJlcn12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmliZXJcIiksbj1yZXF1aXJlKFwicnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyXCIpO3JldHVybiBlLnRvU3Vic2NyaWJlcj1yLHMuZGVmaW5lPWksdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0XCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvY29tYmluZUxhdGVzdFwiXSwhMCxmdW5jdGlvbihyZXF1aXJlLGUsdCl7dmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG89cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0XCIpO3JldHVybiBpLk9ic2VydmFibGUuY29tYmluZUxhdGVzdD1vLmNvbWJpbmVMYXRlc3Qsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9mcm9tXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2Zyb21cIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5mcm9tPW8uZnJvbSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9JbnRlcnZhbE9ic2VydmFibGVcIixbXCJyeGpzL3V0aWwvaXNOdW1lcmljXCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNOdW1lcmljXCIpLG49cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxhPXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc3luY1wiKSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj1hLmFzeW5jKSxlLmNhbGwodGhpcyksdGhpcy5wZXJpb2Q9dCx0aGlzLnNjaGVkdWxlcj1yLCghby5pc051bWVyaWModCl8fDA+dCkmJih0aGlzLnBlcmlvZD0wKSxyJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiByLnNjaGVkdWxlfHwodGhpcy5zY2hlZHVsZXI9YS5hc3luYyl9cmV0dXJuIGkodCxlKSx0LmNyZWF0ZT1mdW5jdGlvbihlLHIpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1yJiYocj1hLmFzeW5jKSxuZXcgdChlLHIpfSx0LmRpc3BhdGNoPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXgscj1lLnN1YnNjcmliZXIscz1lLnBlcmlvZDtyLm5leHQodCksci5pc1Vuc3Vic2NyaWJlZHx8KGUuaW5kZXgrPTEsdGhpcy5zY2hlZHVsZShlLHMpKX0sdC5wcm90b3R5cGUuX3N1YnNjcmliZT1mdW5jdGlvbihlKXt2YXIgcj0wLHM9dGhpcy5wZXJpb2QsaT10aGlzLnNjaGVkdWxlcjtlLmFkZChpLnNjaGVkdWxlKHQuZGlzcGF0Y2gscyx7aW5kZXg6cixzdWJzY3JpYmVyOmUscGVyaW9kOnN9KSl9LHR9KG4uT2JzZXJ2YWJsZSk7cmV0dXJuIGUuSW50ZXJ2YWxPYnNlcnZhYmxlPXUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2RvbS93ZWJTb2NrZXRcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9kb20vd2ViU29ja2V0XCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2RvbS93ZWJTb2NrZXRcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS53ZWJTb2NrZXQ9by53ZWJTb2NrZXQsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL29ic2VydmFibGUvU3Vic2NyaWJlT25PYnNlcnZhYmxlXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL3NjaGVkdWxlci9hc2FwXCIsXCJyeGpzL3V0aWwvaXNOdW1lcmljXCJdLCEwLGZ1bmN0aW9uKHJlcXVpcmUsZSx0KXt2YXIgcj1TeXN0ZW0uZ2xvYmFsLHM9ci5kZWZpbmU7ci5kZWZpbmU9dm9pZCAwO3ZhciBpPXRoaXMmJnRoaXMuX19leHRlbmRzfHxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9Zm9yKHZhciBzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKGVbc109dFtzXSk7ZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSxvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIiksbj1yZXF1aXJlKFwicnhqcy9zY2hlZHVsZXIvYXNhcFwiKSxhPXJlcXVpcmUoXCJyeGpzL3V0aWwvaXNOdW1lcmljXCIpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIscyl7dm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09cyYmKHM9bi5hc2FwKSxlLmNhbGwodGhpcyksdGhpcy5zb3VyY2U9dCx0aGlzLmRlbGF5VGltZT1yLHRoaXMuc2NoZWR1bGVyPXMsKCFhLmlzTnVtZXJpYyhyKXx8MD5yKSYmKHRoaXMuZGVsYXlUaW1lPTApLHMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHMuc2NoZWR1bGV8fCh0aGlzLnNjaGVkdWxlcj1uLmFzYXApfXJldHVybiBpKHQsZSksdC5jcmVhdGU9ZnVuY3Rpb24oZSxyLHMpe3JldHVybiB2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1zJiYocz1uLmFzYXApLG5ldyB0KGUscixzKX0sdC5kaXNwYXRjaD1mdW5jdGlvbihlKXt2YXIgdD1lLnNvdXJjZSxyPWUuc3Vic2NyaWJlcjtyZXR1cm4gdC5zdWJzY3JpYmUocil9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcy5kZWxheVRpbWUscz10aGlzLnNvdXJjZSxpPXRoaXMuc2NoZWR1bGVyO3JldHVybiBpLnNjaGVkdWxlKHQuZGlzcGF0Y2gscix7c291cmNlOnMsc3Vic2NyaWJlcjplfSl9LHR9KG8uT2JzZXJ2YWJsZSk7cmV0dXJuIGUuU3Vic2NyaWJlT25PYnNlcnZhYmxlPXUsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL09ic2VydmFibGVcIixbXCJyeGpzL3V0aWwvcm9vdFwiLFwicnhqcy91dGlsL3RvU3Vic2NyaWJlclwiLFwic3ltYm9sLW9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvdXRpbC9yb290XCIpLG89cmVxdWlyZShcInJ4anMvdXRpbC90b1N1YnNjcmliZXJcIiksbj1yZXF1aXJlKFwic3ltYm9sLW9ic2VydmFibGVcIiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5faXNTY2FsYXI9ITEsZSYmKHRoaXMuX3N1YnNjcmliZT1lKX1yZXR1cm4gZS5wcm90b3R5cGUubGlmdD1mdW5jdGlvbih0KXt2YXIgcj1uZXcgZTtyZXR1cm4gci5zb3VyY2U9dGhpcyxyLm9wZXJhdG9yPXQscn0sZS5wcm90b3R5cGUuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgcz10aGlzLm9wZXJhdG9yLGk9by50b1N1YnNjcmliZXIoZSx0LHIpO2lmKHM/cy5jYWxsKGksdGhpcyk6aS5hZGQodGhpcy5fc3Vic2NyaWJlKGkpKSxpLnN5bmNFcnJvclRocm93YWJsZSYmKGkuc3luY0Vycm9yVGhyb3dhYmxlPSExLGkuc3luY0Vycm9yVGhyb3duKSl0aHJvdyBpLnN5bmNFcnJvclZhbHVlO3JldHVybiBpfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih0fHwoaS5yb290LlJ4JiZpLnJvb3QuUnguY29uZmlnJiZpLnJvb3QuUnguY29uZmlnLlByb21pc2U/dD1pLnJvb3QuUnguY29uZmlnLlByb21pc2U6aS5yb290LlByb21pc2UmJih0PWkucm9vdC5Qcm9taXNlKSksIXQpdGhyb3cgbmV3IEVycm9yKFwibm8gUHJvbWlzZSBpbXBsIGZvdW5kXCIpO3JldHVybiBuZXcgdChmdW5jdGlvbih0LHMpe3ZhciBpPXIuc3Vic2NyaWJlKGZ1bmN0aW9uKHQpe2lmKGkpdHJ5e2UodCl9Y2F0Y2gocil7cyhyKSxpLnVuc3Vic2NyaWJlKCl9ZWxzZSBlKHQpfSxzLHQpfSl9LGUucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShlKX0sZS5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sZS5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBlKHQpfSxlfSgpO3JldHVybiBlLk9ic2VydmFibGU9YSxyLmRlZmluZT1zLHQuZXhwb3J0c30pLFN5c3RlbS5yZWdpc3RlcihcInJ4anMvb2JzZXJ2YWJsZS9pbnRlcnZhbFwiLFtcInJ4anMvb2JzZXJ2YWJsZS9JbnRlcnZhbE9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9JbnRlcnZhbE9ic2VydmFibGVcIik7cmV0dXJuIGUuaW50ZXJ2YWw9aS5JbnRlcnZhbE9ic2VydmFibGUuY3JlYXRlLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9vcGVyYXRvci9zdWJzY3JpYmVPblwiLFtcInJ4anMvb2JzZXJ2YWJsZS9TdWJzY3JpYmVPbk9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe2Z1bmN0aW9uIHIoZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MCksbmV3IG8uU3Vic2NyaWJlT25PYnNlcnZhYmxlKHRoaXMsdCxlKX12YXIgcz1TeXN0ZW0uZ2xvYmFsLGk9cy5kZWZpbmU7cy5kZWZpbmU9dm9pZCAwO3ZhciBvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvU3Vic2NyaWJlT25PYnNlcnZhYmxlXCIpO3JldHVybiBlLnN1YnNjcmliZU9uPXIscy5kZWZpbmU9aSx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL1N1YmplY3RcIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvU3Vic2NyaWJlclwiLFwicnhqcy9TdWJzY3JpcHRpb25cIixcInJ4anMvdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvclwiLFwicnhqcy9TdWJqZWN0U3Vic2NyaXB0aW9uXCIsXCJyeGpzL3N5bWJvbC9yeFN1YnNjcmliZXJcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe1xudmFyIHI9U3lzdGVtLmdsb2JhbCxzPXIuZGVmaW5lO3IuZGVmaW5lPXZvaWQgMDt2YXIgaT10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWZvcih2YXIgcyBpbiB0KXQuaGFzT3duUHJvcGVydHkocykmJihlW3NdPXRbc10pO2UucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0sbz1yZXF1aXJlKFwicnhqcy9PYnNlcnZhYmxlXCIpLG49cmVxdWlyZShcInJ4anMvU3Vic2NyaWJlclwiKSxhPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmlwdGlvblwiKSx1PXJlcXVpcmUoXCJyeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIiksYz1yZXF1aXJlKFwicnhqcy9TdWJqZWN0U3Vic2NyaXB0aW9uXCIpLGw9cmVxdWlyZShcInJ4anMvc3ltYm9sL3J4U3Vic2NyaWJlclwiKSxiPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7ZS5jYWxsKHRoaXMsdCksdGhpcy5kZXN0aW5hdGlvbj10fXJldHVybiBpKHQsZSksdH0obi5TdWJzY3JpYmVyKTtlLlN1YmplY3RTdWJzY3JpYmVyPWI7dmFyIHA9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2UuY2FsbCh0aGlzKSx0aGlzLm9ic2VydmVycz1bXSx0aGlzLmlzVW5zdWJzY3JpYmVkPSExLHRoaXMuaXNTdG9wcGVkPSExLHRoaXMuaGFzRXJyb3I9ITEsdGhpcy50aHJvd25FcnJvcj1udWxsfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGVbbC4kJHJ4U3Vic2NyaWJlcl09ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGIodGhpcyl9LHQucHJvdG90eXBlLmxpZnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGgodGhpcyx0aGlzKTtyZXR1cm4gdC5vcGVyYXRvcj1lLHR9LHQucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5pc1Vuc3Vic2NyaWJlZCl0aHJvdyBuZXcgdS5PYmplY3RVbnN1YnNjcmliZWRFcnJvcjtpZighdGhpcy5pc1N0b3BwZWQpZm9yKHZhciB0PXRoaXMub2JzZXJ2ZXJzLHI9dC5sZW5ndGgscz10LnNsaWNlKCksaT0wO3I+aTtpKyspc1tpXS5uZXh0KGUpfSx0LnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihlKXtpZih0aGlzLmlzVW5zdWJzY3JpYmVkKXRocm93IG5ldyB1Lk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO3RoaXMuaGFzRXJyb3I9ITAsdGhpcy50aHJvd25FcnJvcj1lLHRoaXMuaXNTdG9wcGVkPSEwO2Zvcih2YXIgdD10aGlzLm9ic2VydmVycyxyPXQubGVuZ3RoLHM9dC5zbGljZSgpLGk9MDtyPmk7aSsrKXNbaV0uZXJyb3IoZSk7dGhpcy5vYnNlcnZlcnMubGVuZ3RoPTB9LHQucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5pc1Vuc3Vic2NyaWJlZCl0aHJvdyBuZXcgdS5PYmplY3RVbnN1YnNjcmliZWRFcnJvcjt0aGlzLmlzU3RvcHBlZD0hMDtmb3IodmFyIGU9dGhpcy5vYnNlcnZlcnMsdD1lLmxlbmd0aCxyPWUuc2xpY2UoKSxzPTA7dD5zO3MrKylyW3NdLmNvbXBsZXRlKCk7dGhpcy5vYnNlcnZlcnMubGVuZ3RoPTB9LHQucHJvdG90eXBlLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKCl7dGhpcy5pc1N0b3BwZWQ9ITAsdGhpcy5pc1Vuc3Vic2NyaWJlZD0hMCx0aGlzLm9ic2VydmVycz1udWxsfSx0LnByb3RvdHlwZS5fc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuaXNVbnN1YnNjcmliZWQpdGhyb3cgbmV3IHUuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3I7cmV0dXJuIHRoaXMuaGFzRXJyb3I/KGUuZXJyb3IodGhpcy50aHJvd25FcnJvciksYS5TdWJzY3JpcHRpb24uRU1QVFkpOnRoaXMuaXNTdG9wcGVkPyhlLmNvbXBsZXRlKCksYS5TdWJzY3JpcHRpb24uRU1QVFkpOih0aGlzLm9ic2VydmVycy5wdXNoKGUpLG5ldyBjLlN1YmplY3RTdWJzY3JpcHRpb24odGhpcyxlKSl9LHQucHJvdG90eXBlLmFzT2JzZXJ2YWJsZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBvLk9ic2VydmFibGU7cmV0dXJuIGUuc291cmNlPXRoaXMsZX0sdC5jcmVhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGgoZSx0KX0sdH0oby5PYnNlcnZhYmxlKTtlLlN1YmplY3Q9cDt2YXIgaD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7ZS5jYWxsKHRoaXMpLHRoaXMuZGVzdGluYXRpb249dCx0aGlzLnNvdXJjZT1yfXJldHVybiBpKHQsZSksdC5wcm90b3R5cGUubmV4dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO3QmJnQubmV4dCYmdC5uZXh0KGUpfSx0LnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmRlc3RpbmF0aW9uO3QmJnQuZXJyb3ImJnRoaXMuZGVzdGluYXRpb24uZXJyb3IoZSl9LHQucHJvdG90eXBlLmNvbXBsZXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kZXN0aW5hdGlvbjtlJiZlLmNvbXBsZXRlJiZ0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCl9LHQucHJvdG90eXBlLl9zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zb3VyY2U7cmV0dXJuIHQ/dGhpcy5zb3VyY2Uuc3Vic2NyaWJlKGUpOmEuU3Vic2NyaXB0aW9uLkVNUFRZfSx0fShwKTtyZXR1cm4gZS5Bbm9ueW1vdXNTdWJqZWN0PWgsci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsXCIsW1wicnhqcy9PYnNlcnZhYmxlXCIsXCJyeGpzL29ic2VydmFibGUvaW50ZXJ2YWxcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29ic2VydmFibGUvaW50ZXJ2YWxcIik7cmV0dXJuIGkuT2JzZXJ2YWJsZS5pbnRlcnZhbD1vLmludGVydmFsLHIuZGVmaW5lPXMsdC5leHBvcnRzfSksU3lzdGVtLnJlZ2lzdGVyKFwicnhqcy9hZGQvb3BlcmF0b3Ivc3Vic2NyaWJlT25cIixbXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvb3BlcmF0b3Ivc3Vic2NyaWJlT25cIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvT2JzZXJ2YWJsZVwiKSxvPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3N1YnNjcmliZU9uXCIpO3JldHVybiBpLk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZU9uPW8uc3Vic2NyaWJlT24sci5kZWZpbmU9cyx0LmV4cG9ydHN9KSxTeXN0ZW0ucmVnaXN0ZXIoXCJyeGpzL1J4XCIsW1wicnhqcy9TdWJqZWN0XCIsXCJyeGpzL09ic2VydmFibGVcIixcInJ4anMvYWRkL29ic2VydmFibGUvYmluZENhbGxiYWNrXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2JpbmROb2RlQ2FsbGJhY2tcIixcInJ4anMvYWRkL29ic2VydmFibGUvY29tYmluZUxhdGVzdFwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9jb25jYXRcIixcInJ4anMvYWRkL29ic2VydmFibGUvZGVmZXJcIixcInJ4anMvYWRkL29ic2VydmFibGUvZW1wdHlcIixcInJ4anMvYWRkL29ic2VydmFibGUvZm9ya0pvaW5cIixcInJ4anMvYWRkL29ic2VydmFibGUvZnJvbVwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRcIixcInJ4anMvYWRkL29ic2VydmFibGUvZnJvbUV2ZW50UGF0dGVyblwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tUHJvbWlzZVwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9nZW5lcmF0ZVwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9pZlwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9pbnRlcnZhbFwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9tZXJnZVwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9yYWNlXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL25ldmVyXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL29mXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL29uRXJyb3JSZXN1bWVOZXh0XCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3JhbmdlXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3VzaW5nXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3Rocm93XCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3RpbWVyXCIsXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3ppcFwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9kb20vYWpheFwiLFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9kb20vd2ViU29ja2V0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJcIixcInJ4anMvYWRkL29wZXJhdG9yL2J1ZmZlckNvdW50XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUaW1lXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9idWZmZXJUb2dnbGVcIixcInJ4anMvYWRkL29wZXJhdG9yL2J1ZmZlcldoZW5cIixcInJ4anMvYWRkL29wZXJhdG9yL2NhY2hlXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9jYXRjaFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUFsbFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvY29tYmluZUxhdGVzdFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9jb25jYXRBbGxcIixcInJ4anMvYWRkL29wZXJhdG9yL2NvbmNhdE1hcFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0TWFwVG9cIixcInJ4anMvYWRkL29wZXJhdG9yL2NvdW50XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9kZW1hdGVyaWFsaXplXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9kZWJvdW5jZVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvZGVib3VuY2VUaW1lXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9kZWZhdWx0SWZFbXB0eVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvZGVsYXlcIixcInJ4anMvYWRkL29wZXJhdG9yL2RlbGF5V2hlblwiLFwicnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RcIixcInJ4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0S2V5XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9kaXN0aW5jdFVudGlsQ2hhbmdlZFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RVbnRpbEtleUNoYW5nZWRcIixcInJ4anMvYWRkL29wZXJhdG9yL2RvXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9leGhhdXN0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9leGhhdXN0TWFwXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9leHBhbmRcIixcInJ4anMvYWRkL29wZXJhdG9yL2VsZW1lbnRBdFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvZmlsdGVyXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9maW5hbGx5XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9maW5kXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9maW5kSW5kZXhcIixcInJ4anMvYWRkL29wZXJhdG9yL2ZpcnN0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9ncm91cEJ5XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9pZ25vcmVFbGVtZW50c1wiLFwicnhqcy9hZGQvb3BlcmF0b3IvaXNFbXB0eVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvYXVkaXRcIixcInJ4anMvYWRkL29wZXJhdG9yL2F1ZGl0VGltZVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvbGFzdFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvbGV0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9ldmVyeVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvbWFwXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9tYXBUb1wiLFwicnhqcy9hZGQvb3BlcmF0b3IvbWF0ZXJpYWxpemVcIixcInJ4anMvYWRkL29wZXJhdG9yL21heFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VcIixcInJ4anMvYWRkL29wZXJhdG9yL21lcmdlQWxsXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VNYXBUb1wiLFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VTY2FuXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9taW5cIixcInJ4anMvYWRkL29wZXJhdG9yL211bHRpY2FzdFwiLFwicnhqcy9hZGQvb3BlcmF0b3Ivb2JzZXJ2ZU9uXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9vbkVycm9yUmVzdW1lTmV4dFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcGFpcndpc2VcIixcInJ4anMvYWRkL29wZXJhdG9yL3BhcnRpdGlvblwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcGx1Y2tcIixcInJ4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hcIixcInJ4anMvYWRkL29wZXJhdG9yL3B1Ymxpc2hCZWhhdmlvclwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFJlcGxheVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaExhc3RcIixcInJ4anMvYWRkL29wZXJhdG9yL3JhY2VcIixcInJ4anMvYWRkL29wZXJhdG9yL3JlZHVjZVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcmVwZWF0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci9yZXRyeVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvcmV0cnlXaGVuXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9zYW1wbGVcIixcInJ4anMvYWRkL29wZXJhdG9yL3NhbXBsZVRpbWVcIixcInJ4anMvYWRkL29wZXJhdG9yL3NjYW5cIixcInJ4anMvYWRkL29wZXJhdG9yL3NoYXJlXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9zaW5nbGVcIixcInJ4anMvYWRkL29wZXJhdG9yL3NraXBcIixcInJ4anMvYWRkL29wZXJhdG9yL3NraXBVbnRpbFwiLFwicnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFdoaWxlXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9zdGFydFdpdGhcIixcInJ4anMvYWRkL29wZXJhdG9yL3N1YnNjcmliZU9uXCIsXCJyeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hcIixcInJ4anMvYWRkL29wZXJhdG9yL3N3aXRjaE1hcFwiLFwicnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwVG9cIixcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VcIixcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VMYXN0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci90YWtlVW50aWxcIixcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VXaGlsZVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvdGhyb3R0bGVcIixcInJ4anMvYWRkL29wZXJhdG9yL3Rocm90dGxlVGltZVwiLFwicnhqcy9hZGQvb3BlcmF0b3IvdGltZUludGVydmFsXCIsXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0XCIsXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lb3V0V2l0aFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvdGltZXN0YW1wXCIsXCJyeGpzL2FkZC9vcGVyYXRvci90b0FycmF5XCIsXCJyeGpzL2FkZC9vcGVyYXRvci90b1Byb21pc2VcIixcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1wiLFwicnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93Q291bnRcIixcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RpbWVcIixcInJ4anMvYWRkL29wZXJhdG9yL3dpbmRvd1RvZ2dsZVwiLFwicnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93V2hlblwiLFwicnhqcy9hZGQvb3BlcmF0b3Ivd2l0aExhdGVzdEZyb21cIixcInJ4anMvYWRkL29wZXJhdG9yL3ppcFwiLFwicnhqcy9hZGQvb3BlcmF0b3IvemlwQWxsXCIsXCJyeGpzL09wZXJhdG9yXCIsXCJyeGpzL1N1YnNjcmlwdGlvblwiLFwicnhqcy9TdWJzY3JpYmVyXCIsXCJyeGpzL0FzeW5jU3ViamVjdFwiLFwicnhqcy9SZXBsYXlTdWJqZWN0XCIsXCJyeGpzL0JlaGF2aW9yU3ViamVjdFwiLFwicnhqcy9vYnNlcnZhYmxlL011bHRpY2FzdE9ic2VydmFibGVcIixcInJ4anMvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIixcInJ4anMvTm90aWZpY2F0aW9uXCIsXCJyeGpzL3V0aWwvRW1wdHlFcnJvclwiLFwicnhqcy91dGlsL0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yXCIsXCJyeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIixcInJ4anMvdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yXCIsXCJyeGpzL29wZXJhdG9yL3RpbWVJbnRlcnZhbFwiLFwicnhqcy9vcGVyYXRvci90aW1lc3RhbXBcIixcInJ4anMvdGVzdGluZy9UZXN0U2NoZWR1bGVyXCIsXCJyeGpzL3NjaGVkdWxlci9WaXJ0dWFsVGltZVNjaGVkdWxlclwiLFwicnhqcy9vYnNlcnZhYmxlL2RvbS9BamF4T2JzZXJ2YWJsZVwiLFwicnhqcy9zY2hlZHVsZXIvYXNhcFwiLFwicnhqcy9zY2hlZHVsZXIvYXN5bmNcIixcInJ4anMvc2NoZWR1bGVyL3F1ZXVlXCIsXCJyeGpzL3NjaGVkdWxlci9hbmltYXRpb25GcmFtZVwiLFwicnhqcy9zeW1ib2wvcnhTdWJzY3JpYmVyXCIsXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiLFwic3ltYm9sLW9ic2VydmFibGVcIl0sITAsZnVuY3Rpb24ocmVxdWlyZSxlLHQpe3ZhciByPVN5c3RlbS5nbG9iYWwscz1yLmRlZmluZTtyLmRlZmluZT12b2lkIDA7dmFyIGk9cmVxdWlyZShcInJ4anMvU3ViamVjdFwiKTtlLlN1YmplY3Q9aS5TdWJqZWN0O3ZhciBvPXJlcXVpcmUoXCJyeGpzL09ic2VydmFibGVcIik7ZS5PYnNlcnZhYmxlPW8uT2JzZXJ2YWJsZSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9iaW5kQ2FsbGJhY2tcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvYmluZE5vZGVDYWxsYmFja1wiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9jb21iaW5lTGF0ZXN0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2NvbmNhdFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9kZWZlclwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9lbXB0eVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mb3JrSm9pblwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb2JzZXJ2YWJsZS9mcm9tRXZlbnRQYXR0ZXJuXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21Qcm9taXNlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2dlbmVyYXRlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2lmXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2ludGVydmFsXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL21lcmdlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL3JhY2VcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvbmV2ZXJcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvb2ZcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvb25FcnJvclJlc3VtZU5leHRcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvcmFuZ2VcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvdXNpbmdcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvdGhyb3dcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvdGltZXJcIikscmVxdWlyZShcInJ4anMvYWRkL29ic2VydmFibGUvemlwXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2RvbS9hamF4XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vYnNlcnZhYmxlL2RvbS93ZWJTb2NrZXRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2J1ZmZlclwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyQ291bnRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRpbWVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2J1ZmZlclRvZ2dsZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvYnVmZmVyV2hlblwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvY2FjaGVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2NhdGNoXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lQWxsXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9jb21iaW5lTGF0ZXN0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9jb25jYXRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2NvbmNhdEFsbFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvY29uY2F0TWFwXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9jb25jYXRNYXBUb1wiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvY291bnRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2RlbWF0ZXJpYWxpemVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2RlYm91bmNlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9kZWJvdW5jZVRpbWVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2RlZmF1bHRJZkVtcHR5XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9kZWxheVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvZGVsYXlXaGVuXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9kaXN0aW5jdFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvZGlzdGluY3RLZXlcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2Rpc3RpbmN0VW50aWxDaGFuZ2VkXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9kaXN0aW5jdFVudGlsS2V5Q2hhbmdlZFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvZG9cIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2V4aGF1c3RcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2V4aGF1c3RNYXBcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2V4cGFuZFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvZWxlbWVudEF0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9maWx0ZXJcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmFsbHlcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2ZpbmRJbmRleFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvZmlyc3RcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2dyb3VwQnlcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2lnbm9yZUVsZW1lbnRzXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9pc0VtcHR5XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9hdWRpdFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvYXVkaXRUaW1lXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9sYXN0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9sZXRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL2V2ZXJ5XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9tYXBcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL21hcFRvXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9tYXRlcmlhbGl6ZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvbWF4XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvbWVyZ2VBbGxcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL21lcmdlTWFwXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZU1hcFRvXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9tZXJnZVNjYW5cIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL21pblwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvbXVsdGljYXN0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9vYnNlcnZlT25cIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL29uRXJyb3JSZXN1bWVOZXh0XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9wYWlyd2lzZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvcGFydGl0aW9uXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9wbHVja1wiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvcHVibGlzaEJlaGF2aW9yXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoUmVwbGF5XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9wdWJsaXNoTGFzdFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvcmFjZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvcmVkdWNlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9yZXBlYXRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3JldHJ5XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9yZXRyeVdoZW5cIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3NhbXBsZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2FtcGxlVGltZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2NhblwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2hhcmVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3NpbmdsZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc2tpcFVudGlsXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9za2lwV2hpbGVcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3N0YXJ0V2l0aFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc3Vic2NyaWJlT25cIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3N3aXRjaFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivc3dpdGNoTWFwXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci9zd2l0Y2hNYXBUb1wiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvdGFrZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvdGFrZUxhc3RcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3Rha2VVbnRpbFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvdGFrZVdoaWxlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci90aHJvdHRsZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvdGhyb3R0bGVUaW1lXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lSW50ZXJ2YWxcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3RpbWVvdXRcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3RpbWVvdXRXaXRoXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci90aW1lc3RhbXBcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3RvQXJyYXlcIikscmVxdWlyZShcInJ4anMvYWRkL29wZXJhdG9yL3RvUHJvbWlzZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93XCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci93aW5kb3dDb3VudFwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VGltZVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3Ivd2luZG93VG9nZ2xlXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci93aW5kb3dXaGVuXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci93aXRoTGF0ZXN0RnJvbVwiKSxyZXF1aXJlKFwicnhqcy9hZGQvb3BlcmF0b3IvemlwXCIpLHJlcXVpcmUoXCJyeGpzL2FkZC9vcGVyYXRvci96aXBBbGxcIik7dmFyIG49cmVxdWlyZShcInJ4anMvT3BlcmF0b3JcIik7ZS5PcGVyYXRvcj1uLk9wZXJhdG9yO3ZhciBhPXJlcXVpcmUoXCJyeGpzL1N1YnNjcmlwdGlvblwiKTtlLlN1YnNjcmlwdGlvbj1hLlN1YnNjcmlwdGlvbjt2YXIgdT1yZXF1aXJlKFwicnhqcy9TdWJzY3JpYmVyXCIpO2UuU3Vic2NyaWJlcj11LlN1YnNjcmliZXI7dmFyIGM9cmVxdWlyZShcInJ4anMvQXN5bmNTdWJqZWN0XCIpO2UuQXN5bmNTdWJqZWN0PWMuQXN5bmNTdWJqZWN0O3ZhciBsPXJlcXVpcmUoXCJyeGpzL1JlcGxheVN1YmplY3RcIik7ZS5SZXBsYXlTdWJqZWN0PWwuUmVwbGF5U3ViamVjdDt2YXIgYj1yZXF1aXJlKFwicnhqcy9CZWhhdmlvclN1YmplY3RcIik7ZS5CZWhhdmlvclN1YmplY3Q9Yi5CZWhhdmlvclN1YmplY3Q7dmFyIHA9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9NdWx0aWNhc3RPYnNlcnZhYmxlXCIpO2UuTXVsdGljYXN0T2JzZXJ2YWJsZT1wLk11bHRpY2FzdE9ic2VydmFibGU7dmFyIGg9cmVxdWlyZShcInJ4anMvb2JzZXJ2YWJsZS9Db25uZWN0YWJsZU9ic2VydmFibGVcIik7ZS5Db25uZWN0YWJsZU9ic2VydmFibGU9aC5Db25uZWN0YWJsZU9ic2VydmFibGU7dmFyIGQ9cmVxdWlyZShcInJ4anMvTm90aWZpY2F0aW9uXCIpO2UuTm90aWZpY2F0aW9uPWQuTm90aWZpY2F0aW9uO3ZhciBmPXJlcXVpcmUoXCJyeGpzL3V0aWwvRW1wdHlFcnJvclwiKTtlLkVtcHR5RXJyb3I9Zi5FbXB0eUVycm9yO3ZhciB2PXJlcXVpcmUoXCJyeGpzL3V0aWwvQXJndW1lbnRPdXRPZlJhbmdlRXJyb3JcIik7ZS5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvcj12LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yO3ZhciB4PXJlcXVpcmUoXCJyeGpzL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JcIik7ZS5PYmplY3RVbnN1YnNjcmliZWRFcnJvcj14Lk9iamVjdFVuc3Vic2NyaWJlZEVycm9yO3ZhciB5PXJlcXVpcmUoXCJyeGpzL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvclwiKTtlLlVuc3Vic2NyaXB0aW9uRXJyb3I9eS5VbnN1YnNjcmlwdGlvbkVycm9yO3ZhciBqPXJlcXVpcmUoXCJyeGpzL29wZXJhdG9yL3RpbWVJbnRlcnZhbFwiKTtlLlRpbWVJbnRlcnZhbD1qLlRpbWVJbnRlcnZhbDt2YXIgbT1yZXF1aXJlKFwicnhqcy9vcGVyYXRvci90aW1lc3RhbXBcIik7ZS5UaW1lc3RhbXA9bS5UaW1lc3RhbXA7dmFyIFM9cmVxdWlyZShcInJ4anMvdGVzdGluZy9UZXN0U2NoZWR1bGVyXCIpO2UuVGVzdFNjaGVkdWxlcj1TLlRlc3RTY2hlZHVsZXI7dmFyIE89cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL1ZpcnR1YWxUaW1lU2NoZWR1bGVyXCIpO2UuVmlydHVhbFRpbWVTY2hlZHVsZXI9Ty5WaXJ0dWFsVGltZVNjaGVkdWxlcjt2YXIgZz1yZXF1aXJlKFwicnhqcy9vYnNlcnZhYmxlL2RvbS9BamF4T2JzZXJ2YWJsZVwiKTtlLkFqYXhSZXNwb25zZT1nLkFqYXhSZXNwb25zZSxlLkFqYXhFcnJvcj1nLkFqYXhFcnJvcixlLkFqYXhUaW1lb3V0RXJyb3I9Zy5BamF4VGltZW91dEVycm9yO3ZhciB3PXJlcXVpcmUoXCJyeGpzL3NjaGVkdWxlci9hc2FwXCIpLF89cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FzeW5jXCIpLFQ9cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL3F1ZXVlXCIpLEU9cmVxdWlyZShcInJ4anMvc2NoZWR1bGVyL2FuaW1hdGlvbkZyYW1lXCIpLEE9cmVxdWlyZShcInJ4anMvc3ltYm9sL3J4U3Vic2NyaWJlclwiKSxDPXJlcXVpcmUoXCJyeGpzL3N5bWJvbC9pdGVyYXRvclwiKSxJPXJlcXVpcmUoXCJzeW1ib2wtb2JzZXJ2YWJsZVwiKSxQPXthc2FwOncuYXNhcCxhc3luYzpfLmFzeW5jLHF1ZXVlOlQucXVldWUsYW5pbWF0aW9uRnJhbWU6RS5hbmltYXRpb25GcmFtZX07ZS5TY2hlZHVsZXI9UDt2YXIgTj17cnhTdWJzY3JpYmVyOkEuJCRyeFN1YnNjcmliZXIsb2JzZXJ2YWJsZTpJLGl0ZXJhdG9yOkMuJCRpdGVyYXRvcn07cmV0dXJuIGUuU3ltYm9sPU4sci5kZWZpbmU9cyx0LmV4cG9ydHN9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJ4Lm1pbi5qcy5tYXBcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
